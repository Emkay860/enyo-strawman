{"version":3,"sources":["..\\..\\lib\\moonstone\\src\\options.js","..\\..\\lib\\moonstone\\src\\resolution.js","..\\..\\lib\\moonstone\\src\\i18n.js","..\\..\\lib\\moonstone\\src\\fonts.js","..\\..\\lib\\moonstone\\src\\ExpandableListItem\\ExpandableListItemDrawer.js","..\\..\\lib\\moonstone\\index.js","..\\..\\lib\\moonstone\\src\\HighlightText\\HighlightText.js","..\\..\\lib\\moonstone\\src\\Icon\\Icon.js","..\\..\\lib\\moonstone\\src\\Scrim\\Scrim.js","..\\..\\lib\\moonstone\\src\\HistorySupport\\HistorySupport.js","..\\..\\lib\\moonstone\\src\\ScrollThumb\\ScrollThumb.js","..\\..\\lib\\moonstone\\src\\RichText\\RichText.js","..\\..\\lib\\moonstone\\src\\TextArea\\TextArea.js","..\\..\\lib\\moonstone\\src\\Tooltip\\Tooltip.js","..\\..\\lib\\moonstone\\src\\StyleAnimator\\StyleAnimator.js","..\\..\\lib\\moonstone\\src\\MoonAnimator\\MoonAnimator.js","..\\..\\lib\\moonstone\\src\\MoonArranger\\MoonArranger.js","..\\..\\lib\\moonstone\\src\\BodyText\\BodyText.js","..\\..\\lib\\moonstone\\src\\Clock\\Clock.js","..\\..\\lib\\moonstone\\src\\VideoInfoBackground\\VideoInfoBackground.js","..\\..\\lib\\moonstone\\src\\ProgressBar\\ProgressBar.js","..\\..\\lib\\moonstone\\src\\PlaylistSupport.js","..\\..\\lib\\moonstone\\src\\CaptionDecorator\\CaptionDecorator.js","..\\..\\lib\\moonstone\\src\\ClampedText\\ClampedText.js","..\\..\\lib\\moonstone\\src\\ItemOverlay\\ItemOverlay.js","..\\..\\lib\\moonstone\\src\\ObjectActionDecorator\\ObjectActionDecorator.js","..\\..\\lib\\moonstone\\src\\Input\\Input.js","..\\..\\lib\\moonstone\\src\\Scrollable\\Scrollable.js","..\\..\\lib\\moonstone\\src\\AnimatedButton\\AnimatedButtonSvg.js","..\\..\\lib\\moonstone\\src\\Table\\Table.js","..\\..\\lib\\moonstone\\src\\Marquee\\Marquee.js","..\\..\\lib\\moonstone\\src\\IconButton\\IconButton.js","..\\..\\lib\\moonstone\\src\\Checkbox\\Checkbox.js","..\\..\\lib\\moonstone\\src\\VideoFeedback\\VideoFeedback.js","..\\..\\lib\\moonstone\\src\\Drawers\\Drawer.js","..\\..\\lib\\moonstone\\src\\ExpandableText\\ExpandableText.js","..\\..\\lib\\moonstone\\src\\InputDecorator\\InputDecorator.js","..\\..\\lib\\moonstone\\src\\Button\\Button.js","..\\..\\lib\\moonstone\\src\\Divider\\Divider.js","..\\..\\lib\\moonstone\\src\\Item\\Item.js","..\\..\\lib\\moonstone\\src\\ChannelInfo\\ChannelInfo.js","..\\..\\lib\\moonstone\\src\\VideoInfoHeader\\VideoInfoHeader.js","..\\..\\lib\\moonstone\\src\\Spinner\\Spinner.js","..\\..\\lib\\moonstone\\src\\Overlay\\Overlay.js","..\\..\\lib\\moonstone\\src\\ContextualPopup\\ContextualPopup.js","..\\..\\lib\\moonstone\\src\\PagingControl\\PagingControl.js","..\\..\\lib\\moonstone\\src\\VideoFullscreenToggleButton\\VideoFullscreenToggleButton.js","..\\..\\lib\\moonstone\\src\\Slider\\Slider.js","..\\..\\lib\\moonstone\\src\\SimplePicker\\SimplePicker.js","..\\..\\lib\\moonstone\\src\\NewPagingControl\\NewPagingControl.js","..\\..\\lib\\moonstone\\src\\ToggleSwitch\\ToggleSwitch.js","..\\..\\lib\\moonstone\\src\\Header\\Header.js","..\\..\\lib\\moonstone\\src\\ContextualPopupDecorator\\ContextualPopupDecorator.js","..\\..\\lib\\moonstone\\src\\TooltipDecorator\\TooltipDecorator.js","..\\..\\lib\\moonstone\\src\\ToggleButton\\ToggleButton.js","..\\..\\lib\\moonstone\\src\\AnimatedButton\\AnimatedButton.js","..\\..\\lib\\moonstone\\src\\Popup\\Popup.js","..\\..\\lib\\moonstone\\src\\ProgressButton\\ProgressButton.js","..\\..\\lib\\moonstone\\src\\CheckboxItem\\CheckboxItem.js","..\\..\\lib\\moonstone\\src\\LabeledTextItem\\LabeledTextItem.js","..\\..\\lib\\moonstone\\src\\SelectableItem\\SelectableItem.js","..\\..\\lib\\moonstone\\src\\Drawers\\Drawers.js","..\\..\\lib\\moonstone\\src\\Image\\Image.js","..\\..\\lib\\moonstone\\src\\ScrollStrategy\\ScrollStrategy.js","..\\..\\lib\\moonstone\\src\\VideoTransportSlider\\VideoTransportSlider.js","..\\..\\lib\\moonstone\\src\\Calendar\\Calendar.js","..\\..\\lib\\moonstone\\src\\ScrollControls\\ScrollControls.js","..\\..\\lib\\moonstone\\src\\Panel\\Panel.js","..\\..\\lib\\moonstone\\src\\InputHeader.js","..\\..\\lib\\moonstone\\src\\LightPanels\\LightPanel.js","..\\..\\lib\\moonstone\\src\\ListActions\\ListActions.js","..\\..\\lib\\moonstone\\src\\ApplicationCloseButton\\ApplicationCloseButton.js","..\\..\\lib\\moonstone\\src\\Dialog\\Dialog.js","..\\..\\lib\\moonstone\\src\\ToggleItem\\ToggleItem.js","..\\..\\lib\\moonstone\\src\\FormCheckbox\\FormCheckbox.js","..\\..\\lib\\moonstone\\src\\ExpandableListItem\\ExpandableListItemHeader.js","..\\..\\lib\\moonstone\\src\\ImageItem\\ImageItem.js","..\\..\\lib\\moonstone\\src\\RadioItem\\RadioItem.js","..\\..\\lib\\moonstone\\src\\AudioPlayback\\AudioPlayback.js","..\\..\\lib\\moonstone\\src\\GridListImageItem\\GridListImageItem.js","..\\..\\lib\\moonstone\\src\\Scroller\\Scroller.js","..\\..\\lib\\moonstone\\src\\IntegerPicker\\IntegerPicker.js","..\\..\\lib\\moonstone\\src\\VideoPlayer\\VideoPlayer.js","..\\..\\lib\\moonstone\\src\\NewDataList\\NewDataList.js","..\\..\\lib\\moonstone\\src\\LightPanels\\LightPanels.js","..\\..\\lib\\moonstone\\src\\Panels\\Panels.js","..\\..\\lib\\moonstone\\src\\ExpandableListItem\\ExpandableListItem.js","..\\..\\lib\\moonstone\\src\\RadioItemGroup\\RadioItemGroup.js","..\\..\\lib\\moonstone\\src\\DataList\\DataList.js","..\\..\\lib\\moonstone\\src\\SimpleIntegerPicker\\SimpleIntegerPicker.js","..\\..\\lib\\moonstone\\src\\Accordion.js","..\\..\\lib\\moonstone\\src\\DateTimePickerBase\\DateTimePickerBase.js","..\\..\\lib\\moonstone\\src\\ExpandablePicker\\ExpandablePicker.js","..\\..\\lib\\moonstone\\src\\ExpandableInput\\ExpandableInput.js","..\\..\\lib\\moonstone\\src\\DataGridList\\DataGridList.js","..\\..\\lib\\moonstone\\src\\ExpandableIntegerPicker\\ExpandableIntegerPicker.js","..\\..\\lib\\moonstone\\src\\DatePicker\\DatePicker.js","..\\..\\lib\\moonstone\\src\\TimePicker\\TimePicker.js","..\\..\\lib\\moonstone\\src\\ExpandableDataPicker\\ExpandableDataPicker.js","..\\..\\lib\\moonstone\\src\\DayPicker\\DayPicker.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACthBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7yBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3vCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9aA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9jCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9fA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxlBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3hBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/yCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACv/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACz1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1vBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC56DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9hBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"generated.js","sourceRoot":"","sourcesContent":["var\r\n\tutils = require('enyo/utils'),\r\n\toptions = require('enyo/options');\r\n\r\nvar config = global.moon && global.moon.config;\r\n\r\n/**\r\n* Global *design-time* configuration options for Moonstone\r\n*\r\n* @param {Boolean} Set accelerate `false` to prefer position properties over CSS transforms.\r\n* @module moonstone/options\r\n*/\r\nmodule.exports = utils.mixin({\r\n\t/** @lends module:moonstone/options */\r\n\taccelerate: true,\r\n\trenderOnShow: {\r\n\t\texpandableListDrawer: true\r\n\t}\r\n}, options, config);\r\n","/**\r\n* Defines TV-specific resolution values. See {@link module:enyo/resolution} for more details.\r\n* @module moonstone/resolution\r\n*/\r\nvar\r\n\tri = require('enyo/resolution');\r\n\r\nri.defineScreenTypes([\r\n\t{name: 'hd',      pxPerRem: 16, width: 1280, height: 720,  aspectRatioName: 'hdtv'},\r\n\t{name: 'fhd',     pxPerRem: 24, width: 1920, height: 1080, aspectRatioName: 'hdtv', base: true},\r\n\t{name: 'uw-uxga', pxPerRem: 24, width: 2560, height: 1080, aspectRatioName: 'cinema'},\r\n\t{name: 'uhd',     pxPerRem: 48, width: 3840, height: 2160, aspectRatioName: 'hdtv'}\r\n]);\r\n\r\nmodule.exports = ri;\r\n","var\r\n\tResBundle = require('enyo-ilib/ResBundle');\r\n\r\n/**\r\n* Localized strings from [iLib]{@link ilib} translations.\r\n*\r\n* @param {String} string - String to be localized.\r\n* @returns {String} Localized string.\r\n* @name moon.$L\r\n* @public\r\n*/\r\nvar $L = function (string) {\r\n\tif (!$L.rb) {\r\n\t\treturn string;\r\n\t}\r\n\tvar str = $L.rb.getString(string);\r\n\treturn str.toString();\r\n};\r\n$L.rb = new ResBundle({\r\n\tloadParams: {\r\n\t\troot: 'moonstone/resources'\r\n\t}\r\n});\r\n\r\n/**\r\n* Exports the `$L()` i18n function from [iLib]{@link ilib}.\r\n* @module moonstone/i18n\r\n*/\r\nmodule.exports = $L;\r\n","/**\r\n* This module loads Moonstone specific fonts. It has no exports and is not inteded to be directly\r\n* included by external developers.\r\n*\r\n* @private\r\n* @module moonstone/fonts\r\n*/\r\n\r\nvar\r\n\ti18n = require('enyo/i18n');\r\n\r\nvar\r\n\tLocale = require('enyo-ilib/Locale');\r\n\r\n/**\r\n* `moon-fonts` is the locale-specific font generator, allowing any locale to have its own custom\r\n* font. Each locale-font from the configuration block (defined in this file) is generated at\r\n* run-time. If the locale you're currently in is in the locale-font list an additional\r\n* `@font-face` rule will be generated that will override the standard \"Moonstone LG Display\"\r\n* font.\r\n*\r\n* Below is example genarated-output of the Urdu (\"ur\") locale-font.\r\n*\r\n* ```css\r\n* &#64;font-face {\r\n* \tfont-family: 'Moonstone LG Display ur';\r\n* \tfont-weight: normal;\r\n* \tsrc: local('LG Display_Urdu');\r\n* \tunicode-range: U+0600-U+06FF, U+FE70-U+FEFE, U+FB50-U+FDFF;\r\n* }\r\n* &#64;font-face {\r\n* \tfont-family: 'Moonstone LG Display ur Bold';\r\n* \tfont-weight: normal;\r\n* \tsrc: local('LG Display_Urdu');\r\n* \tunicode-range: U+0600-U+06FF, U+FE70-U+FEFE, U+FB50-U+FDFF;\r\n* }\r\n* &#64;font-face {\r\n* \tfont-family: 'Moonstone LG Display ur Light';\r\n* \tfont-weight: normal;\r\n* \tsrc: local('LG Display_Urdu');\r\n* \tunicode-range: U+0600-U+06FF, U+FE70-U+FEFE, U+FB50-U+FDFF;\r\n* }\r\n* ```\r\n*\r\n* @name International Fonts\r\n* @public\r\n*/\r\n\r\nfunction funLocaleSpecificFonts () {\r\n\tvar loc = new Locale(),\r\n\t\tlanguage = loc.getLanguage(),\r\n\t\tregion = loc.getRegion(),\r\n\t\tstyleId = 'enyo-localization-font-override',\r\n\t\tstyleElem = document.getElementById(styleId),\r\n\t\tfontDefinitionCss = '',\r\n\t\t// Locale Configuration Block\r\n\t\tfonts = {\r\n\t\t\t'NonLatin': {\r\n\t\t\t\tregular: 'LG Display-Light',\r\n\t\t\t\tbold:    'LG Display-Regular'\r\n\t\t\t},\r\n\t\t\t'ja': {\r\n\t\t\t\tregular: 'LG Display_JP'\r\n\t\t\t},\r\n\t\t\t'en-JP': {\r\n\t\t\t\tregular: 'LG Display_JP'\r\n\t\t\t},\r\n\t\t\t'ur': {\r\n\t\t\t\tregular: 'LG Display_Urdu',\r\n\t\t\t\tunicodeRanges:\r\n\t\t\t\t\t'U+600-6FF,' +\r\n\t\t\t\t\t'U+FE70-FEFE,' +\r\n\t\t\t\t\t'U+FB50-FDFF'\r\n\t\t\t},\r\n\t\t\t'zh-HK': {\r\n\t\t\t\tregular: 'LG Display GP4_HK-Light',\r\n\t\t\t\tbold:    'LG Display GP4_HK-Regular',\r\n\t\t\t\tunicodeRanges:\r\n\t\t\t\t\t'U+0-FF,' +\r\n\t\t\t\t\t'U+2E80-2EFF,' +\r\n\t\t\t\t\t'U+3000-303F,' +\r\n\t\t\t\t\t'U+3200-33FF,' +\r\n\t\t\t\t\t'U+3400-4DBF,' +\r\n\t\t\t\t\t'U+4E00-9FFF,' +\r\n\t\t\t\t\t'U+E000-FAFF,' +\r\n\t\t\t\t\t'U+FF00-FFEF'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t// Duplications and alternate locale names\r\n\tfonts['zh-TW'] = fonts['zh-HK'];\r\n\r\n\t// Generate a single font-face rule\r\n\tthis.buildFont = function(inOptions) {\r\n\t\tif (!inOptions && !inOptions.name) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\tvar strOut = '@font-face { \\n' +\r\n\t\t\t'  font-family: \"' + inOptions.name + '\";\\n' +\r\n\t\t\t'  font-weight: ' + ( inOptions.weight || 'normal' ) + ';\\n';\r\n\r\n\t\tif (inOptions.localName) {\r\n\t\t\tstrOut+= '  src: local(\"' + inOptions.localName + '\");\\n';\r\n\t\t}\r\n\t\tif (inOptions.unicodeRanges) {\r\n\t\t\tstrOut+= '  unicode-range: ' + inOptions.unicodeRanges + ';\\n';\r\n\t\t}\r\n\t\tstrOut+= '} \\n';\r\n\t\treturn strOut;\r\n\t};\r\n\r\n\t// Generate a collection of font-face rules, in multiple font-variants\r\n\tthis.buildFontSet = function(strLang, bitDefault) {\r\n\t\tvar strOut = '',\r\n\t\t\tname = (bitDefault) ? '' : ' ' + strLang;\r\n\r\n\t\tif (fonts[strLang].regular) {\r\n\t\t\t// Build Regular\r\n\t\t\tstrOut+= this.buildFont({\r\n\t\t\t\tname: 'Moonstone LG Display' + name,\r\n\t\t\t\tlocalName: fonts[strLang].regular,\r\n\t\t\t\tunicodeRanges: fonts[strLang].unicodeRanges\r\n\t\t\t});\r\n\r\n\t\t\t// Build Bold\r\n\t\t\tstrOut+= this.buildFont({\r\n\t\t\t\tname: 'Moonstone LG Display' + name + ' Bold',\r\n\t\t\t\tlocalName: fonts[strLang].bold || fonts[strLang].regular,\r\n\t\t\t\tunicodeRanges: fonts[strLang].unicodeRanges\r\n\t\t\t});\r\n\r\n\t\t\t// Build Light\r\n\t\t\tstrOut+= this.buildFont({\r\n\t\t\t\tname: 'Moonstone LG Display' + name + ' Light',\r\n\t\t\t\tlocalName: fonts[strLang].light || fonts[strLang].regular,\r\n\t\t\t\tunicodeRanges: fonts[strLang].unicodeRanges\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn strOut;\r\n\t};\r\n\r\n\tif (!styleElem) {\r\n\t\tstyleElem = document.createElement('style');\r\n\t\tstyleElem.setAttribute('id', styleId);\r\n\t\tdocument.head.appendChild(styleElem);\r\n\t}\r\n\r\n\t// Build all the fonts so they could be explicitly called\r\n\tfor (var lang in fonts) {\r\n\t\tfontDefinitionCss+= this.buildFontSet(lang);\r\n\t}\r\n\r\n\t// Set up the override so \"Moonstone LG Display\" becomes the local-specific font.\r\n\tif (language === 'ja') {\r\n\t\tfontDefinitionCss+= this.buildFontSet('ja', true);\r\n\t}\r\n\telse if (language === 'en' && region === 'JP') {\r\n\t\tfontDefinitionCss+= this.buildFontSet('en-JP', true);\r\n\t}\r\n\telse if (language === 'ur') {\r\n\t\tfontDefinitionCss+= this.buildFontSet('ur', true);\r\n\t}\r\n\telse if (language === 'zh' && region === 'HK') {\r\n\t\tfontDefinitionCss+= this.buildFontSet('zh-HK', true);\r\n\t}\r\n\telse if (language === 'zh' && region === 'TW') {\r\n\t\tfontDefinitionCss+= this.buildFontSet('zh-TW', true);\r\n\t}\r\n\r\n\tstyleElem.innerHTML = fontDefinitionCss;\r\n}\r\n\r\ni18n.updateLocale.extend(function (sup) {\r\n\treturn function() {\r\n\t\tsup.apply(this, arguments);\r\n\t\tfunLocaleSpecificFonts();\r\n\t};\r\n});\r\n\r\nfunLocaleSpecificFonts();\r\n","/**\r\n* Contains the declaration for the {@link module:moonstone/ExpandableListItem/ExpandableListItemDrawer~ExpandableListItemDrawer} kind.\r\n* @module moonstone/ExpandableListItem/ExpandableListItemDrawer\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tDrawer = require('enyo/Drawer');\r\n\r\nvar\r\n\toptions = require('../options');\r\n\r\n/**\r\n* @class ExpandableListItemDrawer\r\n* @extends module:enyo/Drawer~Drawer\r\n* @ui\r\n* @private\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/ExpandableListItem/ExpandableListItemDrawer~ExpandableListItemDrawer.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ExpandableListItemDrawer',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Drawer,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\topen: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: 'container',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightRememberFocus: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trenderOnShow: options.renderOnShow && options.renderOnShow.expandableListDrawer,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tobservers: [\r\n\t\t{path: 'generated', method: 'resetRendered'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\topenChanged: function () {\r\n\t\tif (this.open && this.renderOnShow && !this.showing && !this.generated) this.show();\r\n\t\tDrawer.prototype.openChanged.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* Once the rendered phase completes, mark hasRendered to true. This helps work around\r\n\t* {@link module:enyo/Checkbox~Checkbox} firing onActivate events during it's rendered callback\r\n\t* that we don't want to interpret as user action.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\trendered: function () {\r\n\t\tDrawer.prototype.rendered.apply(this, arguments);\r\n\t\tthis.hasRendered = true;\r\n\t},\r\n\r\n\t/**\r\n\t* When generated is set to false, reset hasRendered as well.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tresetRendered: function (was, is) {\r\n\t\tif (!is) this.hasRendered = false;\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\t\r\n\tariaObservers: [\r\n\t\t{from: 'open', method: function () {\r\n\t\t\tthis.setAriaAttribute('aria-hidden', this.open ? null : 'true');\r\n\t\t}}\r\n\t]\r\n});\r\n","'use strict';\r\n\r\n// Many moonstone controls require ilib components but do not directly require the base module which\r\n// is necessary to include the locale assets.\r\nrequire('enyo-ilib');\r\n\r\nvar\r\n\tplatform = require('enyo/platform'),\r\n\tdispatcher = require('enyo/dispatcher'),\r\n\tgesture = require('enyo/gesture');\r\n\r\nexports = module.exports = require('./src/options');\r\nexports.version = '2.7.0';\r\n\r\n// Override the default holdpulse config to account for greater delays between keydown and keyup\r\n// events in Moonstone with certain input devices.\r\ngesture.drag.configureHoldPulse({\r\n\tevents: [{name: 'hold', time: 400}],\r\n\tendHold: 'onLeave'\r\n});\r\n\r\n/**\r\n* Registers key mappings for webOS-specific device keys related to media control.\r\n*\r\n* @private\r\n*/\r\nif (platform.webos >= 4) {\r\n\t// Table of default keyCode mappings for webOS device\r\n\tdispatcher.registerKeyMap({\r\n\t\t415 : 'play',\r\n\t\t413 : 'stop',\r\n\t\t19  : 'pause',\r\n\t\t412 : 'rewind',\r\n\t\t417 : 'fastforward',\r\n\t\t461 : 'back'\r\n\t});\r\n}\r\n\r\n// ensure that these are registered\r\nrequire('./src/resolution');\r\nrequire('./src/fonts');\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/HighlightText~HighlightText} kind.\r\n* @module moonstone/HighlightText\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom'),\r\n\tControl = require('enyo/Control'),\r\n\tHTMLStringDelegate = require('enyo/HTMLStringDelegate');\r\n\r\n/**\r\n* Event sent to {@link module:moonstone/HighlightText~HighlightText} to turn on highlighting.\r\n*\r\n* @event module:moonstone/HighlightText~HighlightText#onHighlight\r\n* @type {Object}\r\n* @property {String|RegExp} highlight - String or regular expression specifying the text or\r\n*\tpattern to highlight.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Event sent to {@link module:moonstone/HighlightText~HighlightText} to turn off highlighting. No additional data\r\n* is sent with this event.\r\n*\r\n* @event module:moonstone/HighlightText~HighlightText#onUnHighlight\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\nvar HighlightTextDelegate = Object.create(HTMLStringDelegate);\r\n\r\nHighlightTextDelegate.generateInnerHtml = function (control) {\r\n\tvar i = 0, child;\r\n\t// flow can alter the way that html content is rendered inside\r\n\t// the container regardless of whether there are children.\r\n\tcontrol.flow();\r\n\tif (control.children.length) {\r\n\t\t// If marqueeText is created inside of highlightText then it needs to pass search keyword to children\r\n\t\tfor (; (child = control.children[i]); ++i) {\r\n\t\t\tchild.search = control.search;\r\n\t\t\tchild.highlightClasses = control.highlightClasses; // this is not included in search, so passing it\r\n\t\t}\r\n\t\treturn this.generateChildHtml(control);\r\n\t}\r\n\telse {\r\n\t\tif (control.search && control.content) {\r\n\t\t\treturn control.content.replace(control.search, control.bindSafely(function (s) {\r\n\t\t\t\treturn '<span style=\\'pointer-events:none;\\' class=\\'' + this.highlightClasses + '\\'>' + dom.escape(s) + '</span>';\r\n\t\t\t}));\r\n\t\t} else {\r\n\t\t\treturn dom.escape(control.get('content'));\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n* {@link module:moonstone/HighlightText~HighlightText} is a control that displays highlighted text.  When\r\n* the [highlight]{@link module:moonstone/HighlightText~HighlightText#highlight} property is set or an\r\n* [onHighlight]{@link module:moonstone/HighlightText~HighlightText#onHighlight} event is received,\r\n* it will highlight a specified string if that string is found within the\r\n* control's content.\r\n*\r\n* For example, let's say we have the following control:\r\n*\r\n* ```\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tHighlightText = require('moonstone/HighlightText');\r\n*\r\n* \t{kind: HighlightText, name: 'myHT', content: 'Hello World!'}\r\n* ```\r\n* In response to the event\r\n*\r\n* ```\r\n* \tthis.waterfall('onHighlight', {highlight: 'Hello'});\r\n* ```\r\n* or the direct API call\r\n*\r\n* ```\r\n* \tthis.$.myHT.set('highlight', 'Hello');\r\n* ```\r\n*\r\n* the word \"Hello\" will be highlighted.\r\n*\r\n* The highlighting will be turned off when an\r\n* [onUnHighlight]{@link module:moonstone/HighlightText~HighlightText#onUnHighlight} event is received\r\n*\r\n* ```\r\n* \tthis.waterfall('onUnHighlight');\r\n* ```\r\n* or when [highlight]{@link module:moonstone/HighlightText~HighlightText#highlight} is set to a **falsy** value.\r\n*\r\n* ```\r\n* \tthis.$.myHT.set('highlight', '');\r\n* ```\r\n*\r\n* @class HighlightText\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/HighlightText~HighlightText.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.HighlightText',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/HighlightText~HighlightText.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* String or regular expression specifying the text or pattern to highlight.\r\n\t\t* Setting this to an empty string, a **falsy** value, or an empty regex\r\n\t\t* will disable highlighting.\r\n\t\t*\r\n\t\t* @type {String|RegExp}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\thighlight: '',\r\n\r\n\t\t/**\r\n\t\t* If `true`, only case-sensitive matches of the string to highlight will be\r\n\t\t* highlighted.  This property will be ignored if the\r\n\t\t* [highlight]{@link module:moonstone/HighlightText~HighlightText#highlight} property is set to a regular\r\n\t\t* expression (you may use the `'i'` modifier to create a case-insensitive regex).\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcaseSensitive: false,\r\n\r\n\t\t/**\r\n\t\t* The default CSS class to apply to highlighted content.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'moon-highlight-text-highlighted'\r\n\t\t* @public\r\n\t\t*/\r\n\t\thighlightClasses: 'moon-highlight-text-highlighted'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trenderDelegate: HighlightTextDelegate,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonHighlight: 'onHighlightHandler',\r\n\t\tonUnHighlight: 'unHighlightHandler'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tthis.highlightChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thighlightChanged: function () {\r\n\t\tif (this.highlight) {\r\n\t\t\tif (this.highlight instanceof RegExp) {\r\n\t\t\t\t// Make sure the regex isn't empty\r\n\t\t\t\tthis.search = (''.match(this.highlight)) ? null : this.highlight;\r\n\t\t\t} else {\r\n\t\t\t\t// Escape string for use in regex (standard regex escape from google)\r\n\t\t\t\tvar escaped = this.highlight.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\r\n\t\t\t\tthis.search = new RegExp(escaped, this.caseSensitive ? 'g' : 'ig');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.search = false;\r\n\t\t}\r\n\t\tif (this.hasNode()) {\r\n\t\t\tthis.contentChanged();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcaseSensitiveChanged: function () {\r\n\t\tthis.highlightChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tonHighlightHandler: function (inSender, inEvent) {\r\n\t\tthis.setHighlight(inEvent.highlight);\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tunHighlightHandler: function (inSender, inEvent) {\r\n\t\tthis.setHighlight('');\r\n\t\treturn true;\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Icon~Icon} kind.\r\n* @module moonstone/Icon\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tri = require('enyo/resolution'),\r\n\tpath = require('enyo/pathResolver'),\r\n\tControl = require('enyo/Control');\r\n\r\n// Static private hash of all of the valid moonstone icons\r\nvar icons = {\r\n\tplus              : '&#43;',      // \\0002B plus\r\n\tminus             : '&#45;',      // \\0002D hyphen\r\n\tarrowhookleft     : '&#8617;',    // \\021A9 LeftArrowHook\r\n\tarrowhookright    : '&#8618;',    // \\021AA RightArrowHook\r\n\tellipsis          : '&#8943;',    // \\022EF ellipsis\r\n\tcheck             : '&#10003;',   // \\02713 checkmark\r\n\tcircle            : '&#983003;',  // \\0EFFDB record\r\n\tstop              : '&#983004;',  // \\0EFFDC stop\r\n\tplay              : '&#983005;',  // \\0EFFDD play\r\n\tpause             : '&#983006;',  // \\0EFFDE pause\r\n\tforward           : '&#983007;',  // \\0EFFDF forward\r\n\tbackward          : '&#983008;',  // \\0EFFE0 rewind\r\n\tskipforward       : '&#983009;',  // \\0EFFE1 skip_forward\r\n\tskipbackward      : '&#983010;',  // \\0EFFE2 skip_backwards\r\n\tpauseforward      : '&#983011;',  // \\0EFFE3 indicator_forward\r\n\tpausebackward     : '&#983012;',  // \\0EFFE4 indicator_backward\r\n\tpausejumpforward  : '&#983013;',  // \\0EFFE5 indicator_skip_forward\r\n\tpausejumpbackward : '&#983014;',  // \\0EFFE6 indicator_skip_backward\r\n\tjumpforward       : '&#983015;',  // \\0EFFE7 indicator_end\r\n\tjumpbackward      : '&#983016;',  // \\0EFFE8 indicator_begin\r\n\tdenselist         : '&#983017;',  // \\0EFFE9 list_big\r\n\tbulletlist        : '&#983018;',  // \\0EFFEA list_bullets\r\n\tlist              : '&#983019;',  // \\0EFFEB list_simple\r\n\tdrawer            : '&#983020;',  // \\0EFFEC list_actions\r\n\tarrowlargedown    : '&#983021;',  // \\0EFFED caret_down_large\r\n\tarrowlargeup      : '&#983022;',  // \\0EFFEE caret_up_large\r\n\tarrowlargeleft    : '&#983023;',  // \\0EFFEF caret_left_large\r\n\tarrowlargeright   : '&#983024;',  // \\0EFFF0 caret_right_large\r\n\tarrowsmallup      : '&#983025;',  // \\0EFFF1 caret_up_small\r\n\tarrowsmalldown    : '&#983026;',  // \\0EFFF2 caret_down_small\r\n\tarrowsmallleft    : '&#983027;',  // \\0EFFF3 caret_left_small\r\n\tarrowsmallright   : '&#983028;',  // \\0EFFF4 caret_right_small\r\n\tclosex            : '&#983029;',  // \\0EFFF5 close_x\r\n\tsearch            : '&#983030;',  // \\0EFFF6 magnify\r\n\trollforward       : '&#983031;',  // \\0EFFF7 redo\r\n\trollbackward      : '&#983032;',  // \\0EFFF8 undo\r\n\texitfullscreen    : '&#983033;',  // \\0EFFF9 minimize\r\n\tfullscreen        : '&#983034;',  // \\0EFFFA maximize\r\n\tarrowextend       : '&#983073;',  // \\0F0021 arrow_left\r\n\tarrowshrink       : '&#983074;',  // \\0F0022 arrow_right\r\n\tflag              : '&#983075;',  // \\0F0023 flag\r\n\tfunnel            : '&#983076;',  // \\0F0024 filter\r\n\ttrash             : '&#983077;',  // \\0F0025 trash\r\n\tstar              : '&#983080;',  // \\0F0028 star_full\r\n\thollowstar        : '&#983081;',  // \\0F0029 star_empty\r\n\thalfstar          : '&#983082;',  // \\0F002A star_half\r\n\tgear              : '&#983083;',  // \\0F002B gear\r\n\tplug              : '&#983084;',  // \\0F002C input\r\n\tlock              : '&#983085;'   // \\0F002D lock\r\n};\r\n\r\n/**\r\n* {@link module:moonstone/Icon~Icon} is a control that displays an icon image. You may specify the\r\n* image by setting the [src]{@link module:moonstone/Icon~Icon#src} property to a URL indicating the\r\n* image file's location.\r\n*\r\n* ```\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tIcon = require('moonstone/Icon');\r\n*\r\n* \t{kind: Icon, src: 'moonstone/src/assets/search.png'}\r\n* ```\r\n*\r\n* Moonstone also supports a second method for displaying icons; in addition to\r\n* using traditional image assets specified in `src`, you may use icons that are\r\n* stored as single characters in a special symbol font. To do this, set the\r\n* value of the [icon]{@link module:moonstone/Icon~Icon#icon} property to a string representing an\r\n* icon name, e.g.:\r\n*\r\n* ```\r\n* \t{kind: Icon, icon: 'closex'}\r\n* ```\r\n*\r\n* For image-based icons, two sizes are supported: large (45x45 pixels) and small\r\n* (32x32 pixels). Icons are small by default. To specify a large icon, set the\r\n* [small]{@link module:moonstone/Icon~Icon#small} property to `false`:\r\n*\r\n* ```\r\n* \t{kind: Icon, src: 'moonstone/src/assets/search.png', small: false}\r\n*\r\n* \t{kind: Icon, icon: 'closex', small: false}\r\n* ```\r\n*\r\n* In addition, both icon sizes support two states: a default (resting) state,\r\n* and a pressed (active) state. Both states need to be included in the icon's\r\n* associated image asset, with the resting state on top and the active state on\r\n* the bottom.\r\n*\r\n* Image assets for large icons should be 75px wide and 150px high. This allows\r\n* room for the two states, along with 15 pixels of transparent padding on all\r\n* four sides of each 45x45 icon.\r\n*\r\n* Assets for small icons should be 50px wide and 100px high. This allows room\r\n* for the two states, along with 9 pixels of transparent padding on all four\r\n* sides of each 32x32 icon.\r\n*\r\n* Since asset-based icon images are applied as CSS backgrounds, the height and\r\n* width of an icon must be set if an image of a non-standard size is used.\r\n*\r\n* For situations in which an icon should act like a button, use\r\n* {@link module:moonstone/IconButton~IconButton}.\r\n*\r\n* @class Icon\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/Icon~Icon.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Icon',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tallowHtml: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/Icon~Icon.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* This property serves two purposes. One, it accepts one of the below Moonstone icon\r\n\t\t* names. Two, it also supports standard ascii characters or HTML entities, to directly\r\n\t\t* represent a glyph. By default, the font used when you specify a\r\n\t\t* character/entity/glyph, the font \"LG Display_Dingbat\" will be used. It is applied via\r\n\t\t* a `class`: \"font-lg-icons\". To apply your own dingbat font, override this class's\r\n\t\t* `font-family` property in your CSS.\r\n\t\t*\r\n\t\t* The following icon names are valid:\r\n\t\t*\r\n\t\t* `drawer`\r\n\t\t* `arrowlargedown`\r\n\t\t* `arrowlargeup`\r\n\t\t* `arrowlargeleft`\r\n\t\t* `arrowlargeright`\r\n\t\t* `arrowsmallup`\r\n\t\t* `arrowsmalldown`\r\n\t\t* `arrowsmallleft`\r\n\t\t* `arrowsmallright`\r\n\t\t* `closex`\r\n\t\t* `check`\r\n\t\t* `search`\r\n\t\t* `exitfullscreen`\r\n\t\t* `fullscreen`\r\n\t\t* `circle`\r\n\t\t* `stop`\r\n\t\t* `play`\r\n\t\t* `pause`\r\n\t\t* `forward`\r\n\t\t* `backward`\r\n\t\t* `skipforward`\r\n\t\t* `skipbackward`\r\n\t\t* `pauseforward`\r\n\t\t* `pausebackward`\r\n\t\t* `pausejumpforward`\r\n\t\t* `pausejumpbackward`\r\n\t\t* `jumpforward`\r\n\t\t* `jumpbackward`\r\n\t\t* `arrowextend`\r\n\t\t* `arrowshrink`\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\ticon: '',\r\n\r\n\t\t/**\r\n\t\t* URL specifying path to icon image.\r\n\t\t*\r\n\t\t* @type {String|module:enyo/resolution#selectSrc~src}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsrc: '',\r\n\r\n\t\t/**\r\n\t\t* If `true`, icon is shown as disabled.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdisabled: false,\r\n\r\n\t\t/**\r\n\t\t* A boolean parameter affecting the size of the icon.\r\n\t\t* If `true`, the icon will be 32px by 32px. If `false`, the icon will be 45px\r\n\t\t* by 45px. When `small` is `true`, a larger, invisible tap area will be applied\r\n\t\t* around the icon.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsmall: true\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\t/**\r\n\t\t* This is a horrible hack to prevent event bubble caching from messing up\r\n\t\t* moon.Tooltip positioning (BHV-13377). In short, we don't need to do anything\r\n\t\t* with onenter ourselves, but we need it to pass through us on the way to\r\n\t\t* moon.TooltipDecorator, which uses inSender to figure out who the tooltip\r\n\t\t* activator should be.\r\n\t\t*\r\n\t\t* TODO: Something better.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tonenter: 'doNothing'\r\n\t},\r\n\r\n\t/**\r\n\t* @returns {String} The value of the [src]{@link module:moonstone/Icon~Icon#src} property.\r\n\t* @public\r\n\t*/\r\n\tgetSrc: function () {\r\n\t\treturn this.src;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-icon',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\r\n\t\tthis.smallChanged();\r\n\t\tif (this.src) {\r\n\t\t\tthis.srcChanged();\r\n\t\t}\r\n\t\tthis.disabledChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetIconClass: function (inIconName) {\r\n\t\treturn 'moon-icon-' + (inIconName || this.icon);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdisabledChanged: function () {\r\n\t\tthis.addRemoveClass('disabled', this.disabled);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsrcChanged: function () {\r\n\t\tvar src = this.src || null;\r\n\t\tsrc = ri.selectSrc(src);\r\n\t\tif (src) {\r\n\t\t\tif (src != 'none' && src != 'inherit' && src != 'initial') {\r\n\t\t\t\tsrc = 'url(' + path.rewrite(src) + ')';\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.applyStyle('background-image', src);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ticonChanged: function (old) {\r\n\t\tvar icon = this.get('icon') || '',\r\n\t\t\ticonEntity = icons[icon] || icon;\r\n\r\n\t\t// If the icon isn't in our known set, apply our custom font class\r\n\t\tthis.addRemoveClass('font-lg-icons', !icons[icon]);\r\n\r\n\t\tthis.set('content', iconEntity);\r\n\r\n\t\tif (icons[old]) {\r\n\t\t\tthis.removeClass(this.getIconClass(old));\r\n\t\t}\r\n\t\tif (icons[icon]) {\r\n\t\t\tthis.addClass(this.getIconClass());\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsmallChanged: function () {\r\n\t\tthis.addRemoveClass('small', this.small);\r\n\t\t// Now that our content area is ready, assign the icon\r\n\t\tthis.iconChanged();\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: ['accessibilityLabel', 'accessibilityHint'], method: function () {\r\n\t\t\tvar label = this.accessibilityHint && this.accessibilityLabel && (this.accessibilityLabel + ' ' + this.accessibilityHint) ||\r\n\t\t\t\t\t\tthis.accessibilityHint ||\r\n\t\t\t\t\t\tthis.accessibilityLabel ||\r\n\t\t\t\t\t\tnull;\r\n\t\t\tthis.setAriaAttribute('aria-label', label);\r\n\t\t}}\r\n\t]\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Scrim~Scrim} kind.\r\n* @module moonstone/Scrim\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tScrim = require('enyo/Scrim');\r\n\r\n/**\r\n* {@link module:moonstone/Scrim~Scrim} is a Moonstone-styled\r\n* {@link module:enyo/Scrim~Scrim}.\r\n*\r\n* @class Scrim\r\n* @extends module:enyo/Scrim~Scrim\r\n* @ui\r\n* @public\r\n*/\r\nvar MoonScrim = module.exports = kind(\r\n\t/** @lends module:moonstone/Scrim~Scrim.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Scrim',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Scrim,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-scrim'\r\n});\r\n\r\nnew Scrim.ScrimSingleton(MoonScrim, 'scrim', {floating: true, classes: 'moon-scrim moon-scrim-translucent'});\r\nnew Scrim.ScrimSingleton(MoonScrim, 'scrimTransparent', {floating: true, classes: 'moon-scrim moon-scrim-transparent'});\r\n","require('moonstone');\r\n\r\n/**\r\n* Mixin that enables support for custom history.\r\n*\r\n* @module moonstone/HistorySupport\r\n*/\r\n\r\nvar\r\n\tEnyoHistory = require('enyo/History'),\r\n\tkind = require('enyo/kind');\r\n\r\n/**\r\n* {@link module:moonstone/HistorySupport} is a {@glossary mixin} that enables\r\n* support for custom history. In its current iteration, \"back\" actions are\r\n* implemented, allowing controls to override and customize the behavior that\r\n* occurs when the back key is pressed or the `window.history` is utilized.\r\n*\r\n* @mixin\r\n* @public\r\n*/\r\nvar HistorySupport = {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'HistorySupport',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* When `true`, pressing the back key will result in control-specific behavior that\r\n\t\t* corresponds to a \"back\" action.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tallowBackKey: true\r\n\t},\r\n\r\n\t/**\r\n\t* Pushes a default state to the back history, consisting of a reference to our\r\n\t* handler for any \"back\" actions.\r\n\t*\r\n\t* If the default `pushBackHistory()` behavior is to be overridden, make sure\r\n\t* that the control's implementation of `pushBackHistory()` signifies that it\r\n\t* has handled the necessary behavior by returning `true`, e.g.:\r\n\t*\r\n\t* ```javascript\r\n\t* \tpushBackHistory: function() {\r\n\t* \t\t// perform custom operations here\r\n\t* \t\treturn true;\r\n\t* \t}\r\n\t* ```\r\n\t*\r\n\t* @method\r\n\t* @public\r\n\t*/\r\n\tpushBackHistory: kind.inherit(function (sup) {\r\n\t\t// When you use a mixin, it will override existing properties and methods. If a control\r\n\t\t// that uses `moonstone/HistorySupport` has implemented the `pushBackHistory()` method, the\r\n\t\t// method will be replaced with the following method. To ensure that the control's\r\n\t\t// implementation of `pushBackHistory()` is executed, we allow it to run and subsequently\r\n\t\t// examine its return value.\r\n\t\treturn function () {\r\n\t\t\t// check whether this control's `pushBackHistroy` method has effectively handled\r\n\t\t\t// the call, or whether it wants the inherited method to execute\r\n\t\t\tif (!sup.apply(this, arguments)) {\r\n\t\t\t\tEnyoHistory.push({context: this, handler: this.backKeyHandler});\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Handler for whenever a \"back\" action is triggered. The default behavior is to hide the\r\n\t* control if it is showing.\r\n\t*\r\n\t* Most controls will want to override this behavior. If the default behavior should not be\r\n\t* executed, ensure that the `backKeyHandler()` method in the control signifies that it has\r\n\t* handled the necessary behavior by returning `true`.\r\n\t*\r\n\t* @method\r\n\t* @public\r\n\t*/\r\n\tbackKeyHandler: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tif (!sup.apply(this, arguments)) {\r\n\t\t\t\tif (this.showing) this.hide();\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t};\r\n\t})\r\n};\r\n\r\nmodule.exports = HistorySupport;\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/ScrollThumb~ScrollThumb} kind.\r\n* @module moonstone/ScrollThumb\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom'),\r\n\tScrollThumb = require('enyo/ScrollThumb');\r\n\r\n/**\r\n* {@link module:moonstone/ScrollThumb~ScrollThumb}, which extends\r\n* {@link module:enyo/ScrollThumb~ScrollThumb}, is used to display a small visual\r\n* scroll indicator.\r\n*\r\n* `moonstone/ScrollThumb` is not typically created in application code.\r\n*\r\n* @class ScrollThumb\r\n* @extends module:enyo/ScrollThumb~ScrollThumb\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/ScrollThumb~ScrollThumb.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ScrollThumb',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: ScrollThumb,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/ScrollThumb~ScrollThumb.prototype\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* Ratio of size and position of thumb with respect to scroll bounds.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 1\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsizeRatio: 1\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-thumb matrix3dsurface',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tminSize: 40,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tScrollThumb.prototype.create.apply(this, arguments);\r\n\t\tvar v = this.axis == 'v';\r\n\t\tthis.offset = v ? 'top' : 'left';\r\n\t\tthis.transform = dom.canTransform();\r\n\t\tthis.accel = dom.canAccelerate();\r\n\t\tthis.translation = this.accel ? 'matrix3d' : 'matrix';\r\n\t\tthis.positionMethod = v ? 'getScrollTop' : 'getScrollLeft';\r\n\t\tthis.sizeDimension = v ? 'clientHeight' : 'clientWidth';\r\n\t\tthis.addClass('enyo-' + this.axis + 'thumb');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdate: function (inStrategy) {\r\n\t\tif (this.showing && this.scrollBounds) {\r\n\t\t\tvar d = this.dimension;\r\n\t\t\tvar bd = this.scrollBounds[this.sizeDimension], sbd = this.scrollBounds[d];\r\n\t\t\tvar overs = 0, overp = 0, over = 0;\r\n\t\t\tvar ratio = this.getSizeRatio();\r\n\t\t\tif (bd > sbd) {\r\n\t\t\t\tthis.hide();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (inStrategy.isOverscrolling()) {\r\n\t\t\t\tover = inStrategy.getOverScrollBounds()['over' + this.offset];\r\n\t\t\t\tovers = Math.abs(over);\r\n\t\t\t\toverp = Math.max(over, 0);\r\n\t\t\t}\r\n\t\t\tvar sbo = inStrategy[this.positionMethod]() - over;\r\n\t\t\t// calc size & position\r\n\t\t\tvar bdc = bd - this.cornerSize;\r\n\t\t\tvar s = Math.floor((bd * bd / sbd) - overs);\r\n\t\t\ts = Math.max(this.minSize, s);\r\n\t\t\tvar p = Math.floor((bdc * sbo / sbd) + overp);\r\n\t\t\tp = Math.max(0, Math.min(bdc - this.minSize, p));\r\n\r\n\t\t\tp *= ratio;\r\n\t\t\ts *= ratio;\r\n\r\n\t\t\t// apply thumb styling if needed\r\n\t\t\tthis.needed = s < bd;\r\n\t\t\tif (this.needed && this.hasNode()) {\r\n\t\t\t\tdom.transformValue(this, this.translation, this.generateMatrix(p, s));\r\n\t\t\t} else {\r\n\t\t\t\tthis.hide();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgenerateMatrix: function (inPosition, inSize) {\r\n\t\tvar x, y, w, h, node = this.hasNode();\r\n\r\n\t\tif (!node) {\r\n\t\t\tx = 0;\r\n\t\t\ty = 0;\r\n\t\t\tw = 1;\r\n\t\t\th = 1;\r\n\t\t}\r\n\t\telse if (this.axis === 'v') {\r\n\t\t\tx = 0;\r\n\t\t\ty = inPosition;\r\n\t\t\tw = 1;\r\n\t\t\th = inSize/node.offsetHeight;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tx = inPosition;\r\n\t\t\ty = 0;\r\n\t\t\tw = inSize/node.offsetWidth;\r\n\t\t\th = 1;\r\n\t\t}\r\n\r\n\t\treturn (this.accel) ? this.assemble3dMatrix(x, y, w, h) : this.assemle2dMatrix(x, y, w, h);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tassemle2dMatrix: function (inX, inY, inWidth, inHeight) {\r\n\t\treturn inWidth + ', 0, 0, ' + inHeight + ', ' + inX + ', ' + inY;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tassemble3dMatrix: function (inX, inY, inWidth, inHeight) {\r\n\t\treturn inWidth + ', 0, 0, 0, 0, ' + inHeight + ', 0, 0, 0, 0, 1, 0, ' + inX + ', ' + inY + ', 1, 1';\r\n\t},\r\n\r\n\t/**\r\n\t* Override `show()` to give fade effect.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshow: function () {\r\n\t\tthis.cancelDelayHide();\r\n\t\tthis.removeClass('hidden');\r\n\t},\r\n\r\n\t/**\r\n\t* Hides the control.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\thide: function () {\r\n\t\tthis.addClass('hidden');\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/RichText~RichText} kind.\r\n* @module moonstone/RichText\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tRichText = require('enyo/RichText');\r\n\r\n/**\r\n* {@link module:moonstone/RichText~RichText} is a Moonstone-styled text input\r\n* field with support for rich text formatting such as bold, italics, and\r\n* underlining, derived from {@link module:enyo/RichText~RichText}. Typically, a\r\n* `moonstone/RichText` is placed inside a\r\n* {@link module:moonstone/InputDecorator~InputDecorator}, which provides\r\n* styling, e.g.:\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tInputDecorator = require('moonstone/InputDecorator'),\r\n* \t\tRichText = require('moonstone/RichText');\r\n*\r\n* \t{kind: InputDecorator, components: [\r\n* \t\t{kind: RichText, style: 'width: 240px;', onchange: 'inputChange'}\r\n* \t]}\r\n* ```\r\n*\r\n* For more information, see the documentation on\r\n* [Text Fields]{@linkplain $dev-guide/building-apps/controls/text-fields.html}\r\n* in the Enyo Developer Guide.\r\n*\r\n* @class RichText\r\n* @extends module:enyo/RichText~RichText\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/RichText~RichText.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.RichText',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: RichText,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-body-text moon-richtext',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tRichText.prototype.create.apply(this, arguments);\r\n\t\tthis.disabledChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the focus on the RichText.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tfocus: function () {\r\n\t\tRichText.prototype.focus.apply(this, arguments);\r\n\t\tvar node = this.hasNode();\r\n\t\t// We move the cursor to the end, because in 5-way\r\n\t\t// mode there is no way (other than backspacing) for\r\n\t\t// the user to move the caret within the text field\r\n\t\tthis.moveCursorToEnd();\r\n\t\tnode.scrollTop = node.scrollHeight;\r\n\t},\r\n\r\n\t/**\r\n\t* Removes focus from the RichText.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tblur: function () {\r\n\t\tif (this.hasNode()) {\r\n\t\t\tthis.node.blur();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Piggyback onto {@link module:enyo/RichText~RichText#blurHandler}.\r\n\t*\r\n\t* @private\r\n\t* @method\r\n\t*/\r\n\tblurHandler: function () {\r\n\t\tRichText.prototype.blurHandler.apply(this, arguments);\r\n\t\tthis.hasNode().scrollTop = 0;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdisabledChanged: function () {\r\n\t\tRichText.prototype.disabledChanged.apply(this, arguments);\r\n\t\tif (this.disabled) {\r\n\t\t\tthis.attributes.contenteditable = false;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tleft: function () {\r\n\t\tvar sel = this.getSelection();\r\n\t\tif (sel.rangeCount) {\r\n\t\t\tvar selRange = sel.getRangeAt(0);\r\n\t\t\tvar testRange = selRange.cloneRange();\r\n\r\n\t\t\ttestRange.selectNodeContents(this.node);\r\n\t\t\ttestRange.setEnd(selRange.startContainer, selRange.startOffset);\r\n\r\n\t\t\tif (testRange.toString() === '') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tright: function () {\r\n\t\tvar sel = this.getSelection();\r\n\t\tif (sel.rangeCount) {\r\n\t\t\tvar selRange = sel.getRangeAt(0);\r\n\t\t\tvar testRange = selRange.cloneRange();\r\n\r\n\t\t\ttestRange.selectNodeContents(this.node);\r\n\t\t\ttestRange.setStart(selRange.endContainer, selRange.endOffset);\r\n\r\n\t\t\tif (testRange.toString() === '') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tup: function (inEvent) {\r\n\t\treturn this.left();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdown: function (inEvent) {\r\n\t\treturn this.right();\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/TextArea~TextArea} kind.\r\n* @module moonstone/TextArea\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tTextArea = require('enyo/TextArea');\r\n\r\n/**\r\n* {@link module:moonstone/TextArea~TextArea} is a Moonstone-styled text input\r\n* field, derived from {@link module:enyo/TextArea~TextArea}. Typically, a\r\n* `moonstone/TextArea` is placed inside a\r\n* {@link module:moonstone/InputDecorator~InputDecorator}, which provides\r\n* styling, e.g.:\r\n*\r\n* ```\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tInputDecorator = require('moonstone/InputDecorator'),\r\n* \t\tTextArea = require('moonstone/TextArea');\r\n*\r\n* \t{kind: InputDecorator, components: [\r\n* \t\t{kind: TextArea, onchange: 'inputChange'}\r\n* \t]}\r\n* ```\r\n*\r\n* For more information, see the documentation on\r\n* [Text Fields]{@linkplain $dev-guide/building-apps/controls/text-fields.html}\r\n* in the Enyo Developer Guide.\r\n*\r\n* @class TextArea\r\n* @extends module:enyo/TextArea~TextArea\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/TextArea~TextArea.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.TextArea',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: TextArea,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-body-text moon-textarea',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightIgnoredKeys: [13, 16777221],\t// 13==Enter, 16777221==KeypadEnter\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonblur: 'blurred'\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the focus on the TextArea.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tfocus: function () {\r\n\t\tTextArea.prototype.focus.apply(this, arguments);\r\n\t\tvar node = this.hasNode();\r\n\t\t// We move the cursor to the end, because in 5-way\r\n\t\t// mode there is no way (other than backspacing) for\r\n\t\t// the user to move the caret within the text field\r\n\t\tnode.selectionStart = this.value.length;\r\n\t\tnode.scrollTop = node.scrollHeight;\r\n\t},\r\n\r\n\t/**\r\n\t* Removes focus from the TextArea.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tblur: function () {\r\n\t\tif (this.hasNode()) {\r\n\t\t\tthis.node.blur();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tblurred: function () {\r\n\t\tthis.hasNode().scrollTop = 0;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tleft: function (inEvent) {\r\n\t\tif (!this.hasNode() || this.node.selectionStart === 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tright: function (inEvent) {\r\n\t\tif (!this.hasNode() || this.node.selectionStart == this.node.value.length) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tup: function (inEvent) {\r\n\t\treturn this.left(inEvent);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdown: function (inEvent) {\r\n\t\treturn this.right(inEvent);\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Tooltip~Tooltip} kind.\r\n* @module moonstone/Tooltip\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom'),\r\n\tutil = require('enyo/utils'),\r\n\tControl = require('enyo/Control'),\r\n\tPopup = require('enyo/Popup'),\r\n\tComponent = require('enyo/Component'),\r\n\tSignals = require('enyo/Signals'),\r\n\tri = require('enyo/resolution');\r\n\r\nvar pointerTemplate = '<path d=\"M0,5C0,3,1,0,3,0H0V5Z\"/>';\r\n\r\n// To prevent lingering tooltips, we're monitoring spotlight changes and tooltip display\r\n// to ensure that only 1 tooltip is active.\r\n// see BHV-14524, ENYO-247\r\nvar observer = new Component({\r\n\r\n\t/**\r\n\t* Last active tooltip\r\n\t* @private\r\n\t*/\r\n\tactive: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{kind: Signals, onSpotlightCurrentChanged: 'spotChanged'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tactiveChanged: function (was) {\r\n\t\tif(was) {\r\n\t\t\twas.waterfall('onRequestHideTooltip');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotChanged: function (sender, event) {\r\n\t\tthis.set('active', null);\r\n\t}\r\n});\r\n\r\n/**\r\n* Provides uppercasing and checks text directionality for controls within a\r\n* {@link module:moonstone/Tooltip~Tooltip}.\r\n*\r\n* @class TooltipContent\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nvar TooltipContent = kind({\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.TooltipContent',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* When `true`, the content will have locale-safe uppercasing applied.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @public\r\n\t*/\r\n\tuppercase: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tthis._content = this.content;\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontentChanged: function (was, is) {\r\n\t\tif (arguments.length) this._content = is;\r\n\t\tthis.content = this.uppercase ? util.toUpperCase(this._content) : this._content;\r\n\t\tControl.prototype.contentChanged.apply(this, arguments);\r\n\t\tthis.detectTextDirectionality();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tuppercaseChanged: function (was, is) {\r\n\t\tthis.contentChanged();\r\n\t}\r\n});\r\n\r\n/**\r\n* {@link module:moonstone/Tooltip~Tooltip} is a popup that works in conjunction\r\n* with {@link module:moonstone/TooltipDecorator~TooltipDecorator}. The tooltip\r\n* is automatically displayed when the user hovers over the decorator for a given\r\n* period of time. The tooltip is positioned around the decorator where there is\r\n* available window space.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tButton = require('moonstone/Button'),\r\n* \t\tTooltip = require('moonstone/Tooltip'),\r\n* \t\tTooltipDecorator = require('moonstone/TooltipDecorator');\r\n*\r\n* \t{kind: TooltipDecorator, components: [\r\n* \t\t{kind: Button, content: 'Tooltip'},\r\n* \t\t{kind: Tooltip, content: 'I am a tooltip for a button.'}\r\n* \t]}\r\n* ```\r\n*\r\n* You may force the tooltip to appear by calling its\r\n* [show()]{@link module:enyo/Control~Control#show} method.\r\n*\r\n* @class Tooltip\r\n* @extends module:enyo/Popup~Popup\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/Tooltip~Tooltip.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Tooltip',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Popup,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdefaultKind: TooltipContent,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-tooltip below left-arrow',\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/Tooltip~Tooltip.prototype\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* This value overrides the default value of\r\n\t\t* [autoDismiss]{@link module:enyo/Popup~Popup#autoDismiss} inherited from\r\n\t\t* {@link module:enyo/Popup~Popup}.\r\n\t\t* If `true`, the tooltip will hide when the user taps outside of it or presses\r\n\t\t* ESC. Note that this property only affects behavior when the tooltip is used\r\n\t\t* independently, not when it is used with\r\n\t\t* [TooltipDecorator]{@link module:moonstone/TooltipDecorator~TooltipDecorator}.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tautoDismiss: false,\r\n\r\n\t\t/**\r\n\t\t* This value overrides the default value of\r\n\t\t* [floating]{@link module:enyo/Popup~Popup#floating} inherited from\r\n\t\t* {@link module:enyo/Popup~Popup}.\r\n\t\t* If 'false', the tooltip will not be rendered in a\r\n\t\t* [floating layer]{@link module:enyo/Control/floatingLayer~FloatingLayer} and can be ocluded\r\n\t\t* by other controls. Otherwise if `true`, the tooltip will be shown on top of other controls.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tfloating: true,\r\n\r\n\t\t/**\r\n\t\t* Hovering over the decorator for this length of time (in milliseconds) causes the\r\n\t\t* tooltip to appear.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 500\r\n\t\t* @public\r\n\t\t*/\r\n\t\tshowDelay: 500,\r\n\r\n\t\t/**\r\n\t\t* Position of the tooltip with respect to the activating control. Valid values are\r\n\t\t* `'above'`, `'below'`, `'left top'`, `'left bottom'`, `'right top'`, `'right bottom'`, and\r\n\t\t* `'auto'`. The values starting with `'left`' and `'right'` place the tooltip on the side\r\n\t\t* (sideways tooltip) with two additional positions available, `'top'` and `'bottom'`, which\r\n\t\t* places the tooltip content toward the top or bottom, with the tooltip pointer\r\n\t\t* middle-aligned to the activator.\r\n\t\t*\r\n\t\t* Note: The sideways tooltip does not automatically switch sides if it gets too close or\r\n\t\t* overlaps with the window bounds, as this may cause undesirable layout implications,\r\n\t\t* covering your other controls.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'auto'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tposition: 'auto',\r\n\r\n\t\t/**\r\n\t\t* Default `margin-left` value.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdefaultLeft: 0,\r\n\r\n\t\t/**\r\n\t\t* When `true`, the content will have locale-safe uppercasing applied.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tuppercase: true,\r\n\r\n\t\t/**\r\n\t\t* @deprecated Replaced by [uppercase]{@link module:moonstone/Tooltip~Tooltip#uppercase}.\r\n\t\t*\r\n\t\t* Formerly defaulted to `true`, now defaults to `null` and will only have\r\n\t\t* an effect when explicitly set (for complete backward compatibility).\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcontentUpperCase: null\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcaptureEvents: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonRequestShowTooltip: 'requestShow',\r\n\t\tonRequestHideTooltip: 'requestHide'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttools: [\r\n\t\t{name: 'point', kind: Control, classes: 'moon-tooltip-point', tag: 'svg', attributes: {viewBox: '0 0 3 5'}, allowHtml: true, content: pointerTemplate},\r\n\t\t{name: 'client', kind: Control, classes: 'moon-tooltip-label moon-header-font'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitComponents: function () {\r\n\t\tthis.createChrome(this.tools);\r\n\t\tPopup.prototype.initComponents.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tPopup.prototype.create.apply(this, arguments);\r\n\r\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\r\n\t\t// the contentUpperCase property is fully deprecated and removed. The legacy\r\n\t\t// property takes precedence if it exists.\r\n\t\tif (this.contentUpperCase !== null) this.uppercase = this.contentUpperCase;\r\n\r\n\t\tthis.contentChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontentChanged: function () {\r\n\t\tthis.detectTextDirectionality();\r\n\t\tvar content = this.getContent();\r\n\t\tthis.$.client.setContent( this.get('uppercase') ? util.toUpperCase(content) : content);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tuppercaseChanged: function () {\r\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\r\n\t\t// contentUpperCase is fully deprecated and removed.\r\n\t\tif (this.contentUpperCase != this.uppercase) this.contentUpperCase = this.uppercase;\r\n\t\tthis.contentChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontentUpperCaseChanged: function () {\r\n\t\tif (this.uppercase != this.contentUpperCase) this.uppercase = this.contentUpperCase;\r\n\t\tthis.uppercaseChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpositionChanged:function () {\r\n\t\tthis.adjustPosition(true);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trequestShow: function (inSender, inEvent) {\r\n\t\tobserver.set('active', this);\r\n\t\tthis.activator = inEvent.originator;\r\n\t\tthis.startJob('showJob', 'show', this.showDelay);\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcancelShow: function () {\r\n\t\tthis.stopJob('showJob');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trequestHide: function () {\r\n\t\tthis.cancelShow();\r\n\t\treturn Popup.prototype.requestHide.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowingChanged: function () {\r\n\t\tthis.cancelShow();\r\n\t\tPopup.prototype.showingChanged.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tapplyPosition: function (inRect) {\r\n\t\tvar s = '';\r\n\t\tfor (var n in inRect) {\r\n\t\t\ts += (n + ':' + inRect[n] + (isNaN(inRect[n]) ? '; ' : 'px; '));\r\n\t\t}\r\n\t\tthis.addStyles(s);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tadjustPosition: function (belowActivator) {\r\n\t\tif (this.showing && this.hasNode()) {\r\n\t\t\tvar b = this.node.getBoundingClientRect(),\r\n\t\t\t\tmoonDefaultPadding = ri.scale(18),\r\n\t\t\t\tdefaultMargin = ri.scale(21),\r\n\t\t\t\tfloating = this.get('floating'),\r\n\t\t\t\tacNode = this.activator.hasNode(),\r\n\t\t\t\tpBounds = this.parent.getAbsoluteBounds(),\r\n\t\t\t\tacBounds = this.activator.getAbsoluteBounds(),\r\n\t\t\t\tacBorders;\r\n\r\n\t\t\t//* Calculate the difference between decorator and activating\r\n\t\t\t//* control's top, left, right differences, position tooltip against\r\n\t\t\t//* the activating control instead of the decorator accordingly.\r\n\t\t\tvar paTopDiff = pBounds.top - acBounds.top,\r\n\t\t\t\tpaLeftDiff =  acBounds.left - pBounds.left,\r\n\t\t\t\tpaRightDiff = pBounds.left + pBounds.width - acBounds.left - acBounds.width,\r\n\t\t\t\tacRight = window.innerWidth - moonDefaultPadding - acBounds.left - acBounds.width,\r\n\t\t\t\trtl = this.parent.rtl,\t// Must check the parent because the text may have been auto-flipped due to content's direction\r\n\t\t\t\tanchorLeft, anchorSide, offset;\r\n\r\n\t\t\tif (this.position == 'auto') this.position = 'above';\t// Choose a rational default\r\n\r\n\t\t\t// Restore to generic state\r\n\t\t\tthis.removeClass('above');\r\n\t\t\tthis.removeClass('below');\r\n\t\t\tthis.removeClass('top');\r\n\t\t\tthis.removeClass('bottom');\r\n\t\t\tthis.removeClass('left-arrow');\r\n\t\t\tthis.removeClass('right-arrow');\r\n\r\n\t\t\tif (rtl) {\r\n\t\t\t\tanchorLeft = pBounds.left + pBounds.width / 2 - moonDefaultPadding < b.width;\r\n\t\t\t} else {\r\n\t\t\t\t//* When there is not enough room on the left, using right-arrow for the tooltip\r\n\t\t\t\tanchorLeft = window.innerWidth - moonDefaultPadding - pBounds.left - pBounds.width / 2 >= b.width;\r\n\t\t\t}\r\n\r\n\t\t\tif (floating) {\r\n\t\t\t\toffset = acRight + moonDefaultPadding;\r\n\t\t\t} else {\r\n\t\t\t\toffset = paRightDiff;\r\n\t\t\t\t// we need to account for activator border widths if we are not floating\r\n\t\t\t\tacBorders = dom.calcBoxExtents(acNode, 'border');\r\n\t\t\t}\r\n\r\n\t\t\t//* Check if have a compound position, 2 words:\r\n\t\t\tif (this.position && this.position.indexOf(' ') >= 0) {\r\n\t\t\t\tanchorSide = true;\r\n\t\t\t\tvar positions = this.position.split(' '),\r\n\t\t\t\t\tlr = positions[0],\t// This should be either 'left' or 'right'\r\n\t\t\t\t\ttb = positions[1],\t// This should be either 'top' or 'bottom'\r\n\t\t\t\t\trelTop = 0,\r\n\t\t\t\t\trelLeft = 0;\r\n\r\n\t\t\t\tthis.addClass(tb);\r\n\r\n\t\t\t\t// Calculate the absolute top coordinate\r\n\t\t\t\trelTop = (acBounds.height / 2);\r\n\t\t\t\tif (tb == 'top') {\r\n\t\t\t\t\t// We're below, alter the absTop value as necessary\r\n\t\t\t\t\trelTop -= b.height;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// detrmine the side, and if RTL, just do the opposite.\r\n\t\t\t\tif ((lr == 'left' && !rtl) || (lr == 'right' && rtl)) {\r\n\t\t\t\t\tthis.addClass('right-arrow');\r\n\t\t\t\t\trelLeft = -(b.width + defaultMargin + (floating ? 0 : acBorders.left));\r\n\t\t\t\t} else if ((lr == 'right' && !rtl) || (lr == 'left' && rtl)) {\r\n\t\t\t\t\tthis.addClass('left-arrow');\r\n\t\t\t\t\trelLeft = acNode.clientWidth + defaultMargin + (floating ? acBounds.width - acNode.clientWidth : acBorders.right);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (floating) {\r\n\t\t\t\t\t// Absolute (floating) measurements are based on the relative positions\r\n\t\t\t\t\t// Adjusting as needed.\r\n\t\t\t\t\trelTop = acBounds.top + relTop;\r\n\t\t\t\t\trelLeft = acBounds.left + relLeft;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.applyPosition({'top': dom.unit(relTop, 'rem'), 'left': dom.unit(relLeft, 'rem'), 'right': 'auto'});\r\n\r\n\t\t\t} else {\r\n\t\t\t\t//* When there is not enough room in the bottom, move it above the\r\n\t\t\t\t//* decorator; when the tooltip bottom is within window height but\r\n\t\t\t\t//* set programmatically above, move it above\r\n\t\t\t\tif ((window.innerHeight - moonDefaultPadding) - (pBounds.top + pBounds.height) < b.height + defaultMargin || (this.position == 'above')) {\r\n\t\t\t\t\tthis.addClass('above');\r\n\t\t\t\t\tif (floating) {\r\n\t\t\t\t\t\tthis.applyPosition({'top': dom.unit((acBounds.top - b.height - defaultMargin),'rem'), 'left': dom.unit(acBounds.left + acBounds.width / 2, 'rem'), 'right': 'auto'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.applyPosition({'top': dom.unit(-(b.height + defaultMargin + paTopDiff + acBorders.top), 'rem'), 'left': dom.unit(acBounds.width / 2 + paLeftDiff, 'rem'), 'right': 'auto'});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//* When there is not enough space above the parent container, move\r\n\t\t\t\t//* it below the decorator; when there is enough space above the\r\n\t\t\t\t//* parent container but is set programmatically, leave it below\r\n\t\t\t\tif (pBounds.top < (b.height + defaultMargin) || (this.position == 'below') || this.hasClass('below')) {\r\n\t\t\t\t\tthis.removeClass('above');\t// Above class may have been added in the `if` check above, then need to be removed because the tooltip didn't fit on the screen.\r\n\t\t\t\t\tthis.addClass('below');\r\n\t\t\t\t\tif (floating) {\r\n\t\t\t\t\t\tthis.applyPosition({'top': dom.unit(acBounds.top + acBounds.height + defaultMargin, 'rem'), 'left': dom.unit(acBounds.left + acBounds.width / 2, 'rem'), 'right': 'auto'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.applyPosition({'top': dom.unit(this.parent.node.clientHeight + defaultMargin + paTopDiff + acBorders.bottom, 'rem'), 'left': dom.unit(acBounds.width / 2 + paLeftDiff, 'rem'), 'right': 'auto'});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (anchorLeft) {\r\n\t\t\t\t\tthis.addClass('left-arrow');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.addClass('right-arrow');\r\n\t\t\t\t\tthis.applyPosition({'margin-left': dom.unit(- b.width, 'rem'), 'left': 'auto'});\r\n\t\t\t\t\tthis.applyStyle('right', dom.unit(acBounds.width / 2 + offset, 'rem'));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleResize: function () {\r\n\t\tthis.applyPosition({'margin-left': this.defaultLeft, 'bottom': 'auto'});\r\n\t\tthis.adjustPosition(true);\r\n\t\tPopup.prototype.handleResize.apply(this, arguments);\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* When `true`, the contents of the popup will be read when shown.\r\n\t*\r\n\t* @default true\r\n\t* @type {Boolean}\r\n\t* @public\r\n\t*/\r\n\taccessibilityReadAll: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taccessibilityLive: 'off',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: ['accessibilityReadAll', 'accessibilityRole', 'showing'], method: function () {\r\n\t\t\tthis.startJob('alert', function () {\r\n\t\t\t\tthis.setAriaAttribute('role', this.accessibilityReadAll && this.showing ? 'alert' : this.accessibilityRole);\r\n\t\t\t}, 100);\r\n\t\t}}\r\n\t]\r\n});\r\n\r\nmodule.exports.Content = TooltipContent;\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/StyleAnimator~StyleAnimator} kind.\r\n* @module moonstone/StyleAnimator\r\n* @deprecated\r\n* @private\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom'),\r\n\tlog = require('enyo/logger'),\r\n\tutils = require('enyo/utils'),\r\n\tComponent = require('enyo/Component');\r\n\r\n/**\r\n* @typedef {Object} module:moonstone/StyleAnimator~StyleAnimator~AnimationDefinitionObject\r\n* @property {String} name - An optional name for the animation. If not specified,\r\n* a name will be generated.\r\n* @property {Number} duration - An optional duration. If not specified, the\r\n*\t[default duration]{@link module:moonstone/StyleAnimator~StyleAnimator#defaultDuration} will be used.\r\n* @property {Object} timingFunction - An optional timing function. If not specified, the\r\n*\t[default timing function]{@link module:moonstone/StyleAnimator~StyleAnimator#defaultTimingFunction} will be used.\r\n* @property {String} direction - `'forward'` or `'backward'`. Currently unused.\r\n* @property {Object[]} keyframes - Animation keyframes.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when an animation step occurs.\r\n*\r\n* @event module:moonstone/StyleAnimator~StyleAnimator#onStep\r\n* @type {Object}\r\n* @property {Object} animation - A reference to the animation that generated the event.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when the animation completes.\r\n*\r\n* @event module:moonstone/StyleAnimator~StyleAnimator#onComplete\r\n* @type {Object}\r\n* @property {Object} animation - A reference to the animation that completed.\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/StyleAnimator~StyleAnimator} is a basic animation component.  Call\r\n* [play()]{@link module:moonstone/StyleAnimator~StyleAnimator#play} to start the animation.  The animation will run for\r\n* the period of time (in milliseconds) specified by its `duration`, subject to its\r\n* `timingFunction` and `direction` (See: {@link module:moonstone/StyleAnimator~StyleAnimator~AnimationDefinitionObject}).\r\n*\r\n* @class StyleAnimator\r\n* @extends module:enyo/Component~Component\r\n* @private\r\n* @deprecated\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/StyleAnimator~StyleAnimator.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.StyleAnimator',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Component,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonStep: '',\r\n\t\tonComplete: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/StyleAnimator~StyleAnimator.prototype\r\n\t*/\r\n\tpublished: {\r\n\t\t//* Default value used if the animation has no `duration` specified.\r\n\t\tdefaultDuration: 1000,\r\n\t\t//* Default value used if the animation has no `timingFunction` specified.\r\n\t\tdefaultTimingFunction: 'linear',\r\n\t\t//* Default value used if the animation has no `direction` specified.\r\n\t\tdefaultDirection: 'forward'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttransitionProperty: dom.transition,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinstructions: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstepInterval: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstepIntervalMS: 50,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstartTime: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tanimations: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tComponent.prototype.create.apply(this, arguments);\r\n\t\tthis.animations = [];\r\n\t},\r\n\r\n\t/**\r\n\t* Returns animation object reflecting the passed-in properties, while also adding it to the\r\n\t* `animations` array.\r\n\t*\r\n\t* @param {module:moonstone/StyleAnimator~StyleAnimator~AnimationDefinitionObject} props - An animation definition hash.\r\n\t* @public\r\n\t*/\r\n\tnewAnimation: function (props) {\r\n\t\t// TODO: Add documentation for the generated animation object\r\n\t\tif (this.animations && props.name && this.getAnimation(props.name)) {\r\n\t\t\tthis.deleteAnimation(props.name);\r\n\t\t}\r\n\r\n\t\tprops.keyframes = this.formatKeyframes(props.keyframes);\r\n\t\tprops.instructions = this.generateInstructions(props.keyframes);\r\n\r\n\t\tvar animation = {\r\n\t\t\tname:           props.name || this.generateAnimationName(),\r\n\t\t\tduration:       props.duration || this.defaultDuration,\r\n\t\t\ttimingFunction: props.timingFunction ? this.updateTimingFunction (props.timingFunction) : this.updateTimingFunction (this.defaultTimingFunction),\r\n\t\t\tdirection:      props.direction || this.defaultDirection,\r\n\t\t\ttimeElapsed:    0,\r\n\t\t\tkeyframes:      props.keyframes,\r\n\t\t\tinstructions:   props.instructions,\r\n\t\t\tstate:          'paused'\r\n\t\t};\r\n\r\n\t\tthis.animations.push(animation);\r\n\r\n\t\treturn animation;\r\n\t},\r\n\r\n\t/**\r\n\t* Resets transition properties to their pre-transition state for the specified animation.\r\n\t*\r\n\t* @param {String} name - Name of the animation.\r\n\t* @public\r\n\t*/\r\n\treset: function (name) {\r\n\t\tthis.getAnimation(name);\r\n\t\tthis._reset(name);\r\n\t},\r\n\r\n\t/**\r\n\t* Plays the animation according to its properties.\r\n\t*\r\n\t* @param {String} name - Name of the animation.\r\n\t* @public\r\n\t*/\r\n\tplay: function (name) {\r\n\t\tvar animation = this.getAnimation(name);\r\n\r\n\t\tif (!animation) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.findStartAndEndValues(animation);\r\n\t\tthis.applyValues(animation.startValues);\r\n\t\tthis.cacheStartValues(animation.startValues);\r\n\r\n\t\tutils.asyncMethod(this.bindSafely(function () { this._play(name); }));\r\n\t},\r\n\r\n\t/**\r\n\t* Jumps directly to the end state of a given animation (without animating).\r\n\t*\r\n\t* @param {String} name - Name of the animation.\r\n\t* @public\r\n\t*/\r\n\tjumpToEnd: function (name) {\r\n\t\tvar animation = this.getAnimation(name);\r\n\r\n\t\tif (!animation) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.findStartAndEndValues(animation);\r\n\t\tthis.applyValues(animation.endValues);\r\n\t},\r\n\r\n\t/**\r\n\t* Pauses the animation, if it is currently playing.\r\n\t*\r\n\t* @param {String} name - Name of the animation.\r\n\t* @public\r\n\t*/\r\n\tpause: function (name) {\r\n\t\tvar animation = this.getAnimation(name);\r\n\t\tif (animation.state === 'playing') {\r\n\t\t\tthis._pause(name);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Looks up an animation by name in the animation list.\r\n\t*\r\n\t* @param {String} name - Name of the animation.\r\n\t* @public\r\n\t*/\r\n\tgetAnimation: function (name) {\r\n\t\tvar animation = null;\r\n\t\tfor (var i = 0; i < this.animations.length; i++) {\r\n\t\t\tif (this.animations[i].name === name) {\r\n\t\t\t\tanimation = this.animations[i];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn animation;\r\n\t},\r\n\r\n\t/**\r\n\t* Removes an existing animation from `this.animations`, stopping it first, if necessary.\r\n\t*\r\n\t* @param {String} name - Name of the animation.\r\n\t* @public\r\n\t*/\r\n\tdeleteAnimation: function (name) {\r\n\t\tvar animation = this.getAnimation(name);\r\n\r\n\t\tif (!animation) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// Pause animation if necessary\r\n\t\tthis._pause(name);\r\n\r\n\t\t// Splice out this animation\r\n\t\tthis.animations.splice(this.animations.indexOf(animation), 1);\r\n\t},\r\n\r\n\t/**\r\n\t* Begins stepping through the animation.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tstart: function () {\r\n\t\tthis.beginStepping();\r\n\t},\r\n\r\n\t/**\r\n\t* Stops stepping through the animation.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tstop: function () {\r\n\t\tthis.stopStepping();\r\n\t},\r\n\r\n\t/**\r\n\t* Generates a unique name based on the length of `this.animations`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgenerateAnimationName: function () {\r\n\t\tvar count = this.animations.length,\r\n\t\t\tname = this.getName()+'_animation_'+count;\r\n\t\twhile (this.getAnimation(name)) {\r\n\t\t\tname = this.getName()+'_animation_'+count;\r\n\t\t}\r\n\t\treturn name;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tformatKeyframes: function (inKeyframes) {\r\n\t\tvar frames = [];\r\n\t\tfor (var index in inKeyframes) {\r\n\t\t\tframes.push({index: index, controls: inKeyframes[index]});\r\n\t\t}\r\n\t\treturn frames;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateTimingFunction: function (inTimingFunction) {\r\n\t\treturn inTimingFunction.match(/\\bcubic-bezier/i) ? inTimingFunction : this.convertTimingFunctionToBezier(inTimingFunction);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tconvertTimingFunctionToBezier: function (timing) {\r\n\t\tswitch (timing) {\r\n\t\tcase 'linear':\r\n\t\t\treturn 'cubic-bezier(0, 0, 1, 1)';\r\n\t\tcase 'ease':\r\n\t\t\treturn 'cubic-bezier(0.25, 0.1, 0.25, 1.0)';\r\n\t\tcase 'ease-in':\r\n\t\t\treturn 'cubic-bezier(.42, 0, 1, 1)';\r\n\t\tcase 'ease-out':\r\n\t\t\treturn 'cubic-bezier(0, 0, .58, 1)';\r\n\t\tcase 'ease-in-out':\r\n\t\t\treturn 'cubic-bezier(.42, 0, .58, 1)';\r\n\t\t}\r\n\t\tlog.warn('Unknown timing function: ', timing);\r\n\t\treturn timing;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgenerateInstructions: function (inKeyframes) {\r\n\t\tvar frames = inKeyframes,\r\n\t\t\tinstructions = [],\r\n\t\t\tinstruction,\r\n\t\t\tendValues;\r\n\r\n\t\tfor (var i = 0; i < frames.length-1; i++) {\r\n\t\t\tfor (var j = 0, control; (control = frames[i].controls[j]); j++) {\r\n\t\t\t\tfor (var prop in control.properties) {\r\n\r\n\t\t\t\t\tinstruction = {\r\n\t\t\t\t\t\tcontrol: control.control,\r\n\t\t\t\t\t\tproperty: prop,\r\n\t\t\t\t\t\tstartValue: control.properties[prop],\r\n\t\t\t\t\t\tstartTime: frames[i].index\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tendValues = this.findInstructionEndValues(instruction, i+1, frames);\r\n\r\n\t\t\t\t\t// If no end values, skip this rule   TODO - is this right?\r\n\t\t\t\t\tif (!endValues) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Mix in end values\r\n\t\t\t\t\tinstructions.push(utils.mixin(instruction, endValues));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn instructions;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tfindStartAndEndValues: function (inAnimation) {\r\n\t\tvar frames = inAnimation.keyframes,\r\n\t\t\tstartValues = {},\r\n\t\t\tendValues = {},\r\n\t\t\tc,\r\n\t\t\tcID;\r\n\r\n\t\tfor (var i = 0; i < frames.length; i++) {\r\n\t\t\tfor (var j = 0, control; (control = frames[i].controls[j]); j++) {\r\n\t\t\t\tc = control.control;\r\n\t\t\t\tcID = c.id;\r\n\r\n\t\t\t\tif (!startValues[cID]) {\r\n\t\t\t\t\tstartValues[cID] = {\r\n\t\t\t\t\t\tcontrol: c,\r\n\t\t\t\t\t\tproperties: {}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tif (!endValues[cID]) {\r\n\t\t\t\t\tendValues[cID] = {\r\n\t\t\t\t\t\tcontrol: c,\r\n\t\t\t\t\t\tproperties: {}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var prop in control.properties) {\r\n\t\t\t\t\t// If value is set to _current_, grab the computed value\r\n\t\t\t\t\tif (control.properties[prop] === 'current') {\r\n\t\t\t\t\t\tcontrol.properties[prop] = dom.getComputedStyle(c.hasNode())[prop];\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// at zero, every prop is a startvalue\r\n\t\t\t\t\tif (i === 0 || typeof startValues[cID]['properties'][prop] === 'undefined') {\r\n\t\t\t\t\t\tstartValues[cID]['properties'][prop] = control.properties[prop];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tendValues[cID]['properties'][prop] = control.properties[prop];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinAnimation.startValues = startValues;\r\n\t\tinAnimation.endValues = endValues;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tfindInstructionEndValues: function (inInstruction, inFrameIndex, inFrames) {\r\n\t\tfor (var i = inFrameIndex; i < inFrames.length; i++) {\r\n\t\t\tfor (var j = 0, control; (control = inFrames[i].controls[j]); j++) {\r\n\t\t\t\tif (control.control !== inInstruction.control) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var prop in control.properties) {\r\n\t\t\t\t\tif (prop === inInstruction.property) {\r\n\t\t\t\t\t\treturn {endValue: control.properties[prop], endTime: inFrames[i].index};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_play: function (name) {\r\n\t\tthis.startAnimation(name);\r\n\t\tthis.beginStepping();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstartAnimation: function (name) {\r\n\t\tvar animation = this.getAnimation(name);\r\n\r\n\t\tthis.applyTransitions(name, 0);\r\n\t\tanimation.state = 'playing';\r\n\t\tanimation.timeElapsed = 0;\r\n\t\tanimation.startTime = utils.perfNow();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tapplyValues: function (inValues) {\r\n\t\tvar item, prop, control;\r\n\r\n\t\tfor(item in inValues) {\r\n\t\t\tcontrol = inValues[item].control;\r\n\r\n\t\t\tfor (prop in inValues[item].properties) {\r\n\t\t\t\tcontrol.applyStyle(prop, inValues[item].properties[prop]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcacheStartValues: function (inStartValues) {\r\n\t\tvar item, control;\r\n\t\tthis.startValues = inStartValues;\r\n\r\n\t\tfor(item in inStartValues) {\r\n\t\t\tcontrol = inStartValues[item].control;\r\n\t\t\tinStartValues[item].properties[this.transitionProperty] = control[this.transitionProperty];\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tapplyTransitions: function (name, inStartTime) {\r\n\t\tvar animation = this.getAnimation(name),\r\n\t\t\tinstructions = animation.instructions;\r\n\t\tfor (var i = 0; i < instructions.length; i++) {\r\n\t\t\tif (instructions[i].startTime <= inStartTime && !instructions[i].started) {\r\n\t\t\t\tthis.applyTransition(name, instructions[i]);\r\n\t\t\t\tinstructions[i].started = true;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tapplyTransition: function (name, inInstruction) {\r\n\t\tvar animation = this.getAnimation(name),\r\n\t\t\tcurrentStyle = inInstruction.control[this.transitionProperty],\r\n\t\t\ttransitionTime = (inInstruction.endTime - inInstruction.startTime)*animation.duration/(100*1000),\r\n\t\t\tnewStyle = currentStyle ? currentStyle + ', ' : '',\r\n\t\t\ttransitionProperty = this.transitionProperty;\r\n\r\n\t\tnewStyle += inInstruction.property + ' ' + transitionTime + 's ' + animation.timingFunction + ' 0s';\r\n\r\n\t\tinInstruction.control.applyStyle(transitionProperty, newStyle);\r\n\r\n\t\t// we arbitrarily cache this value for cheaper lookup later\r\n\t\tinInstruction.control[transitionProperty] = newStyle;\r\n\r\n\t\tinInstruction.control.applyStyle(inInstruction.property, inInstruction.endValue);\r\n\r\n\t\t//  this.log(inInstruction.control.id+'.applyStyle('+transitionProperty+', '+newStyle+')');\r\n\t\t//  this.log(inInstruction.control.id+'.applyStyle('+inInstruction.property+', '+inInstruction.endValue+')');\r\n\t},\r\n\r\n\t/**\r\n\t* Begins stepping.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tbeginStepping: function () {\r\n\t\tif (!this.stepInterval) {\r\n\t\t\tthis.stepInterval = setInterval(this.bindSafely('_step'), this.stepIntervalMS);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Stops stepping.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tstopStepping: function () {\r\n\t\tif (this.stepInterval) {\r\n\t\t\tclearInterval(this.stepInterval);\r\n\t\t\tthis.stepInterval = null;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Steps through each playing animation.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_step: function () {\r\n\t\tvar playingAnimations = false,\r\n\t\t\tnow = utils.perfNow(),\r\n\t\t\tanimation,\r\n\t\t\telapsed,\r\n\t\t\ti;\r\n\r\n\t\tfor (i = 0; (animation = this.animations[i]); i++) {\r\n\t\t\tif (animation.state === 'paused') {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\telapsed = now - animation.startTime;\r\n\r\n\t\t\t// If complete, bail\r\n\t\t\tif (elapsed > animation.duration) {\r\n\t\t\t\tif (animation.percentElapsed != 100) {\r\n\t\t\t\t\tthis.applyTransitions(animation.name, 100);\r\n\t\t\t\t}\r\n\t\t\t\tanimation.percentElapsed = 100;\r\n\t\t\t\tthis.doStep({animation: animation});\r\n\t\t\t\tthis.completeAnimation(animation.name);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tanimation.timeElapsed = elapsed;\r\n\t\t\tanimation.percentElapsed = Math.round(elapsed*100/animation.duration);\r\n\t\t\tthis.applyTransitions(animation.name, animation.percentElapsed);\r\n\t\t\tplayingAnimations = true;\r\n\r\n\t\t\t// Bubble step event\r\n\t\t\tthis.doStep({animation: animation});\r\n\t\t}\r\n\r\n\t\tif (!playingAnimations) {\r\n\t\t\tthis.stop();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcompleteAnimation: function (name) {\r\n\t\tvar animation = this.getAnimation(name);\r\n\r\n\t\tthis._pause(name);\r\n\t\tthis._reset(name);\r\n\t\tthis.doComplete({animation: animation});\r\n\t},\r\n\r\n\t/**\r\n\t* Resets transition properties to their pre-transition values.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_reset: function (name) {\r\n\t\tvar animation = this.getAnimation(name);\r\n\t\tfor(var item in animation.startValues) {\r\n\t\t\tanimation.startValues[item].control.applyStyle(this.transitionProperty, animation.startValues[item].properties[this.transitionProperty]);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_pause: function (name) {\r\n\t\tvar animation = this.getAnimation(name);\r\n\t\tanimation.state = 'paused';\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:moonstone/MoonAnimator~MoonAnimator} kind.\r\n* @module moonstone/MoonAnimator\r\n*/\r\n\r\nrequire('moonstone');\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutil = require('enyo/utils'),\r\n\tAnimator = require('enyo/Animator'),\r\n\tanimation = require('enyo/animation');\r\n\r\n\r\n\r\n/**\r\n* {@link module:moonstone/MoonAnimator~MoonAnimator} is an animation for breadcrumb panels.\r\n*\r\n* @class MoonAnimator\r\n* @extends module:enyo/Animator~Animator\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/MoonAnimator~MoonAnimator.prototype */ {\r\n\r\n\t/**\r\n\t* A context in which to run the specified {@glossary event} handlers. If this is\r\n\t* not specified or is falsy, then the [window object]{@glossary window} is used.\r\n\t*\r\n\t* @name context\r\n\t* @type {Object}\r\n\t* @default undefined\r\n\t* @memberOf module:moonstone/MoonAnimator~MoonAnimator.prototype\r\n\t* @public\r\n\t*/\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.MoonAnimator',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Animator,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished: /** @lends module:moonstone/MoonAnimator~MoonAnimator.prototype */ {\r\n\t\tdirection: 'forward',\r\n\r\n\t\tuseBezier: false,\r\n\r\n\t\tconfigs: {}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taccuracy: 0.01,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tvalues: {},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tfractions: {},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdebug: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tconstructed: function () {\r\n\t\tAnimator.prototype.constructed.apply(this, arguments);\r\n\t\tthis.buildBezierTable();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbezier: function (t, x1, y1, x2, y2) {\r\n\t\tvar p0 = {x: 0, y: 0}, p1 = {x: x1, y: y1}, p2 = {x: x2, y: y2}, p3 = {x: 1, y: 1};\r\n\t\tvar cX = 3 * (p1.x - p0.x),\r\n\t\t\tbX = 3 * (p2.x - p1.x) - cX,\r\n\t\t\taX = p3.x - p0.x - cX - bX;\r\n\r\n\t\tvar cY = 3 * (p1.y - p0.y),\r\n\t\t\tbY = 3 * (p2.y - p1.y) - cY,\r\n\t\t\taY = p3.y - p0.y - cY - bY;\r\n\r\n\t\tvar x = (aX * Math.pow(t, 3)) + (bX * Math.pow(t, 2)) + (cX * t) + p0.x;\r\n\t\tvar y = (aY * Math.pow(t, 3)) + (bY * Math.pow(t, 2)) + (cY * t) + p0.y;\r\n\r\n\t\treturn {x: x, y: y};\r\n\t},\r\n\r\n\t/**\r\n\t* Adds configuration for animation.\r\n\t*\r\n\t* The config can be specified for each object that needs to be animated.\r\n\t* Each config consists of two directions, forward and backward.\r\n\t*\r\n\t* ```javascript\r\n\t* panel: {\r\n\t* \tforward: { startValue: 0, endValue: 1, delay: 0, duration: 430, bezier: [.69,.01,.97,.59]},\r\n\t* \tbackward: { startValue: 0, endValue: 1, delay: 0, duration: 500, bezier: [.06,.53,.38,.99] }\r\n\t* }\r\n\t* ```\r\n\t*\r\n\t* @param {Object} config\r\n\t* @public\r\n\t*/\r\n\taddConfig: function (config) {\r\n\t\tif (config) {\r\n\t\t\tutil.mixin(this.configs, config);\r\n\t\t}\r\n\t\tthis.buildBezierTable();\r\n\t},\r\n\r\n\t/**\r\n\t* Builds bezier curve table as a function of x and y.\r\n\t* Interpolates the intermediate values in the table.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tbuildBezierTable: function () {\r\n\t\tif (!this.useBezier) return;\r\n\r\n\t\tvar start = util.perfNow(), end;\r\n\r\n\t\tthis.iterateConfig(this, function(obj, dir, config) {\r\n\t\t\tvar last = {x:0, y:0},\r\n\t\t\t\tconf = config.bezier,\t// Format: { x1, y1, x2, y2 }, values between 0 and 1\r\n\t\t\t\tret, i, j;\r\n\r\n\t\t\tconfig.bezierTable = {};\r\n\r\n\t\t\tfor (i = 0; i <= 1; i += this.accuracy){\r\n\t\t\t\t// Todo: Modify bezier function to have input as x and output as y.\r\n\t\t\t\tret = this.bezier(i, conf[0], conf[1], conf[2], conf[3]);\r\n\r\n\t\t\t\t// Linear Interpolation\r\n\t\t\t\t//  - Bezier curve table which is having X as a key between 0 and 100.\r\n\t\t\t\t//  - Y value is having value between 0 and 1.\r\n\t\t\t\tfor (j = last.x; j < ret.x; j += 0.01) {\r\n\t\t\t\t\tconfig.bezierTable[(j*100)<<0] = last.y + (j - last.x) * (ret.y-last.y) / (ret.x - last.x);\r\n\t\t\t\t}\r\n\t\t\t\tlast = ret;\r\n\t\t\t}\r\n\t\t\t// Fill rest of table to 1\r\n\t\t\tfor (i = (last.x*100)<<0; i <= 100; i++) {\r\n\t\t\t\tconfig.bezierTable[i] = 1;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tend = util.perfNow();\r\n\r\n\t\tif (this.debug) {\r\n\t\t\tthis.log('Build Bezier Table takes', end - start, 'ms');\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/**\r\n\t* Plays the animation.\r\n\t*\r\n\t* @param {Object} props - As a convenience, this [hash]{@glossary Object} will be mixed\r\n\t*\tdirectly into this [object]{@glossary Object}.\r\n\t* @public\r\n\t*/\r\n\tplay: function (props) {\r\n\t\tvar duration = 0;\r\n\r\n\t\t// Find maximum duration for the whole animation\r\n\t\tthis.iterateConfig(this, function(obj, dir, config) {\r\n\t\t\tthis.values[obj] = config.startValue;\r\n\t\t\tduration = Math.max(config.delay + config.duration, duration);\r\n\t\t}, this.direction);\r\n\r\n\t\tthis.duration = duration;\r\n\r\n\t\tAnimator.prototype.play.apply(this, arguments);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* Reverses the direction of a running animation.\r\n\t*\r\n\t* @return {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\treverse: function () {\r\n\t\tif (this.isAnimating()) {\r\n\t\t\tAnimator.prototype.reverse.apply(this, arguments);\r\n\t\t\tthis.iterateConfig(this, function(obj, dir, config) {\r\n\t\t\t\t// swap start and end values\r\n\t\t\t\tvar startValue = config.startValue;\r\n\t\t\t\tconfig.startValue = config.endValue;\r\n\t\t\t\tconfig.endValue = startValue;\r\n\t\t\t}, this.direction);\r\n\t\t\treturn this;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Runs the next step of the animation.\r\n\t*\r\n\t* @fires module:enyo/Animator~Animator#onStep\r\n\t* @fires module:enyo/Animator~Animator#onEnd\r\n\t* @private\r\n\t*/\r\n\tnext: function () {\r\n\t\tthis.t1 = util.perfNow();\r\n\t\tthis.dt = this.t1 - this.t0;\r\n\t\tthis.fraction = this.dt / this.duration;\r\n\r\n\t\tthis.iterateConfig(this, function(obj, dir, config) {\r\n\t\t\tvar fraction, f;\r\n\r\n\t\t\tif (this.dt - config.delay < 0) return;\r\n\r\n\t\t\tif (this.dt - config.delay >= config.duration) {\r\n\t\t\t\tthis.values[obj] = config.endValue;\r\n\t\t\t\tthis.fractions[obj] = 1;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.useBezier) {\r\n\t\t\t\t// Use bezier function\r\n\t\t\t\tfraction = (this.dt - config.delay) / config.duration;\r\n\t\t\t\tf = this.fractions[obj] = config.bezierTable[(fraction*100)<<0];\r\n\t\t\t\tthis.values[obj] = config.startValue + f * (config.endValue - config.startValue);\r\n\t\t\t} else {\r\n\t\t\t\t// Use easing function\r\n\t\t\t\tif (config.easing.length === 1) {\r\n\t\t\t\t\t// time independent\r\n\t\t\t\t\tthis.fractions[obj] = animation.easedLerp(this.t0 + config.delay, config.duration, config.easing, this.reversed);\r\n\t\t\t\t\tthis.values[obj] = config.startValue + this.fractions[obj] * (config.endValue - config.startValue);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.values[obj] = animation.easedComplexLerp(this.t0 + config.delay, config.duration, config.easing, this.reversed,\r\n\t\t\t\t\t\tthis.dt - config.delay, config.startValue, (config.endValue - config.startValue));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, this.direction);\r\n\r\n\t\tif (this.shouldEnd()) {\r\n\t\t\tthis.fire('onStep');\r\n\t\t\tthis.cancel();\r\n\t\t\tutil.asyncMethod(this.bindSafely(function() {\r\n\t\t\t\tthis.fire('onEnd');\r\n\t\t\t}));\r\n\t\t} else {\r\n\t\t\tthis.fire('onStep');\r\n\t\t\tthis.requestNext();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\titerateConfig: function (scope, callback, direction) {\r\n\t\tvar obj, dir;\r\n\r\n\t\tfor (obj in this.configs) {\r\n\t\t\tif (direction) {\r\n\t\t\t\t// for specified direction\r\n\t\t\t\tcallback.call(scope, obj, direction, this.configs[obj][direction]);\r\n\t\t\t} else {\r\n\t\t\t\t// for all directions\r\n\t\t\t\tfor (dir in this.configs[obj]) {\r\n\t\t\t\t\tcallback.call(scope, obj, dir, this.configs[obj][dir]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:moonstone/MoonArranger~MoonArranger} kind.\r\n* @module moonstone/MoonArranger\r\n*/\r\n\r\nrequire('moonstone');\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tArranger = require('layout/Arranger');\r\n\r\n/**\r\n*\t{@link module:moonstone/MoonArranger~MoonArranger} is a\r\n* {@link module:layout/Arranger~Arranger} that displays the active control.\r\n* The active control is positioned on the right side of the container and the\r\n* breadcrumbs are laid out to the left.\r\n*\r\n* For more information, see the documentation on\r\n* [Arrangers](building-apps/layout/arrangers.html) in the Enyo Developer Guide.\r\n*\r\n* @class MoonArranger\r\n* @extends module:layout/Arranger~Arranger\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/MoonArranger~MoonArranger.prototype */ {\r\n\tname: 'moon.MoonArranger',\r\n\tkind: Arranger,\r\n\t\r\n\t//* @protected\r\n\tsize: function () {\r\n\t\tthis.calcTransitionPositions();\r\n\t},\r\n\t/**\r\n\t* Called when panel is created dynamically.\r\n\t*\r\n\t* @protected\r\n\t*/\r\n\tcalcTransitionPositions: function () {\r\n\t\tvar container = this.container,\r\n\t\t\tpanels = container.getPanels(),\r\n\t\t\tlength = panels ? panels.length : 0;\r\n\r\n\t\tcontainer.transitionPositions = {};\r\n\r\n\t\tfor (var i=0; i<length; i++) {\r\n\t\t\tfor (var j=0; j<length; j++) {\r\n\t\t\t\tcontainer.transitionPositions[j + '.' + i] = (j - i);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tarrange: function (controls, index) {\r\n\t\tvar container = this.container,\r\n\t\t\tpanels = container.getPanels(),\r\n\t\t\tactive = container.clamp(index),\r\n\t\t\tcontrol, xPos;\r\n\r\n\t\tfor (var i=0; (control=panels[i]); i++) {\r\n\t\t\txPos = container.transitionPositions[i + '.' + active];\r\n\t\t\tthis.arrangeControl(control, {left: xPos*100});\r\n\t\t}\r\n\t},\r\n\tflowArrangement: function () {\r\n\t\tthis.flowPanel();\r\n\t\tthis.flowBreadcrumb();\r\n\t},\r\n\tflowPanel: function () {\r\n\t\tvar container = this.container,\r\n\t\t\tarrangements = container.arrangement,\r\n\t\t\tpanels = container.getPanels(),\r\n\t\t\tcontrol, i;\r\n\r\n\t\tif (arrangements && arrangements.panel) {\r\n\t\t\t// Flow panel\r\n\t\t\tfor (i=0; (control=panels[i]) && (arrangements.panel[i]); i++) {\r\n\t\t\t\tthis.flowControl(control, arrangements.panel[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tflowBreadcrumb: function () {\r\n\t\tvar container = this.container,\r\n\t\t\tarrangements = container.arrangement,\r\n\t\t\trange = this.container.getBreadcrumbRange(),\r\n\t\t\tarrangement, control, i;\r\n\r\n\t\tif (arrangements && arrangements.breadcrumb) {\r\n\t\t\tfor (i=range.start; i<range.end; i++) {\r\n\t\t\t\t// Select breadcrumb to arrange for the given panel index\r\n\t\t\t\t// If we have a window of [2, 3] then we choose breadcrumb [0, 1].\r\n\t\t\t\t// If we have a window of [3, 4] then we choose breadcrumb [1, 0].\r\n\t\t\t\tcontrol = container.getBreadcrumbForIndex(i);\r\n\r\n\t\t\t\t// For the first panel, we arrange all breadcrumb to offscreen area.\r\n\t\t\t\tarrangement = (i>=0) ? arrangements.breadcrumb[i] : {left: 0};\r\n\t\t\t\t\r\n\t\t\t\tthis.flowControl(control, arrangement);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\twrap: function (value, length) {\r\n\t\treturn (value+length)%length;\r\n\t},\r\n\tflowControl: function (control, arrangement) {\r\n\t\tArranger.positionControl(control, arrangement, '%');\r\n\t},\r\n\tdestroy: function() {\r\n\t\tvar panels = this.container.getPanels();\r\n\t\tfor (var i=0, control; (control=panels[i]); i++) {\r\n\t\t\tArranger.positionControl(control, {left: null, top: null});\r\n\t\t\tcontrol.applyStyle('top', null);\r\n\t\t\tcontrol.applyStyle('bottom', null);\r\n\t\t\tcontrol.applyStyle('left', null);\r\n\t\t\tcontrol.applyStyle('width', null);\r\n\t\t}\r\n\t\tArranger.prototype.destroy.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* Returns `true` if any panels will move in the transition from `fromIndex` to `toIndex`.\r\n\t* @private\r\n\t*/\r\n\tshouldArrange: function (fromIndex, toIndex) {\r\n\t\tif (!(fromIndex >= 0 && toIndex >= 0)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar transitionPositions = this.container.transitionPositions,\r\n\t\t\tpanelCount = this.container.getPanels().length,\r\n\t\t\tpanelIndex,\r\n\t\t\tfrom,\r\n\t\t\tto;\r\n\r\n\t\tif (transitionPositions) {\r\n\t\t\tfor (panelIndex = 0; panelIndex < panelCount; panelIndex++) {\r\n\t\t\t\tfrom = transitionPositions[panelIndex + '.' + fromIndex];\r\n\t\t\t\tto = transitionPositions[panelIndex + '.' + toIndex];\r\n\r\n\t\t\t\tif (from !== to) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/BodyText~BodyText} kind.\r\n* @module moonstone/BodyText\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tControl = require('enyo/Control');\r\n/**\r\n* {@link module:moonstone/BodyText~BodyText} is a simple control for displaying body text in an app.\r\n* It is designed to align with other text-based controls.\r\n*\r\n* @class BodyText\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/BodyText~BodyText.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.BodyText',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-body-text moon-body-text-spacing moon-body-text-control',\r\n\r\n\t/**\r\n\t*\r\n\t* When `true`, HTML tags are allowed in the control's content.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @public\r\n\t*/\r\n\tallowHtml: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/BodyText~BodyText.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* If `true`, text content is centered; otherwise, it is left-aligned.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcentered: false\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tthis.centeredChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontentChanged: function () {\r\n\t\tControl.prototype.contentChanged.apply(this, arguments);\r\n\t\tthis.detectTextDirectionality();\r\n\t\tif (this.hasNode()) { this.bubble('onRequestSetupBounds'); }\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcenteredChanged: function () {\r\n\t\tthis.applyStyle('text-align', this.centered ? 'center' : null);\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Clock~Clock} kind.\r\n* @module moonstone/Clock\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tControl = require('enyo/Control'),\r\n\tSignals = require('enyo/Signals');\r\n\r\nvar\r\n\tLocaleInfo = require('enyo-ilib/LocaleInfo'),\r\n\tLocale = require('enyo-ilib/Locale'),\r\n\tDateFmt = require('enyo-ilib/DateFmt'),\r\n\tdateFactory = require('enyo-ilib/DateFactory');\r\n\r\n/**\r\n* Used to set a static time for {@link module:moonstone/Clock~Clock} to display.\r\n*\r\n* @typedef {Object} module:moonstone/Clock~Clock~DateTimeObject\r\n* @property {Number} year - The year to display.\r\n* @property {Number} month - The month to display.\r\n* @property {Number} day - The day to display.\r\n* @property {Number} hour - The hour to display.\r\n* @property {Number} minute - The minute to display.\r\n* @property {Number} second - The second to display.\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/Clock~Clock} is a control that displays clock information.\r\n*\r\n* Example:\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tClock = require('moonstone/Clock');\r\n*\r\n* \t{kind: Clock}\r\n* ```\r\n*\r\n* @class Clock\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/Clock~Clock.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Clock',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-clock',\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/Clock~Clock.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Refresh time in milliseconds.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 1000\r\n\t\t* @public\r\n\t\t*/\r\n\t\trefresh: 1000,\r\n\r\n\t\t/**\r\n\t\t* A user-provided date; if `undefined`, system date is used. May be either a\r\n\t\t* JavaScript {@glossary Date} object or a {@link module:moonstone/Clock~Clock~DateTimeObject}\r\n\t\t* describing a static date/time to be displayed.\r\n\t\t*\r\n\t\t* @type {Date|module:moonstone/Clock~Clock~DateTimeObject}\r\n\t\t* @default undefined\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdate: undefined,\r\n\r\n\t\t/**\r\n\t\t* This property will be __private__ in the future and is deprecated as a __public__\r\n\t\t* property. It is used internally and _should not be used otherwise_.\r\n\t\t*\r\n\t\t* This is an [iLib]{@glossary ilib} Locale instance. Setting this directly may have\r\n\t\t* unexpected results. This class will automatically respond to application locale\r\n\t\t* changes that use the {@link module:enyo/i18n#updateLocale} method.\r\n\t\t*\r\n\t\t* @deprecated\r\n\t\t* @type {Locale}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tlocale: null\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tobservers: {\r\n\t\tmodeChanged: ['mode']\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'clock', kind: Control, classes: 'moon-bold-text'},\r\n\t\t{kind: Signals, onlocalechange: 'handleLocaleChangeEvent'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_timeDiff: 0,\r\n\r\n\t/**\r\n\t* [iLib]{@glossary ilib} locale info instance; it contains information about the\r\n\t* particular locale.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tilibLocaleInfo: null,\r\n\r\n\t/**\r\n\t* Defines clock mode.\r\n\t* If `date` is assigned with JavaScript Date object or `null`, it will be `'normal'`.\r\n\t* If `date` is assigned with JavaScript object that indicates the exact time components\r\n\t* to be formatted into the clock, it will be `'static'`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tmode: 'normal',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tthis.initILib();\r\n\t\tthis.refreshJob();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitILib: function () {\r\n\t\tthis.locale = new Locale();\r\n\t\tthis.ilibLocaleInfo = new LocaleInfo(this.locale);\r\n\t\tvar clockPref = this.ilibLocaleInfo.getClock();\r\n\t\tvar clock = clockPref !== 'locale' ? clockPref : undefined;\r\n\r\n\t\tvar fmtParams = {\r\n\t\t\tlocale: this.locale,\r\n\t\t\ttype: 'time',\r\n\t\t\ttime: 'hma',\r\n\t\t\tuseNative: false,\r\n\t\t\tclock: clock,\r\n\t\t\ttimezone: (this.mode === 'normal') ? 'local' : 'Etc/UTC'\r\n\t\t};\r\n\r\n\t\tthis._tf = new DateFmt(fmtParams);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trefreshChanged: function () {\r\n\t\tthis.startJob('refresh', this.bindSafely('refreshJob'), this.getRefresh());\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdateChanged: function () {\r\n\t\tif (this.date && !(this.date instanceof Date)) {\r\n\t\t\tthis.set('mode', 'static');\r\n\t\t} else if(this.date && this.date instanceof Date) {\r\n\t\t\tthis.set('mode', 'normal');\r\n\t\t\tthis._timeDiff = (this.date.getTime() - Date.now()) || 0;\r\n\t\t} else {\r\n\t\t\tthis.set('mode', 'normal');\r\n\t\t\tthis._timeDiff = 0;\r\n\t\t}\r\n\t\tthis.refreshJob();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trefreshJob: function () {\r\n\t\tthis.updateDate();\r\n\t\tif (this.mode === 'normal') {\r\n\t\t\tthis.startJob('refresh', this.bindSafely('refreshJob'), this.getRefresh());\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmodeChanged: function () {\r\n\t\tthis._refresh();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_refresh: function () {\r\n\t\tif (this._tf) {\r\n\t\t\tdelete this._tf;\r\n\t\t}\r\n\t\tthis.initILib();\r\n\t},\r\n\r\n\t/**\r\n\t* If user sets time without using a JavaScript Date object, this method\r\n\t* parses the object into an array for an `iLib.Date` object.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tparseStaticDate: function (date) {\r\n\t\treturn {\r\n\t\t\tyear: (date.year !== undefined) ? date.year : 0,\r\n\t\t\tmonth: (date.month !== undefined) ? date.month : 1,\r\n\t\t\tday: (date.day !== undefined) ? date.day : 0,\r\n\t\t\thour: (date.hour !== undefined) ? date.hour : 0,\r\n\t\t\tminute: (date.min !== undefined) ? date.min : 0,\r\n\t\t\tsecond: (date.sec !== undefined) ? date.sec : 0,\r\n\t\t\ttimezone: 'Etc/UTC'\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateDate: function () {\r\n\t\tvar d, h;\r\n\t\tif (this.mode === 'normal') {\r\n\t\t\td = new Date(Date.now() + this._timeDiff);\r\n\t\t\th = d.getHours();\r\n\t\t} else {\r\n\t\t\td = this.date;\r\n\t\t\th = (this.date.hour) ? this.date.hour : 0;\r\n\t\t}\r\n\t\tthis.updateTime(d, h);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateTime: function (inDate, inHour) {\r\n\t\tvar date = (this.mode === 'normal') ? {unixtime: inDate.getTime(), timezone:'Etc/UTC'} : this.parseStaticDate(inDate),\r\n\t\t\ttime = this._tf.format(dateFactory(date));\r\n\t\tthis.$.clock.setContent(time);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleLocaleChangeEvent: function () {\r\n\t\tthis._refresh();\r\n\t\tthis.updateDate();\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:moonstone/VideoInfoBackground~VideoInfoBackground} kind.\r\n* @module moonstone/VideoInfoBackground\r\n*/\r\n\r\nrequire('moonstone');\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tControl = require('enyo/Control');\r\n\r\n/**\r\n* {@link module:moonstone/VideoInfoBackground~VideoInfoBackground} is a [control]{@link module:enyo/Control~Control} that provides a\r\n* stylized background for [components]{@link module:enyo/Component~Component} placed in the\r\n* [infoComponents]{@link module:moonstone/VideoPlayer~VideoPlayer#infoComponents} block of a {@link module:moonstone/VideoPlayer~VideoPlayer}.\r\n* It is designed as a decorator, wrapping the components inside with the stylized background.\r\n*\r\n* Use the [orient]{@link module:moonstone/VideoInfoBackground~VideoInfoBackground#orient} property to set the orientation\r\n* (`'left'` or `'right'`).\r\n*\r\n* For more details, see {@link module:moonstone/VideoPlayer~VideoPlayer}.\r\n*\r\n* @class VideoInfoBackground\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/VideoInfoBackground~VideoInfoBackground.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.VideoInfoBackground',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-video-player-info-background',\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/VideoInfoBackground~VideoInfoBackground.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Orientation of the control; valid values are `'left'` and `'right'`.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'left'\r\n\t\t* @public\r\n\t\t*/\r\n\t\torient: 'left'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitComponents: function() {\r\n\t\tControl.prototype.initComponents.apply(this, arguments);\r\n\t\tthis.orientChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\torientChanged: function() {\r\n\t\tthis.addRemoveClass('right', this.orient != 'left');\r\n\t\tthis.addRemoveClass('left', this.orient == 'left');\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/ProgressBar~ProgressBar} kind.\r\n* @module moonstone/ProgressBar\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tControl = require('enyo/Control'),\r\n\tAnimator = require('enyo/Animator');\r\n\r\nvar\r\n\tdom = require('enyo/dom'),\r\n\tri = require('enyo/resolution'),\r\n\tutil = require('enyo/utils'),\r\n\tlog = require('enyo/logger'),\r\n\tControl = require('enyo/Control'),\r\n\tPopup = require('enyo/Popup');\r\n\r\nvar\r\n\tNumFmt = require('enyo-ilib/NumFmt');\r\n\r\n/**\r\n* Fires when progress bar finishes animating to a position. No event-specific data\r\n* is sent with this event.\r\n*\r\n* @event module:moonstone/ProgressBar~ProgressBar#onAnimateProgressFinish\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/ProgressBar~ProgressBar} is a [control]{@link module:enyo/Control~Control} that shows the current\r\n* progress of a process in a horizontal bar.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tProgressBar = require('moonstone/ProgressBar');\r\n*\r\n* \t{kind: ProgressBar, progress: 10}\r\n* ```\r\n*\r\n* To animate a progress change, call the\r\n* [animateProgressTo()]{@link module:moonstone/ProgressBar~ProgressBar#animateProgressTo} method:\r\n*\r\n* ```javascript\r\n* \tthis.$.progressBar.animateProgressTo(50);\r\n* ```\r\n*\r\n* You may customize the color of the bar by applying a style via the\r\n* [barClasses]{@link module:moonstone/ProgressBar~ProgressBar#barClasses} property, e.g.:\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tProgressBar = require('moonstone/ProgressBar');\r\n*\r\n* \t{kind: ProgressBar, barClasses: 'class-name'}\r\n* ```\r\n*\r\n* For more information, see the documentation on [Progress\r\n* Indicators]{@linkplain $dev-guide/building-apps/controls/progress-indicators.html}\r\n* in the Enyo Developer Guide.\r\n*\r\n* @class ProgressBar\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/ProgressBar~ProgressBar.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ProgressBar',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-progress-bar',\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/ProgressBar~ProgressBar.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Current position of progress bar.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tprogress: 0,\r\n\r\n\t\t/**\r\n\t\t* Minimum progress value (i.e., no progress made).\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmin: 0,\r\n\r\n\t\t/**\r\n\t\t* Maximum progress value (i.e., process complete).\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 100\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmax: 100,\r\n\r\n\t\t/**\r\n\t\t* CSS classes to apply to progress bar.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'moon-progress-bar-bar'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tbarClasses: 'moon-progress-bar-bar',\r\n\r\n\t\t/**\r\n\t\t* CSS classes to apply to background progress bar.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'moon-progress-bg-bar'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tbgBarClasses: 'moon-progress-bg-bar',\r\n\r\n\t\t/**\r\n\t\t* Completion percentage for background process.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tbgProgress: 0,\r\n\r\n\t\t/**\r\n\t\t* CSS classes to apply to the popup label.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'moon-progress-bar-popup-label'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpopupLabelClasses: 'moon-large-button-text moon-progress-bar-popup-label',\r\n\r\n\t\t/**\r\n\t\t* Color value of the popup.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default '#4d4d4d'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpopupColor: '#4d4d4d',\r\n\r\n\t\t/**\r\n\t\t* When `true`, a popup bubble is displayed at the point of progress\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpopup: false,\r\n\r\n\t\t/**\r\n\t\t* When `true`, the popup displays a percentage value (rather than an absolute value).\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tshowPercentage: true,\r\n\r\n\t\t/**\r\n\t\t* Popup width in pixels.\r\n\t\t*\r\n\t\t* @type {Number|String}\r\n\t\t* @default 'auto'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpopupWidth: 'auto',\r\n\r\n\t\t/**\r\n\t\t* Popup height in pixels; value should be less than `72`.\r\n\t\t*\r\n\t\t* @type {Number|String}\r\n\t\t* @default 67\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpopupHeight: 67,\r\n\r\n\t\t/**\r\n\t\t* Popup offset in pixels.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 8\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpopupOffset: 8,\r\n\r\n\t\t/**\r\n\t\t* Custom popup content (ignored if `null`).\r\n\t\t*\r\n\t\t* @type {String|null}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpopupContent: null,\r\n\r\n\t\t/**\r\n\t\t* When [orientation]{@link module:moonstone/ProgressBar~ProgressBar#orientation} is set to\r\n\t\t* 'vertical', the popup will show on the listed side.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'right'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpopupSide: 'right',\r\n\r\n\t\t/**\r\n\t\t* When `true`, popup content will have locale-safe uppercasing applied.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tuppercase: true,\r\n\r\n\t\t/**\r\n\t\t* Sets the orientation of ProgressBar. Choices are: 'horizontal' (default) or 'vertical'.\r\n\t\t* Horizontal progressbars move right and left, vertical progressbars move up and down.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'horizontal'\r\n\t\t* @public\r\n\t\t*/\r\n\t\torientation: 'horizontal',\r\n\r\n\t\t/**\r\n\t\t* @deprecated Replaced by [uppercase]{@link module:moonstone/Slider~Slider#uppercase}.\r\n\t\t*\r\n\t\t* Formerly defaulted to `true`, now defaults to `null` and will only have\r\n\t\t* an effect when explicitly set (for complete backward compatibility).\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpopupContentUpperCase: null\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\r\n\t\t/**\r\n\t\t* {@link module:moonstone/ProgressBar~ProgressBar#onAnimateProgressFinish}\r\n\t\t*/\r\n\t\tonAnimateProgressFinish: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'progressAnimator', kind: Animator, onStep: 'progressAnimatorStep', onEnd: 'progressAnimatorComplete'},\r\n\t\t{name: 'bgbar', kind: Control},\r\n\t\t{name: 'bar', kind: Control}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpopupLeftCanvasWidth: 27, // Popup left canvas width in pixel\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpopupRightCanvasWidth: 27, // Popup right canvas width in pixel\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpopupComponents: [\r\n\t\t{name: 'popup', kind: Popup, classes: 'moon-progress-bar-popup above', accessibilityDisabled: true, components: [\r\n\t\t\t{name: 'drawingLeft', kind: Control, tag: 'canvas', classes: 'moon-progress-bar-popup-left'},\r\n\t\t\t{name: 'popupLabel', kind: Control, classes: 'moon-progress-bar-popup-center' },\r\n\t\t\t{name: 'drawingRight', kind: Control, tag: 'canvas', classes: 'moon-progress-bar-popup-right'}\r\n\t\t]}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tthis._nf = new NumFmt({type: 'percentage', useNative: false});\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tthis.initPopup();\r\n\t\tthis.orientationChanged();\r\n\t\tthis.progressChanged();\r\n\t\tthis.barClassesChanged();\r\n\t\tthis.bgBarClassesChanged();\r\n\t\tthis.bgProgressChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitPopup: function () {\r\n\t\tif (this.popup) {\r\n\t\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\r\n\t\t\t// the popupContentUpperCase property is fully deprecated and removed. The legacy\r\n\t\t\t// property takes precedence if it exists.\r\n\t\t\tif (this.popupContentUpperCase !== null) this.uppercase = this.popupContentUpperCase;\r\n\t\t\tthis.createPopup();\r\n\t\t\tthis.initPopupStyles();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreatePopup: function () {\r\n\t\tthis.createComponents(this.popupComponents, {owner: this});\r\n\t\tthis.$.popup.setAutoDismiss(false);\r\n\t\tthis.$.popup.show();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitPopupStyles: function () {\r\n\t\tthis.popupLabelClassesChanged();\r\n\t\tthis.popupContentChanged();\r\n\t\tthis.updatePopupLabelColor();\r\n\t\tthis.updatePopupHeight();\r\n\t\tthis.updatePopupOffset();\r\n\t\tthis.popupWidthChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdestroy: function () {\r\n\t\tif(this._nf){\r\n\t\t\tdelete this._nf;\r\n\t\t}\r\n\t\tControl.prototype.destroy.apply(this, arguments);\r\n\t},\r\n\r\n\trendered: function () {\r\n\t\tControl.prototype.rendered.apply(this, arguments);\r\n\t\tif(this.$.popup){\r\n\t\t\tthis.drawToCanvas(this.popupColor);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\torientationChanged: function () {\r\n\t\tvar orient = this.get('orientation');\r\n\t\tthis.addRemoveClass('moon-progress-bar-vertical', orient == 'vertical');\r\n\t\tthis.addRemoveClass('moon-progress-bar-horizontal', orient == 'horizontal');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpopupSideChanged: function () {\r\n\t\tthis.updatePopup(this.progress);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbarClassesChanged: function (inOld) {\r\n\t\tthis.$.bar.removeClass(inOld);\r\n\t\tthis.$.bar.addClass(this.barClasses);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbgBarClassesChanged: function (inOld) {\r\n\t\tthis.$.bgbar.removeClass(inOld);\r\n\t\tthis.$.bgbar.addClass(this.bgBarClasses);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbgProgressChanged: function () {\r\n\t\tthis.bgProgress = this.clampValue(this.min, this.max, this.bgProgress);\r\n\t\tvar p = this.calcPercent(this.bgProgress);\r\n\t\tthis.updateBgBarPosition(p);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tprogressChanged: function () {\r\n\t\tthis.progress = this.clampValue(this.min, this.max, this.progress);\r\n\t\tthis.updateBarPosition(this.calcPercent(this.progress));\r\n\t\tif (this.popup) {\r\n\t\t\tthis.updatePopup(this.progress);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowPercentageChanged: function () {\r\n\t\tthis.updatePopup(this.progress);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclampValue: function (inMin, inMax, inValue) {\r\n\t\treturn Math.max(inMin, Math.min(inValue, inMax));\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcRatio: function (inValue) {\r\n\t\treturn (inValue - this.min) / (this.max - this.min);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcPercent: function (inValue) {\r\n\t\treturn this.calcRatio(inValue) * 100;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateBarPosition: function (inPercent) {\r\n\t\tthis.$.bar.applyStyle(this.get('orientation') == 'vertical' ? 'height' : 'width', inPercent + '%');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateBgBarPosition: function (inPercent) {\r\n\t\tthis.$.bgbar.applyStyle(this.get('orientation') == 'vertical' ? 'height' : 'width', inPercent + '%');\r\n\t},\r\n\r\n\t/**\r\n\t* Animates progress to the passed-in value.\r\n\t*\r\n\t* @param {Number} inValue  The destination number\r\n\t* @public\r\n\t*/\r\n\tanimateProgressTo: function (inValue) {\r\n\t\tthis.$.progressAnimator.play({\r\n\t\t\tstartValue: this.progress,\r\n\t\t\tendValue: inValue,\r\n\t\t\tnode: this.hasNode()\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tprogressAnimatorStep: function (inSender) {\r\n\t\tthis.setProgress(inSender.value);\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:moonstone/ProgressBar~ProgressBar#onAnimateProgressFinish\r\n\t* @private\r\n\t*/\r\n\tprogressAnimatorComplete: function (inSender) {\r\n\t\tthis.doAnimateProgressFinish();\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpopupChanged: function () {\r\n\t\tif (this.popup && !this.$.popup) {\r\n\t\t\tthis.createPopup();\r\n\t\t\tthis.initPopupStyles();\r\n\t\t\tthis.orientationChanged();\r\n\t\t\tthis.render();\r\n\t\t} else if (!this.popup && this.$.popup) {\r\n\t\t\tthis.$.popup.destroy();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdatePopup: function (val) {\r\n\t\tvar usePercentage, percent, popupLabel, flip;\r\n\t\tif (this.popup) {\r\n\t\t\tusePercentage = this.showPercentage && this.popupContent === null;\r\n\t\t\tpercent = this.calcPercent(val);\r\n\t\t\tpopupLabel = usePercentage ? percent : val;\r\n\t\t\tflip = (this.get('orientation') == 'vertical') ? (this.get('popupSide') == 'left') : percent > 50;\r\n\r\n\t\t\tthis.updatePopupPosition(percent);\r\n\t\t\tthis.$.popup.addRemoveClass('moon-progress-bar-popup-flip-h', flip);\r\n\t\t\tthis.$.popupLabel.addRemoveClass('moon-progress-bar-popup-flip-h', flip);\r\n\r\n\t\t\tthis.updatePopupLabel(popupLabel);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Refactored out so that Slider can position the knob instead of the popup\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdatePopupPosition: function (percent) {\r\n\t\tif (this.popup) {\r\n\t\t\tthis.$.popup.applyStyle(this.get('orientation') == 'vertical' ? 'bottom' : 'left', percent + '%');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpopupLabelClassesChanged: function (was) {\r\n\t\tif (this.popup) {\r\n\t\t\tthis.$.popupLabel.removeClass(was);\r\n\t\t\tthis.$.popupLabel.addClass(this.popupLabelClasses);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdatePopupOffset: function () {\r\n\t\tif (this.popup) {\r\n\t\t\tthis.$.popup.applyStyle('top', dom.unit(-(ri.scale(this.getPopupHeight() + this.getPopupOffset() + 5)), 'rem'));\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Updates popup offset.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpopupOffsetChanged: function () {\r\n\t\tif (this.popup) {\r\n\t\t\tthis.updatePopupOffset();\r\n\t\t\tthis.drawToCanvas(this.popupColor);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Updates popup width.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpopupWidthChanged: function () {\r\n\t\tif (this.popup && this.popupWidth != 'auto') {\r\n\t\t\tthis.$.popupLabel.applyStyle('width', dom.unit( this.getPopupWidth() - (this.popupLeftCanvasWidth + this.popupRightCanvasWidth) , 'rem'));\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdatePopupHeight: function () {\r\n\t\tvar h = this.getPopupHeight(),\r\n\t\t\thRem = ri.scale(h);\r\n\r\n\t\tthis.$.drawingLeft.setAttribute('height', hRem);\r\n\t\tthis.$.drawingRight.setAttribute('height', hRem);\r\n\t\tthis.$.popupLabel.applyStyle('height', dom.unit(ri.scale(h - 7), 'rem'));\r\n\t\tthis.$.popup.applyStyle('height', dom.unit(hRem, 'rem'));\r\n\t\tthis.$.popup.applyStyle('line-height', dom.unit(ri.scale(h - 6), 'rem'));\r\n\t},\r\n\r\n\t/**\r\n\t* Updates popup height.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpopupHeightChanged: function () {\r\n\t\tif (this.popup) {\r\n\t\t\tif (this.getPopupHeight() >= 72) {\r\n\t\t\t\tlog.warn('This popupHeight API is designed for under 72 pixels.');\r\n\t\t\t}\r\n\r\n\t\t\tthis.updatePopupHeight();\r\n\t\t\tthis.popupOffsetChanged();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdatePopupLabelColor: function () {\r\n\t\tif (this.popup) {\r\n\t\t\tthis.$.popupLabel.applyStyle('background-color', this.popupColor);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Updates popup color.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpopupColorChanged: function () {\r\n\t\tif (this.popup) {\r\n\t\t\tthis.drawToCanvas(this.popupColor);\r\n\t\t\tthis.updatePopupLabelColor();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Updates popup content.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpopupContentChanged: function () {\r\n\t\tvar content;\r\n\t\tif (this.popup) {\r\n\t\t\tcontent = this.getPopupContent();\r\n\t\t\tthis._popupContent = this.get('uppercase') ? util.toUpperCase(content) : content;\r\n\t\t\t// != null allows 0 but avoids undefined and null\r\n\t\t\tif (this._popupContent != null && this._popupContent !== '') {\r\n\t\t\t\tthis.$.popupLabel.set('content', this._popupContent);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tuppercaseChanged: function () {\r\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\r\n\t\t// popupContentUpperCase is fully deprecated and removed.\r\n\t\tif (this.popupContentUpperCase != this.uppercase) this.popupContentUpperCase = this.uppercase;\r\n\t\tthis.popupContentChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpopupContentUpperCaseChanged: function () {\r\n\t\tif (this.uppercase != this.popupContentUpperCase) this.uppercase = this.popupContentUpperCase;\r\n\t\tthis.uppercaseChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdatePopupLabel: function (val) {\r\n\t\tvar label;\r\n\t\tif (this.popup) {\r\n\t\t\tlabel = this._popupContent || this.calcPopupLabel(val);\r\n\t\t\tif (label != null && label !== '') {\r\n\t\t\t\tthis.$.popupLabel.set('content', label);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcPopupLabel: function (val) {\r\n\t\tif (this.showPercentage) {\r\n\t\t\tval = this._nf.format(Math.round(val));\r\n\t\t}\r\n\t\treturn val;\r\n\t},\r\n\r\n\t\t/**\r\n\t* @private\r\n\t*/\r\n\tdrawToCanvas: function (bgColor) {\r\n\t\tbgColor = bgColor  || dom.getComputedStyleValue(this.$.knob.hasNode(), 'background-color');\r\n\t\tvar h = ri.scale( this.getPopupHeight()+1 ), // height total\r\n\t\t\thb = h - ri.scale(8), // height bubble\r\n\t\t\thbc = (hb)/2, // height of bubble's center\r\n\t\t\twre = ri.scale(26), // width's edge\r\n\t\t\tr = hbc, // radius is half the bubble height\r\n\t\t\tbcr = ri.scale(50), // bottom curve radius 50\r\n\t\t\tbcy = hb + bcr, //calculate the height of the center of the circle plus the radius to get the y coordinate of the circle to draw the bottom irregular arc\r\n\t\t\tlw = 1, // line width that will be tucked under the neighboring dom element's edge\r\n\t\t\tdrawingLeft = this.$.drawingLeft,\r\n\t\t\tdrawingRight = this.$.drawingRight,\r\n\t\t\tctxLeft, ctxRight;\r\n\r\n\t\tif (drawingLeft) {\r\n\t\t\tctxLeft = drawingLeft.hasNode().getContext('2d'),\r\n\t\t\tdrawingLeft.setAttribute('width', ri.scale( this.popupLeftCanvasWidth) );\r\n\r\n\t\t\t// Set styles. Default color is knob's color\r\n\t\t\tctxLeft.fillStyle = bgColor;\r\n\t\t\t// Draw shape with arrow on left\r\n\t\t\tctxLeft.moveTo(0, h);\r\n\t\t\t// arc(x, y, radius, startAngle, endAngle, counterClockwise);\r\n\t\t\tctxLeft.arc(wre, bcy, bcr, 1.35 * Math.PI, 1.485 * Math.PI, false);\r\n\t\t\tctxLeft.lineTo(wre, hb);\r\n\t\t\tctxLeft.lineTo(wre, 0);\r\n\t\t\tctxLeft.arcTo(0, 0, 0, hbc, r);\r\n\t\t\tctxLeft.lineTo(0, h);\r\n\t\t\tctxLeft.fill();\r\n\t\t\t// Add a spacer line\r\n\t\t\tctxLeft.beginPath();\r\n\t\t\tctxLeft.lineWidth = lw+1;\r\n\t\t\tctxLeft.strokeStyle = bgColor;\r\n\t\t\tctxLeft.moveTo(wre+lw, 0);\r\n\t\t\tctxLeft.lineTo(wre+lw, hb);\r\n\t\t\tctxLeft.stroke();\r\n\t\t}\r\n\r\n\t\tif (drawingRight) {\r\n\t\t\tctxRight = drawingRight.hasNode().getContext('2d');\r\n\t\t\tdrawingRight.setAttribute('width', ri.scale( this.popupRightCanvasWidth) );\r\n\r\n\t\t\t// Set styles. Default color is knob's color\r\n\t\t\tctxRight.fillStyle = bgColor;\r\n\t\t\t// Draw shape with arrow on right\r\n\t\t\tctxRight.moveTo(lw, hb);\r\n\t\t\tctxRight.arcTo(wre+lw, hb, wre+lw, hbc, r);\r\n\r\n\t\t\tctxRight.arcTo(wre+lw, 0, lw, 0, r);\r\n\t\t\tctxRight.lineTo(0, 0);\r\n\t\t\tctxRight.fill();\r\n\t\t\t// Add a spacer line\r\n\t\t\tctxRight.beginPath();\r\n\t\t\tctxRight.lineWidth = lw+1;\r\n\t\t\tctxRight.strokeStyle = bgColor;\r\n\t\t\tctxRight.moveTo(0, 0);\r\n\t\t\tctxRight.lineTo(0, hb);\r\n\t\t\tctxRight.stroke();\r\n\t\t}\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @default progressbar\r\n\t* @type {String}\r\n\t* @see enyo/AccessibilitySupport~AccessibilitySupport#accessibilityRole\r\n\t* @public\r\n\t*/\r\n\taccessibilityRole: 'progressbar',\r\n\r\n\t/**\r\n\t* Custom value for accessibility (ignored if `null`).\r\n\t*\r\n\t* @type {String|null}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\taccessibilityValueText: null,\r\n\r\n\t/**\r\n\t* When `true`, VoiceReadout will be prevented.\r\n\t*\r\n\t* @default true\r\n\t* @type {Boolean}\r\n\t* @public\r\n\t*/\r\n\taccessibilityDisabled: true,\r\n\r\n\t/**\r\n\t* ProgressBar isn't spottable so we'll make it focusable manually\r\n\t*\r\n\t* @private\r\n\t*/\r\n\ttabIndex: -1,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t// TODO: Observing $.popupLabel.content to minimize the observed members. Some refactoring\r\n\t\t// of the label determination could help here - rjd\r\n\t\t{path: ['accessibilityValueText', 'progress', 'popup', 'popupContent', 'showPercentage'], method: 'ariaValue'}\r\n\t],\r\n\r\n\t/**\r\n\t* Determines the text or value to set as the accessible value for the progress bar\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tariaValue: function () {\r\n\t\tvar value = this.$.progressAnimator.isAnimating() ? this.$.progressAnimator.endValue : this.progress,\r\n\t\t\tusePercent = this.popup && this.showPercentage && !this.popupContent,\r\n\t\t\ttext = this.accessibilityValueText ||\r\n\t\t\t\t\tthis.popup && this.popupContent ||\r\n\t\t\t\t\tusePercent && this.calcPopupLabel(this.calcPercent(value)) ||\r\n\t\t\t\t\tvalue;\r\n\t\tthis.setAriaAttribute('aria-valuetext', text);\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/PlaylistSupport~PlaylistSupport}\r\n* mixin.\r\n* @wip\r\n* @module moonstone/PlaylistSupport\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\n/**\r\n* The {@link module:moonstone/PlaylistSupport~PlaylistSupport} {@glossary mixin}\r\n* should be used with player controls like audio player or video player, whose\r\n* playback order is determined by various options.\r\n*\r\n* @mixin\r\n* @wip\r\n* @public\r\n*/\r\n\r\nvar PlaylistSupport = {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'PlaylistSupport',\r\n\r\n\t/**\r\n\t* Valid values are `'none'`, `'one'`, and `'all'`.  When `'none'`, audio is\r\n\t* played back with no repeating; when `'one'`, one audio track is repeated;\r\n\t* when `'all'`, the entire playlist is repeated.\r\n\t*\r\n\t* @type {String}\r\n\t* @default 'none'\r\n\t* @public\r\n\t*/\r\n\trepeat: undefined,\r\n\r\n\t/**\r\n\t* When `true`, audio tracks are shuffled for playback;\r\n\t* when `false`, audio tracks are played in queue order.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tshuffle: undefined,\r\n\r\n\t/**\r\n\t* After this amount of time, audio track is played from start.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default 2\r\n\t* @public\r\n\t*/\r\n\tplayPrevThreshold: undefined,\r\n\r\n\t/**\r\n\t* Playlist of tracks.\r\n\t*\r\n\t* @type {Collection}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\tcollection: undefined,\r\n\r\n\t/**\r\n\t* Array of indices indicating playback order of tracks.\r\n\t*\r\n\t* @type {Array}\r\n\t* @default empty array\r\n\t* @private\r\n\t*/\r\n\tplayOrder: [],\r\n\r\n\t/**\r\n\t* Whether to show jump controls by default.\r\n\t* Default jump control behavior is overridden for playlist.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @private\r\n\t*/\r\n\tshowJumpControls: true,\r\n\r\n\t/**\r\n\t* When `true`, jump controls' default hold behavior is disabled.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @private\r\n\t*/\r\n\tjumpStartEnd: true,\r\n\r\n\t/**\r\n\t* Event handlers for playlist.\r\n\t* @private\r\n\t*/\r\n\t_playlist_Handlers: {\r\n\t\tonRequestAddAudio: '_addAudio',\r\n\t\tonRequestRemoveAudio: '_removeAudio',\r\n\t\tonPlayPrevious: 'previous',\r\n\t\tonPlayNext: 'next',\r\n\t\tonRequestShuffle: 'toggleShuffle',\r\n\t\tonRequestRepeat: 'toggleRepeat'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tobservers: [\r\n\t\t{method: 'collectionChanged', path: ['collection']}\r\n\t],\r\n\r\n\t/**\r\n\t* Initializes properties.\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.repeat    = (this.repeat    === undefined) ? 'none' : this.repeat;\r\n\t\t\tthis.shuffle    = (this.shuffle    === undefined) ? false : this.shuffle;\r\n\t\t\tthis.collection   = (this.collection   === undefined) ? null : this.collection;\r\n\t\t\tthis.autoPlayOnShuffle = (this.autoPlayOnShuffle === undefined) ? false : this.autoPlayOnShuffle;\r\n\t\t\tthis.playPrevThreshold = (this.playPrevThreshold === undefined) ? 2 : this.playPrevThreshold;\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdispatchEvent: kind.inherit(function (sup) {\r\n\t\treturn function (sEventName, oEvent, oSender) {\r\n\t\t\t// Needed for proper onenter/onleave handling\r\n\t\t\tif (this.strictlyInternalEvents[sEventName] && this.isInternalEvent(oEvent)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\t// FIXME: not sure why events can arrive without event objects, but we guard here for safety\r\n\t\t\tif (oEvent && !oEvent.delegate) {\r\n\t\t\t\tvar handler = this._playlist_Handlers[sEventName];\r\n\t\t\t\tif (handler){\r\n\t\t\t\t\tthis.cachePoint = true;\r\n\t\t\t\t\tif(this[handler](oSender, oEvent)) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn sup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Returns a model containing information for next audio track.\r\n\t* The `repeat` and `shuffle` flags are referenced when determining the next\r\n\t* audio track to play.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tgetNext: function (model) {\r\n\t\tvar c = this.get('collection');\r\n\t\tif (this.repeat == 'one' || !c)\r\n\t\t\treturn this.get('model');\r\n\r\n\t\tvar\tindex = c.indexOf(model);\r\n\t\tif (index != -1) {\r\n\t\t\tindex = this.shuffle ? this.playOrder.indexOf(index) : index;\r\n\t\t\tindex++;\r\n\t\t\tindex = this.repeat == 'all' ? index % c.length : Math.min(index, c.length-1);\r\n\t\t} else {\r\n\t\t\t// If it fails to find current on collection, we assume model is set directly by user.\r\n\t\t\t// We come back to collection by set first item from collection as next\r\n\t\t\tindex = 0;\r\n\t\t}\r\n\r\n\t\treturn this.getTrackAt(index);\r\n\t},\r\n\r\n\t/**\r\n\t* Returns a model containing information for previous audio track.\r\n\t* The `repeat` and `shuffle` flags are referenced when determining the next\r\n\t* audio track to play.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tgetPrevious: function (model) {\r\n\t\tvar c = this.get('collection');\r\n\t\tif (this.repeat == 'one' || !c)\r\n\t\t\treturn this.get('model');\r\n\r\n\t\tvar\tindex = c.indexOf(model);\r\n\t\tif (index != -1) {\r\n\t\t\tindex = this.shuffle ? this.playOrder.indexOf(index) : index;\r\n\t\t\tindex--;\r\n\t\t\tindex = this.repeat == 'all' ? index % c.length : Math.max(index, 0);\r\n\t\t} else {\r\n\t\t\t// If it fails to find current on collection, we assume model is set directly by user.\r\n\t\t\t// We come back to collection by set first item from collection as previous\r\n\t\t\tindex = 0;\r\n\t\t}\r\n\r\n\t\treturn this.getTrackAt(index);\r\n\t},\r\n\r\n\t/**\r\n\t* Returns model containing information for audio track at specified index in\r\n\t* play order.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tgetTrackAt: function (order) {\r\n\t\tvar c = this.get('collection');\r\n\t\treturn c ? c.at(this.shuffle ? this.playOrder[order] : order) : null;\r\n\t},\r\n\r\n\t/**\r\n\t* Adds audio track to playlist.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\taddAudio: function (model) {\r\n\t\tvar c = this.get('collection');\r\n\t\tif (c) c.add(model);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_addAudio: function (sender, ev) {\r\n\t\tthis.addAudio(ev.model);\r\n\t},\r\n\r\n\t/**\r\n\t* Removes audio track from playlist.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tremoveAudio: function (model) {\r\n\t\tvar c = this.get('collection');\r\n\t\tif (c) c.remove(model);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_removeAudio: function (sender, ev) {\r\n\t\tthis.removeAudio(ev.model);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcollectionChanged: function(prev, current) {\r\n\t\tthis.shufflePlayOrder();\r\n\t},\r\n\r\n\t/**\r\n\t* Hook player default handler.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tjumpBackward: function (sender, ev) {\r\n\t\tthis.previous(sender, ev);\r\n\t},\r\n\r\n\t/**\r\n\t* Hook player default handler.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tjumpForward: function (sender, ev) {\r\n\t\tthis.next(sender, ev);\r\n\t},\r\n\r\n\t/**\r\n\t* Called when the Rewind or Previous button is pressed.\r\n\t* If `currentTime` is greater than `playPrevThreshold`, the play position\r\n\t* will be reset.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tprevious: function (sender, ev) {\r\n\t\tif (this.getCurrentTime() > this.playPrevThreshold ||\r\n\t\t\tthis.repeat == 'one' ||\r\n\t\t\t(this.repeat == 'none' && this.index === 0)) {\r\n\t\t\tthis.seekTo(0);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar prevModel = this.getPrevious(this.get('model'));\r\n\t\tif (!prevModel || (this.repeat == 'none' && this.get('model') == prevModel)) {\r\n\t\t\tthis.stop();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.set('model', prevModel);\r\n\t\tthis.play();\r\n\t},\r\n\r\n\t/**\r\n\t* Called when the Fast Forward or Next button is pressed.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tnext: function (sender, ev) {\r\n\t\tvar nextModel = this.getNext(this.get('model'));\r\n\t\tif (!nextModel || (this.repeat == 'none' && this.get('model') == nextModel)) {\r\n\t\t\tthis.stop();\r\n\t\t\tthis.emit('onPlaylistEnd', {playback: this, collection: this.collection});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.set('model', nextModel);\r\n\t\tthis.play();\r\n\t},\r\n\r\n\t/**\r\n\t* Called when the Shuffle button is pressed.  Toggles `shuffle` flag.\r\n\t* When the flag is set to `false`, tracks are played in queue order;\r\n\t* when it is set to `true`, tracks are played in shuffled order.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\ttoggleShuffle: function (shuffleOrder) {\r\n\t\tthis.set('shuffle', !this.shuffle);\r\n\t\tif (this.shuffle) {\r\n\t\t\tthis.shufflePlayOrder();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Shuffles play sequence.\r\n\t*\r\n\t* @protected\r\n\t*/\r\n\tshufflePlayOrder: function () {\r\n\t\tvar c = this.get('collection'),\r\n\t\t\tlength = c ? c.length : 0,\r\n\t\t\tidx = length,\r\n\t\t\ttmp, r;\r\n\r\n\t\tthis.playOrder = [];\r\n\t\tfor (var i=0; i<length; i++) {\r\n\t\t\tthis.playOrder.push(i);\r\n\t\t}\r\n\r\n\t\t// While there remain elements to shuffle...\r\n\t\twhile (0 !== idx) {\r\n\r\n\t\t\t// Pick a remaining element...\r\n\t\t\tr = Math.floor(Math.random() * idx);\r\n\t\t\tidx -= 1;\r\n\r\n\t\t\t// And swap it with the current element.\r\n\t\t\ttmp = this.playOrder[idx];\r\n\t\t\tthis.playOrder[idx] = this.playOrder[r];\r\n\t\t\tthis.playOrder[r] = tmp;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Changes value of `repeat` option referenced by `getPrevious()` and `getNext()`.\r\n\t* Valid values for `repeat`, in sequential order, are `'none'`, `'one'`, and `'all'`.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\ttoggleRepeat: function () {\r\n\t\tswitch (this.repeat) {\r\n\t\t\tcase 'none':\r\n\t\t\t\tthis.set('repeat', 'one');\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'one':\r\n\t\t\t\tthis.set('repeat', 'all');\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'all':\r\n\t\t\t\tthis.set('repeat', 'none');\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Called when playback of an audio track ends.\r\n\t* Determines whether to play next track, referencing the `repeat` flag.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tonPlayEnd: function (sender, ev) {\r\n\t\tif (!this.get('model')) return; // When set model as null, abort is call onEnd\r\n\t\tthis.next();\r\n\t}\r\n};\r\n\r\nmodule.exports = PlaylistSupport;\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/CaptionDecorator~CaptionDecorator} kind.\r\n* @module moonstone/CaptionDecorator\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom'),\r\n\tutils = require('enyo/utils'),\r\n\tControl = require('enyo/Control');\r\n\r\n/**\r\n* {@link module:moonstone/CaptionDecorator~CaptionDecorator} wraps a control with a caption. The position of the\r\n* caption is defined via the [side]{@link module:moonstone/CaptionDecorator~CaptionDecorator#side} property.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tButton = require('moonstone/Button'),\r\n* \t\tCaptionDecorator = require('moonstone/CaptionDecorator');\r\n*\r\n* \t{kind: CaptionDecorator, side: 'top', content: 'Top Label', components: [\r\n* \t\t{kind: Button, content: 'My Button', ontap: 'buttonTapped'},\r\n* \t]}\r\n* ```\r\n*\r\n* @class CaptionDecorator\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/CaptionDecorator~CaptionDecorator.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.CaptionDecorator',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonSpotlightFocus: 'spotFocus',\r\n\t\tonSpotlightBlur:  'spotBlur'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/CaptionDecorator~CaptionDecorator.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* The position of the caption with respect to the wrapped control; valid\r\n\t\t* values are `'top'`, `'bottom'`, `'left'`, and `'right'`.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'top'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tside: 'top',\r\n\r\n\t\t/**\r\n\t\t* If `true`, the caption is only shown when the wrapped control has Spotlight\r\n\t\t* focus; otherwise, it is always visible.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tshowOnFocus: false\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcaptionPositioned: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclientBounds: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcaptionBounds: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdecoratorBounds: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-button-caption-decorator',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{kind: Control, name: 'leftCaption',     classes: 'moon-divider-text moon-caption left',   canGenerate: false},\r\n\t\t{kind: Control, name: 'topCaption',      classes: 'moon-divider-text moon-caption top',    canGenerate: false},\r\n\t\t{kind: Control, name: 'client',          classes: 'moon-divider-text moon-caption-client'},\r\n\t\t{kind: Control, name: 'rightCaption',    classes: 'moon-divider-text moon-caption right',  canGenerate: false},\r\n\t\t{kind: Control, name: 'bottomCaption',   classes: 'moon-divider-text moon-caption bottom', canGenerate: false}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tthis.sideChanged();\r\n\t\tthis.showOnFocusChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* If [showOnFocus]{@link module:moonstone/CaptionDecorator~CaptionDecorator#showOnFocus} is `true`, caption\r\n\t* position is reset on reflow.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\treflow: function () {\r\n\t\tControl.prototype.reflow.apply(this, arguments);\r\n\r\n\t\tif (this.getShowOnFocus()) {\r\n\t\t\tthis.resetCaptionPosition();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Retrieves [side]{@link module:moonstone/CaptionDecorator~CaptionDecorator#side} value.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgetSide: function () {\r\n\t\treturn this.side || 'top';\r\n\t},\r\n\r\n\t// Change handlers\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsideChanged: function () {\r\n\t\tvar side = this.getSide();\r\n\r\n\t\tthis.$.topCaption.canGenerate =     (side === 'top');\r\n\t\tthis.$.rightCaption.canGenerate =   (side === 'right');\r\n\t\tthis.$.bottomCaption.canGenerate =  (side === 'bottom');\r\n\t\tthis.$.leftCaption.canGenerate =    (side === 'left');\r\n\r\n\t\t// Update the content, including position if needed\r\n\t\tthis.contentChanged();\r\n\r\n\t\t// If this control has already been rendered, re-render to update caption side\r\n\t\tif (this.hasNode()) {\r\n\t\t\t// Re-render to display caption on proper side\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowOnFocusChanged: function () {\r\n\t\tthis.addRemoveClass('showOnFocus', this.getShowOnFocus());\r\n\r\n\t\t// If `showOnFocus` is `true`, reset caption position\r\n\t\tif (this.hasNode() && this.getShowOnFocus()) {\r\n\t\t\tthis.resetCaptionPosition();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontentChanged: function () {\r\n\t\tthis.$[this.getSide()+'Caption'].setContent(this.getContent());\r\n\r\n\t\t// If `showOnFocus` is `true`, reset caption position\r\n\t\tif (this.hasNode() && this.getShowOnFocus()) {\r\n\t\t\tthis.resetCaptionPosition();\r\n\t\t}\r\n\t},\r\n\r\n\t// Event handlers\r\n\r\n\t/**\r\n\t* Adds `spotlight` class when button is focused, and calculates caption position\r\n\t* if required.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tspotFocus: function () {\r\n\t\tthis.addClass('spotlight');\r\n\r\n\t\tif (this.hasNode() && this.getShowOnFocus()) {\r\n\t\t\tthis.positionCaption();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Removes `spotlight` class when button is blurred.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tspotBlur: function () {\r\n\t\tthis.removeClass('spotlight');\r\n\t},\r\n\r\n\t// Caption positioning\r\n\r\n\t/**\r\n\t* Returns current caption control.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgetCaptionControl: function () {\r\n\t\treturn this.$[this.getSide()+'Caption'];\r\n\t},\r\n\r\n\t/**\r\n\t* Resets cached position values and repositions caption if currently spotted.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tresetCaptionPosition: function () {\r\n\t\tthis.resetCachedBounds();\r\n\t\tthis.captionPositioned = false;\r\n\r\n\t\tif (this.hasNode() && this.hasClass('spotlight')) {\r\n\t\t\tthis.positionCaption();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Positions caption based on the value of [side]{@link module:moonstone/CaptionDecorator~CaptionDecorator#side}.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpositionCaption: function () {\r\n\t\tif (this.captionPositioned) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar bounds = this.getDecoratorBounds(),\r\n\t\t\tclientBounds = this.getClientBounds(),\r\n\t\t\tcaptionBounds = this.getCaptionBounds();\r\n\r\n\t\tswitch (this.getSide()) {\r\n\t\tcase 'left':\r\n\t\t\tthis.centerCaptionVertically(bounds, captionBounds);\r\n\t\t\tthis.positionCaptionAtLeftEdge(bounds, clientBounds, captionBounds);\r\n\t\t\tbreak;\r\n\t\tcase 'right':\r\n\t\t\tthis.centerCaptionVertically(bounds, captionBounds);\r\n\t\t\tthis.positionCaptionAtRightEdge(bounds, clientBounds, captionBounds);\r\n\t\t\tbreak;\r\n\t\tcase 'top':\r\n\t\t\tthis.centerCaptionHorizontally(bounds, captionBounds);\r\n\t\t\tthis.positionCaptionAtTopEdge(bounds, clientBounds, captionBounds);\r\n\t\t\tbreak;\r\n\t\tcase 'bottom':\r\n\t\t\tthis.centerCaptionHorizontally(bounds, captionBounds);\r\n\t\t\tthis.positionCaptionAtBottomEdge(bounds, clientBounds, captionBounds);\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis.captionPositioned = true;\r\n\t},\r\n\r\n\t/**\r\n\t* Centers caption control vertically, relative to `this.decoratorBounds.height`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcenterCaptionVertically: function (inBounds, inCaptionBounds) {\r\n\t\tthis.getCaptionControl().applyStyle('top', dom.unit((inBounds.height - inCaptionBounds.height) / 2, 'rem'));\r\n\t},\r\n\r\n\t/**\r\n\t* Centers caption control horizontally, relative to `this.decoratorBounds.width`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcenterCaptionHorizontally: function (inBounds, inCaptionBounds) {\r\n\t\tthis.getCaptionControl().applyStyle('left', dom.unit((inBounds.width - inCaptionBounds.width) / 2, 'rem'));\r\n\t},\r\n\r\n\t/**\r\n\t* Positions caption at left edge of `this.$.client`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpositionCaptionAtLeftEdge: function (inBounds, inClientBounds, inCaptionBounds) {\r\n\t\tvar position = (-1 * inCaptionBounds.width) + ((inBounds.width - inClientBounds.width)/2) - inCaptionBounds.marginRight;\r\n\t\tthis.getCaptionControl().applyStyle('left', dom.unit(position, 'rem'));\r\n\t},\r\n\r\n\t/**\r\n\t* Positions caption at right edge of `this.$.client`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpositionCaptionAtRightEdge: function (inBounds, inClientBounds, inCaptionBounds) {\r\n\t\tvar position = inBounds.width - ((inBounds.width - inClientBounds.width)/2);\r\n\t\tthis.getCaptionControl().applyStyle('left', dom.unit(position, 'rem'));\r\n\t},\r\n\r\n\t/**\r\n\t* Positions caption at top edge of `this.$.client`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpositionCaptionAtTopEdge: function (inBounds, inClientBounds, inCaptionBounds) {\r\n\t\tvar position = (-1 * this.getCaptionBounds().height) + ((inBounds.height - inClientBounds.height)/2) - inCaptionBounds.marginBottom;\r\n\t\tthis.getCaptionControl().applyStyle('top', dom.unit(position, 'rem'));\r\n\t},\r\n\r\n\t/**\r\n\t* Positions caption at bottom edge of `this.$.client`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpositionCaptionAtBottomEdge: function (inBounds, inClientBounds, inCaptionBounds) {\r\n\t\tvar position = inBounds.height - ((inBounds.height - inClientBounds.height)/2);\r\n\t\tthis.getCaptionControl().applyStyle('top', dom.unit(position, 'rem'));\r\n\t},\r\n\r\n\t/**\r\n\t* Caches result from `this.getBounds()` call, saving in `this.decoratorBounds`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgetDecoratorBounds: function () {\r\n\t\tthis.decoratorBounds = this.decoratorBounds || this.getBounds();\r\n\t\treturn this.decoratorBounds;\r\n\t},\r\n\r\n\t/**\r\n\t* Caches caption bounds, saving in `this.captionBounds`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgetCaptionBounds: function () {\r\n\t\tthis.captionBounds = this.captionBounds || utils.mixin(this.getCaptionControl().getBounds(), this.getCaptionMarginBounds());\r\n\t\treturn this.captionBounds;\r\n\t},\r\n\r\n\t/**\r\n\t* Caches client bounds, saving in `this.clientBounds`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgetClientBounds: function () {\r\n\t\tthis.clientBounds = this.clientBounds || this.$.client.getBounds();\r\n\t\treturn this.clientBounds;\r\n\t},\r\n\r\n\t/**\r\n\t* Clears cached bounds.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tresetCachedBounds: function () {\r\n\t\tthis.clientBounds = null;\r\n\t\tthis.captionBounds = null;\r\n\t\tthis.decoratorBounds = null;\r\n\t},\r\n\r\n\t/**\r\n\t* Returns margins of caption control.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgetCaptionMarginBounds: function () {\r\n\t\tvar margins = dom.calcMarginExtents(this.getCaptionControl().hasNode());\r\n\t\treturn {\r\n\t\t\tmarginTop:      margins.top,\r\n\t\t\tmarginRight:    margins.right,\r\n\t\t\tmarginBottom:   margins.bottom,\r\n\t\t\tmarginLeft:     margins.left\r\n\t\t};\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/ClampedText~ClampedText} kind.\r\n* @module moonstone/ClampedText\r\n*/\r\n\r\nvar\r\n\tdom = require('enyo/dom'),\r\n\tkind = require('enyo/kind'),\r\n\tControl = require('enyo/Control');\r\n\r\n/**\r\n* Limits the display of {@link module:enyo/Control~Control#content} to\r\n* {@link module:moonstone/ClampedText~ClampedText#maxLines}.\r\n*\r\n* ```\r\n* var\r\n* \tkind = require('enyo/kind'),\r\n* \tClampedText = require('moonstone/ClampedText');\r\n*\r\n* {kind: ClampedText, content: 'some rather long content', maxLines: 3}\r\n* ```\r\n*\r\n* @class ClampedText\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/ClampedText~ClampedText.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ClampedText',\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-clamped-text',\r\n\r\n\t/**\r\n\t* Maximum number of lines of content to show in collapsed state.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default 3\r\n\t* @public\r\n\t*/\r\n\tmaxLines: 3,\r\n\r\n\t/**\r\n\t* Determines if the text is clamped to `maxLines`. Setting 'always' will skip calculating if\r\n\t* the content can be clamped\r\n\t*\r\n\t* @type {Boolean|String}\r\n\t* @default true\r\n\t* @public\r\n\t*/\r\n\tclamped: true,\r\n\r\n\t/**\r\n\t* Read-only property indicating if the content length exceeds the `maxLines` to be\r\n\t* displayed. Only calculated if `clamped` is not 'always'.\r\n\t*\r\n\t* @type {Boolean|null}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\tcanCollapse: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tobservers: [\r\n\t\t{method: 'clampPropertyChanged', path: ['content', 'maxLines', 'clamped']}\r\n\t],\r\n\r\n\t/**\r\n\t* Observer for content, maxLines, and clamped\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tclampPropertyChanged: function (was, is, prop) {\r\n\t\tif (this.canCollapse !== null || this.calcCanCollapse()) {\r\n\t\t\tthis.clamp();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcContentHeight: function () {\r\n\t\tvar node = this.hasNode();\r\n\t\tif (!this.contentHeight) {\r\n\t\t\tthis.clamp(false);\r\n\t\t\tthis.contentHeight = node.getBoundingClientRect().height;\r\n\t\t}\r\n\t\treturn this.contentHeight;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcLineHeight: function () {\r\n\t\tif (!this.lineHeight) {\r\n\t\t\tthis.lineHeight = parseInt(dom.getComputedStyleValue(this.hasNode(), 'line-height'), 10) || null;\r\n\t\t}\r\n\t\treturn this.lineHeight;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcMaxHeight: function () {\r\n\t\tvar lineHeight = this.calcLineHeight();\r\n\t\treturn this.maxLines * lineHeight;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcCanCollapse: function () {\r\n\t\tif (this.hasNode()) {\r\n\t\t\tvar contentHeight = this.calcContentHeight(),\r\n\t\t\t\tmaxHeight = this.calcMaxHeight();\r\n\t\t\tthis.set('canCollapse', contentHeight > maxHeight);\r\n\t\t\treturn this.canCollapse;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @param {Boolean} force - Explicitly applies or removes line clamping style\r\n\t* @private\r\n\t*/\r\n\tclamp: function (force) {\r\n\t\tvar clamp;\r\n\t\tif (this.clamped == 'always') {\r\n\t\t\tclamp = true;\r\n\t\t} else if (force === true || force === false) {\r\n\t\t\tclamp = force;\r\n\t\t} else {\r\n\t\t\tthis.calcCanCollapse();\r\n\t\t\tclamp = this.clamped && this.canCollapse;\r\n\t\t}\r\n\t\tthis.applyStyle('-webkit-line-clamp', clamp ? this.maxLines : null);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trendered: function() {\r\n\t\tControl.prototype.rendered.apply(this, arguments);\r\n\t\tthis.clampPropertyChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleResize: function () {\r\n\t\tthis.clampPropertyChanged();\r\n\t}\r\n});","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/ItemOverlay~ItemOverlay}\r\n* kind and the {@link module:moonstone/ItemOverlay~ItemOverlaySupport} mixin.\r\n* @module moonstone/ItemOverlay\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tControl = require('enyo/Control');\r\n\r\n/**\r\n* {@link module:moonstone/ItemOverlay~ItemOverlay} is a supplementary control that helps to manage\r\n* layout within a {@link module:moonstone/Item~Item}.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tIcon = require('moonstone/Icon'),\r\n* \t\tItem = require('moonstone/Item'),\r\n* \t\tItemOverlay = require('moonstone/ItemOverlay'),\r\n* \t\tMarqueeText = require('moonstone/Marquee').Text;\r\n*\r\n* \t{kind: Item, components: [\r\n* \t\t{kind: ItemOverlay, autoHide: false, right: true, components: [\r\n* \t\t\t{kind: Icon, icon: 'arrowlargeup', small: true},\r\n* \t\t\t{kind: Icon, icon: 'arrowlargedown', small: true}\r\n* \t\t]},\r\n* \t\t{kind: MarqueeText, content: 'Item   with   icons   auto   hides'}\r\n* \t]}\r\n* ```\r\n*\r\n* @class ItemOverlay\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nvar ItemOverlay = module.exports = kind(\r\n\t/** @lends module:moonstone/ItemOverlay~ItemOverlay.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ItemOverlay',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n \t* @private\r\n \t*/\r\n\tclasses: 'moon-item-overlay',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished: /** @lends module:moonstone/ItemOverlay~ItemOverlay.prototype */ {\r\n\r\n\t\t/**\r\n\t\t* When `true`, the controls in the overlay are only shown on focus; in\r\n\t\t* other words, if the overlay is not focused, the controls will be hidden.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tautoHide: false,\r\n\r\n\t\t/**\r\n\t\t* When `true`, the controls in the overlay are right-aligned.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tright: false\r\n\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tthis.autoHideChanged();\r\n\t\tthis.rightChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tautoHideChanged: function() {\r\n\t\tthis.addRemoveClass('auto-hide', this.get('autoHide'));\r\n\t},\r\n\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trightChanged: function() {\r\n\t\tthis.addRemoveClass('right', this.get('right'));\r\n\t}\r\n\r\n});\r\n\r\n/**\r\n* The {@link module:moonstone/ItemOverlay~ItemOverlaySupport} {@glossary mixin}\r\n* provides overlay layout support to {@link module:moonstone/Item~Item}.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tIcon = require('moonstone/Icon'),\r\n* \t\tItem = require('moonstone/Item'),\r\n* \t\tItemOverlaySupport = require('moonstone/ItemOverlay').ItemOverlaySupport,\r\n* \t\tMarqueeText = require('moonstone/Marquee').Text;\r\n*\r\n* \t{kind: Item, mixins: [ItemOverlaySupport], beginningComponents: [\r\n* \t\t{kind: Icon, icon: 'arrowlargeup', small: true},\r\n* \t\t{kind: Icon, icon: 'arrowlargedown', small: true}\r\n* \t],\r\n* \tcomponents: [\r\n* \t\t{kind: MarqueeText, content: \"Item   with   icons   auto   hides\"}\r\n* \t]}\r\n* ```\r\n*\r\n* @mixin ItemOverlaySupport\r\n* @public\r\n*/\r\nItemOverlay.ItemOverlaySupport = {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ItemOverlaySupport',\r\n\r\n\t/**\r\n\t* The components block to create left overlay. Only created in creation time.\r\n\t*\r\n\t* @type {Object}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\tbeginningComponents: undefined,\r\n\r\n\t/**\r\n\t* The components block to create right overlay. Only created in creation time.\r\n\t*\r\n\t* @type {Object}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\tendingComponents: undefined,\r\n\r\n\t/**\r\n\t* When `true`, the beginning controls in the overlay are only shown on focus; in\r\n\t* other words, if the overlay is not focused, the controls will be hidden.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tautoHideBeginning: undefined,\r\n\r\n\t/**\r\n\t* When `true`, the ending controls in the overlay are only shown on focus; in\r\n\t* other words, if the overlay is not focused, the controls will be hidden.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tautoHideEnding: undefined,\r\n\r\n\tbindings: [\r\n\t\t{from: 'autoHideBeginning', to: '$.beginning.autoHide'},\r\n\t\t{from: 'autoHideEnding', to: '$.ending.autoHide'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tthis.beginningComponents = (this.beginningComponents === undefined) ? null : this.beginningComponents;\r\n\t\t\tthis.endingComponents = (this.endingComponents === undefined) ? null : this.endingComponents;\r\n\t\t\tthis.autoHideBeginning = (this.autoHideBeginning === undefined) ? false : this.autoHideBeginning;\r\n\t\t\tthis.autoHideEnding = (this.autoHideEnding === undefined) ? false : this.autoHideEnding;\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitComponents: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.createComponents([{\r\n\t\t\t\tname: 'beginning', kind: ItemOverlay,\r\n\t\t\t\tclasses: 'beginning', right: false, addBefore: this.controlParentName,\r\n\t\t\t\tcomponents: this.beginningComponents\r\n\t\t\t},{\r\n\t\t\t\tname: 'ending', kind: ItemOverlay,\r\n\t\t\t\tclasses: 'ending', right: true, addBefore: this.controlParentName,\r\n\t\t\t\tcomponents: this.endingComponents\r\n\t\t\t}]);\r\n\t\t};\r\n\t})\r\n};\r\n","/**\r\n* Contains the declaration for the {@link module:moonstone/ObjectActionDecorator~ObjectActionDecorator} kind\r\n* @module moonstone/ObjectActionDecorator\r\n*/\r\n\r\nrequire('moonstone');\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tControl = require('enyo/Control');\r\n\r\n/**\r\n* {@link module:moonstone/ObjectActionDecorator~ObjectActionDecorator} is a\r\n* decorator that wraps a spotlightable object. When the object is focused,\r\n* additional controls are displayed, allowing the user to act on the object.\r\n*\r\n* The decorator supports two orientations: `'vertical'`, with object actions placed\r\n* below the wrapped components, and `'horizontal'`, with object actions placed next to\r\n* the components.\r\n*\r\n* The following is a vertical example:\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tButton = require('moonstone/Button'),\r\n* \t\tImage = require('moonstone/Image'),\r\n* \t\tItem = require('moonstone/Item'),\r\n* \t\tObjectActionDecorator = require('moonstone/ObjectActionDecorator');\r\n*\r\n* \t{\r\n* \t\tkind: ObjectActionDecorator,\r\n* \t\torientation: 'vertical',\r\n* \t\tcomponents: [\r\n* \t\t\t{kind: Item, components: [\r\n* \t\t\t\t{name: 'image', kind: Image, src: 'moonstone/src/assets/default-music.png'}\r\n* \t\t\t]}\r\n* \t\t],\r\n* \t\tactionComponents: [\r\n* \t\t\t{kind: Button, name: 'Play', small: true, content: 'PLAY'},\r\n* \t\t\t{kind: Button, name: 'Favorite', small: true, content: 'FAVORITE'},\r\n* \t\t\t{kind: Button, name: 'Share', small: true, content: 'SHARE'}\r\n* \t\t]\r\n* \t}\r\n* ```\r\n*\r\n* @class ObjectActionDecorator\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/ObjectActionDecorator~ObjectActionDecorator.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ObjectActionDecorator',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-objaction',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonSpotlightFocused: 'spotFocused',\r\n\t\tonSpotlightBlur: 'spotBlur',\r\n\t\tonenter: 'enter',\r\n\t\tonleave: 'leave'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/ObjectActionDecorator~ObjectActionDecorator.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Orientation of object actions in relation to focused components; `'vertical'` places\r\n\t\t* the object actions below the components, while `'horizontal'` places them next to the\r\n\t\t* components.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'vertical'\r\n\t\t* @public\r\n\t\t*/\r\n\t\torientation: 'vertical',\r\n\r\n\t\t/**\r\n\t\t* When [orientation]{@link module:moonstone/ObjectActionDecorator~ObjectActionDecorator} is `'vertical'`, setting\r\n\t\t* `noStretch: false` causes the object actions to be stretched to fit the width of the\r\n\t\t* components above.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tnoStretch: false\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name:'client', kind: Control, classes: 'moon-objaction-client'},\r\n\t\t{name:'actions', kind: Control, classes: 'moon-objaction-actions'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\torientationChanged: function () {\r\n\t\tvar vertical = this.getOrientation() == 'vertical';\r\n\t\tthis.addRemoveClass('vertical', vertical);\r\n\t\tthis.addRemoveClass('horizontal', !vertical);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnoStretchChanged: function() {\r\n\t\tthis.$.actions.addRemoveClass('stretch', !this.noStretch);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitComponents: function() {\r\n\t\tControl.prototype.initComponents.apply(this, arguments);\r\n\t\tif (this.actionComponents) {\r\n\t\t\tvar owner = this.hasOwnProperty('actionComponents') ? this.getInstanceOwner() : this;\r\n\t\t\tthis.$.actions.createComponents(this.actionComponents, {owner: owner});\r\n\t\t}\r\n\t\tthis.orientationChanged();\r\n\t\tthis.noStretchChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotFocused: function(inSender, inEvent) {\r\n\t\tthis.focused = true;\r\n\t\tthis.updateActionsVisibility();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotBlur: function(inSender, inEvent) {\r\n\t\tthis.focused = false;\r\n\t\tthis.entered = false;\r\n\t\tthis.updateActionsVisibility();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tenter: function(inSender, inEvent) {\r\n\t\tthis.entered = true;\r\n\t\tthis.updateActionsVisibility();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tleave: function(inSender, inEvent) {\r\n\t\tthis.entered = false;\r\n\t\tthis.updateActionsVisibility();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateActionsVisibility: function() {\r\n\t\tthis.$.actions.applyStyle('opacity', (this.focused || this.entered) ? 1 : 0);\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Input~Input} kind.\r\n* @module moonstone/Input\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutil = require('enyo/utils'),\r\n\tInput = require('enyo/Input');\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\n/**\r\n* {@link module:moonstone/Input~Input} is a Moonstone-styled input control, derived from\r\n* {@link module:enyo/Input~Input}. Typically, a `moonstone/Input` is placed inside a\r\n* {@link module:moonstone/InputDecorator~InputDecorator}, which provides styling, e.g.:\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tInput = require('moonstone/Input'),\r\n* \t\tInputDecorator = require('moonstone/InputDecorator');\r\n*\r\n* \t{kind: InputDecorator, components: [\r\n* \t\t{kind: Input, placeholder: 'Enter some text...', onchange: 'inputChange'}\r\n* \t]}\r\n* ```\r\n*\r\n* For more information, see the documentation on\r\n* [Text Fields]{@linkplain $dev-guide/building-apps/controls/text-fields.html}\r\n* in the Enyo Developer Guide.\r\n*\r\n* @class Input\r\n* @extends module:enyo/Input~Input\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/Input~Input.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Input',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Input,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-body-text moon-input',\r\n\r\n\t/**\r\n\t* 13==Enter, 16777221==KeypadEnter\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tspotlightIgnoredKeys: [13, 16777221],\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/Input~Input.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* When `true`, input blurs on Enter keypress (if focused).\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdismissOnEnter: false\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonkeyup    : 'onKeyUp',\r\n\t\tonblur     : 'onBlur',\r\n\t\tonfocus    : 'onFocus'\r\n\t},\r\n\r\n\t/**\r\n\t* Used only for [dismissOnEnter]{@link module:moonstone/Input~Input#dismissOnEnter} feature;\r\n\t* we cannot rely on `hasFocus()` in this case due to race condition.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_bFocused: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tonFocus: function () {\r\n\t\tvar node = this.hasNode();\r\n\r\n\t\tif (this.dismissOnEnter) {\r\n\t\t\tvar oThis = this;\r\n\t\t\tutil.asyncMethod(this, function () {oThis._bFocused = true;});\r\n\t\t}\r\n\t\t// Force cursor to end of text during a generic focus event. Creating the input by compiling\r\n\t\t// a string of text with value=\"this.value\" produces different initial caret position than\r\n\t\t// using node.setAttribute('value', this.value), which is what would happen any time after\r\n\t\t// the initial creation. The initial end-position of the caret is required to support\r\n\t\t// Virtual keyboards because without arrow-keys because normal left/right arrow navigation\r\n\t\t// in inputs is impossible, so the caret must be positioned at the end to allow for deletion\r\n\t\t// of the previous input. We are intentionally setting the value to force the cursor to the\r\n\t\t// end of the text. `selectionStart` is the obvious choice, but it is not supported in\r\n\t\t// certain types of fields (i.e. number, email).\r\n\t\tif (node) node.value = this.get('value');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tonBlur: function () {\r\n\t\tif (this.dismissOnEnter) {\r\n\t\t\tthis._bFocused = false;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tonKeyUp: function (oSender, oEvent) {\r\n\t\tif (this.dismissOnEnter) {\r\n\t\t\tif (oEvent.keyCode == 13 && this._bFocused) {\r\n\t\t\t\tthis.blur();\r\n\t\t\t\tif (Spotlight.getPointerMode()) {\r\n\t\t\t\t\tSpotlight.unspot();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tblur: function () {\r\n\t\tif (this.hasNode()) {\r\n\t\t\tthis.node.blur();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tleft: function () {\r\n\t\tif (!this.hasNode() || this.node.selectionStart === 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tright: function () {\r\n\t\tif (!this.hasNode() || this.node.selectionStart == this.node.value.length) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tup: function () {\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdown: function () {\r\n\t\treturn false;\r\n\t}\r\n});\r\n","/**\r\n* Exports the {@link module:moonstone/Scrollable~Scrollable} mixin\r\n* @wip\r\n* @module moonstone/Scrollable\r\n*/\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutils = require('enyo/utils'),\r\n\tScrollMath = require('enyo/ScrollMath');\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\n/**\r\n* The Scrollable mixin\r\n* @wip\r\n* @mixin\r\n*/\r\nvar Scrollable = {\r\n\t// We make ourselves a Spotlight container so that 5-way\r\n\t// navigation stays within our bounds by default...\r\n\tspotlight: 'container',\r\n\t// But when focus enters us, we should spot the nearest\r\n\t// child, not whichever one was previously focused\r\n\tspotlightRememberFocus: false,\r\n\r\n\tsuppressMouseEvents: true,\r\n\r\n\t/**\r\n\t* Specifies scrolling options to be used when scrolling an\r\n\t* item into view. Defaults:\r\n\t*\r\n\t*\t{\r\n\t*\t\tblock: 'farthest',\r\n\t*\t\tbehavior: 'smooth'\r\n\t*\t}\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tscrollIntoViewOptions: null,\r\n\r\n\t// TODO: At least in the case of onSpotlightFocus, we\r\n\t// probably need to do something to ensure that we don't\r\n\t// have a conflict between the handler declared in the mixin\r\n\t// and any handler that might be declared in the kind that\r\n\t// uses the mixin. Possibilities include a) a hack like the\r\n\t// one currently employed in MarqueeSupport; b) a generalized\r\n\t// mechanism based on the same approach; or c) support in\r\n\t// general for multiple handlers for the same event, so that\r\n\t// base kinds, subkinds and instances can all register for\r\n\t// handlers independently.\r\n\thandlers: {\r\n\t\tonRequestScrollIntoView: 'handleRequestScrollIntoView',\r\n\t\tonSpotlightFocus: 'filterFocus'\r\n\t},\r\n\r\n\t// Override ScrollMath params\r\n\tscrollMath: {kind: ScrollMath, kFrictionDamping: 0.93},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tvar opts = {\r\n\t\t\t\tblock: 'farthest',\r\n\t\t\t\tbehavior: 'smooth'\r\n\t\t\t};\r\n\r\n\t\t\tsup.apply(this, arguments);\r\n\r\n\t\t\tthis.scrollIntoViewOptions = this.scrollIntoViewOptions ? utils.mixin(opts, this.scrollIntoViewOptions) : opts;\r\n\t\t\t// Save original options so they can be restored after runtime changes\r\n\t\t\tthis._scrollIntoViewOptions = utils.clone(this.scrollIntoViewOptions);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Responds to child components' requests to be scrolled into view.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\thandleRequestScrollIntoView: function (sender, event) {\r\n\t\tvar bubble = false,\r\n\t\t\tdef = this.scrollIntoViewOptions,\r\n\t\t\topts;\r\n\t\t// Only scroll in 5-way mode or when explicitly requested to scroll in pointer mode\r\n\t\tif (!Spotlight.getPointerMode() || event.scrollInPointerMode === true) {\r\n\t\t\tif (this.canScrollX || this.canScrollY) {\r\n\t\t\t\topts = {\r\n\t\t\t\t\t// If the event explicitly requests a full-page scroll, then we do so...\r\n\t\t\t\t\tblock: event.scrollFullPage ? 'farthest' : (\r\n\t\t\t\t\t\t// ...otherwise, we honor the option set on the scroller for one-off\r\n\t\t\t\t\t\t// requests, but force smaller scroll increments when Spotlight\r\n\t\t\t\t\t\t// accelerating, since this produces smoother continuous scrolling\r\n\t\t\t\t\t\t// in 5-way mode.\r\n\t\t\t\t\t\tSpotlight.Accelerator.isAccelerating() ? 'nearest' : def.block\r\n\t\t\t\t\t),\r\n\t\t\t\t\tbehavior: def.behavior\r\n\t\t\t\t};\r\n\t\t\t\tthis.scrollToChild(event.originator, opts);\r\n\t\t\t} else {\r\n\t\t\t\t// If we don't need to scroll, bubble onRequestScrollIntoView so that\r\n\t\t\t\t// any scrollers above us in the control hierarchy can scroll as needed\r\n\t\t\t\tbubble = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn !bubble;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tfilterFocus: function (sender, event) {\r\n\t\tvar prev,\r\n\t\t\tdefBlock;\r\n\r\n\t\tswitch (event.focusType) {\r\n\t\t\tcase 'point':\r\n\t\t\t\tbreak;\r\n\t\t\tcase '5-way':\r\n\t\t\t\t// If 5-way focus is coming from outside the scroller or from a scroll control,\r\n\t\t\t\t// we want to scroll the smallest distance possible to avoid a jarring experience;\r\n\t\t\t\t// otherwise, we respect the provided options\r\n\t\t\t\tif ((prev = event.previous)) {\r\n\t\t\t\t\tdefBlock = this._scrollIntoViewOptions.block;\r\n\t\t\t\t\tthis.scrollIntoViewOptions.block = (this.isScrollingChild(prev)) ? defBlock : 'nearest';\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'default':\r\n\t\t\t\t// When focusType is 'default', Spotlight is trying to focus\r\n\t\t\t\t// a Control in response to something other than a point or a\r\n\t\t\t\t// 5-way move. For example, this can happen during\r\n\t\t\t\t// initialization, when the pointer is hidden, or when the app\r\n\t\t\t\t// regains focus.\r\n\t\t\t\t//\r\n\t\t\t\t// In the case where a scroller child is being focused by\r\n\t\t\t\t// default, we short-circuit the action because the child is\r\n\t\t\t\t// potentially not in view, and focusing would cause it to\r\n\t\t\t\t// scroll it into view for no reason apparent to the user.\r\n\t\t\t\t// Instead, we should focus a child we know to be visible.\r\n\t\t\t\tif (this.eventIsFromScrollingChild(event) && !this.eventIsFromVisibleChild(event)) {\r\n\t\t\t\t\treturn this.spotFirstVisibleChild();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* This check is factored out of `filterFocus()` so that the logic can be\r\n\t* overridden by the kind that includes the `Scrollable` mixin.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\teventIsFromVisibleChild: kind.inherit(function (sup) {\r\n\t\treturn function (event) {\r\n\t\t\tif (sup === utils.nop) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn sup.apply(this, arguments);\r\n\t\t\t}\t\t\t\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* This check is factored out of `filterFocus()` so that the logic can be\r\n\t* overridden by the kind that includes the `Scrollable` mixin. For example,\r\n\t* NewDataList can perform this check more efficiently than we can do it here\r\n\t* in the general case.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\teventIsFromScrollingChild: kind.inherit(function (sup) {\r\n\t\treturn function (event) {\r\n\t\t\tif (sup === utils.nop) {\r\n\t\t\t\treturn this.isScrollingChild(event.originator);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn sup.apply(this, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* This behavior is factored out of `filterFocus()` so that the logic can be\r\n\t* overridden by the kind that includes the `Scrollable` mixin. For example,\r\n\t* NewDataList can identify the first visible child more efficiently than we\r\n\t* can do it here in the general case.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tspotFirstVisibleChild: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tif (sup === utils.nop) {\r\n\t\t\t\t// TODO: Implement. For now, only handling the more specific\r\n\t\t\t\t// case in moonstone/NewDataList.\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn sup.apply(this, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Extends the base implementation provided by the enyo Scrollable mixin\r\n\t* with Moonstone-specific functionality.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_suppressMouseEvents: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tvar c;\r\n\r\n\t\t\tsup.apply(this, arguments);\r\n\r\n\t\t\tif (\r\n\t\t\t\t// If we're in pointer mode...\r\n\t\t\t\tSpotlight.getPointerMode() &&\r\n\t\t\t\t// ...and something is currently spotted...\r\n\t\t\t\t(c = Spotlight.getCurrent()) &&\r\n\t\t\t\t// ...and that thing is a scrolling child of ours...\r\n\t\t\t\tthis.isScrollingChild(c)\r\n\t\t\t) {\r\n\t\t\t\t// ...then we unspot it, since the fact that we're suppressing\r\n\t\t\t\t// mouse events will prevent it from unspotting on its own\r\n\t\t\t\tSpotlight.unspot();\r\n\t\t\t}\r\n\t\t};\r\n\t})\r\n};\r\n\r\nmodule.exports = Scrollable;\r\n","require('moonstone');\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tEventEmitter = require('enyo/EventEmitter');\r\n\r\nvar\r\n\tSvgRoot = require('svg/Root'),\r\n\tSvgPath = require('svg/Path'),\r\n\tSvgAnimate = require('svg/Animate');\r\n\r\nmodule.exports = kind({\r\n\tname: 'moon.AnimatedButtonSvg',\r\n\tkind: SvgRoot,\r\n\tmixins: [EventEmitter],\r\n\tviewBox: '0 0 100 100',\r\n\tclasses: 'moon-button-animated-root',\r\n\t_focused: false,\r\n\tcomponents: [\r\n\t\t// Path to be animated\r\n\t\t{name: 'path', kind: SvgPath, classes: 'moon-button-animated-path', components: [\r\n\t\t\t// Animation\r\n\t\t\t{name: 'animation', kind: SvgAnimate, fill: 'freeze', keyframeLibrary: {\r\n\t\t\t\tfocus: [\r\n\t\t\t\t\t'M-10,60c0.6-3.3,2.3,0.7,0-10c-1.3-5.9-4-15.5,0-20c6.5-7.4,10,30,10,30v40h2c0,0-17,0.6-12-10 C-6.7,83-10.9,65-10,60z',\r\n\t\t\t\t\t'M40,60c-2.3-14.3-2.3-13.9-10-30C22.8,15,12.3-1.3-7,0c-9.8,0.7,7,60,7,60v40h20c0,0,1.9-1.4,10-10 C35,84.7,42,72.2,40,60z',\r\n\t\t\t\t\t'M70,60c-9.3-17.2-24.4-30.5-40-40C17.7,12.5,4.8,8.2-7,10c-9.7,1.5,7,50,7,50v40h60c0,0,3.7,0,10-10 C75.2,81.8,75.8,70.6,70,60z',\r\n\t\t\t\t\t'M90,60c-16.8-25.2-30.5-5.2-50-10C27.6,46.9,10,15.7-7,20c-9.5,2.4,7,40,7,40v40h100c0,0,1-2.8,0-10 C99,82.8,96.9,70.3,90,60z',\r\n\t\t\t\t\t'M80,20c-6.6,36.3-26.3,51-40,40C30,52,14.8,13.5-7,20c-9.4,2.8,7,40,7,40v40h100c0,0,1-82.8,0-90 C99,2.8,83.8-1.2,80,20z',\r\n\t\t\t\t\t'M60,20c-2.7,13.2-10.2,27-20,40c-4.8,6.3-12.7,10.3-20,10C10.2,69.6,0,60,0,60v40h100c0,0,2.6-83.2,0-90 C94.5-4.5,64.3-1.1,60,20z',\r\n\t\t\t\t\t'M50,30c-4.1,7.2-11.2,9-20,10C11.8,42,5.5,26.6,0,30c-8.3,5.2,0,30,0,30v40h100c0,0,1.7-63,0-70 C95,8.8,64.2,4.8,50,30z',\r\n\t\t\t\t\t'M50,0c-7.3-1-21-1-30,0C16.2,0.4,5.7-0.8,0,0c-10.4,1.5,0,10,0,10v90h100c0,0,0-90.8,0-100 C100-15.6,53.9,0.5,50,0z'\r\n\t\t\t\t],\r\n\t\t\t\tblur: [\r\n\t\t\t\t\t'M100,0c0,0-40-0.3-50,0C40.1,0.3,0,0,0,0v100h100V0z',\r\n\t\t\t\t\t'M100,0C80.5,13.6,71.1,21.2,50,20C33.5,19.1,22.9,14.9,0,0v100h100V0z',\r\n\t\t\t\t\t'M100,10C74.2,71.1,68.9,35.2,50,40C26.3,46,26,77,0,10v90h100V10z',\r\n\t\t\t\t\t'M100,70C86.3,87.1,68.6,93.5,50,90C26.9,85.6,7.8,92,0,70v30h100V70z',\r\n\t\t\t\t\t'M100,99c0,0-39.9-0.2-50,0c-9.8,0.2-50,0-50,0v1h100V99z'\r\n\t\t\t\t]\r\n\t\t\t}}\r\n\t\t]}\r\n\t],\r\n\tevents: {\r\n\t\tonEnd: ''\r\n\t},\r\n\tbindings: [\r\n\t\t{from: 'pathStyle', to: '$.path.style'},\r\n\t\t{from: 'duration', to: '$.animation.dur'}\r\n\t],\r\n\tcreate: function () {\r\n\t\tthis.inherited(arguments);\r\n\t\tthis.$.animation.on('end', function() { this.doEnd({focused: this._focused}); }, this);\r\n\t},\r\n\tstartFocus: function () {\r\n\t\tthis.$.animation.checkout('focus');\r\n\t\tthis._focused = true;\r\n\t\tthis.$.animation.start();\r\n\t},\r\n\tstartBlur: function () {\r\n\t\tthis.$.animation.checkout('blur');\r\n\t\tthis._focused = false;\r\n\t\tthis.$.animation.start();\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Table~Table},\r\n* {@link module:moonstone/Table~TableCell}, and {@link module:moonstone/Table~TableRow} kinds.\r\n* @module moonstone/Table\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tTable = require('enyo/Table'),\r\n\tTableRow = require('enyo/TableRow'),\r\n\tTableCell = require('enyo/TableCell');\r\n\r\n/**\r\n* {@link module:moonstone/Table~TableCell} extends {@link module:enyo/TableCell~TableCell},\r\n* adding Moonstone visual styling.\r\n*\r\n* @class TableCell\r\n* @extends module:enyo/TableCell~TableCell\r\n* @ui\r\n* @public\r\n*/\r\nvar TableCell = kind(\r\n\t/** @lends module:moonstone/Table~TableCell.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.TableCell',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: TableCell,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-table-cell'\r\n});\r\n\r\n/**\r\n* {@link module:moonstone/Table~TableRow} extends {@link module:enyo/TableRow~TableRow},\r\n* adding Moonstone visual styling.\r\n*\r\n* @class TableRow\r\n* @extends module:enyo/TableRow~TableRow\r\n* @ui\r\n* @public\r\n*/\r\nvar TableRow = kind(\r\n\t/** @lends module:moonstone/Table~TableRow.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.TableRow',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: TableRow,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-table-row',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdefaultKind: TableCell\r\n});\r\n\r\n/**\r\n* {@link module:moonstone/Table~Table} extends {@link module:enyo/Table~Table}, adding Moonstone visual styling.\r\n*\r\n* @class Table\r\n* @extends module:enyo/Table~Table\r\n* @ui\r\n* @public\r\n*/\r\nvar Table = module.exports = kind(\r\n\t/** @lends module:moonstone/Table~Table.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Table',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Table,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-table',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdefaultKind: TableRow\r\n});\r\n\r\n/**\r\n* Exports {@link module:moonstone/Table~TableRow}\r\n*/\r\nTable.Row = TableRow;\r\n\r\n/**\r\n* Exports {@link module:moonstone/Table~TableCell}\r\n*/\r\nTable.Cell = TableCell;\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Marquee~MarqueeSupport} mixin and the {@link module:moonstone/Marquee~MarqueeText} &\r\n* {@link module:moonstone/Marquee~MarqueeDecorator} kinds.\r\n* @module moonstone/Marquee\r\n*/\r\n\r\nvar kind = require('enyo/kind'),\r\n\tdom = require('enyo/dom'),\r\n\tplatform = require('enyo/platform'),\r\n\tutil = require('enyo/utils'),\r\n\tControl = require('enyo/Control'),\r\n\tComponent = require('enyo/Component'),\r\n\tSignals = require('enyo/Signals');\r\n\r\nvar\r\n\toptions = require('../options'),\r\n\tHighlightText = require('../HighlightText');\r\n\r\nvar exports = module.exports = {};\r\n\r\n/**\r\n* There are a couple scenarios (window blurs and changing from pointer mode to 5-way) in which\r\n* we'd like to stop an actively on-hover marqueeing control. This private instance manages\r\n* those events centrally to minimize unnecessary Signal's subscribers.\r\n*\r\n* @private\r\n*/\r\nvar observer = new Component({\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thoverControl: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{kind: Signals, onSpotlightModeChanged: 'handleModeChanged', onblur: 'handleBlur'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_setMarqueeOnHoverControl: function(oControl) {\r\n\t\tthis.hoverControl = oControl;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_getMarqueeOnHoverControl: function() {\r\n\t\treturn this.hoverControl;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleModeChanged: function (sender, event) {\r\n\t\tif (!event.pointerMode && this.hoverControl) {\r\n\t\t\tthis.hoverControl._marquee_leave();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleBlur: function (sender, event) {\r\n\t\tif (this.hoverControl) {\r\n\t\t\tthis.hoverControl._marquee_leave();\r\n\t\t}\r\n\t}\r\n});\r\n\r\n/**\r\n* Fires to queue up a list of child animations.\r\n*\r\n* @event module:moonstone/Marquee~MarqueeSupport#onRequestMarquee\r\n* @type {Object}\r\n* @property {Object} originator - A reference to the originator of this event.\r\n* @property {Boolean} marqueePause - The desired duration in milliseconds that the\r\n* marquee will pause at the end of the animation, before resetting to the beginning.\r\n* @property {Number} marqueeSpeed - The desired speed for the marquee animation,\r\n* in pixels per second.\r\n* @private\r\n*/\r\n\r\n/**\r\n* Fires to start marquee animation in a child marquee.\r\n*\r\n* @event module:moonstone/Marquee~MarqueeSupport#onRequestMarqueeStart\r\n* @type {Object}\r\n* @property {Object} originator - A reference to the originator of this event.\r\n* @private\r\n*/\r\n\r\n/**\r\n* Fires to halt marquee animation in a child marquee.\r\n*\r\n* @event module:moonstone/Marquee~MarqueeSupport#onRequestMarqueeStop\r\n* @type {Object}\r\n* @property {Object} originator - A reference to the originator of this event.\r\n* @private\r\n*/\r\n\r\n/**\r\n* Fires to enable animation in a child marquee. No additional data is sent with this event.\r\n*\r\n* @event module:moonstone/Marquee~MarqueeSupport#onRequestMarqueeEnable\r\n* @type {Object}\r\n* @private\r\n*/\r\n\r\n/**\r\n* Fires to disable animation in a child marquee. No additional data is sent with this event.\r\n*\r\n* @event module:moonstone/Marquee~MarqueeSupport#onRequestMarqueeDisable\r\n* @type {Object}\r\n* @private\r\n*/\r\n\r\n/**\r\n* Fires when marquee ends. No additional data is sent with this event.\r\n*\r\n* @event module:moonstone/Marquee~MarqueeItem#onMarqueeEnded\r\n* @type {Object}\r\n* @private\r\n*/\r\n\r\n/**\r\n* The {@link module:moonstone/Marquee~MarqueeSupport} [mixin]{@glossary mixin} should be used with controls\r\n* that contain multiple marquees whose animation behavior should be synchronized. Calling\r\n* [this.startMarquee()]{@link module:moonstone/Marquee~MarqueeSupport#startMarquee} or\r\n* [this.stopMarquee()]{@link module:moonstone/Marquee~MarqueeSupport#stopMarquee} will start or stop all\r\n* contained marquees.\r\n*\r\n* The following properties, defined on the base kind to which the mixin is applied,\r\n* control the marquee behavior:\r\n*\r\n* [marqueeOnSpotlight]{@link module:moonstone/Marquee~MarqueeSupport#marqueeOnSpotlight}: When `true`, marquee\r\n* starts when control is spotlight focused and ends when it is spotlight blurred.\r\n*\r\n* [marqueeOnHover]{@link module:moonstone/Marquee~MarqueeSupport#marqueeOnHover}: When `true`, marquee runs\r\n* while control is hovered over with the mouse. This property is ignored if\r\n* `marqueeOnSpotlight` is `true`.\r\n*\r\n* [marqueeOnRender]{@link module:moonstone/Marquee~MarqueeSupport#marqueeOnRender}: When `true`, marquee starts\r\n* running as soon as control is rendered, and runs continuously.\r\n*\r\n* [marqueeSpeed]{@link module:moonstone/Marquee~MarqueeSupport#marqueeSpeed}: The speed of the marquee animation,\r\n* in pixels per second.\r\n*\r\n* [marqueeDelay]{@link module:moonstone/Marquee~MarqueeSupport#marqueeDelay}: The delay between spotlight\r\n* focus/hover and the start of the animation. (This is only used when either\r\n* `marqueeOnSpotlight` or `marqueeOnHover` is `true`).\r\n*\r\n* [marqueeOnRenderDelay]{@link module:moonstone/Marquee~MarqueeSupport#marqueeOnRenderDelay}: Used when you want\r\n* the marquee to run on render, after a specified delay.\r\n*\r\n* [marqueePause]{@link module:moonstone/Marquee~MarqueeSupport#marqueePause}: The duration in milliseconds that\r\n* the marquee will pause at the end of the animation, before resetting to the beginning.\r\n*\r\n* @mixin\r\n* @public\r\n*/\r\nvar MarqueeSupport = {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'MarqueeSupport',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_marquee_Handlers: {\r\n\t\tonRequestStartMarquee: '_marquee_requestStartMarquee',\r\n\t\tonSpotlightFocused: '_marquee_spotlightFocused',\r\n\t\tonSpotlightBlur: '_marquee_spotlightBlur',\r\n\t\tonenter: '_marquee_enter',\r\n\t\tonleave: '_marquee_leave',\r\n\t\tonMarqueeEnded: '_marquee_marqueeEnded',\r\n\t\tonresize: '_marquee_resize',\r\n\r\n\t\t// Stop propagation of requests coming from parent MarqueeSupport's, since\r\n\t\t// only this MarqueeSupport should be controlling its subordinate children\r\n\t\tonRequestMarquee: '_marquee_stopPropagation',\r\n\t\tonRequestMarqueeStart: '_marquee_stopPropagation',\r\n\t\tonRequestMarqueeStop: '_marquee_stopPropagation'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_marquee_active: false,\r\n\r\n\t/**\r\n\t* When `true`, marquee starts when the control is {@link Spotlight} focused and ends\r\n\t* when it is spotlight blurred.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default undefined\r\n\t* @public\r\n\t*/\r\n\tmarqueeOnSpotlight: undefined,\r\n\r\n\t/**\r\n\t* When `true`, marquee runs while the control is hovered over with the mouse. This\r\n\t* property is ignored if [marqueeOnSpotlight]{@link module:moonstone/Marquee~MarqueeSupport#marqueeOnSpotlight}\r\n\t* is `true`.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default undefined\r\n\t* @public\r\n\t*/\r\n\tmarqueeOnHover: undefined,\r\n\r\n\t/**\r\n\t* When `true`, marquee starts running as soon as the control is rendered, and runs\r\n\t* continuously.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default undefined\r\n\t* @public\r\n\t*/\r\n\tmarqueeOnRender: undefined,\r\n\r\n\t/**\r\n\t* The speed of the marquee animation, in pixels per second.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default undefined\r\n\t* @public\r\n\t*/\r\n\tmarqueeSpeed: undefined,\r\n\r\n\t/**\r\n\t* The delay between spotlight focus/hover and the start of the animation. (This is only\r\n\t* used when either [marqueeOnSpotlight]{@link module:moonstone/Marquee~MarqueeSupport#marqueeOnSpotlight} or\r\n\t* [marqueeOnHover]{@link module:moonstone/Marquee~MarqueeSupport#marqueeOnHover} is `true`.)\r\n\t*\r\n\t* @type {Number}\r\n\t* @default undefined\r\n\t* @public\r\n\t*/\r\n\tmarqueeDelay: undefined,\r\n\r\n\t/**\r\n\t* Used when you want the marquee to run on render, after a specified delay.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default undefined\r\n\t* @public\r\n\t*/\r\n\tmarqueeOnRenderDelay: undefined,\r\n\r\n\t/**\r\n\t* The duration in milliseconds that the marquee will pause at the end of the\r\n\t* animation, before resetting to the beginning.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default undefined\r\n\t* @public\r\n\t*/\r\n\tmarqueePause: undefined,\r\n\r\n\t/**\r\n\t* Initializes marquee timings.\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.marqueeOnSpotlight = (this.marqueeOnSpotlight === undefined) ? true : this.marqueeOnSpotlight;\r\n\t\t\tthis.marqueeOnHover =  (this.marqueeOnHover ===   undefined) ? false :  this.marqueeOnHover;\r\n\t\t\tthis.marqueeSpeed =    (this.marqueeSpeed ===     undefined) ? 60 :    this.marqueeSpeed;\r\n\t\t\tthis.marqueeDelay =    (this.marqueeDelay ===     undefined) ? 1000 :  this.marqueeDelay;\r\n\t\t\tthis.marqueePause =    (this.marqueePause ===     undefined) ? 1000 :  this.marqueePause;\r\n\t\t\tthis.marqueeHold  =    (this.marqueeHold  ===     undefined) ? 2000 :  this.marqueeHold;\r\n\t\t\tthis.marqueeOnRender = (this.marqueeOnRender  === undefined) ? false : this.marqueeOnRender;\r\n\t\t\tthis.marqueeOnRenderDelay = (this.marqueeOnRenderDelay === undefined) ? this.marqueeDelay : this.marqueeOnRenderDelay;\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* If {@link module:moonstone/Marquee~MarqueeSupport#marqueeOnRender} is `true`, kicks off marquee animation.\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\trendered: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tif (this.marqueeOnRender && !this.disabled) {\r\n\t\t\t\tthis.startMarqueeCustomDelay(this.marqueeOnRenderDelay);\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tteardownRender: kind.inherit(function (sup) {\r\n\t\treturn function (caching) {\r\n\t\t\tif (caching && this._marquee_active) {\r\n\t\t\t\tthis.stopMarquee();\r\n\t\t\t}\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tif (this === observer._getMarqueeOnHoverControl()) {\r\n\t\t\t\tobserver._setMarqueeOnHoverControl(null);\r\n\t\t\t}\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdispatchEvent: kind.inherit(function (sup) {\r\n\t\treturn function (sEventName, oEvent, oSender) {\r\n\t\t\t// Needed for proper onenter/onleave handling\r\n\t\t\tif (this.strictlyInternalEvents[sEventName] && this.isInternalEvent(oEvent)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\t// FIXME: not sure why events can arrive without event objects, but we guard here for safety\r\n\t\t\tif (oEvent && !oEvent.delegate) {\r\n\t\t\t\tvar handler = this._marquee_Handlers[sEventName];\r\n\t\t\t\tif (handler){\r\n\t\t\t\t\tthis.cachePoint = true;\r\n\t\t\t\t\tif(this[handler](oSender, oEvent)) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn sup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Handles external requests to kick off {@link module:moonstone/Marquee~MarqueeSupport#marqueeStart}.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_marquee_requestStartMarquee: function () {\r\n\t\tif (this.marqueeOnRender) {\r\n\t\t\tthis.stopMarquee();\r\n\t\t\tthis.startMarquee();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* On focus, starts child marquees.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_marquee_spotlightFocused: function (sender, ev) {\r\n\t\tthis._marquee_isFocused = true;\r\n\t\tif (this.marqueeOnSpotlight) {\r\n\t\t\tthis.startMarquee();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* On blur, halts child marquees.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_marquee_spotlightBlur: function (sender, ev) {\r\n\t\tthis._marquee_isFocused = false;\r\n\t\tif (this.marqueeOnSpotlight && !this.marqueeOnRender) {\r\n\t\t\tthis.stopMarquee();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_marquee_enter: function (sender, ev) {\r\n\t\tthis._marquee_isHovered = true;\r\n\t\tif ((this.marqueeOnHover && !this.marqueeOnSpotlight) ||\r\n\t\t(this.disabled && this.marqueeOnSpotlight)) {\r\n\t\t\tif (this.marqueeOnHover) {\r\n\t\t\t\tobserver._setMarqueeOnHoverControl(this);\r\n\t\t\t}\r\n\t\t\tthis.startMarquee();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_marquee_leave: function (sender, ev) {\r\n\t\tthis._marquee_isHovered = false;\r\n\t\tif ((this.marqueeOnHover && !this.marqueeOnSpotlight) || (this.disabled && this.marqueeOnSpotlight)) {\r\n\t\t\tif (this.marqueeOnHover) {\r\n\t\t\t\tobserver._setMarqueeOnHoverControl(null);\r\n\t\t\t}\r\n\t\t\tif (!this.marqueeOnRender) {\r\n\t\t\t\tthis.stopMarquee();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_marquee_stopPropagation: function (sender, ev) {\r\n\t\tif (ev.originator != this) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* When a child marquee animation completes, removes the child from\r\n\t* [marqueeWaitList]{@link module:moonstone/Marquee~MarqueeSupport#marqueeWaitList}.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_marquee_marqueeEnded: function (sender, ev) {\r\n\t\tif (this._marquee_active) {\r\n\t\t\tutil.remove(ev.originator, this.marqueeWaitList);\r\n\t\t\tif (this.marqueeWaitList.length === 0) {\r\n\t\t\t\tthis._marquee_startHold();\r\n\t\t\t\tthis._marquee_active = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_marquee_resize: function (sender, ev) {\r\n\t\tif (this.marqueeOnSpotlight && this._marquee_active) {\r\n\t\t\tthis._marquee_active = false;\r\n\t\t\tthis._marquee_startHold();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Starts timer to waterfall an\r\n\t* [onRequestMarqueeStart]{@link module:moonstone/Marquee~MarqueeSupport#onRequestMarqueeStart} event\r\n\t* that kicks off marquee animation on all child marquees.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tstartMarquee: function () {\r\n\t\tthis.startMarqueeCustomDelay(this.marqueeDelay);\r\n\t},\r\n\r\n\t/**\r\n\t* Waterfalls an [onRequestMarqueeStop]{@link module:moonstone/Marquee~MarqueeSupport#onRequestMarqueeStop}\r\n\t* event to halt all running child marquees.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tstopMarquee: function () {\r\n\t\tthis.stopJob('marqueeSupportJob');\r\n\t\tthis.stopJob('resetMarquee');\r\n\t\tthis._marquee_active = false;\r\n\t\tthis._marquee_stopChildMarquees();\r\n\t},\r\n\r\n\t/**\r\n\t* @public\r\n\t*/\r\n\tenableMarquee: function () {\r\n\t\tthis._marquee_enableChildMarquees();\r\n\t},\r\n\r\n\t/**\r\n\t* @public\r\n\t*/\r\n\tdisableMarquee: function () {\r\n\t\tthis.stopMarquee();\r\n\t\tthis._marquee_disableChildMarquees();\r\n\t},\r\n\r\n\t/**\r\n\t* Adds the passed-in [control]{@link module:enyo/Control~Control} to the list of marquee items.\r\n\t*\r\n\t* @param {Object} control  The [control]{@link module:enyo/Control~Control} to add.\r\n\t* @public\r\n\t*/\r\n\taddMarqueeItem: function (control) {\r\n\t\tthis.marqueeWaitList.push(control);\r\n\t},\r\n\r\n\t/**\r\n\t* Restarts marquee if needed (depending on the\r\n\t* [marqueeOnSpotlight]{@link module:moonstone/Marquee~MarqueeSupport#marqueeOnSpotlight} and\r\n\t* [marqueeOnRender]{@link module:moonstone/Marquee~MarqueeSupport#marqueeOnRender} settings).\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tresetMarquee: function () {\r\n\t\tif ((this.marqueeOnSpotlight && this._marquee_isFocused) ||\r\n\t\t\t(this.marqueeOnHover && this._marquee_isHovered) ||\r\n\t\t\tthis.marqueeOnRender) {\r\n\t\t\t// Batch multiple requests to reset from children being hidden/shown\r\n\t\t\tthis.startJob('resetMarquee', '_resetMarquee', 10);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Starts Marquee after a specified delay. Used to provide different delays for `onRender`\r\n\t* and `onSpotlight/Hover`.\r\n\t*\r\n\t* @param {Number} delay  Length of delay in milliseconds\r\n\t* @public\r\n\t*/\r\n\tstartMarqueeCustomDelay: function (delay) {\r\n\t\tthis._marquee_buildWaitList();\r\n\r\n\t\tif (this.marqueeWaitList.length === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._marquee_active = true;\r\n\t\tthis.startJob('marqueeSupportJob', '_marquee_startChildMarquees', delay);\r\n\t},\r\n\r\n\t/**\r\n\t* Stops and restarts the marquee animations.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_resetMarquee: function () {\r\n\t\tthis.stopMarquee();\r\n\t\tif (this.marqueeOnRender) { this.startMarqueeCustomDelay(this.marqueeOnRenderDelay); }\r\n\t\telse { this.startMarquee(); }\r\n\t},\r\n\r\n\t/**\r\n\t* Waterfalls request for child animations to build up\r\n\t* [marqueeWaitList]{@link module:moonstone/Marquee~MarqueeSupport#marqueeWaitList}.\r\n\t*\r\n\t* @fires module:moonstone/Marquee~MarqueeSupport#onRequestMarquee\r\n\t* @private\r\n\t*/\r\n\t_marquee_buildWaitList: function () {\r\n\t\tthis.marqueeWaitList = [];\r\n\t\tthis.waterfall('onRequestMarquee', {originator: this, marqueePause: this.marqueePause, marqueeSpeed: this.marqueeSpeed});\r\n\t},\r\n\r\n\t/**\r\n\t* Waterfalls event to kick off child marquee animations.\r\n\t*\r\n\t* @fires module:moonstone/Marquee~MarqueeSupport#onRequestMarqueeStart\r\n\t* @private\r\n\t*/\r\n\t_marquee_startChildMarquees: function () {\r\n\t\tthis.waterfall('onRequestMarqueeStart', {originator: this});\r\n\t},\r\n\r\n\t/**\r\n\t* Waterfalls event to halt child marquee animations.\r\n\t*\r\n\t* @fires module:moonstone/Marquee~MarqueeSupport#onRequestMarqueeStop\r\n\t* @private\r\n\t*/\r\n\t_marquee_stopChildMarquees: function () {\r\n\t\tthis.waterfall('onRequestMarqueeStop', {originator: this});\r\n\t},\r\n\r\n\t/**\r\n\t* Waterfalls event to enable child marquee animations.\r\n\t*\r\n\t* @fires module:moonstone/Marquee~MarqueeSupport#onRequestMarqueeEnable\r\n\t* @private\r\n\t*/\r\n\t_marquee_enableChildMarquees: function () {\r\n\t\tthis.waterfall('onRequestMarqueeEnable');\r\n\t},\r\n\r\n\t/**\r\n\t* Waterfalls event to disable child marquee animations.\r\n\t*\r\n\t* @fires module:moonstone/Marquee~MarqueeSupport#onRequestMarqueeDisable\r\n\t* @private\r\n\t*/\r\n\t_marquee_disableChildMarquees: function () {\r\n\t\tthis.waterfall('onRequestMarqueeDisable');\r\n\t},\r\n\r\n\t/**\r\n\t* Begins delayed restart of child marquee animations.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_marquee_startHold: function () {\r\n\t\tthis.startJob('marqueeSupportJob', 'startMarquee', this.marqueeHold);\r\n\t}\r\n};\r\n\r\nexports.Support = MarqueeSupport;\r\n\r\n/**\r\n* The {@link module:moonstone/Marquee~MarqueeItem} mixin is used to add marquee animation functionality\r\n* to a control.\r\n*\r\n* @mixin\r\n* @public\r\n*/\r\nvar MarqueeItem = {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\r\n\t\t/**\r\n\t\t* {@link module:moonstone/Marquee~MarqueeItem#onMarqueeEnded}\r\n\t\t*/\r\n\t\tonMarqueeEnded:''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_marqueeItem_Handlers: {\r\n\t\tonRequestMarquee: '_marquee_requestMarquee',\r\n\t\tonRequestMarqueeStart: '_marquee_startAnimation',\r\n\t\tonRequestMarqueeStop: '_marquee_stopAnimation',\r\n\t\tonRequestMarqueeEnable: '_marquee_enable',\r\n\t\tonRequestMarqueeDisable: '_marquee_disable',\r\n\t\tontransitionend: '_marquee_animationEnded'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tobservers: {\r\n\t\t_marquee_contentChanged: ['content'],\r\n\t\t_marquee_centeredChanged: ['centered'],\r\n\t\t_marquee_wrapInsteadOfMarqueeChanged: ['wrapInsteadOfMarquee']\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: '.allowHtml', to:'.$.marqueeText.allowHtml'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-marquee',\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdispatchEvent: kind.inherit(function (sup) {\r\n\t\treturn function (sEventName, oEvent, oSender) {\r\n\t\t\tif (sup.apply(this, arguments)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif (oEvent && !oEvent.delegate) {\r\n\t\t\t\tvar handler = this._marqueeItem_Handlers[sEventName];\r\n\t\t\t\tif (handler && this[handler](oSender, oEvent)) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_marquee_enabled: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_marquee_distance: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_marquee_fits: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_marquee_puppetMaster: null,\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.detectTextDirectionality();\r\n\t\t\tthis._marquee_wrapInsteadOfMarqueeChanged();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\trendered: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\t// There is a known issue where a parent control that modifies the layout will\r\n\t\t\t// invalidate the measurements used to detect the proper alignment, which can\r\n\t\t\t// result in the appropriate text-align rule not being applied. For example, this\r\n\t\t\t// can occur with a moon.Header that is located inside a moon.Scroller which has\r\n\t\t\t// vertical scrollbars visible.\r\n\t\t\tthis._marquee_detectAlignment();\r\n\t\t\tsetTimeout(util.bindSafely(this, this._marquee_calcDistance), platform.firefox ? 100 : 16);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\treflow: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis._marquee_invalidateMetrics();\r\n\t\t\tthis._marquee_calcDistance();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tshowingChangedHandler: kind.inherit(function (sup) {\r\n\t\treturn function (sender, event) {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis._marquee_reset();\r\n\t\t\tif(this.showing && event.showing){\r\n\t\t\t\tthis._marquee_calcDistance();\r\n\t\t\t} else {\r\n\t\t\t\t//if the marquee isn't showing we should reset its spotlight focus\r\n\t\t\t\tif (this._marquee_puppetMaster) {\r\n\t\t\t\t\tthis._marquee_puppetMaster._marquee_spotlightBlur();\r\n\t\t\t\t} else if (this._marquee_spotlightBlur) {\r\n\t\t\t\t\tthis._marquee_spotlightBlur();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* We must measure the content (after render) to determine if it's marqueeable, then to set\r\n\t* its alignment to left if the content was explicitly set to LTR earlier. This happens when\r\n\t* the locale is set to a RTL language, but your string contains no RTL characters in it.\r\n\t* Therefore it's LTR, and if it's marqueeable, should be left aligned, so it marquees in the\r\n\t* natural marqueeing direction.\r\n\t*\r\n\t* @param {Boolean} [forceAnimate]  Override the animation check (only accepts `true`). Use\r\n\t*\tthis if you know already, because you've already measured that you will need to marquee.\r\n\t* @param {Boolean} [forceRtl]  Override the internal RTL property, in case you know better.\r\n\t* @private\r\n\t*/\r\n\t_marquee_detectAlignment: function (forceAnimate, forceRtl) {\r\n\t\tvar alignment = null,\r\n\t\t\trtl = forceRtl || this.rtl;\r\n\r\n\t\t// We only attempt to set the alignment of this control if the locale's directionality\r\n\t\t// differs from the directionality of our current marqueeable control (as determined by\r\n\t\t// the control's content or is explicitly specified).\r\n\t\tif (Control.prototype.rtl != rtl || this.centered) {\r\n\t\t\t// If we will be marqueeing, we know the alignment needs to be set based on directionality.\r\n\t\t\tif (forceAnimate || this._marquee_shouldAnimate()) {\r\n\t\t\t\tif (rtl) {\r\n\t\t\t\t\talignment = 'right';\r\n\t\t\t\t} else {\r\n\t\t\t\t\talignment = 'left';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Alignment wasn't set yet, so we know we don't need to animate. Now we can center the text if we're supposed to.\r\n\t\t\tif (!alignment && this.centered) {\r\n\t\t\t\talignment = 'center';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.set('_marquee_alignment', alignment);\r\n\t},\r\n\r\n\t/**\r\n\t* Reset the marquee distance if the alignment changes, since now we'll have to calculate the\r\n\t* size again.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_marquee_alignmentChanged: function () {\r\n\t\tthis.applyStyle('text-align', this._marquee_alignment);\r\n\t\tthis._marquee_invalidateMetrics();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_marquee_invalidateMetrics: function () {\r\n\t\tthis._marquee_distance = null;\r\n\t\tthis._marquee_fits = null;\r\n\t},\r\n\r\n\t/**\r\n\t* When the content of this control changes, updates the content of\r\n\t* `this.$.marqueeText` (if it exists).\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_marquee_contentChanged: function () {\r\n\t\tthis.detectTextDirectionality();\r\n\t\tif (this.$.marqueeText) {\r\n\t\t\tthis.$.marqueeText.setContent(this.content);\r\n\t\t}\r\n\t\tif (this.generated) {\r\n\t\t\tthis._marquee_invalidateMetrics();\r\n\t\t\tthis._marquee_detectAlignment();\r\n\t\t\tthis._marquee_calcDistance();\r\n\t\t}\r\n\t\tthis._marquee_reset();\r\n\t},\r\n\r\n\t/**\r\n\t* If this control needs to marquee, lets the event originator know.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_marquee_requestMarquee: function (sender, ev) {\r\n\t\tif (!ev || !this.showing || this._marquee_fits) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._marquee_puppetMaster = ev.originator;\r\n\t\tev.originator.addMarqueeItem(this);\r\n\r\n\t\tthis.marqueePause = ev.marqueePause || 1000;\r\n\t\tthis.marqueeSpeed = ev.marqueeSpeed || 60;\r\n\t},\r\n\r\n\t/**\r\n\t* Starts marquee animation.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_marquee_startAnimation: function (sender, ev) {\r\n\t\tvar distance;\r\n\r\n\t\t// if this control hasn't been generated, there's no need to follow through on\r\n\t\t// marquee requests as we'll be unable to correctly measure the distance delta yet\r\n\t\tif (!this.generated) return;\r\n\r\n\t\t// Lazy creation of _this.$.marqueeText_\r\n\t\tif (!this.$.marqueeText) {\r\n\t\t\tthis._marquee_createMarquee();\r\n\t\t}\r\n\r\n\t\tdistance = this._marquee_calcDistance();\r\n\r\n\t\t// If there is no need to animate, return early\r\n\t\tif (!this._marquee_shouldAnimate(distance)) {\r\n\t\t\tthis._marquee_fits = true;\r\n\t\t\tthis.doMarqueeEnded();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._marquee_addAnimationStyles(distance);\r\n\r\n\t\tif (this.$.marqueeText) { return true; }\r\n\t\t//if we should animate marquee (distance > 0) but can`t do this\r\n\t\t//(this.$.marqueeText == undefined (marquee has children)) we fire doMarqueeEnded\r\n\t\t//to remove marquee from marquee wait list\r\n\t\telse { this.doMarqueeEnded(); }\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_marquee_enable: function () {\r\n\t\tthis.set('_marquee_enabled', true);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_marquee_disable: function () {\r\n\t\tthis.set('_marquee_enabled', false);\r\n\t\tthis._marquee_stopAnimation();\r\n\t},\r\n\r\n\t/**\r\n\t* Stops marquee animation.\r\n\t*\r\n\t* @fires module:moonstone/Marquee~MarqueeItem#onMarqueeEnded\r\n\t* @private\r\n\t*/\r\n\t_marquee_stopAnimation: function (sender, ev) {\r\n\t\tthis.stopJob('stopMarquee');\r\n\t\tthis._marquee_removeAnimationStyles();\r\n\t\tthis.doMarqueeEnded();\r\n\t},\r\n\r\n\t/**\r\n\t* When animation ends, starts `this.stopMarquee` job.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_marquee_animationEnded: function (sender, ev) {\r\n\t\tif (ev.originator !== this.$.marqueeText) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.startJob('stopMarquee', '_marquee_stopAnimation', this.marqueePause);\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* Returns `true` if this control has enough content to animate.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_marquee_shouldAnimate: function (distance) {\r\n\t\tdistance = (distance && distance >= 0) ? distance : this._marquee_calcDistance();\r\n\t\treturn (distance > 0);\r\n\t},\r\n\r\n\t/**\r\n\t* Determines how far the marquee needs to scroll.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_marquee_calcDistance: function () {\r\n\t\tvar node, rect;\r\n\r\n\t\tif (this.$.marqueeText) {\r\n\t\t\tnode = this.$.marqueeText.hasNode();\r\n\t\t\tif (node && this._marquee_distance == null && this.getAbsoluteShowing()) {\r\n\t\t\t\trect = node.getBoundingClientRect();\r\n\t\t\t\tthis._marquee_distance = Math.floor(Math.abs(node.scrollWidth - rect.width));\r\n\r\n\t\t\t\t//if the distance is exactly 0, then the ellipsis\r\n\t\t\t\t//most likely are hiding the content, and marquee does not\r\n\t\t\t\t//need to animate\r\n\t\t\t\tif(this._marquee_distance === 0) {\r\n\t\t\t\t\tthis.applyStyle('text-overflow', 'clip');\r\n\t\t\t\t\tthis.$.marqueeText && this.$.marqueeText.applyStyle('text-overflow', 'clip');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.applyStyle('text-overflow', 'ellipsis');\r\n\t\t\t\t\tthis.$.marqueeText && this.$.marqueeText.applyStyle('text-overflow', 'ellipsis');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this._marquee_distance;\r\n\t},\r\n\r\n\t/**\r\n\t* Returns duration based on `distance` and `this.marqueeSpeed`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_marquee_calcDuration: function (distance) {\r\n\t\treturn distance / this.marqueeSpeed;\r\n\t},\r\n\r\n\t/**\r\n\t* Creates a marquee-able `div` inside of `this`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_marquee_createMarquee: function () {\r\n\t\t// Do not create marqueeText when there are children\r\n\t\t// because we don't know what should be the controlParent\r\n\t\tif (this.children && this.children.length > 0) return;\r\n\t\tvar marqueeText = {name: 'marqueeText', kind: Control, classes: 'moon-marquee-text', allowHtml: this.allowHtml, content: this.content},\r\n\t\t\thighlightText = null,\r\n\t\t\twrapper;\r\n\r\n\t\tif (this instanceof HighlightText) {\r\n\t\t\tdom.setInnerHtml(this.hasNode(), '');\r\n\t\t\thighlightText = {renderDelegate: this.renderDelegate, highlightClasses: this.highlightClasses, search: this.search};\r\n\t\t\tmarqueeText = util.mixin(marqueeText, highlightText);\r\n\t\t}\r\n\t\twrapper = this.createComponent({name: 'marqueeTextWrapper', kind: Control, classes: 'moon-marquee-text-wrapper', components: [marqueeText]});\r\n\t\twrapper.renderInto(this.hasNode());\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_marquee_addAnimationStyles: function (distance) {\r\n\t\tif (!this.$.marqueeText) return;\r\n\t\tvar duration = this._marquee_calcDuration(distance);\r\n\r\n\t\tthis.$.marqueeText.addClass('animate-marquee');\r\n\r\n\t\tif (options.accelerate) {\r\n\t\t\tdom.transform(this.$.marqueeText, {translateZ: 0});\r\n\t\t\tthis.$.marqueeText.applyStyle('transition', 'transform ' + duration + 's linear');\r\n\t\t\tthis.$.marqueeText.applyStyle('-webkit-transition', '-webkit-transform ' + duration + 's linear');\r\n\t\t} else {\r\n\t\t\tthis.$.marqueeText.applyStyle('transition', 'left ' + duration + 's linear');\r\n\t\t\tthis.$.marqueeText.applyStyle('-webkit-transition', 'left ' + duration + 's linear');\r\n\t\t}\r\n\r\n\t\t// Need this timeout for FF!\r\n\t\tsetTimeout(this.bindSafely(function () {\r\n\t\t\tif (options.accelerate) {\r\n\t\t\t\tdom.transform(this.$.marqueeText, {translateX: this._marquee_adjustDistanceForRTL(distance) + 'px'});\r\n\t\t\t} else {\r\n\t\t\t\tthis.$.marqueeText.applyStyle('left', this._marquee_adjustDistanceForRTL(distance) + 'px');\r\n\t\t\t}\r\n\t\t}), platform.firefox ? 100 : 16);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_marquee_removeAnimationStyles: function () {\r\n\t\tif (!this.$.marqueeText) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.$.marqueeText.applyStyle('transition-duration', '0s');\r\n\t\tthis.$.marqueeText.applyStyle('-webkit-transition-duration', '0s');\r\n\r\n\t\t// Need this timeout for FF!\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tsetTimeout(this.bindSafely(function () {\r\n\t\t\tthis.$.marqueeText.removeClass('animate-marquee');\r\n\t\t\tif (options.accelerate) {\r\n\t\t\t\tdom.transform(this.$.marqueeText, {translateX: null, translateZ: null});\r\n\t\t\t} else {\r\n\t\t\t\tthis.$.marqueeText.applyStyle('left', null);\r\n\t\t\t}\r\n\t\t}), platform.firefox ? 100 : 0);\r\n\t},\r\n\r\n\t/**\r\n\t* Flips distance value for RTL support.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_marquee_adjustDistanceForRTL: function (distance) {\r\n\t\treturn this.rtl ? distance : distance * -1;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_marquee_reset: function () {\r\n\t\tthis._marquee_invalidateMetrics();\r\n\t\tif (this._marquee_puppetMaster) {\r\n\t\t\tthis._marquee_puppetMaster.resetMarquee();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_marquee_centeredChanged: function () {\r\n\t\tthis._marquee_detectAlignment();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_marquee_wrapInsteadOfMarqueeChanged: function(old) {\r\n\t\tif (this.wrapInsteadOfMarquee) {\r\n\t\t\tthis.addClass('allow-wrap');\r\n\t\t\tif (this.$.marqueeText) {\r\n\t\t\t\tthis.$.marqueeTextWrapper.destroy();\r\n\t\t\t\tthis.render();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (old && !this.wrapInsteadOfMarquee) {\r\n\t\t\tthis.removeClass('allow-wrap');\r\n\t\t\t// FIXME: Performing creation here to workaround potential WebKit measuring issue\r\n\t\t\t// with scrollWidth (under-measures by 10px when marquee components are destroyed\r\n\t\t\t// when we switch wrapInsteadofMarquee from `false` to `true`, and back to `false`).\r\n\t\t\tthis._marquee_createMarquee();\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexports.Item = MarqueeItem;\r\n\r\n/**\r\n* {@link module:moonstone/Marquee~MarqueeText} is a basic text control that supports marquee animation.\r\n* When MarqueeText objects are used inside a\r\n* [MarqueeDecorator]{@link module:moonstone/Marquee~MarqueeDecorator}, the decorator synchronizes\r\n* their start times; the user may start a marquee programmatically by calling\r\n* [startMarquee()]{@link module:moonstone/Marquee~MarqueeSupport#startMarquee}.\r\n*\r\n* ```\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tHeader = require('moonstone/Header'),\r\n* \t\tMarqueeSupport = require('moonstone/Marquee').Support,\r\n* \t\tMarqueeText = require('moonstone/Marquee').Text;\r\n*\r\n* \tmodule.exports = kind({\r\n* \t\tname: Header,\r\n* \t\tmixins: [MarqueeSupport],\r\n* \t\tmarqueeSpeed: 100,\r\n* \t\tcomponents: [\r\n* \t\t\t{kind: MarqueeText, content: 'longText+longText'},\r\n* \t\t\t{kind: MarqueeText, content: 'longText'}\r\n* \t\t],\r\n* \t\trendered: function () {\r\n* \t\t\tthis.startMarquee();\r\n* \t\t}\r\n* \t});\r\n* ```\r\n*\r\n* To add the marquee feature to a kind, simply use the\r\n* [MarqueeSupport]{@link module:moonstone/Marquee~MarqueeSupport} mixin:\r\n*\r\n* ```\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tButton = require('enyo/Button'),\r\n* \t\tMarqueeSupport = require('moonstone/Marquee').Support,\r\n* \t\tMarqueeText = require('moonstone/Marquee').Text;\r\n*\r\n* \tmodule.exports = kind({\r\n* \t\tname: 'MarqueeButton',\r\n* \t\tkind: Button,\r\n* \t\tmixins: [MarqueeSupport],\r\n* \t\tcomponents: [\r\n* \t\t\t{kind: MarqueeText}\r\n* \t\t],\r\n* \t\tcontentChanged: function () {\r\n* \t\t\tthis.$.marqueeText.setContent(this.content);\r\n* \t\t}\r\n* \t});\r\n* ```\r\n*\r\n* @class MarqueeText\r\n* @extends module:enyo/Control~Control\r\n* @mixes module:moonstone/Marquee~MarqueeItem\r\n* @ui\r\n* @public\r\n*/\r\nexports.Text = kind(\r\n\t/** @lends module:moonstone/Marquee~MarqueeText.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.MarqueeText',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [MarqueeItem],\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/Marquee~MarqueeText.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* The speed of the marquee animation, in pixels per second.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 60\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmarqueeSpeed: 60,\r\n\r\n\t\t/**\r\n\t\t* The duration in milliseconds that the marquee will pause at the end of the\r\n\t\t* animation, before resetting to the beginning.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 1000\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmarqueePause: 1000,\r\n\r\n\t\t/**\r\n\t\t* When `true`, marqueeing will not occur.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdisabled: false,\r\n\r\n\t\t/**\r\n\t\t* When `true`, text is centered; otherwise, it is left-aligned.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcentered: false,\r\n\r\n\t\t/**\r\n\t\t* When `true`, element wraps instead of marqueeing.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\twrapInsteadOfMarquee: false\r\n\t}\r\n});\r\n\r\n/**\r\n* {@link module:moonstone/Marquee~MarqueeDecorator} is a wrapper for {@link module:moonstone/Marquee~MarqueeText} objects.\r\n*\r\n* @class MarqueeDecorator\r\n* @extends module:enyo/Control~Control\r\n* @mixes module:moonstone/Marquee~MarqueeSupport\r\n* @ui\r\n* @public\r\n*/\r\nvar MarqueeDecorator = kind(\r\n\t/** @lends module:moonstone/Marquee~MarqueeDecorator.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.MarqueeDecorator',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [MarqueeSupport],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstyle: 'overflow: hidden;'\r\n});\r\n\r\n/**\r\n* The {@link module:moonstone/Marquee~MarqueeDecorator} export\r\n* @public\r\n*/\r\nexports.Decorator = MarqueeDecorator;\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/IconButton~IconButton} kind.\r\n* @module moonstone/IconButton\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tIcon = require('../Icon');\r\n\r\n/**\r\n* {@link module:moonstone/IconButton~IconButton} is a {@link module:moonstone/Icon~Icon} that acts like a button. Specify\r\n* the icon image by setting the [src]{@link module:moonstone/Icon~Icon#src} property to a URL\r\n* indicating the image file's location.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tIconButton = require('moonstone/IconButton');\r\n*\r\n* \t{kind: IconButton, src: 'moonstone/src/assets/search.png'}\r\n* ```\r\n*\r\n* If you want to combine an icon with text inside of a button, use a\r\n* {@link module:moonstone/Icon~Icon} inside a\r\n* {@link module:moonstone/Button~Button}.\r\n*\r\n* Moonstone supports two methods for displaying icons; in addition to specifying\r\n* traditional image assets in `src`, you may use icons that are stored as single\r\n* characters in a special symbol font. To do this, set the value of the\r\n* [icon]{@link module:moonstone/Icon~Icon#icon} property to a string representing\r\n* an icon name, e.g.:\r\n*\r\n* ```javascript\r\n* \t{kind: IconButton, icon: 'closex'}\r\n* ```\r\n*\r\n* See {@link module:moonstone/Icon~Icon} for more information on the available font-based icons,\r\n* as well as specifications for icon image assets.\r\n*\r\n* @class IconButton\r\n* @extends module:moonstone/Icon~Icon\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/IconButton~IconButton.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.IconButton',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Icon,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/IconButton~IconButton.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Used when the IconButton is part of an {@link module:enyo/Group~Group}. A value of `true`\r\n\t\t* indicates that this is the active button of the group; `false`, that it is not\r\n\t\t* the active button.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tactive: false,\r\n\r\n\t\t/**\r\n\t\t* A boolean parameter affecting the size of the button.\r\n\t\t* If `true`, the button will have a diameter of 60px.\r\n\t\t* However, the button's tap target will still have a diameter of 78px, with\r\n\t\t* invisible DOM wrapping the small button to provide the larger tap zone.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsmall: true,\r\n\r\n\t\t/**\r\n\t\t* @deprecated Replaced by [backgroundOpacity]{@link module:moonstone/IconButton~IconButton#backgroundOpacity}.\r\n\t\t*\r\n\t\t* If `true`, the button will have no rounded background color/border.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tnoBackground: false,\r\n\r\n\t\t/**\r\n\t\t* The background-color opacity of this button; valid values are `'opaque'`, `'translucent'`,\r\n\t\t* and `'transparent'`.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default opaque\r\n\t\t* @public\r\n\t\t*/\r\n\t\tbackgroundOpacity: 'opaque'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-icon-button',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\r\n\t\t/**\r\n\t\t* Simulates mousedown.\r\n\t\t*/\r\n\t\tonSpotlightKeyDown: 'depress',\r\n\r\n\t\t/**\r\n\t\t* Simulates mouseup.\r\n\t\t*/\r\n\t\tonSpotlightKeyUp: 'undepress',\r\n\r\n\t\t/**\r\n\t\t* Used to request it is in view in scrollers.\r\n\t\t*/\r\n\t\tonSpotlightFocused: 'spotlightFocused',\r\n\r\n\t\tonSpotlightBlur: 'spotlightBlurred'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tIcon.prototype.create.apply(this, arguments);\r\n\t\tif (this.noBackground) {\r\n\t\t\tthis.noBackgroundChanged();\r\n\t\t}\r\n\t\tthis.backgroundOpacityChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trendered: function () {\r\n\t\tIcon.prototype.rendered.apply(this, arguments);\r\n\t\tthis.activeChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnoBackgroundChanged: function () {\r\n\t\tthis.set('backgroundOpacity', this.noBackground ? 'transparent' : 'opaque');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttap: function () {\r\n\t\tif (this.disabled) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tthis.setActive(true);\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:enyo/GroupItem~GroupItem#onActivate\r\n\t* @private\r\n\t*/\r\n\tactiveChanged: function () {\r\n\t\tthis.bubble('onActivate');\r\n\t},\r\n\r\n\t/**\r\n\t* Adds `pressed` CSS class.\r\n\t* @private\r\n\t*/\r\n\tdepress: function (inSender, inEvent) {\r\n\t\tif (inEvent.keyCode === 13) {\r\n\t\t\tthis.addClass('pressed');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Removes `pressed` CSS class.\r\n\t* @private\r\n\t*/\r\n\tundepress: function () {\r\n\t\tthis.removeClass('pressed');\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:moonstone/Scroller~Scroller#onRequestScrollIntoView\r\n\t* @private\r\n\t*/\r\n\tspotlightFocused: function (inSender, inEvent) {\r\n\t\tif (inEvent.originator === this) {\r\n\t\t\tthis.bubble('onRequestScrollIntoView');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightBlurred: function (sender, event) {\r\n\t\tthis.removeClass('pressed');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbackgroundOpacityChanged: function (old) {\r\n\t\tvar opacity = this.backgroundOpacity;\r\n\t\tif (old) this.removeClass(old);\r\n\t\tif (opacity == 'translucent' || opacity == 'transparent') {\r\n\t\t\tthis.addClass(opacity);\r\n\t\t}\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @default 'button'\r\n\t* @type {String}\r\n\t* @see {@link module:enyo/AccessibilitySupport~AccessibilitySupport#accessibilityRole}\r\n\t* @public\r\n\t*/\r\n\taccessibilityRole: 'button'\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Checkbox~Checkbox} kind.\r\n* @module moonstone/Checkbox\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tri = require('enyo/resolution'),\r\n\tCheckbox = require('enyo/Checkbox');\r\n\r\nvar\r\n\tIcon = require('../Icon');\r\n\r\n/**\r\n* {@link module:moonstone/Checkbox~Checkbox} is a box that, when tapped, shows or hides a checkmark\r\n* and fires an [onChange]{@link module:enyo/Checkbox~Checkbox#onChange} event. It derives from\r\n* {@link module:enyo/Checkbox~Checkbox} and is designed to be used with {@link module:moonstone/CheckboxItem~CheckboxItem}.\r\n*\r\n* @class Checkbox\r\n* @extends module:enyo/Checkbox~Checkbox\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/Checkbox~Checkbox.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Checkbox',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Checkbox,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-checkbox',\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/Checkbox~Checkbox.prototype\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* If `true`, the `checked` property cannot be changed through user input.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tlocked: false,\r\n\r\n\t\t/**\r\n\t\t* Name of a font-based icon to use when displaying the checkbox. Consult\r\n\t\t* {@link module:moonstone/Icon~Icon} for valid values.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'check'\r\n\t\t* @public\r\n\t\t*/\r\n\t\ticon: 'check',\r\n\r\n\t\t/**\r\n\t\t* Optional path to an image asset. May be used to customize checkbox appearance.\r\n\t\t*\r\n\t\t* @type {String|module:enyo/resolution#selectSrc~src}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsrc: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttag: 'div',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'checkboxIcon', kind: Icon, accessibilityDisabled: true, icon: 'check'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trendered: function () {\r\n\t\tCheckbox.prototype.rendered.apply(this, arguments);\r\n\t\tthis.srcChanged();\r\n\t\tthis.iconChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:enyo/Checkbox~Checkbox#onChange\r\n\t* @private\r\n\t*/\r\n\ttap: function (inSender, e) {\r\n\t\tif (!this.disabled && !this.locked) {\r\n\t\t\tthis.setChecked(!this.getChecked());\r\n\t\t\tthis.bubble('onchange');\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdragstart: function () {\r\n\t\t// Override enyo.Input dragstart handler, to allow drags to propagate for Checkbox\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ticonChanged: function() {\r\n\t\tthis.$.checkboxIcon.setIcon(this.icon);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsrcChanged: function() {\r\n\t\tthis.$.checkboxIcon.setSrc(ri.selectSrc(this.src));\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:moonstone/VideoFeedback~VideoFeedback} kind.\r\n* @module moonstone/VideoFeedback\r\n*/\r\n\r\nrequire('moonstone');\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutil = require('enyo/utils'),\r\n\tjob = require('enyo/job'),\r\n\tControl = require('enyo/Control');\r\n\r\nvar\r\n\tIcon = require('moonstone/Icon');\r\n\r\n/**\r\n* {@link module:moonstone/VideoFeedback~VideoFeedback} is a control used by {@link module:moonstone/VideoPlayer~VideoPlayer} to display\r\n* feedback in response to input from video playback controls. It may also be used to\r\n* display custom messages. The {@link module:moonstone/VideoTransportSlider~VideoTransportSlider} control typically\r\n* communicates directly with this one.\r\n*\r\n* @class VideoFeedback\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/VideoFeedback~VideoFeedback */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.VideoFeedback',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-video-player-feedback',\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/VideoFeedback~VideoFeedback.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Length of time (in milliseconds) after which the on-screen feedback will automatically\r\n\t\t* disappear.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 2000\r\n\t\t* @public\r\n\t\t*/\r\n\t\tautoTimeoutMS: 2000,\r\n\r\n\t\t/**\r\n\t\t* When `true`, the content will have locale-safe uppercasing applied.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tuppercase: true\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_showingFeedback: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_imagePath:\t\t\t\t'images/video-player/',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_jumpBackImg:\t\t\t'jumpbackward',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_rewindImg:\t\t\t\t'backward',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_playImg:\t\t\t\t'play',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_pauseImg:\t\t\t\t'pause',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_fastForwardImg:\t\t'forward',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_jumpForwardImg:\t\t'jumpforward',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_pauseBackImg:\t\t\t'pausebackward',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_pauseForwardImg:\t\t'pauseforward',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_pauseJumpBackImg:\t\t'pausejumpbackward',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_pauseJumpForwardImg:\t'pausejumpforward',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_autoTimer: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'leftIcon', kind: Icon, classes: 'moon-video-feedback-icon-left', allowHtml: true, showing: false},\r\n\t\t{name: 'feedText', kind: Control, classes: 'moon-video-feedback-text', allowHtml: true, showing: false},\r\n\t\t{name: 'rightIcon', kind: Icon, classes: 'moon-video-feedback-icon-right', allowHtml: true, showing: false}\r\n\t],\r\n\r\n\t/**\r\n\t* Updates [IconButton]{@link module:moonstone/IconButton~IconButton} image and [Slider]{@link module:moonstone/Slider~Slider}\r\n\t* message with current state and playback rate when any of the playback controls are\r\n\t* triggered.\r\n\t*\r\n\t* Playback states are mapped to `playbackRate` values according to the following hash:\r\n\t*\r\n\t* ```javascript\r\n\t* {\r\n\t*\t'fastForward': ['2', '4', '8', '16'],\r\n\t*\t'rewind': ['-2', '-4', '-8', '-16'],\r\n\t*\t'slowForward': ['1/4', '1/2'],\r\n\t*\t'slowRewind': ['-1/2', '-1']\r\n\t* }\r\n\t* ```\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcheckIconType: function(icon) {\r\n\t\tvar imagesrcRegex = /\\.(jpg|jpeg|png|gif)$/i;\r\n\t\treturn imagesrcRegex.test(icon) ? 'image' : 'iconfont';\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tretrieveImgOrIconPath:function(icon){\r\n\t\treturn this.checkIconType(icon) == 'image' ? this._imagePath + icon : icon;\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the current state for a {@link module:moonstone/VideoFeedback~VideoFeedback} control.\r\n\t*\r\n\t* @param {String} msg - The string to display.\r\n\t* @param {module:moonstone/VideoTransportSlider~VideoTransportSlider~FeedbackParameterObject} params - A\r\n\t*\t[hash]{@glossary Object} of parameters accompanying the message.\r\n\t* @param {Boolean} persist - If `true`, the [feedback]{@link module:moonstone/VideoFeedback~VideoFeedback}\r\n\t* control will not be automatically hidden.\r\n\t* @param {String} leftSrc - The source url for the image displayed on the left side\r\n\t*\tof the feedback control.\r\n\t* @param {String} rightSrc - The source url for the image displayed on the right\r\n\t*\tside of the feedback control.\r\n\t* @param {Boolean} preview - Specify `true` to put the\r\n\t* [video player]{@link module:moonstone/VideoPlayer~VideoPlayer} in preview mode; otherwise, `false`.\r\n\t* @public\r\n\t*/\r\n\tfeedback: function(msg, params, persist, leftSrc, rightSrc, preview) {\r\n\t\tvar customMessage = false;\r\n\t\tmsg = msg || '';\r\n\t\tparams = params || {};\r\n\r\n\t\tswitch (msg) {\r\n\t\tcase 'Play':\r\n\t\t\tmsg = '';\r\n\t\t\trightSrc = this.retrieveImgOrIconPath(this._playImg);\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'Pause':\r\n\t\t\tmsg = '';\r\n\t\t\trightSrc = this.retrieveImgOrIconPath(this._pauseImg);\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'Rewind':\r\n\t\t\tmsg = Math.abs(params.playbackRate) + 'x';\r\n\t\t\tleftSrc = this.retrieveImgOrIconPath(this._rewindImg);\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'Slowrewind':\r\n\t\t\tmsg = params.playbackRate.split('-')[1] + 'x';\r\n\t\t\tleftSrc = this.retrieveImgOrIconPath(this._pauseBackImg);\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'Fastforward':\r\n\t\t\tmsg = params.playbackRate + 'x';\r\n\t\t\trightSrc = this.retrieveImgOrIconPath(this._fastForwardImg);\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'Slowforward':\r\n\t\t\tmsg = params.playbackRate + 'x';\r\n\t\t\trightSrc = this.retrieveImgOrIconPath(this._pauseForwardImg);\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'JumpBackward':\r\n\t\t\tmsg = '';\r\n\t\t\tleftSrc = this.retrieveImgOrIconPath(this._pauseJumpBackImg);\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'JumpForward':\r\n\t\t\tmsg = '';\r\n\t\t\trightSrc = this.retrieveImgOrIconPath(this._pauseJumpForwardImg);\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'JumpToStart':\r\n\t\t\tmsg = '';\r\n\t\t\tleftSrc = this.retrieveImgOrIconPath(this._pauseJumpBackImg);\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'JumpToEnd':\r\n\t\t\tmsg = '';\r\n\t\t\trightSrc = this.retrieveImgOrIconPath(this._pauseJumpForwardImg);\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'Stop':\r\n\t\t\tmsg = '';\r\n\t\t\trightSrc = '';\r\n\t\t\tbreak;\r\n\r\n\t\t// If the user sends in a custom message, block other messages until it's hidden\r\n\t\tdefault:\r\n\t\t\tcustomMessage = true;\r\n\t\t\tthis._showingFeedback = true;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// Don't show feedback if we are showing custom feedback already, unless this is a new custom message\r\n\t\tif (!customMessage && this._showingFeedback) return;\r\n\t\t// If msg is '', we do not need to show\r\n\t\tthis.$.feedText.set('showing', !!msg);\r\n\t\t// Set content as _inMessage_\r\n\t\tthis.$.feedText.setContent( this.get('uppercase') ? util.toUpperCase(msg) : msg);\r\n\r\n\t\t// Show output controls when video player is not preview mode\r\n\t\tif (!preview) this.showFeedback();\r\n\r\n\t\t// Show icons as appropriate\r\n\t\tthis.updateIcons(leftSrc, rightSrc);\r\n\r\n\t\t//* Don't set up hide timer if _inPersistShowing_ is true\r\n\t\tif (persist) this.resetAutoTimer();\r\n\t\telse this.setAutoTimer();\r\n\r\n\t\tthis.inPersistShowing = persist;\r\n\t},\r\n\r\n\t/**\r\n\t* Determines whether the current feedback message is persistent (i.e., it has no\r\n\t* timeout).\r\n\t*\r\n\t* @returns {Boolean} `true` if the current feedback message has no timeout;\r\n\t* otherwise, `false`, meaning that the feedback message has a timeout and is not\r\n\t* persistent.\r\n\t* @public\r\n\t*/\r\n\tisPersistShowing: function() {\r\n\t\treturn this.inPersistShowing;\r\n\t},\r\n\r\n\t/**\r\n\t* Shows this control.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tshowFeedback: function() {\r\n\t\tthis.setShowing(true);\r\n\t},\r\n\r\n\t/**\r\n\t* Hides this control and sets internal `_showingFeedback` flag to `false`.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\thideFeedback: function() {\r\n\t\tthis.setShowing(false);\r\n\t\tthis._showingFeedback = false;\r\n\t},\r\n\r\n\t/**\r\n\t* Starts job that will hide this control.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsetAutoTimer: function() {\r\n\t\tthis.hideJob = job(this.id + 'hide', this.bindSafely('hideFeedback'), this.getAutoTimeoutMS());\r\n\t},\r\n\r\n\t/**\r\n\t* Clears job that will hide this control.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tresetAutoTimer: function() {\r\n\t\tjob.stop(this.id + 'hide');\r\n\t},\r\n\r\n\t/**\r\n\t* Shows or hides icons, and sets sources.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdateIcons: function(leftSrc, rightSrc) {\r\n\t\tif (leftSrc) {\r\n\t\t\tthis.$.leftIcon.show();\r\n\t\t\tthis.displayIconSrcOrFont(this.$.leftIcon, leftSrc);\r\n\t\t\tthis.$.leftIcon.addRemoveClass('moon-video-feedback-icon-only', !this.$.feedText.get('showing'));\r\n\t\t} else {\r\n\t\t\tthis.$.leftIcon.hide();\r\n\t\t}\r\n\r\n\t\tif (rightSrc) {\r\n\t\t\tthis.$.rightIcon.show();\r\n\t\t\tthis.displayIconSrcOrFont(this.$.rightIcon, rightSrc);\r\n\t\t\tthis.$.rightIcon.addRemoveClass('moon-video-feedback-icon-only', !this.$.feedText.get('showing'));\r\n\t\t} else {\r\n\t\t\tthis.$.rightIcon.hide();\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdisplayIconSrcOrFont: function(iconKind, icon) {\r\n\t\tif (this.checkIconType(icon) == 'image') {\r\n\t\t\ticonKind.set('icon', '');\r\n\t\t\ticonKind.set('src', icon);\r\n\t\t} else {\r\n\t\t\ticonKind.set('src', '');\r\n\t\t\ticonKind.set('icon', icon);\r\n\t\t}\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Drawers/Drawer~Drawer} kind.\r\n* @module moonstone/Drawers/Drawer\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom'),\r\n\tutils = require('enyo/utils'),\r\n\tAnimator = require('enyo/Animator'),\r\n\tControl = require('enyo/Control');\r\n\r\nvar\r\n\tFittableRows = require('layout/FittableRows');\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\nvar\r\n\toptions = require('../options'),\r\n\tHistorySupport = require('../HistorySupport');\r\n\r\n/**\r\n* Fires when either the main drawer or the control drawer is activated. No event-specific\r\n* data is sent with this event.\r\n*\r\n* @event module:moonstone/Drawers/Drawer~Drawer#onActivate\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when either the main drawer or the control drawer is deactivated. No event-specific\r\n* data is sent with this event.\r\n*\r\n* @event module:moonstone/Drawers/Drawer~Drawer#onDeactivate\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when either the main drawer or the control drawer completes it animation. No event-specific\r\n* data is sent with this event.\r\n*\r\n* @event module:moonstone/Drawers/Drawer~Drawer#onDrawerAnimationEnd\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/Drawers/Drawer~Drawer}, a control designed for use with\r\n* {@link module:moonstone/Drawers~Drawers}, consists of two drawers and a handle.\r\n* The main drawer is populated with any child components that are specified in\r\n* the constructor; the optional second drawer (control drawer) is populated\r\n* with components passed into the\r\n* [controlDrawerComponents]{@link module:moonstone/Drawers/Drawer~Drawer#controlDrawerComponents}\r\n* property.\r\n*\r\n* If the second drawer has no components, the main drawer will take up the full\r\n* height of the containing view; otherwise, its height will be equal to the\r\n* height of the containing view minus the height of the `controlDrawerComponents`.\r\n*\r\n* A call to [toggleDrawer()]{@link module:moonstone/Drawers/Drawer~Drawer#toggleDrawer}\r\n* will open or close the control drawer if `controlDrawerComponents` is\r\n* non-empty; otherwise, it will open or close the main drawer.\r\n*\r\n* The control's child components may be of any kind.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tDrawer = require('moonstone/Drawers').Drawer;\r\n*\r\n* \t{\r\n* \t\tname: 'musicDrawer',\r\n* \t\tkind: Drawer,\r\n* \t\thandle: {name: 'handleButton', content: 'Handle'},\r\n* \t\tcomponents: [\r\n* \t\t\t{content: 'Drawer Content'}\r\n* \t\t],\r\n* \t\tcontrolDrawerComponents: [\r\n* \t\t\t{content: 'Controls'}\r\n* \t\t]\r\n* \t}\r\n* ```\r\n*\r\n* @class Drawer\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/Drawers/Drawer~Drawer.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Drawer',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: FittableRows,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [HistorySupport],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-drawer moon-neutral enyo-fit',\r\n\r\n\t/**\r\n\t* Components that are to be placed in the control drawer.\r\n\t*\r\n\t* @type {Object}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\tcontrolDrawerComponents: null,\r\n\r\n\t/**\r\n\t* Control that acts a \"handle\" for the drawer.\r\n\t*\r\n\t* @type {Object}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\thandle: null,\r\n\r\n\t/**\r\n\t* Visibility state of the main drawer.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\topen: false,\r\n\r\n\t/**\r\n\t* Visibility state of the control drawer.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tcontrolsOpen: false,\r\n\r\n\t/**\r\n\t* Available height for a fully displayed drawer\r\n\t*\r\n\t* @type {Number}\r\n\t* @default 0\r\n\t* @public\r\n\t*/\r\n\tfullHeight: 0,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\r\n\t\t/**\r\n\t\t* {@link module:moonstone/Drawers/Drawer~Drawer#onActivate}\r\n\t\t*/\r\n\t\tonActivate: '',\r\n\r\n\t\t/**\r\n\t\t* {@link module:moonstone/Drawers/Drawer~Drawer#onDeactivate}\r\n\t\t*/\r\n\t\tonDeactivate: '',\r\n\r\n\t\t/**\r\n\t\t* {@link module:moonstone/Drawers/Drawer~Drawer#onDrawerAnimationEnd}\r\n\t\t*/\r\n\t\tonDrawerAnimationEnd: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tontransitionend: 'transitionEnded',\r\n\t\tonwebkittransitionend: 'transitionEnded'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'client', kind: Control, fit: true, classes: 'moon-drawer-client', spotlightDisabled: true},\r\n\t\t{name: 'controlDrawer', kind: Control, classes: 'moon-drawer-partial-client', spotlightDisabled: true}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitComponents: function () {\r\n\t\tFittableRows.prototype.initComponents.apply(this, arguments);\r\n\t\tthis.$.controlDrawer.createComponents(this.controlDrawerComponents, {owner: this.owner});\r\n\t\tif (!options.accelerate) this.createComponent({name: 'animator', kind: Animator, onStep: 'animationStep', onEnd: 'animationComplete'});\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\treflow: function () {\r\n\t\tFittableRows.prototype.reflow.apply(this, arguments);\r\n\t\tthis.calcDrawerHeight();\r\n\t\tthis.updatePosition();\r\n\t},\r\n\r\n\t/**\r\n\t* If [controlDrawerComponents]{@link module:moonstone/Drawers/Drawer~Drawer#controlDrawerComponents}\r\n\t* is non-empty, toggles the visibility state of the control drawer; otherwise,\r\n\t* toggles the visibility state of the main drawer.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\ttoggleDrawer: function () {\r\n\t\tif (this.controlDrawerComponents == null) {\r\n\t\t\tthis.set('open', !this.open);\r\n\t\t} else {\r\n\t\t\tthis.set('controlsOpen', !this.controlsOpen);\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:moonstone/Drawers/Drawer~Drawer#onActivate\r\n\t* @fires module:moonstone/Drawers/Drawer~Drawer#onDeactivate\r\n\t* @private\r\n\t*/\r\n\topenChanged: function () {\r\n\t\tif (this.open) {\r\n\t\t\tthis.doActivate({height: this.fullHeight});\r\n\t\t\tthis.$.client.spotlightDisabled = false;\r\n\t\t\tSpotlight.spot(this.$.client);\r\n\t\t\tif (this.allowBackKey) {\r\n\t\t\t\tthis.pushBackHistory();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.$.client.spotlightDisabled = true;\r\n\t\t\tthis.doDeactivate({height: this.controlsOpen ? this.controlDrawerHeight : 0});\r\n\t\t}\r\n\t\tthis.animatePosition();\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:moonstone/Drawers/Drawer~Drawer#onActivate\r\n\t* @fires module:moonstone/Drawers/Drawer~Drawer#onDeactivate\r\n\t* @private\r\n\t*/\r\n\tcontrolsOpenChanged: function () {\r\n\t\tif (this.controlsOpen) {\r\n\t\t\tthis.doActivate({height: this.controlDrawerHeight});\r\n\t\t\tthis.$.controlDrawer.spotlightDisabled = false;\r\n\t\t\tSpotlight.spot(this.$.controlDrawer);\r\n\t\t\tif (this.allowBackKey) {\r\n\t\t\t\tthis.pushBackHistory();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.$.controlDrawer.spotlightDisabled = true;\r\n\t\t\tthis.doDeactivate({height: 0});\r\n\t\t}\r\n\t\tthis.animatePosition();\r\n\t},\r\n\r\n\t/**\r\n\t* @protected\r\n\t*/\r\n\tfullHeightChanged: function (was, is) {\r\n\t\tthis.applyStyle('height', is + 'px');\r\n\t\tthis.reflow();\r\n\t\tif (options.accelerate) {\r\n\t\t\t// first remove the class, so changes in fullHeight during resize aren't animated\r\n\t\t\tthis.removeClass('moon-drawer-rendered');\r\n\t\t\t// then defer adding the rendered class so the initial transform isn't animated\r\n\t\t\tutils.asyncMethod(this, 'addClass', 'moon-drawer-rendered');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcDrawerHeight: function () {\r\n\t\tvar clientHeight = this.fullHeight,\r\n\t\t\tnode = this.$.controlDrawer.hasNode();\r\n\t\tif (this.controlDrawerComponents != null && node) {\r\n\t\t\tthis.controlDrawerHeight = this.controlDrawerHeight || node.getBoundingClientRect().height;\r\n\t\t\tclientHeight -= this.controlDrawerHeight;\r\n\t\t}\r\n\t\treturn clientHeight;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcTopPosition: function () {\r\n\t\tvar top = this.fullHeight;\r\n\t\tif (this.open) {\r\n\t\t\ttop = 0;\r\n\t\t} else if (this.controlsOpen) {\r\n\t\t\ttop = this.fullHeight - this.controlDrawerHeight;\r\n\t\t}\r\n\r\n\t\treturn -top;\r\n\t},\r\n\r\n\t/**\r\n\t* Updates the drawer position without animation. This does not prevent CSS transitions if used.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdatePosition: function () {\r\n\t\tvar top = this.calcTopPosition();\r\n\t\tthis.updateTop(top);\r\n\t},\r\n\r\n\t/**\r\n\t* Called after {@link module:moonstone/Drawers/Drawer~Drawer#open} or\r\n\t* {@link moonstone/Drawers/Drawer~Drawer#controlsOpen) changes to animate the\r\n\t* drawer's position.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tanimatePosition: function () {\r\n\t\tvar bounds,\r\n\t\t\ttop = this.calcTopPosition();\r\n\r\n\t\t// not accelerated and drawer has been rendered\r\n\t\tif (options.accelerate) {\r\n\t\t\t// The drawer may have just been shown in this frame so we need to delay applying the\r\n\t\t\t// CSS transform until the next frame so the CSS animation takes effect.\r\n\t\t\tutils.asyncMethod(this, 'updateTop', top);\r\n\t\t} else {\r\n\t\t\tbounds = this.getBounds();\r\n\t\t\tthis.$.animator.play({\r\n\t\t\t\tstartValue: bounds.top,\r\n\t\t\t\tendValue: top\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tanimationStep: function (sender, event) {\r\n\t\tthis.updateTop(sender.value);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tanimationComplete: function (sender, event) {\r\n\t\tthis.doDrawerAnimationEnd();\r\n\t},\r\n\r\n\t/**\r\n\t* Updates the top position of the drawer, either by CSS transform or CSS position\r\n\t*\r\n\t* @param  {Number} top Position where negative values push the drawer offscreen\r\n\t* @private\r\n\t*/\r\n\tupdateTop: function (top) {\r\n\t\tif (options.accelerate) {\r\n\t\t\tdom.transformValue(this, 'translateY', top + 'px');\r\n\t\t} else {\r\n\t\t\tthis.setBounds({\r\n\t\t\t\ttop: top + 'px'\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Handles the ontransitionend event to fire the onDrawerAnimationEnd event\r\n\t*\r\n\t* @private\r\n\t*/\r\n\ttransitionEnded: function (sender, event) {\r\n\t\tif (event.originator === this) this.doDrawerAnimationEnd();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbackKeyHandler: function () {\r\n\t\tif (this.open) {\r\n\t\t\tthis.set('open', false);\r\n\t\t} else if (this.controlsOpen) {\r\n\t\t\tthis.set('controlsOpen', false);\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @deprecated Backwards compatibility\r\n\t* @public\r\n\t*/\r\n\tsetOpen: function (open) { this.set('open', open); },\r\n\r\n\t/**\r\n\t* @deprecated Backwards compatibility\r\n\t* @public\r\n\t*/\r\n\tgetOpen: function () { return this.open; },\r\n\r\n\t/**\r\n\t* @deprecated Backwards compatibility\r\n\t* @public\r\n\t*/\r\n\tsetControlsOpen: function (controlsOpen) { this.set('controlsOpen', controlsOpen); },\r\n\r\n\t/**\r\n\t* @deprecated Backwards compatibility\r\n\t* @public\r\n\t*/\r\n\tgetControlsOpen: function () { return this.controlsOpen; }\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/ExpandableText~ExpandableText} kind.\r\n* @module moonstone/ExpandableText\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tControl = require('enyo/Control');\r\n\r\nvar\r\n\t$L = require('../i18n'),\r\n\tClampedText = require('../ClampedText');\r\n\r\n\r\n/**\r\n* {@link module:moonstone/ExpandableText~ExpandableTextButton} is a control used inside of {@link module:moonstone/ExpandableText~ExpandableText}.\r\n*\r\n* @class ExpandableTextButton\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @private\r\n*/\r\nvar ExpandableTextButton = kind(\r\n\t/** @lends module:moonstone/ExpandableText~ExpandableTextButton.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ExpandableTextButton',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/ExpandableText~ExpandableTextButton.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Button text when [collapsed]{@link module:moonstone/ExpandableText~ExpandableTextButton#collapsed} is `true`.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'more'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmoreContent: $L('more'),\t\t// i18n 'MORE' label in moon.ExpandableTextButton widget\r\n\r\n\t\t/**\r\n\t\t* Button text when [collapsed]{@link module:moonstone/ExpandableText~ExpandableTextButton#collapsed} is `false`.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'less'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tlessContent: $L('less'),\t\t// i18n 'LESS' label in moon.ExpandableTextButton widget\r\n\r\n\t\t/**\r\n\t\t* Boolean value that causes content/class changes.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcollapsed: true\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\r\n\t\t/**\r\n\t\t* {@link module:enyo/Spotlight~Spotlight#onSpotlightFocus}, the handler bubbles a\r\n\t\t* [requestScrollIntoView]{@link module:moonstone/Scroller~Scroller#requestScrollIntoView} event.\r\n\t\t*/\r\n\t\tonSpotlightFocused\t: 'spotFocused'\r\n\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-body-text moon-expandable-text-button',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tthis.updateContent();\r\n\t},\r\n\r\n\t/**\r\n\t* Bubbles a [requestScrollIntoView]{@link module:moonstone/Scroller~Scroller#requestScrollIntoView}\r\n\t* event.\r\n\t*\r\n\t* @fires module:moonstone/Scroller~Scroller#requestScrollIntoView\r\n\t* @private\r\n\t*/\r\n\tspotFocused: function (inSender, inEvent) {\r\n\t\tif (inEvent.originator === this) {\r\n\t\t\tthis.bubble('onRequestScrollIntoView');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmoreContentChanged: function () {\r\n\t\tthis.updateContent();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tlessContentChanged: function () {\r\n\t\tthis.updateContent();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcollapsedChanged: function () {\r\n\t\tthis.updateContent();\r\n\t},\r\n\r\n\t/**\r\n\t* If control is collapsed, sets [content]{@link module:moonstone/ExpandableText~ExpandableTextButton#content} to\r\n\t* [moreContent]{@link module:moonstone/ExpandableText~ExpandableTextButton#moreContent} and adds `collapsed` CSS class;\r\n\t* otherwise, sets content to [lessContent]{@link module:moonstone/ExpandableText~ExpandableTextButton#lessContent} and\r\n\t* removes `collapsed` CSS class.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdateContent: function () {\r\n\t\tif (this.collapsed) {\r\n\t\t\tthis.setContent(this.moreContent);\r\n\t\t\tthis.addClass('collapsed');\r\n\t\t} else {\r\n\t\t\tthis.setContent(this.lessContent);\r\n\t\t\tthis.removeClass('collapsed');\r\n\t\t}\r\n\t}\r\n});\r\n\r\n/**\r\n* Fires when this control expands or collapses.\r\n*\r\n* @event module:moonstone/ExpandableText~ExpandableText#onExpandCollapse\r\n* @type {Object}\r\n* @property {Boolean} collapsed - Whether the control is currently collapsed.\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/ExpandableText~ExpandableText} is a control that allows long bodies of\r\n* text to be expanded and collapsed. Note that this control only works properly in WebKit browsers.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tExpandableText = require('moonstone/ExpandableText');\r\n*\r\n* \t{kind: ExpandableText, collapsed: true, maxLines: 3,\r\n* \t\tcontent: 'I left my heart in San Francisco.'}\r\n* ```\r\n*\r\n* The [onExpandCollapse]{@link module:moonstone/ExpandableText~ExpandableText#onExpandCollapse}\r\n* event is fired when the control is either expanded or collapsed.\r\n*\r\n* @class ExpandableText\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\n\r\nvar ExpandableText = module.exports = kind(\r\n\t/** @lends module:moonstone/ExpandableText~ExpandableText.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ExpandableText',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t//* @protected\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-expandable-text',\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/ExpandableText~ExpandableText.prototype\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* Maximum number of lines of content to show in collapsed state.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 3\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmaxLines: 3,\r\n\r\n\t\t/**\r\n\t\t* When `true`, content is collapsed.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcollapsed: true,\r\n\r\n\t\t/**\r\n\t\t* Button text when content is collapsed (i.e., 'more' label). Default is\r\n\t\t* locale-aware.\r\n\t\t* @type {String}\r\n\t\t* @default 'more'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmoreContent: $L('more'),\r\n\r\n\t\t/**\r\n\t\t* Button text when content is expanded (i.e., 'less' label). Default is\r\n\t\t* locale-aware.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'less'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tlessContent: $L('less')\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\r\n\t\t/**\r\n\t\t* {@link module:moonstone/ExpandableText~ExpandableText#onExpandCollapse}\r\n\t\t*/\r\n\t\tonExpandCollapse: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents:[\r\n\t\t{name: 'client', kind: ClampedText, classes: 'moon-body-text moon-expandable-text-content'},\r\n\t\t{name: 'button', kind: ExpandableTextButton, ontap: 'expandContract'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tthis.moreContentChanged();\r\n\t\tthis.lessContentChanged();\r\n\t\tthis.maxLinesChanged();\r\n\t\tthis.collapsedChanged();\r\n\t\tthis.observe('$.client.canCollapse', 'canCollapseChanged');\r\n\t},\r\n\r\n\t/**\r\n\t* Toggles value of [collapsed]{@link module:moonstone/ExpandableText~ExpandableText#collapsed} when\r\n\t* `this.$.button` is tapped.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\texpandContract: function () {\r\n\t\tthis.set('collapsed', !this.collapsed);\r\n\t},\r\n\r\n\t/**\r\n\t* Facades `this.$.button.moreContent`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tmoreContentChanged: function () {\r\n\t\tthis.$.button.setMoreContent(this.moreContent);\r\n\t},\r\n\r\n\t/**\r\n\t* Facades `this.$.button.lessContent`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tlessContentChanged: function () {\r\n\t\tthis.$.button.setLessContent(this.lessContent);\r\n\t},\r\n\r\n\t/**\r\n\t* Recalculates [maxHeight]{@link module:moonstone/ExpandableText~ExpandableText#maxHeight} when\r\n\t* [maxLines]{@link module:moonstone/ExpandableText~ExpandableText#maxLines} changes.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tmaxLinesChanged: function () {\r\n\t\tthis.$.client.set('maxLines', this.maxLines);\r\n\t},\r\n\r\n\tcontentChanged: function () {\r\n\t\tthis.$.client.set('content', this.content);\r\n\t},\r\n\r\n\t/**\r\n\t* When [collapsed]{@link module:moonstone/ExpandableText~ExpandableText#collapsed} changes, adds/removes the\r\n\t* line clamp, and pushes state to `this.$.button`. If the node has rendered, bubbles\r\n\t* [onExpandCollapse]{@link module:moonstone/ExpandableText~ExpandableText#onExpandCollapse} event.\r\n\t*\r\n\t* @fires module:moonstone/ExpandableText~ExpandableText#onExpandCollapse\r\n\t* @fires module:moonstone/Scroller~Scroller#onRequestScrollIntoView\r\n\t* @private\r\n\t*/\r\n\tcollapsedChanged: function () {\r\n\t\tthis.$.client.set('clamped', this.collapsed);\r\n\t\tthis.$.button.setCollapsed(this.collapsed);\r\n\t\tif (this.hasNode()) {\r\n\t\t\tthis.doExpandCollapse({collapsed: this.collapsed});\r\n\t\t}\r\n\t\tthis.bubble('onRequestScrollIntoView', {scrollInPointerMode: true});\r\n\t},\r\n\r\n\t/**\r\n\t* Updates `this.$.button.showing` when\r\n\t* [canCollapse]{@link module:moonstone/ExpandableText~ExpandableText#canCollapse} changes.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcanCollapseChanged: function (was, is) {\r\n\t\tthis.$.button.setShowing(is);\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: 'generated', method: function () {\r\n\t\t\tthis.$.button.setAriaAttribute('aria-labelledby', this.$.client.id);\r\n\t\t}}\r\n\t]\r\n});\r\n\r\n/**\r\n* Kind definition for {@link module:moonstone/ExpandableText~ExpandableTextButton}\r\n*/\r\nExpandableText.ExpandableTextButton = ExpandableTextButton;\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/InputDecorator~InputDecorator} kind.\r\n* @module moonstone/InputDecorator\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tToolDecorator = require('enyo/ToolDecorator');\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\nvar\r\n\t$L = require('../i18n'),\r\n\tInput = require('../Input'),\r\n\tRichText = require('../RichText'),\r\n\tTextArea = require('../TextArea'),\r\n\tTooltip = require('../Tooltip');\r\n\r\n/**\r\n* {@link module:moonstone/InputDecorator~InputDecorator} is a control that provides input styling. Any controls\r\n* in the InputDecorator will appear to be inside an area styled as an input. Usually,\r\n* an InputDecorator surrounds a {@link module:moonstone/Input~Input}:\r\n*\r\n* ```\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tInput = require('moonstone/Input'),\r\n* \t\tInputDecorator = require('moonstone/InputDecorator');\r\n*\r\n* \t{kind: InputDecorator, components: [\r\n* \t\t{kind: Input}\r\n* \t]}\r\n* ```\r\n*\r\n* Other controls, such as buttons, may be placed to the right or left of the\r\n* input control, e.g.:\r\n*\r\n* ```\r\n* \tvar\r\n* \t\tIconButton = require('moonstone/IconButton');\r\n*\r\n* \t{kind: InputDecorator, components: [\r\n* \t\t{kind: IconButton, src: 'moonstone/src/assets/search.png'},\r\n* \t\t{kind: Input},\r\n* \t\t{kind: IconButton, src: 'moonstone/src/assets/cancel.png'}\r\n* \t]}\r\n* ```\r\n*\r\n* Note that the InputDecorator fits around the content inside it. If the\r\n* decorator is sized, then its contents will likely need to be sized as well.\r\n*\r\n* ```\r\n* \t{kind: InputDecorator, style: 'width: 500px;', components: [\r\n* \t\t{kind: Input, style: 'width: 100%;'}\r\n* \t]}\r\n* ```\r\n*\r\n* @class InputDecorator\r\n* @extends module:enyo/ToolDecorator~ToolDecorator\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/InputDecorator~InputDecorator.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.InputDecorator',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: ToolDecorator,\r\n\r\n\t/**\r\n\t* When `true`, the message tooltip is shown if it exists.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tinvalid: false,\r\n\r\n\t/**\r\n\t* The tooltip text to be displayed when the contents of the input are invalid. If this value is\r\n\t* falsy, the tooltip will not be shown.\r\n\t*\r\n\t* @type {String}\r\n\t* @default ''\r\n\t* @public\r\n\t*/\r\n\tinvalidMessage: '',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttag: 'label',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightDecorate: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonDisabledChange    : 'disabledChangeHandler',\r\n\t\tonfocus             : 'focusHandler',\r\n\t\tonblur              : 'blurHandler',\r\n\t\tonSpotlightFocused  : 'spotlightFocusedHandler',\r\n\t\tonSpotlightSelect   : 'spotlightSelectHandler',\r\n\t\tonSpotlightBlur     : 'spotlightBlurHandler',\r\n\t\tonSpotlightLeft     : 'spotlightLeftHandler',\r\n\t\tonSpotlightRight    : 'spotlightRightHandler',\r\n\t\tonSpotlightUp       : 'spotlightUpHandler',\r\n\t\tonSpotlightDown     : 'spotlightDownHandler'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttools: [\r\n\t\t{name: 'tooltip', kind: Tooltip, floating: false, position: 'right top'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tobservers: [\r\n\t\t{path: ['invalid', 'invalidMessage'], method: 'updateValidity'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_oInputControl: null,\r\n\r\n\t/**\r\n\t* Returns boolean indicating whether passed-in control is an input field.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_isInput: function (oControl) {\r\n\t\treturn (\r\n\t\t\toControl instanceof Input\t\t||\r\n\t\t\toControl instanceof RichText\t||\r\n\t\t\toControl instanceof TextArea\r\n\t\t);\r\n\t},\r\n\r\n\t/**\r\n\t* Traverses tree of children to find input control.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_findInputControl: function (oControl) {\r\n\t\toControl = oControl || this;\r\n\r\n\t\tvar oInputControl = null;\r\n\r\n\t\tfor (var n=0; n<oControl.children.length; n++) {\r\n\t\t\tif (this._isInput(oControl.children[n])) {\r\n\t\t\t\treturn oControl.children[n];\r\n\t\t\t}\r\n\t\t\tif ((oInputControl = this._findInputControl(oControl.children[n]))) {\r\n\t\t\t\treturn oInputControl;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tToolDecorator.prototype.create.apply(this, arguments);\r\n\t\tthis.updateFocus(false);\r\n\t\tthis._oInputControl = this._findInputControl();\r\n\t\tif (this._oInputControl instanceof Input) {\r\n\t\t\tthis.addClass('moon-divider-text moon-input-decorator');\r\n\t\t}\r\n\t\tif (this._oInputControl instanceof TextArea || this._oInputControl instanceof RichText) {\r\n\t\t\tthis.addClass('moon-divider-text moon-textarea-decorator');\r\n\t\t}\r\n\r\n\t\tthis.updateValidity();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreateComponent: function () {\r\n\t\tvar ret = ToolDecorator.prototype.createComponent.apply(this, arguments);\r\n\t\tthis._oInputControl = this._findInputControl();\r\n\t\treturn ret;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreateComponents: function () {\r\n\t\tvar ret = ToolDecorator.prototype.createComponents.apply(this, arguments);\r\n\t\tthis._oInputControl = this._findInputControl();\r\n\t\treturn ret;\r\n\t},\r\n\r\n\t/**\r\n\t* Updates styling based on focus state.\r\n\t*\r\n\t* @param {Boolean} bFocus - Whether to add/remove `moon-focused` class.\r\n\t* @public\r\n\t*/\r\n\tupdateFocus: function (bFocus) {\r\n\t\tthis.set('focused', bFocus);\r\n\t\tthis.addRemoveClass('moon-focused', this.alwaysLooksFocused || this.focused);\r\n\t},\r\n\r\n\t/**\r\n\t* Retrieves the child input control.\r\n\t*\r\n\t* @returns {Object} A reference to the child input control.\r\n\t* @public\r\n\t*/\r\n\tgetInputControl: function () {\r\n\t\treturn this._oInputControl;\r\n\t},\r\n\r\n\t// Event handlers:\r\n\t/**************************************************/\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tfocusHandler: function (oSender, oEvent) {\r\n\t\tif (Spotlight.getCurrent() != this) {\r\n\t\t\t// Force a spot here, even when we're in pointer mode,\r\n\t\t\t// to ensure that clicks inside us (e.g. to position\r\n\t\t\t// the cursor) don't cause Spotlight to unfreeze\r\n\t\t\tSpotlight.spot(this, {focusType: 'point'});\r\n\t\t}\r\n\t\tSpotlight.freeze();\r\n\t\tthis.updateFocus(true);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tblurHandler: function () {\r\n\t\tSpotlight.unfreeze();\r\n\t\tthis.updateFocus(false);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdisabledChangeHandler: function (oSender, oEvent) {\r\n\t\tthis.addRemoveClass('moon-disabled', oEvent.originator.disabled);\r\n\t},\r\n\r\n\t// Spotlight Event handlers:\r\n\t/**************************************************/\r\n\r\n\t/**\r\n\t* @fires module:moonstone/Scroller~Scroller#onRequestScrollIntoView\r\n\t* @private\r\n\t*/\r\n\tspotlightFocusedHandler: function () {\r\n\t\tthis.set('spotted', true);\r\n\t\tthis.bubble('onRequestScrollIntoView');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightSelectHandler: function (oSender, oEvent) {\r\n\t\tvar oInput = this.getInputControl();\r\n\t\tif (oInput) {\r\n\t\t\tif (oInput.hasFocus() && oEvent) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\toInput.focus();\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightBlurHandler: function (oSender, oEvent) {\r\n\t\tthis.set('spotted', false);\r\n\t\tthis.blur();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightLeftHandler: function (oSender, oEvent) {\r\n\t\tvar oInput = this.getInputControl();\r\n\t\tif (oInput && oInput.hasFocus() && oInput.left) {\r\n\t\t\tif (oInput.left()) {\r\n\t\t\t\toEvent.allowDomDefault();       // Allow keydown to bubble\r\n\t\t\t\treturn true;                    // Prevent onSpotlightLeft to bubble\r\n\t\t\t} else {\r\n\t\t\t\tthis.blur();\r\n\t\t\t\toInput.blur();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightRightHandler: function (oSender, oEvent) {\r\n\t\tvar oInput = this.getInputControl();\r\n\t\tif (oInput && oInput.hasFocus() && oInput.right) {\r\n\t\t\tif (oInput.right()) {\r\n\t\t\t\toEvent.allowDomDefault();       // Allow keydown to bubble\r\n\t\t\t\treturn true;                    // Prevent onSpotlightRight to bubble\r\n\t\t\t} else {\r\n\t\t\t\tthis.blur();\r\n\t\t\t\toInput.blur();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightUpHandler: function (oSender, oEvent) {\r\n\t\tvar oInput = this.getInputControl();\r\n\t\tif (oInput && oInput.hasFocus() && oInput.up) {\r\n\t\t\tif (oInput.up()) {\r\n\t\t\t\toEvent.allowDomDefault();       // Allow keydown to bubble\r\n\t\t\t\treturn true;                    // Prevent onSpotlightUp to bubble\r\n\t\t\t} else {\r\n\t\t\t\tthis.blur();\r\n\t\t\t\toInput.blur();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightDownHandler: function (oSender, oEvent) {\r\n\t\tvar oInput = this.getInputControl();\r\n\t\tif (oInput && oInput.hasFocus() && oInput.down) {\r\n\t\t\tif (oInput.down()) {\r\n\t\t\t\toEvent.allowDomDefault();       // Allow keydown to bubble\r\n\t\t\t\treturn true;                    // Prevent onSpotlightLeft to bubble\r\n\t\t\t} else {\r\n\t\t\t\tthis.blur();\r\n\t\t\t\toInput.blur();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// Change handlers\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateValidity: function () {\r\n\t\tvar comps, length, i;\r\n\t\t// we want the ability to add the 'moon-invalid' class even if there is no invalid message\r\n\t\tthis.addRemoveClass('moon-invalid', this.invalid);\r\n\t\tif (this.invalid && this.invalidMessage) {\r\n\t\t\tif (!this.$.tooltip) { // lazy creation of tooltip\r\n\t\t\t\tcomps = this.createComponents(this.tools);\r\n\t\t\t\tif (this.hasNode()) {\r\n\t\t\t\t\t// rendering only the created tools, to prevent loss of focus on the input\r\n\t\t\t\t\tfor (i = 0, length = comps.length; i < length; i++) {\r\n\t\t\t\t\t\tcomps[i].render();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.$.tooltip.activator = this;\r\n\t\t\t}\r\n\t\t\tthis.$.tooltip.set('content', this.invalidMessage);\r\n\t\t\tthis.$.tooltip.set('showing', true);\r\n\t\t} else if (this.$.tooltip) {\r\n\t\t\tthis.$.tooltip.set('showing', false);\r\n\t\t}\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* spotted and focused can change in sequence but within the same cycle causing the TV to read\r\n\t* changes when spotting a different control. Enabling this will batch up those changes into\r\n\t* one DOM update thereby avoiding this behavior.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @private\r\n\t*/\r\n\taccessibilityDefer: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: ['spotted', 'focused'], method: function () {\r\n\t\t\tvar text = '',\r\n\t\t\t\toInput = this.getInputControl();\r\n\r\n\t\t\tthis.set('accessibilityLive', this.focused || !this.spotted ? null : 'polite');\r\n\t\t\tif (oInput) {\r\n\t\t\t\tif (oInput instanceof RichText && oInput.hasNode()) {\r\n\t\t\t\t\ttext = (oInput.hasNode().innerText || oInput.getPlaceholder()) + ' ' + $L('edit box');\r\n\t\t\t\t} else if (oInput.type == 'password' && oInput.getValue()) {\r\n\t\t\t\t\tvar character = (oInput.getValue().length > 1) ? $L('characters') : $L('character');\r\n\t\t\t\t\ttext = oInput.getValue().length + ' ' + character + ' ' + $L('edit box');\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttext = (oInput.getValue() || oInput.getPlaceholder()) + ' ' + $L('edit box');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.set('accessibilityLabel', this.spotted && !this.focused ? text : null);\r\n\t\t}}\r\n\t]\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Button~Button} kind.\r\n* @module moonstone/Button\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutil = require('enyo/utils'),\r\n\tButton = require('enyo/Button');\r\n\r\nvar\r\n\tMarquee = require('../Marquee'),\r\n\tMarqueeSupport = Marquee.Support,\r\n\tMarqueeText = Marquee.Text;\r\n\r\n/**\r\n* {@link module:moonstone/Button~Button} is an {@link module:enyo/Button~Button} with Moonstone styling applied.\r\n* The color of the button may be customized by specifying a background color.\r\n*\r\n* For more information, see the documentation on\r\n* [Buttons]{@linkplain $dev-guide/building-apps/controls/buttons.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class Button\r\n* @extends module:enyo/Button~Button\r\n* @mixes module:moonstone/MarqueeSupport~MarqueeSupport\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/Button~Button.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Button',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Button,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttag: 'span',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [MarqueeSupport],\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/Button~Button.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* A boolean parameter affecting the size of the button. If `true`, the\r\n\t\t* button's diameter will be set to 60px. However, the button's tap target\r\n\t\t* will still have a diameter of 78px, with an invisible DOM element\r\n\t\t* wrapping the small button to provide the larger tap zone.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsmall: false,\r\n\r\n\t\t/**\r\n\t\t* A boolean parameter affecting the minimum width of the button. When `true`,\r\n\t\t* the minimum width will be set to 180px (or 130px if [small]{@link module:moonstone/Button~Button#small}\r\n\t\t* is `true`). If `false`, the minimum width will be set to the current value of\r\n\t\t* `@moon-button-height` (thus forcing the button to be no smaller than a circle with\r\n\t\t* diameter `@moon-button-height`).\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tminWidth: true,\r\n\r\n\t\t/**\r\n\t\t* When `true`, the content will have locale-safe uppercasing applied.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tuppercase: true,\r\n\r\n\t\t/**\r\n\t\t* @deprecated Replaced by [uppercase]{@link module:moonstone/Button~Button#uppercase}.\r\n\t\t*\r\n\t\t* Formerly defaulted to `true`, now defaults to `null` and will only have\r\n\t\t* an effect when explicitly set (for complete backward compatibility).\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcontentUpperCase: null,\r\n\r\n\t\t/**\r\n\t\t* The background-color opacity of this button; valid values are `'opaque'`, `'translucent'`,\r\n\t\t* and `'transparent'`.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'opaque'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tbackgroundOpacity: 'opaque'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-large-button-text moon-button enyo-unselectable moon-composite',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\r\n\t\t/**\r\n\t\t* `onSpotlightSelect` simulates `mousedown`.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tonSpotlightKeyDown\t: 'depress',\r\n\r\n\t\t/**\r\n\t\t* `onSpotlightKeyUp` simulates `mouseup`.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tonSpotlightKeyUp\t: 'undepress',\r\n\r\n\t\t/**\r\n\t\t* Also make sure we remove the pressed class if focus is removed from\r\n\t\t* this item before it receives a keyup.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tonSpotlightBlur\t\t: 'undepress',\r\n\r\n\t\t/**\r\n\t\t* The handler for `onSpotlightFocused` bubbles a `requestScrollIntoView` event.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tonSpotlightFocused\t: 'spotFocused'\r\n\t},\r\n\r\n\t/**\r\n\t* On creation, updates based on value of `this.small`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tinitComponents: function () {\r\n\t\tif (!(this.components && this.components.length > 0)) {\r\n\t\t\tthis.createComponent({name: 'client', kind: MarqueeText, classes: 'button-client', isChrome: true});\r\n\t\t}\r\n\t\tif (this.small) this.smallChanged();\r\n\t\tif (this.minWidth) this.minWidthChanged();\r\n\r\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\r\n\t\t// the contentUpperCase property is fully deprecated and removed. The legacy\r\n\t\t// property takes precedence if it exists.\r\n\t\tif (this.contentUpperCase !== null) this.uppercase = this.contentUpperCase;\r\n\r\n\t\tthis.contentChanged();\r\n\t\tthis.backgroundOpacityChanged();\r\n\t\tButton.prototype.initComponents.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* Adds `pressed` CSS class.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdepress: function (inSender, inEvent) {\r\n\t\tif (inEvent.keyCode === 13) {\r\n\t\t\tthis.addClass('pressed');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Bubbles `requestScrollIntoView` event.\r\n\t*\r\n\t* @fires module:moonstone/Scroller~Scroller#onRequestScrollIntoView\r\n\t* @private\r\n\t*/\r\n\tspotFocused: function (inSender, inEvent) {\r\n\t\tif (inEvent.originator === this) {\r\n\t\t\tthis.bubble('onRequestScrollIntoView');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Removes `pressed` CSS class.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tundepress: function () {\r\n\t\tthis.removeClass('pressed');\r\n\t},\r\n\r\n\t/**\r\n\t* If `this.small` is `true`, `taparea` dimensions are increased.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsmallChanged: function () {\r\n\t\tif (this.small) {\r\n\t\t\tthis.addClass('small');\r\n\t\t\tthis.addClass('moon-small-button-text');\r\n\t\t} else {\r\n\t\t\tthis.removeClass('small');\r\n\t\t\tthis.removeClass('moon-small-button-text');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Override to handle potential child components.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcontentChanged: function () {\r\n\t\tvar content = this.getContent();\r\n\t\tif (this.$.client) {\r\n\t\t\tthis.$.client.setContent( this.get('uppercase') ? util.toUpperCase(content) : content );\r\n\t\t} else {\r\n\t\t\tButton.prototype.contentChanged.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tuppercaseChanged: function () {\r\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\r\n\t\t// contentUpperCase is fully deprecated and removed.\r\n\t\tif (this.contentUpperCase != this.uppercase) this.contentUpperCase = this.uppercase;\r\n\t\tthis.contentChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontentUpperCaseChanged: function () {\r\n\t\tif (this.uppercase != this.contentUpperCase) this.uppercase = this.contentUpperCase;\r\n\t\tthis.uppercaseChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tminWidthChanged: function () {\r\n\t\tif (this.minWidth) {\r\n\t\t\tthis.addClass('min-width');\r\n\t\t} else {\r\n\t\t\tthis.removeClass('min-width');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowingChanged: function () {\r\n\t\tButton.prototype.showingChanged.apply(this, arguments);\r\n\t\tif (!this.showing && this.hasClass('pressed')) {\r\n\t\t\tthis.undepress();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbackgroundOpacityChanged: function (old) {\r\n\t\tvar opacity = this.backgroundOpacity;\r\n\t\tif (old) this.removeClass(old);\r\n\t\tif (opacity == 'translucent' || opacity == 'transparent') {\r\n\t\t\tthis.addClass(opacity);\r\n\t\t}\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Divider~Divider} kind.\r\n* @module moonstone/Divider\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutils = require('enyo/utils'),\r\n\tControl = require('enyo/Control');\r\n\r\nvar\r\n\tMarquee = require('../Marquee'),\r\n\tMarqueeItem = Marquee.Item,\r\n\tMarqueeSupport = Marquee.Support;\r\n\r\n/**\r\n* {@link module:moonstone/Divider~Divider} is a simply styled component that may be used as a separator\r\n* between groups of components.\r\n*\r\n* @class Divider\r\n* @mixes module:moonstone/MarqueeSupport~MarqueeSupport\r\n* @mixes module:moonstone/MarqueeItem~MarqueeItem\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/Divider~Divider.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Divider',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-divider moon-divider-text',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [MarqueeSupport, MarqueeItem],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmarqueeOnSpotlight: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmarqueeOnRender: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontentChanged: function () {\r\n\t\tthis.content = this.content.split(' ').map(utils.cap).join(' ');\r\n\t\tControl.prototype.contentChanged.apply(this, arguments);\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Item~Item} kind.\r\n* @module moonstone/Item\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tControl = require('enyo/Control');\r\n\r\nvar\r\n\tMarquee = require('../Marquee'),\r\n\tMarqueeSupport = Marquee.Support,\r\n\tMarqueeItem = Marquee.Item;\r\n\r\n/**\r\n* {@link module:moonstone/Item~Item} is a focusable Moonstone-styled control that can display\r\n* simple text or a set of controls.\r\n*\r\n* @class Item\r\n* @extends module:enyo/Control~Control\r\n* @mixes module:moonstone/MarqueeSupport~MarqueeSupport\r\n* @mixes module:moonstone/MarqueeItem~MarqueeItem\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/Item~Item.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Item',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-item',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [MarqueeSupport, MarqueeItem],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonSpotlightFocused: 'spotlightFocused'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/Item~Item.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* If `true`, the control is shown as disabled and does not generate tap events.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdisabled: false\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tthis.disabledChanged();\r\n\t\tif (this.children.length) {\r\n\t\t\tthis.addClass('allow-wrap');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdisabledChanged: function (inOld) {\r\n\t\tthis.addRemoveClass('disabled', this.disabled);\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:moonstone/Scroller~Scroller#onRequestScrollIntoView\r\n\t* @private\r\n\t*/\r\n\tspotlightFocused: function (inSender, inEvent) {\r\n\t\tif (inEvent.originator === this) {\r\n\t\t\tthis.bubble('onRequestScrollIntoView');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttap: function () {\r\n\t\treturn this.disabled;\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:moonstone/ChannelInfo~ChannelInfo} and\r\n* {@link module:moonstone/ChannelInfo~ChannelInfoBadge} kinds.\r\n* @module moonstone/ChannelInfo\r\n*/\r\n\r\nrequire('moonstone');\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutil = require('enyo/utils'),\r\n\tControl = require('enyo/Control');\r\n\r\nvar\r\n\tMarquee = require('moonstone/Marquee'),\r\n\tMarqueeText = Marquee.Text,\r\n\tMarqueeSupport = Marquee.Support;\r\n\r\n\r\n/**\r\n* {@link module:moonstone/ChannelInfo~ChannelInfoBadge} is a simple kind used to display a badge\r\n* containing channel information. It is the default kind for components added\r\n* to {@link module:moonstone/ChannelInfo~ChannelInfo}.\r\n*\r\n* @class ChannelInfoBadge\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nvar ChannelInfoBadge = kind(\r\n\t/** @lends module:moonstone/ChannelInfo~ChannelInfoBadge.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ChannelInfoBadge',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-video-badge-text channel-info-text-icon'\r\n});\r\n\r\n/**\r\n* {@link module:moonstone/ChannelInfo~ChannelInfo} is a control that displays channel information.  It is\r\n* designed to be used within the [infoComponents]{@link module:moonstone/VideoPlayer~VideoPlayer#infoComponents}\r\n* block of a {@link module:moonstone/VideoPlayer~VideoPlayer}.\r\n*\r\n* Example:\r\n* ```\r\n* var ChannelInfo = require('moonstone/ChannelInfo');\r\n*\r\n* {\r\n*\tkind: ChannelInfo,\r\n*\tno: 36,\r\n*\tname: 'AMC',\r\n*\tcomponents: [\r\n*\t\t{content: '3D'},\r\n*\t\t{content: 'Live'},\r\n*\t\t{content: 'REC 08:22', classes: 'redicon'}\r\n*\t]\r\n* }\r\n* ```\r\n*\r\n* @class ChannelInfo\r\n* @extends module:enyo/Control~Control\r\n* @mixes module:moonstone/MarqueeSupport~MarqueeSupport\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/ChannelInfo~ChannelInfo.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ChannelInfo',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-video-player-channel-info',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [MarqueeSupport],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmarqueeOnSpotlight: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmarqueeOnHover: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/ChannelInfo~ChannelInfo.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* The channel number.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tchannelNo: '',\r\n\r\n\t\t/**\r\n\t\t* The name of the channel.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tchannelName: '',\r\n\r\n\t\t/**\r\n\t\t* A description of the channel.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tchannelDesc: '',\r\n\r\n\t\t/**\r\n\t\t* A more detailed description of the channel.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tchannelMoreDesc: '',\r\n\r\n\t\t/**\r\n\t\t* When `true`, [channelNo]{@link module:moonstone/ChannelInfo~ChannelInfo#channelNo} will have locale-safe\r\n\t\t* uppercasing applied.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tuppercaseChannelNo: true,\r\n\r\n\t\t/**\r\n\t\t* @deprecated Replaced by [uppercaseChannelNo]{@link module:moonstone/ChannelInfo~ChannelInfo#uppercaseChannelNo}.\r\n\t\t*\r\n\t\t* Formerly defaulted to `true`, now defaults to `null` and will only have\r\n\t\t* an effect when explicitly set (for complete backward compatibility).\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tchannelNoUpperCase: null\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdefaultKind: ChannelInfoBadge,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{kind: MarqueeText, name: 'channelNo', classes: 'channel-info-number moon-header-font'},\r\n\t\t{kind: MarqueeText, name: 'channelName', classes: 'channel-info-text'},\r\n\t\t{kind: MarqueeText, name: 'channelDesc', classes: 'channel-info-text'},\r\n\t\t{kind: MarqueeText, name: 'channelMoreDesc', classes: 'channel-info-text'},\r\n\t\t{kind: Control, name: 'client', classes: 'channel-info-badges'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: 'channelName', to: '$.channelName.content'},\r\n\t\t{from: 'channelDesc', to: '$.channelDesc.content'},\r\n\t\t{from: 'channelMoreDesc', to: '$.channelMoreDesc.content'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\r\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\r\n\t\t// the channelNoUpperCase property is fully deprecated and removed. The legacy\r\n\t\t// property takes precedence if it exists.\r\n\t\tif (this.channelNoUpperCase !== null) this.uppercaseChannelNo = this.channelNoUpperCase;\r\n\r\n\t\tthis.channelNoChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tchannelNoChanged: function () {\r\n\t\tvar channelNo = this.getChannelNo();\r\n\t\tthis.$.channelNo.setContent(this.get('uppercaseChannelNo') ? util.toUpperCase(channelNo) : channelNo);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tuppercaseChannelNoChanged: function () {\r\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\r\n\t\t// channelNoUpperCase is fully deprecated and removed.\r\n\t\tif (this.channelNoUpperCase != this.uppercaseChannelNo) this.channelNoUpperCase = this.uppercaseChannelNo;\r\n\t\tthis.channelNoChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tchannelNoUpperCaseChanged: function () {\r\n\t\tif (this.uppercaseChannelNo != this.channelNoUpperCase) this.uppercaseChannelNo = this.channelNoUpperCase;\r\n\t\tthis.uppercaseChannelNoChanged();\r\n\t}\r\n});\r\n\r\n/**\r\n* The {@link module:moonstone/ChannelInfo~ChannelInfoBadge} definition\r\n*/\r\nmodule.exports.ChannelInfoBadge = ChannelInfoBadge;\r\n","/**\r\n* Contains the declaration for the {@link module:moonstone/VideoInfoHeader~VideoInfoHeader} kind.\r\n* @module moonstone/VideoInfoHeader\r\n*/\r\n\r\nrequire('moonstone');\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutil = require('enyo/utils'),\r\n\tri = require('enyo/resolution'),\r\n\tControl = require('enyo/Control'),\r\n\tImg = require('enyo/Image');\r\n\r\nvar\r\n\tMarquee = require('moonstone/Marquee'),\r\n\tMarqueeText = Marquee.Text,\r\n\tMarqueeSupport = Marquee.Support;\r\n\r\n/**\r\n* {@link module:moonstone/VideoInfoHeader~VideoInfoHeader} is a [control]{@link module:enyo/Control~Control} that displays\r\n* various information about a video. It is designed to be used within the\r\n* [infoComponents]{@link module:moonstone/VideoPlayer~VideoPlayer#infoComponents} block of a {@link module:moonstone/VideoPlayer~VideoPlayer}.\r\n*\r\n* Example:\r\n* ```javascript\r\n* var\r\n*\tVideoInfoHeader = require('moonstone/VideoInfoHeader');\r\n*\r\n* {\r\n*\t\tkind: VideoInfoHeader,\r\n*\t\ttitle: 'Breaking Bad - Live Free Or Die',\r\n*\tdescription: 'As Walt deals with the aftermath of the Casa Tranquila explosion, '\r\n*\t\t\t+ 'Hank works to wrap up his investigation of Gus\\' empire.',\r\n*\tcomponents: [\r\n*\t\t\t{content: '3D'},\r\n*\t\t\t{content: 'Live'}\r\n*\t]\r\n* }\r\n* ```\r\n*\r\n* @class VideoInfoHeader\r\n* @extends module:enyo/Control~Control\r\n* @mixes module:moonstone/MarqueeSupport~MarqueeSupport\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/VideoInfoHeader~VideoInfoHeader.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.VideoInfoHeader',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-video-player-info-header',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [MarqueeSupport],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmarqueeOnSpotlight: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmarqueeOnRender: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/VideoInfoHeader~VideoInfoHeader.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Title of the `VideoInfoHeader`.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttitle: '',\r\n\r\n\t\t/**\r\n\t\t* Main content of the `VideoInfoHeader`.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdescription: '',\r\n\r\n\t\t/**\r\n\t\t* When `true`, the title text will have locale-safe uppercasing applied.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tuppercase: true,\r\n\r\n\t\t/**\r\n\t\t* @deprecated Replaced by [uppercase]{@link module:moonstone/VideoInfoHeader~VideoInfoHeader#uppercase}.\r\n\t\t*\r\n\t\t* Formerly defaulted to `true`, now defaults to `null` and will only have\r\n\t\t* an effect when explicitly set (for complete backward compatibility).\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttitleUpperCase: null,\r\n\r\n\t\t/**\r\n\t\t* URL of image file.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsrc: null\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'videoInfoText', classes: 'info-header-text', components :[\r\n\t\t\t{kind: MarqueeText, name: 'title', classes: 'info-header-title'},\r\n\t\t\t{name: 'description', classes: 'info-header-description'}\r\n\t\t]}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: 'description', to: '$.description.content'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function() {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\r\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\r\n\t\t// the contentUpperCase property is fully deprecated and removed. The legacy\r\n\t\t// property takes precedence if it exists.\r\n\t\tif (this.titleUpperCase !== null) { this.uppercase = this.titleUpperCase; }\r\n\t\tthis.srcChanged();\r\n\t\tthis.titleChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttitleChanged: function() {\r\n\t\tthis.$.title.set('content', this.get('uppercase') ? util.toUpperCase(this.get('title')) : this.get('title') );\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tuppercaseChanged: function() {\r\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\r\n\t\t// titleUpperCase is fully deprecated and removed.\r\n\t\tif (this.titleUpperCase != this.uppercase) { this.titleUpperCase = this.uppercase; }\r\n\t\tthis.titleChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttitleUpperCaseChanged: function() {\r\n\t\tif (this.uppercase != this.titleUpperCase) { this.uppercase = this.titleUpperCase; }\r\n\t\tthis.uppercaseChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsrcChanged: function() {\r\n\t\tvar img = this.$.videoInfoImage;\r\n\r\n\t\tif (this.src) {\r\n\t\t\tif (img) {\r\n\t\t\t\timg.set('src', this.src);\r\n\t\t\t} else {\r\n\t\t\t\timg = this.createComponent({\r\n\t\t\t\t\tname: 'videoInfoImage',\r\n\t\t\t\t\tkind: Img,\r\n\t\t\t\t\tclasses: 'info-header-image',\r\n\t\t\t\t\tsrc: this.src,\r\n\t\t\t\t\tsizing: 'contain',\r\n\t\t\t\t\tstyle: util.format('width: %.px; height: %.px', ri.scale(96), ri.scale(96)),\r\n\t\t\t\t\taddBefore: this.$.videoInfoText\r\n\t\t\t\t});\r\n\t\t\t\tif (this.generated) {\r\n\t\t\t\t\timg.render();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (img) {\r\n\t\t\timg.destroy();\r\n\t\t}\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Spinner~Spinner} kind.\r\n* @module moonstone/Spinner\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutil = require('enyo/utils'),\r\n\tControl = require('enyo/Control');\r\n\r\nvar\r\n\tMarquee = require('../Marquee'),\r\n\tMarqueeText = Marquee.Text,\r\n\tMarqueeSupport = Marquee.Support;\r\n\r\n/**\r\n* {@link module:moonstone/Spinner~Spinner} is a [control]{@link module:enyo/Control~Control}\r\n* that shows a spinning animation to indicate that activity is taking place. By\r\n* default, the spinner is light-colored and suitable for displaying against a\r\n* dark background. To get a dark spinner (to be shown on a lighter background),\r\n* apply the `moon-light` CSS class:\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tSpinner = require('moonstone/Spinner');\r\n*\r\n* \t// Normal\r\n* \t{kind: Spinner}\r\n* \t// Light\r\n* \t{kind: Spinner, classes: 'moon-light'}\r\n* \t// Normal with a message\r\n* \t{kind: Spinner, content: 'Loading...'}\r\n* \t// Transparent background\r\n* \t{kind: Spinner, transparent: true}\r\n* ```\r\n*\r\n* Typically, a spinner is shown to indicate activity and hidden to indicate that the activity\r\n* has ended. The animation automatically starts when the spinner is shown. If you wish, you\r\n* may control the animation directly by calling the [start()]{@link module:moonstone/Spinner~Spinner#start},\r\n* [stop()]{@link module:moonstone/Spinner~Spinner#stop}, and [toggle()]{@link module:moonstone/Spinner~Spinner#toggle} methods.\r\n*\r\n* `moonstone/Spinner` supports both `content` text and a `components` block. Note that you\r\n* may only use one of these at a time. Using a `components` block may be desirable if,\r\n* for example, the text in the content section needs [marquee]{@link module:moonstone/Marquee~MarqueeSupport}\r\n* functionality or you'd like to include an [icon]{@link module:moonstone/Icon~Icon} in the message.\r\n*\r\n* @class Spinner\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/Spinner~Spinner.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Spinner',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-spinner',\r\n\r\n\t/**\r\n\t* Determines whether spinner's background is transparent.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\ttransparent: false,\r\n\r\n\t/**\r\n\t* Sets the spinner to be horizontally centered, relative to its containing control. Use in\r\n\t* combination with [moon/Spinner#center]{@link module:moonstone/Spinner~Spinner#middle} to center this spinner\r\n\t* both horizontally and vertically, or just horizontally.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tcenter: false,\r\n\r\n\t/**\r\n\t* When `true`, sets the spinner to be vertically centered inside its container. This option\r\n\t* has no effect if [moon/Spinner#center]{@link module:moonstone/Spinner~Spinner#center} is `false`. Setting this\r\n\t* to false allows the spinner to only be horizontally centered, and not vertically centered.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @public\r\n\t*/\r\n\tmiddle: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'decorator', kind: Control, classes: 'moon-spinner-ball-decorator spin-ball-animation', components: [\r\n\t\t\t{kind: Control, classes: 'moon-spinner-ball moon-spinner-ball1'},\r\n\t\t\t{kind: Control, classes: 'moon-spinner-ball moon-spinner-ball2'},\r\n\t\t\t{kind: Control, classes: 'moon-spinner-ball moon-spinner-ball3'}\r\n\t\t]}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspinnerTools: [\r\n\t\t{name: 'client', kind: Control, classes: 'moon-spinner-client'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitComponents: function() {\r\n\t\tControl.prototype.initComponents.apply(this, arguments);\r\n\t\tthis.createTools();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreateTools: function() {\r\n\t\t// This allows for the spinner instances with child components to not have\r\n\t\t// MarqueeText kind on the client container.\r\n\t\tvar tools = util.clone(this.spinnerTools);\r\n\t\tif (!(this.components && this.components.length > 0)) {\r\n\t\t\t// If there are no components in the spinner, convert its client area to a MarqueeText kind\r\n\t\t\tutil.mixin(tools[0], {\r\n\t\t\t\tkind: MarqueeText,\r\n\t\t\t\tmixins: [MarqueeSupport],\r\n\t\t\t\tmarqueeOnSpotlight: false,\r\n\t\t\t\tmarqueeOnHover: true,\r\n\t\t\t\tmarqueeOnRender: true,\r\n\t\t\t\tmarqueeOnRenderDelay: 1000\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.createChrome(tools);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function() {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tthis.contentChanged();\r\n\t\tthis.transparentChanged();\r\n\t\tthis.centerChanged();\r\n\t\tthis.middleChanged();\r\n\t\tthis.addClass('running');\r\n\t},\r\n\r\n\t/**\r\n\t* Hides the animating spinner.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tstop: function() {\r\n\t\tthis.set('showing', false);\r\n\t},\r\n\r\n\t/**\r\n\t* Shows the spinner with animation.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tstart: function() {\r\n\t\tthis.set('showing', true);\r\n\t},\r\n\r\n\t/**\r\n\t* Toggles the spinner's visibility state.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\ttoggle: function() {\r\n\t\tthis.set('showing', !this.get('showing'));\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thasContent: function() {\r\n\t\t// true if this.content is set to something OR if there are more than zero components\r\n\t\treturn (!!this.content || (this.components && this.components.length > 0));\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontentChanged: function(old) {\r\n\t\tControl.prototype.contentChanged.apply(this, arguments);\r\n\t\tif (this.content || old) {\r\n\t\t\tthis.$.client.set('content', this.content);\r\n\t\t}\r\n\t\tthis.$.client.set('showing', !!this.content);\r\n\t\tthis.addRemoveClass('content', this.hasContent());\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcenterChanged: function(old) {\r\n\t\tthis.addRemoveClass('center',this.get('center'));\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmiddleChanged: function(old) {\r\n\t\tthis.addRemoveClass('middle',this.get('middle'));\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttransparentChanged: function() {\r\n\t\tthis.addRemoveClass('moon-spinner-transparent-background', !!this.get('transparent'));\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @default true\r\n\t* @type {Boolean}\r\n\t* @see enyo/AccessibilitySupport~AccessibilitySupport#accessibilityAlert\r\n\t* @public\r\n\t*/\r\n\taccessibilityAlert: true,\r\n\r\n\t/**\r\n\t* @default off\r\n\t* @type {String}\r\n\t* @see enyo/AccessibilitySupport~AccessibilitySupport#accessibilityLive\r\n\t* @public\r\n\t*/\r\n\taccessibilityLive: 'off'\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* {@link module:moonstone/Overlay} contains a set of mixins that support\r\n* providing a layer of controls contextually displayed over another control.\r\n*\r\n* {@link module:moonstone/Overlay~OverlaySupport} provides generic support for overlays.\r\n* With it, you can add arbitrary\r\n* {@link module:moonstone/Overlay~OverlaySupport#overlayComponents} and configure their\r\n* position and formatting.\r\n*\r\n* There are the supplementary mixins for common use cases:\r\n* ({@link module:moonstone/Overlay~SelectionOverlaySupport},\r\n* {@link module:moonstone/Overlay~TextOverlaySupport}, and\r\n* {@link module:moonstone/Overlay~MarqueeOverlaySupport}). These mixins\r\n* preconfigure the overlay with components and expose additional properties to\r\n* further configure the mixin. Unlike most mixins, these three do little on\r\n* their own and must be used in conjunction with\r\n* {@link module:moonstone/Overlay~OverlaySupport}.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tControl = require('enyo/Control'),\r\n* \t\tOverlay = require('moonstone/Overlay');\r\n*\r\n* \t// A control with a default Selection overlay\r\n* \t{kind: Control, mixins: [Overlay.Support, Overlay.Selection]}\r\n*\r\n* \t// A control with a Selection overlay and customized position and components\r\n* \t{kind: Control, mixins: [Overlay.Support, Overlay.Selection],\r\n* \t\toverlayPosition: 'left', overlayComponents: [\r\n*\t\t\t\t{kind: Icon, icon: 'check', small: true}\r\n*\t\t\t]\r\n* \t}\r\n* ```\r\n*\r\n* @module moonstone/Overlay\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutils = require('enyo/utils'),\r\n\tBinding = require('enyo/Binding');\r\n\r\nvar\r\n\tIcon = require('moonstone/Icon'),\r\n\tMarquee = require('moonstone/Marquee');\r\n\r\n/**\r\n* Maps the value of `overlayAlign` to the appropriate CSS class\r\n*\r\n* @param\t{String}\tvalue\tAlignment value\r\n* @return\t{String}\t\t\tCSS Class\r\n*\r\n* @private\r\n*/\r\nfunction mapAlign (value) {\r\n\treturn\tvalue == 'left' && 'align-left' ||\r\n\t\t\tvalue == 'right' && 'align-right' ||\r\n\t\t\tvalue == 'start' && (this.rtl ? 'align-right' : 'align-left') ||\r\n\t\t\tvalue == 'end' && (this.rtl ? 'align-left' : 'align-right') ||\r\n\t\t\t'';\r\n}\r\n\r\n/**\r\n* Maps the value of `overlayTransparent` to the appropriate CSS class\r\n*\r\n* @param\t{String}\tvalue\tTransparency value\r\n* @return\t{String}\t\t\t'transparent'\r\n*\r\n* @private\r\n*/\r\nfunction mapTransparent (value) {\r\n\treturn 'transparent';\r\n}\r\n\r\n/**\r\n* Maps the value of `overlayPosition` to the appropriate CSS class\r\n*\r\n* @param\t{String}\tvalue\tPosition value\r\n* @return\t{String}\t\t\tCSS Class\r\n*\r\n* @private\r\n*/\r\nfunction mapPosition (value) {\r\n\treturn value == 'centered' ? value : 'position-' + value;\r\n}\r\n\r\n/**\r\n* Does nothing but used to enable a single observer for property -> class changes\r\n*\r\n* @param\t{String}\tvalue\tCSS classes\r\n* @return\t{String}\t\t\tThe same CSS classes\r\n*\r\n* @private\r\n*/\r\nfunction mapClasses (value) {\r\n\treturn value;\r\n}\r\n\r\n/**\r\n* Maps the value of `overlayShowing` to the appropriate CSS class\r\n*\r\n* @param\t{String}\tvalue\tShowing value\r\n* @return\t{String}\t\t\tCSS Class\r\n*\r\n* @private\r\n*/\r\nfunction mapShowing (showing) {\r\n\treturn\t(showing === true || showing === false) && 'show' ||\r\n\t\t\tshowing == 'spotlight' && 'show-on-spotlight' ||\r\n\t\t\tshowing == 'hover' && 'show-on-hover' ||\r\n\t\t\t'';\r\n}\r\n\r\n/**\r\n* Bound to an overlay container, forwards a changed property value to the container's\r\n* {@link module:moonstone/Overlay~OverlayContainerSupport#overlayTarget}.\r\n*\r\n* @param  {Any}\t\twas\t\tPrevious property value\r\n* @param  {Any}\t\tis\t\tCurrent property value\r\n* @param  {String}\tprop\tProperty name\r\n*\r\n* @private\r\n*/\r\nfunction forwardPropertyChange (was, is, prop) {\r\n\tvar target = this.$[this.overlayTarget];\r\n\tif (target) {\r\n\t\t// Special handling for overlayComponents to ensure the component ownership is correct\r\n\t\tif (prop == 'overlayComponents') {\r\n\t\t\tis = updateOwnership(is, this.getInstanceOwner());\r\n\t\t}\r\n\t\ttarget.set(prop, is);\r\n\t}\r\n}\r\n\r\n/**\r\n* Iterates over `components` to update the `owner`. Note that `components` is not cloned and is\r\n* updated in place and returned.\r\n*\r\n* @param  {Object[]}\t\tcomponents\tComponent configs\r\n* @param  {module:enyo/Control~Control}\towner\t\tOwner of components\r\n* @return {Object[]}\t\t\t\t\tUpdated component configs\r\n*\r\n* @private\r\n*/\r\nfunction updateOwnership (components, owner) {\r\n\tvar control, i;\r\n\tif (components) {\r\n\t\tfor (i = components.length - 1; i >= 0; --i) {\r\n\t\t\tcontrol = components[i];\r\n\t\t\tcontrol.owner = control.owner || owner;\r\n\t\t}\r\n\t}\r\n\treturn components;\r\n}\r\n\r\n/**\r\n* {@link module:moonstone/Overlay~OverlaySupport} adds an overlay to show additional\r\n* controls over the control using the mixin. Display of the overlay is controlled\r\n* by {@link module:moonstone/Overlay~OverlaySupport#overlayShowing}, which supports\r\n* displaying the overlay manually, on spotlight, or on hover.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tIcon = require('moonstone/Icon'),\r\n* \t\tImage = require('moonstone/Image'),\r\n* \t\tOverlay = require('moonstone/Overlay');\r\n*\r\n* \t{kind: Image, src: 'moonstone/src/assets/movie.png', mixins: [Overlay.Support],\r\n* \t\toverlayShowing: 'hover', overlayPosition: 'bottom', overlayAlign: 'right', overlayComponents: [\r\n*\t\t\t\t{kind: Icon, src: 'moonstone/src/assets/icon-recommended.png'},\r\n*\t\t\t\t{kind: Icon, icon: 'star'},\r\n*\t\t\t\t{kind: Icon, src: 'moonstone/src/assets/icon-new.png'}\r\n* \t\t]\r\n* \t}\r\n* ```\r\n*\r\n* @mixin OverlaySupport\r\n* @public\r\n*/\r\nmodule.exports.Support = {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.OverlaySupport',\r\n\r\n\t/**\r\n\t* Controls display of the overlay.\r\n\t*\r\n\t* `true`\t\tShowing\r\n\t* `false`\t\tNot showing\r\n\t* `'spotlight'`\tShowing when an ancestor control is spotted\r\n\t* `'hover'`\t\tShowing when its parent is hovered by the pointer\r\n\t*\r\n\t* @name overlayShowing\r\n\t* @type {String|Boolean}\r\n\t* @default undefined\r\n\t* @public\r\n\t*/\r\n\r\n\t/**\r\n\t* The overlay is absolutely positioned over the control on which it is applied. By default, it\r\n\t* will cover the entire area but can be configured using this property or by overriding the CSS\r\n\t* class `moon-overlay-container`.\r\n\t*\r\n\t* * `centered`\r\n\t*   Contents are vertically and horizontally centered\r\n\t* * `top`\r\n\t*   Anchored to the top of the container with the natural height of its contents\r\n\t* * `bottom`\r\n\t*   Anchored to the bottom of the container with the natural height of its contents\r\n\t* * `left`\r\n\t*   Anchored to the left of the container with the natural width of its contents\r\n\t* * `right`\r\n\t*   Anchored to the right of the container with the natural width of its contents\r\n\t*\r\n\t* @name overlayPosition\r\n\t* @type {String}\r\n\t* @default undefined\r\n\t* @public\r\n\t*/\r\n\r\n\t/**\r\n\t* Aligns the contents of the overlay.\r\n\t*\r\n\t* * `left`\r\n\t*   Controls are aligned to the left\r\n\t* * `right`\r\n\t*   Controls are aligned to the left\r\n\t* * `start`\r\n\t*   Same as `left` for left-to-right languages and `right` for right-to-left languages\r\n\t* * `end`\r\n\t*   Same as `right` for left-to-right languages and `left` for right-to-left languages\r\n\t*\r\n\t* @name overlayAlign\r\n\t* @type {String}\r\n\t* @default undefined\r\n\t* @public\r\n\t*/\r\n\r\n\t/**\r\n\t* By default, the background of the overlay is black at 50% opacity. Setting this property to\r\n\t* `true` makes it transparent.\r\n\t*\r\n\t* @name overlayTransparent\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\r\n\t/**\r\n\t* Additional CSS classes that will be applied to the overlay container.\r\n\t*\r\n\t* @name overlayClasses\r\n\t* @type {String}\r\n\t* @default undefined\r\n\t* @public\r\n\t*/\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.addClass('moon-overlay');\r\n\t\t\tthis.overlayShowing = utils.exists(this.overlayShowing) ? this.overlayShowing : false;\r\n\r\n\t\t\tthis.overlayComponentsChanged();\r\n\r\n\t\t\t// Property observers that map property changes to CSS classes\r\n\t\t\tthis.observe('overlayClasses', this.bindSafely(this.overlayPropertyToClass, mapClasses));\r\n\t\t\tthis.observe('overlayPosition', this.bindSafely(this.overlayPropertyToClass, mapPosition));\r\n\t\t\tthis.observe('overlayAlign', this.bindSafely(this.overlayPropertyToClass, mapAlign));\r\n\t\t\tthis.observe('overlayTransparent', this.bindSafely(this.overlayPropertyToClass, mapTransparent));\r\n\t\t\tthis.observe('overlayShowing', this.bindSafely(this.overlayPropertyToClass, mapShowing));\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\toverlayComponentsChanged: function () {\r\n\t\tif (!this.overlayComponents) {\r\n\t\t\tif (this.$.overlayContainer) this.$.overlayContainer.destroy();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!this.$.overlayContainer) {\r\n\t\t\tvar classes = ['moon-overlay-container'];\r\n\t\t\tif (this.overlayClasses) classes.push(this.overlayClasses);\r\n\t\t\tif (this.overlayPosition) classes.push(mapPosition(this.overlayPosition));\r\n\t\t\tif (this.overlayAlign) classes.push(mapAlign(this.overlayAlign));\r\n\t\t\tif (this.overlayTransparent) classes.push(mapTransparent(this.overlayTransparent));\r\n\t\t\tif (this.overlayShowing) classes.push(mapShowing(this.overlayShowing));\r\n\r\n\t\t\tthis.createComponent({name: 'overlayContainer', classes: classes.join(' ')});\r\n\t\t}\r\n\r\n\t\t// wrapper should be owned by this but client controls should be owned by the instance owner\r\n\t\tthis.$.overlayContainer.createComponent({\r\n\t\t\tclasses: 'moon-overlay-component',\r\n\t\t\tcomponents: updateOwnership(this.overlayComponents, this.getInstanceOwner()),\r\n\t\t\towner: this\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t* Observer that maps a property value to a CSS class and adds or removes it as necessary\r\n\t*\r\n\t* @private\r\n\t*/\r\n\toverlayPropertyToClass: function (map, was, is) {\r\n\t\tvar c = this.$.overlayContainer;\r\n\t\tif (c) {\r\n\t\t\tif (was) c.removeClass(map.call(this, was));\r\n\t\t\tif (is) c.addClass(map.call(this, is));\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n* Binding that expects an array of component configs which will be updated during transform to be\r\n* owned by the binding owner's instance owner.\r\n*\r\n* @class OverlayComponentsBinding\r\n* @public\r\n*/\r\nmodule.exports.ComponentsBinding = kind({\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.OverlayComponentsBinding',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Binding,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttransform: function (overlayComponents) {\r\n\t\treturn updateOwnership(overlayComponents, this.getInstanceOwner());\r\n\t}\r\n});\r\n\r\n/**\r\n* Adds observers for the known overlay properties which forward the property changes to the\r\n* contained control with {@link module:moonstone/Overlay~OverlaySupport} identified by\r\n* {@link module:moonstone/Overlay~OverlayContainerSupport#overlayTarget}\r\n*\r\n* @mixin OverlayContainerSupport\r\n* @public\r\n*/\r\nmodule.exports.Container = {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.OverlayContainerSupport',\r\n\r\n\t/**\r\n\t* Name of the contained control with {@link module:moonstone/Overlay~OverlaySupport}\r\n\t*\r\n\t* @name overlayTarget\r\n\t* @type {String}\r\n\t* @default undefined\r\n\t* @public\r\n\t*/\r\n\r\n\t/**\r\n\t* List of overlay properties to forward to this container's\r\n\t* {@link module:moonstone/Overlay~OverlayContainerSupport#overlayTarget}\r\n\t*\r\n\t* @private\r\n\t*/\r\n\toverlayPropertyBindings: [\r\n\t\t'overlayComponents',\r\n\t\t'overlayShowing',\r\n\t\t'overlayClasses',\r\n\t\t'overlayIcon',\r\n\t\t'overlayTitle',\r\n\t\t'overlaySubtitle',\r\n\t\t'overlayPosition',\r\n\t\t'overlayAlign',\r\n\t\t'overlayTransparent'\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tvar i, prop;\r\n\t\t\tsup.apply(this, arguments);\r\n\r\n\t\t\tvar fn = this.bindSafely(forwardPropertyChange);\r\n\t\t\tfor (i = this.overlayPropertyBindings.length - 1; i >= 0; --i) {\r\n\t\t\t\tprop = this.overlayPropertyBindings[i];\r\n\t\t\t\tthis.observe(prop, fn);\r\n\t\t\t\tif (utils.exists(this[prop])) fn(null, this[prop], prop);\r\n\t\t\t}\r\n\t\t};\r\n\t})\r\n};\r\n\r\n/**\r\n* Sets the default configuration and components for selection overlay. Requires that the control to\r\n* which it is applied also apply {@link module:moonstone/Overlay~OverlaySupport} or contain a control that\r\n* applies {@link module:moonstone/Overlay~OverlayContainerSupport}.\r\n*\r\n* SelectionOverlaySupport adds the styling for a centered icon that can be shown when the `selected`\r\n* class is applied to the overlaid control.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tIcon = require('moonstone/Icon'),\r\n* \t\tImage = require('moonstone/Image'),\r\n* \t\tOverlay = require('moonstone/Overlay');\r\n*\r\n* \t{kind: Image, src: 'moonstone/src/assets/movie.png', mixins: [Overlay.Support, Overlay.Selection],\r\n* \t\toverlayShowing: 'spotlight', overlayComponents: [\r\n*\t\t\t\t{kind: Icon, icon: 'check'}\r\n* \t\t]\r\n* \t}\r\n* ```\r\n*\r\n* @mixin SelectionOverlaySupport\r\n* @public\r\n*/\r\nmodule.exports.Selection = {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.SelectionOverlaySupport',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\toverlayClasses: 'moon-overlay-selection',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_selectionOverlay_Handlers: {\r\n\t\tonSpotlightFocused: '_selectionOverlay_spotlightFocused'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\toverlayTransparent: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\toverlayPosition: 'centered',\r\n\r\n\t/**\r\n\t* Icon to be displayed when selected. May either be a URL to an image or the valid name of a\r\n\t* {@link module:moonstone/Icon~Icon#icon}.\r\n\t*\r\n\t* @name overlayIcon\r\n\t* @type {String}\r\n\t* @default undefined\r\n\t* @public\r\n\t*/\r\n\toverlayIcon: 'check',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t// to reduce API surface area, we'll only expose overlayIcon and map that to both src and\r\n\t\t// icon ensuring that only 1 is valued based on the presence of a `.` to indicate a URL\r\n\t\t{from: 'overlayIcon', to: '$.overlayIcon.icon', transform: function (icon) {\r\n\t\t\treturn (!icon || icon.indexOf('.') >= 0) ? null : icon;\r\n\t\t}},\r\n\t\t{from: 'overlayIcon', to: '$.overlayIcon.src', transform: function (icon) {\r\n\t\t\treturn (!icon || icon.indexOf('.') == -1) ? null : icon;\r\n\t\t}}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tthis.overlayComponents = this.overlayComponents || [\r\n\t\t\t\t{name: 'overlayIcon', kind: Icon, small: false, owner: this}\r\n\t\t\t];\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdispatchEvent: kind.inherit(function (sup) {\r\n\t\treturn function (sEventName, oEvent, oSender) {\r\n\t\t\tif (oEvent && !oEvent.delegate) {\r\n\t\t\t\tvar handler = this._selectionOverlay_Handlers[sEventName];\r\n\t\t\t\tif (handler) {\r\n\t\t\t\t\tthis[handler](oSender, oEvent);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn sup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_selectionOverlay_spotlightFocused: function() {\r\n\t\tif (this.$.overlayIcon && this.$.overlayIcon.getAbsoluteShowing()) {\r\n\t\t\tthis.set('accessibilityRole', 'checkbox');\r\n\t\t} else {\r\n\t\t\tthis.set('accessibilityRole', null);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{from: 'selected', to: 'aria-checked'}\r\n\t]\r\n};\r\n\r\n/**\r\n* Sets the default configuration and components for fixed text overlay. Requires\r\n* that the control to which it is applied also apply {@link module:moonstone/Overlay~OverlaySupport}\r\n* or contain a control that does and applies {@link module:moonstone/Overlay~OverlayContainerSupport}.\r\n*\r\n* TextOverlaySupport styles controls with the `moon-overlay-text-title` and\r\n* `moon-overlay-text-subtitle` classes\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tImage = require('moonstone/Image'),\r\n* \t\tMarquee = require('moonstone/Marquee'),\r\n* \t\tOverlay = require('moonstone/Overlay);\r\n*\r\n* \t{kind: Image, src: 'moonstone/src/assets/movie.png', mixins: [Overlay.Support, Overlay.Selection],\r\n* \t\toverlayShowing: 'spotlight', overlayComponents: [\r\n*\t\t\t\t{kind: Marquee.Text, content: 'Title', classes: 'moon-overlay-text-title'},\r\n*\t\t\t\t{kind: Marquee.Text, content: '12', classes: 'moon-overlay-text-subtitle'}\r\n* \t\t]\r\n* \t}\r\n* ```\r\n*\r\n* @mixin TextOverlaySupport\r\n* @public\r\n*/\r\nmodule.exports.Text = {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.TextOverlaySupport',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\toverlayClasses: 'moon-overlay-text',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\toverlayPosition: 'centered',\r\n\r\n\t/**\r\n\t* Text to be displayed on top of the overlay with the `moon-overlay-text-title` class applied\r\n\t*\r\n\t* @name overlayTitle\r\n\t* @type {String}\r\n\t* @default undefined\r\n\t* @public\r\n\t*/\r\n\r\n\t/**\r\n\t* Text to be displayed on bottom of the overlay with the `moon-overlay-text-subtitle` class\r\n\t* applied\r\n\t*\r\n\t* @name overlaySubtitle\r\n\t* @type {String}\r\n\t* @default undefined\r\n\t* @public\r\n\t*/\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: 'overlayTitle', to: '$.overlayTitle.content'},\r\n\t\t{from: 'overlaySubtitle', to: '$.overlaySubtitle.content'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tthis.overlayComponents = this.overlayComponents || [\r\n\t\t\t\t{name: 'overlayTitle', classes: 'moon-overlay-text-title', owner: this},\r\n\t\t\t\t{name: 'overlaySubtitle', classes: 'moon-overlay-text-subtitle', owner: this}\r\n\t\t\t];\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t})\r\n};\r\n\r\n\r\n/**\r\n* Sets the default configuration and components for marqueed text overlay.\r\n* Requires that the control to which it is applied also apply\r\n* {@link module:moonstone/Overlay~OverlaySupport} or contain a control that does\r\n* and applies {@link module:moonstone/Overlay~OverlayContainerSupport}.\r\n*\r\n* @mixin MarqueeOverlaySupport\r\n* @public\r\n*/\r\nmodule.exports.Marquee = {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.MarqueeOverlaySupport',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\toverlayClasses: 'moon-overlay-text',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\toverlayPosition: 'centered',\r\n\r\n\t/**\r\n\t* Text to be displayed on top of the overlay with the `moon-overlay-text-title` class applied\r\n\t*\r\n\t* @name overlayTitle\r\n\t* @type {String}\r\n\t* @default undefined\r\n\t* @public\r\n\t*/\r\n\r\n\t/**\r\n\t* Text to be displayed on bottom of the overlay with the `moon-overlay-text-subtitle` class\r\n\t* applied\r\n\t*\r\n\t* @name overlaySubtitle\r\n\t* @type {String}\r\n\t* @default undefined\r\n\t* @public\r\n\t*/\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: 'overlayTitle', to: '$.overlayTitle.content'},\r\n\t\t{from: 'overlaySubtitle', to: '$.overlaySubtitle.content'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tthis.overlayComponents = this.overlayComponents || [\r\n\t\t\t\t{name: 'overlayTitle', kind: Marquee.Text, centered: true, classes: 'moon-overlay-text-title', owner: this},\r\n\t\t\t\t{name: 'overlaySubtitle', kind: Marquee.Text, centered: true, classes: 'moon-overlay-text-subtitle', owner: this}\r\n\t\t\t];\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t})\r\n};\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/ContextualPopup~ContextualPopup} kind.\r\n* @module moonstone/ContextualPopup\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom'),\r\n\tri = require('enyo/resolution'),\r\n\tutil = require('enyo/utils'),\r\n\tControl = require('enyo/Control'),\r\n\tEnyoHistory = require('enyo/History'),\r\n\tPopup = require('enyo/Popup');\r\n\r\nvar\r\n\tContextualLayout = require('layout/ContextualLayout');\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\nvar\r\n\t$L = require('../i18n'),\r\n\tIconButton = require('../IconButton'),\r\n\tScrim = require('moonstone/Scrim'),\r\n\tHistorySupport = require('../HistorySupport');\r\n\r\n/**\r\n* Fires when the contextual popup is to be shown.\r\n*\r\n* @event module:moonstone/ContextualPopup~ContextualPopup#onRequestShowPopup\r\n* @type {Object}\r\n* @property {Object} activator - A reference to the activating object.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when the contextual popup is to be hidden. No additional data is included\r\n* with this event.\r\n*\r\n* @event module:moonstone/ContextualPopup~ContextualPopup#onRequestHidePopup\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when the contextual popup is activated. Extends {@link module:enyo/Popup~Popup#onActivate}.\r\n*\r\n* @event module:moonstone/ContextualPopup~ContextualPopup#onActivate\r\n* @type {Object}\r\n* @property {Object} sentFromPopup - A reference to the popup.\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/ContextualPopup~ContextualPopup} is a popup window control with Moonstone visual\r\n* styling applied. It extends {@link module:enyo/Popup~Popup} and is designed to be used with\r\n* {@link module:moonstone/ContextualPopupDecorator~ContextualPopupDecorator}.\r\n*\r\n* @class ContextualPopup\r\n* @extends module:enyo/Popup~Popup\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/ContextualPopup~ContextualPopup.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ContextualPopup',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Popup,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [HistorySupport],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tlayoutKind: ContextualLayout,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-body-text moon-contextual-popup moon-neutral',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonRequestSpot: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonRequestShowPopup: 'requestShow',\r\n\t\tonRequestHidePopup: 'requestHide',\r\n\t\tonActivate: 'decorateActivateEvent',\r\n\t\tonRequestScrollIntoView: '_preventEventBubble',\r\n\t\tonSpotlightContainerLeave: 'onLeave'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\teventsToCapture: {\r\n\t\tonSpotlightKeyDown: 'capturedKeyDown',\r\n\t\tonSpotlightFocus: 'capturedFocus'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmodal: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/ContextualPopup~ContextualPopup.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* If `true`, focus cannot leave the constraints of the popup unless the\r\n\t\t* popup is explicitly closed. This property's value is copied to\r\n\t\t* [modal]{@link module:enyo/Popup~Popup#modal} at initialization time.\r\n\t\t* Additionally, these two properties are synced whenever one of the following properties changes:\r\n\t\t* [spotlightModal]{@link module:moonstone/ContextualPopup~ContextualPopup#spotlightModal},\r\n\t\t* [modal]{@link module:enyo/Popup~Popup#modal},\r\n\t\t* [modal]{@link module:enyo/Popup~Popup#scrim},\r\n\t\t* [modal]{@link module:enyo/Popup~Popup#scrimWhenModal},\r\n\t\t* [modal]{@link module:enyo/Popup~Popup#floating}.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tspotlightModal: false,\r\n\r\n\t\t/**\r\n\t\t* When `true`, the close button is shown; when `false`, it is hidden.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tshowCloseButton: false\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: 'container',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tfloating: true,\r\n\r\n\t/**\r\n\t* Determines whether a scrim will appear when the popup is modal.\r\n\t* Note that modal scrims are transparent, so you won't see them.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tscrimWhenModal: true,\r\n\r\n\t// Layout parameters\r\n\r\n\t/**\r\n\t* Vertical flush layout margin.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tvertFlushMargin:0,\r\n\r\n\t/**\r\n\t* Horizontal flush layout margin.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\thorizFlushMargin:0,\r\n\r\n\t/**\r\n\t* Popups wider than this value are considered wide (for layout purposes).\r\n\t*\r\n\t* @private\r\n\t*/\r\n\twidePopup: ri.scale(210),\r\n\r\n\t/**\r\n\t* Popups longer than this value are considered long (for layout purposes).\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tlongPopup: ri.scale(210),\r\n\r\n\t/**\r\n\t* Do not allow horizontal flush popups past spec'd amount of buffer space on left/right\r\n\t* screen edge.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\thorizBuffer: ri.scale(15),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tactivator: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tobservers: [\r\n\t\t{method: 'updateScrim', path: [ 'modal', 'spotlightModal', 'floating', 'scrim', 'scrimWhenModal' ]}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttools: [\r\n\t\t{name: 'client', kind: Control, classes: 'moon-contextual-popup-client'},\r\n\t\t{name: 'closeButton', kind: IconButton, icon: 'closex', classes: 'moon-popup-close', ontap: 'closePopup', backgroundOpacity: 'transparent', accessibilityLabel: $L('Close'), tabIndex: -1, spotlight: false}\r\n\t],\r\n\r\n\t/**\r\n\t* Creates chrome components.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tinitComponents: function () {\r\n\t\tthis.createChrome(this.tools);\r\n\t\tPopup.prototype.initComponents.apply(this, arguments);\r\n\t\tthis.modal = this.spotlightModal;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tPopup.prototype.create.apply(this, arguments);\r\n\t\tthis.showCloseButtonChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* Renders the contextual popup.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\trender: function () {\r\n\t\tthis.allowHtmlChanged();\r\n\t\tthis.contentChanged();\r\n\t\tPopup.prototype.render.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\tFixMe: overriding the control's default hide method to support the existing sequential tapping\r\n\tand the dependent decorator code inorder to handle some special cases.\r\n\t*/\r\n\thide: function(inSender, e) {\r\n\r\n\t\tif (this.tapCaptured) {\r\n\t\t\tthis.tapCaptured = false;\r\n\t\t\tthis.popupActivated = true;\r\n\t\t} else {\r\n\t\t\tthis.popupActivated = false;\r\n\t\t}\r\n\t\tPopup.prototype.hide.apply(this, arguments);\r\n\r\n\t},\r\n\r\n\t/**\r\n\t* Performs control-specific tasks before/after showing {@link module:moonstone/ContextualPopup~ContextualPopup}.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\trequestShow: function (inSender, inEvent) {\r\n\t\tvar n = inEvent.activator.hasNode();\r\n\t\tthis.activator = inEvent.activator;\r\n\t\tif (n) {\r\n\t\t\tthis.activatorOffset = this.getPageOffset(n);\r\n\t\t}\r\n\t\tthis.show();\r\n\t\tif (Spotlight.isSpottable(this)) {\r\n\t\t\tSpotlight.spot(this);\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:enyo/Popup~Popup#onActivate\r\n\t* @private\r\n\t*/\r\n\tdecorateActivateEvent: function (inSender, inEvent) {\r\n\t\tinEvent.sentFromPopup = this;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetPageOffset: function (inNode) {\r\n\t\t// getBoundingClientRect returns top/left values which are relative to the viewport and\r\n\t\t// not absolute\r\n\t\tvar r = inNode.getBoundingClientRect(),\r\n\t\t\tpageYOffset = window.pageYOffset,\r\n\t\t\tpageXOffset = window.pageXOffset,\r\n\t\t\trHeight = r.height,\r\n\t\t\trWidth = r.width;\r\n\r\n\t\treturn {top: r.top + pageYOffset, left: r.left + pageXOffset, height: rHeight, width: rWidth, bottom: r.top + pageYOffset + rHeight, right: r.left + pageXOffset + rWidth};\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tresetDirection: function () {\r\n\t\tthis.removeClass('right');\r\n\t\tthis.removeClass('left');\r\n\t\tthis.removeClass('high');\r\n\t\tthis.removeClass('low');\r\n\t\tthis.removeClass('below');\r\n\t\tthis.removeClass('above');\r\n\t},\r\n\r\n\t/**\r\n\t* Alters the direction of the popup.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\talterDirection: function () {\r\n\t\tif (this.showing) {\r\n\t\t\tvar clientRect = this.getBoundingRect(this.node);\r\n\t\t\tvar viewPortHeight = dom.getWindowHeight();\r\n\t\t\tvar viewPortWidth = dom.getWindowWidth();\r\n\t\t\tvar offsetHeight = (clientRect.height - this.activatorOffset.height) / 2;\r\n\t\t\tvar offsetWidth = (clientRect.width - this.activatorOffset.width) / 2;\r\n\t\t\tvar popupMargin = 20;\r\n\r\n\t\t\tvar bounds = {top: null, left: null};\r\n\r\n\t\t\tif(this.direction === 'left') {\r\n\t\t\t\tif(clientRect.width + popupMargin < this.activatorOffset.left) {\r\n\t\t\t\t\tthis.resetDirection();\r\n\t\t\t\t\tthis.addClass('right');\r\n\r\n\t\t\t\t\tif(this.activatorOffset.top < offsetHeight) {\r\n\t\t\t\t\t\tthis.addClass('high');\r\n\t\t\t\t\t\tbounds.top = this.activatorOffset.top;\r\n\t\t\t\t\t} else if(viewPortHeight - this.activatorOffset.bottom < offsetHeight) {\r\n\t\t\t\t\t\tthis.addClass('low');\r\n\t\t\t\t\t\tbounds.top = this.activatorOffset.bottom - clientRect.height;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbounds.top = this.activatorOffset.top - offsetHeight;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbounds.left = this.activatorOffset.left - clientRect.width;\r\n\t\t\t\t}\r\n\t\t\t} else if(this.direction === 'right') {\r\n\t\t\t\tif(viewPortWidth > this.activatorOffset.right + clientRect.width + popupMargin) {\r\n\t\t\t\t\tthis.resetDirection();\r\n\t\t\t\t\tthis.addClass('left');\r\n\r\n\t\t\t\t\tif(this.activatorOffset.top < offsetHeight) {\r\n\t\t\t\t\t\tthis.addClass('high');\r\n\t\t\t\t\t\tbounds.top = this.activatorOffset.top;\r\n\t\t\t\t\t} else if(viewPortHeight - this.activatorOffset.bottom < offsetHeight) {\r\n\t\t\t\t\t\tthis.addClass('low');\r\n\t\t\t\t\t\tbounds.top = this.activatorOffset.bottom - clientRect.height;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbounds.top = this.activatorOffset.top - offsetHeight;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbounds.left = this.activatorOffset.right;\r\n\t\t\t\t}\r\n\t\t\t} else if(this.direction === 'top') {\r\n\t\t\t\tif(clientRect.height + popupMargin < this.activatorOffset.top) {\r\n\t\t\t\t\tthis.resetDirection();\r\n\t\t\t\t\tthis.addClass('above');\r\n\r\n\t\t\t\t\tif(this.activatorOffset.left < offsetWidth) {\r\n\t\t\t\t\t\tthis.addClass('right');\r\n\t\t\t\t\t\tbounds.left = this.activatorOffset.left;\r\n\t\t\t\t\t} else if(viewPortWidth - this.activatorOffset.right < offsetWidth) {\r\n\t\t\t\t\t\tthis.addClass('left');\r\n\t\t\t\t\t\tbounds.left = this.activatorOffset.right - clientRect.width;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbounds.left = this.activatorOffset.left - offsetWidth;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbounds.top = this.activatorOffset.top - clientRect.height;\r\n\t\t\t\t}\r\n\t\t\t} else if(this.direction === 'bottom') {\r\n\t\t\t\tif(viewPortHeight > this.activatorOffset.bottom + clientRect.height + popupMargin) {\r\n\t\t\t\t\tthis.resetDirection();\r\n\t\t\t\t\tthis.addClass('below');\r\n\r\n\t\t\t\t\tif(this.activatorOffset.left < offsetWidth) {\r\n\t\t\t\t\t\tthis.addClass('right');\r\n\t\t\t\t\t\tbounds.left = this.activatorOffset.left;\r\n\t\t\t\t\t} else if(viewPortWidth - this.activatorOffset.right < offsetWidth) {\r\n\t\t\t\t\t\tthis.addClass('left');\r\n\t\t\t\t\t\tbounds.left = this.activatorOffset.right - clientRect.width;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbounds.left = this.activatorOffset.left - offsetWidth;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbounds.top = this.activatorOffset.bottom;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.setBounds(bounds);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetBoundingRect: function (node) {\r\n\t\t// getBoundingClientRect returns top/left values which are relative to the viewport and not absolute\r\n\t\tvar o = node.getBoundingClientRect();\r\n\t\tif (!o.width || !o.height) {\r\n\t\t\treturn {\r\n\t\t\t\tleft: o.left,\r\n\t\t\t\tright: o.right,\r\n\t\t\t\ttop: o.top,\r\n\t\t\t\tbottom: o.bottom,\r\n\t\t\t\twidth: o.right - o.left,\r\n\t\t\t\theight: o.bottom - o.top\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn o;\r\n\t},\r\n\r\n\t/**\r\n\t* Dismisses popup if Escape keypress is detected.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tkeydown: function (inSender, inEvent) {\r\n\t\tif (this.showing && this.autoDismiss && inEvent.keyCode == 27 /* escape */) {\r\n\t\t\tthis.hide();\r\n\t\t\tSpotlight.spot(this.activator);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclosePopup: function (inSender, inEvent) {\r\n\t\tthis.$.closeButton.removeClass('pressed');\r\n\t\tthis.hide();\r\n\t\tSpotlight.spot(this.activator);\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontentChanged: function () {\r\n\t\tthis.$.client.set('content', this.content);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tallowHtmlChanged: function () {\r\n\t\tthis.$.client.set('allowHtml', this.allowHtml);\r\n\t},\r\n\r\n\t/**\r\n\t* Called when [showCloseButton]{@link module:moonstone/ContextualPopup~ContextualPopup#showCloseButton} changes.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshowCloseButtonChanged: function () {\r\n\t\tthis.$.closeButton.set('showing', this.showCloseButton);\r\n\t\tthis.$.closeButton.spotlight = this.showCloseButton;\r\n\t\tthis.addRemoveClass('reserve-close', this.showCloseButton);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcapturedKeyDown: function (inSender, inEvent) {\r\n\t\tif (inEvent.keyCode == 13) {\r\n\t\t\tthis.downEvent = inEvent;\r\n\t\t}\r\n\t\treturn this.modal && this.spotlightModal;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcapturedFocus: function(inSender, inEvent) {\r\n\t\tif(this.modal && this.spotlightModal) {\r\n\t\t\tSpotlight.spot(this);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcapturedTap: function (inSender, inEvent) {\r\n\t\t// If same activator tapped sequentially, the state of the popup is remembered.\r\n\t\tif (this.downEvent && this.downEvent.dispatchTarget.isDescendantOf(this.activator)) {\r\n\t\t\tthis.popupActivated = true;\r\n\t\t\tthis.tapCaptured = true;\r\n\t\t}\r\n\t\tPopup.prototype.capturedTap.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tonLeave: function (oSender, oEvent) {\r\n\t\tif (oEvent.originator == this && !Spotlight.getPointerMode()) {\r\n\t\t\tthis.popupActivated = false;\r\n\t\t\tthis.hide();\r\n\t\t\tSpotlight.spot(this.activator);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_preventEventBubble: function (inSender, inEvent) {\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateScrim: function (old, value, source) {\r\n\t\tif (this._updateScrimMutex) return;\r\n\t\tthis._updateScrimMutex = true;\r\n\r\n\t\t// We sync modal and spotlightModal here because binding doesn't\r\n\t\t// guarantee sequence when it is used with observers.\r\n\t\tif (source == 'modal') this.set('spotlightModal', this.modal);\r\n\t\tif (source == 'spotlightModal') this.set('modal', this.spotlightModal);\r\n\t\tthis.showHideScrim(this.showing);\r\n\r\n\t\tthis._updateScrimMutex = false;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowHideScrim: function (show) {\r\n\t\tvar scrim = this.getScrim();\r\n\r\n\t\tif (this._scrim && scrim != this._scrim) {\r\n\t\t\t// hide if there was different kind of scrim\r\n\t\t\tthis._scrim.hideAtZIndex(this._scrimZ);\r\n\t\t\tif (this.scrimClassName) this._scrim.removeClass(this.scrimClassName);\r\n\t\t}\r\n\r\n\t\tif (show && this.floating && (this.scrim || (this.modal && this.scrimWhenModal))) {\r\n\t\t\t// move scrim to just under the popup to obscure rest of screen\r\n\t\t\tvar i = this.getScrimZIndex();\r\n\t\t\tthis._scrimZ = i;\r\n\t\t\tscrim.showAtZIndex(i);\r\n\t\t} else {\r\n\t\t\tscrim.hideAtZIndex(this._scrimZ);\r\n\t\t}\r\n\t\tutil.call(scrim, 'addRemoveClass', [this.scrimClassName, scrim.showing]);\r\n\t\tthis._scrim = scrim;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetScrimZIndex: function () {\r\n\t\t// Position scrim directly below popup\r\n\t\treturn this.findZIndex()-1;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetScrim: function () {\r\n\t\t// show a transparent scrim for modal popups if\r\n\t\t// {@link module:moonstone/ContextualPopup~ContextualPopup#scrimWhenModal} is `true`, else show a\r\n\t\t// regular scrim.\r\n\t\tif (this.modal && this.scrimWhenModal && !this.scrim) {\r\n\t\t\treturn Scrim.scrimTransparent.make();\r\n\t\t}\r\n\t\treturn Scrim.scrim.make();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowingChanged: function () {\r\n\t\tPopup.prototype.showingChanged.apply(this, arguments);\r\n\t\tthis.alterDirection();\r\n\r\n\t\tif (this.allowBackKey) {\r\n\t\t\tif (this.showing) {\r\n\t\t\t\tthis.pushBackHistory();\r\n\t\t\t} else if(!this.showing && !EnyoHistory.isProcessing()) {\r\n\t\t\t\tEnyoHistory.drop();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbackKeyHandler: function() {\r\n\t\tif (this.showing) {\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\r\n\t\tif (this.spotlight && !this.spotlightDisabled) {\r\n\t\t\tthis.doRequestSpot();\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdirectionChanged: function () {\r\n\t\tthis.alterDirection();\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* When `true`, the contents of the popup will be read when shown.\r\n\t*\r\n\t* @default true\r\n\t* @type {Boolean}\r\n\t* @public\r\n\t*/\r\n\taccessibilityReadAll: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taccessibilityLive: 'off',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: ['accessibilityReadAll', 'accessibilityRole', 'showing'], method: function () {\r\n\t\t\tthis.startJob('alert', function () {\r\n\t\t\t\tthis.setAriaAttribute('role', this.accessibilityReadAll && this.showing ? 'alert' : this.accessibilityRole);\r\n\t\t\t}, 100);\r\n\t\t}}\r\n\t]\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/PagingControl~PagingControl} kind.\r\n* @module moonstone/PagingControl\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutils = require('enyo/utils'),\r\n\tanimation = require('enyo/animation');\r\n\r\nvar\r\n\tSpotlight = require('spotlight'),\r\n\t$L = require('../i18n');\r\n\r\nvar\r\n\tIconButton = require('../IconButton');\r\n\r\n/**\r\n* Fires when page boundary is reached.\r\n*\r\n* @event module:moonstone/PagingControl~PagingControl#onPaginate\r\n* @type {Object}\r\n* @property {Number} scrollDelta - The distance of the scroll.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when we've determined how large the bounceback effect should be.\r\n*\r\n* @event module:moonstone/PagingControl~PagingControl#onPaginateScroll\r\n* @type {Object}\r\n* @property {Number} scrollDelta - The magnitude of the scroll bounceback.\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/PagingControl~PagingControl} is a paging control button derived from\r\n* {@link module:moonstone/IconButton~IconButton}. This control is not intended for use outside of\r\n* {@link module:moonstone/Scroller~Scroller}.\r\n*\r\n* @class PagingControl\r\n* @extends module:moonstone/IconButton~IconButton\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/PagingControl~PagingControl.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.PagingControl',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: IconButton,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-paging-button no-background',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/PagingControl~PagingControl.prototype\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* The side of the control where the button will be.\r\n\t\t*\r\n\t\t* Supported values are `'top'`, `'right'`, `'bottom'`, and `'left'`.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tside: null\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbackgroundOpacity: 'transparent',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tondown: 'down',\r\n\t\tonup: 'endHold',\r\n\t\tonleave: 'endHold',\r\n\t\tonhold: 'hold',\r\n\t\tonActivate: 'noop'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\t/**\r\n\t\t* {@link module:moonstone/PagingControl~PagingControl#onPaginate}\r\n\t\t*/\r\n\t\tonPaginate: '',\r\n\r\n\t\t/**\r\n\t\t* {@link module:moonstone/PagingControl~PagingControl#onPaginateScroll}\r\n\t\t*/\r\n\t\tonPaginateScroll: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdownTime: 0,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitialDelta: 2.5,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdelta: 0,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmaxDelta: 45,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttapDelta: 15,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbumpDeltaMultiplier: 3,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tIconButton.prototype.create.apply(this, arguments);\r\n\t\tthis.sideChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* Stops scrolling animation and triggers\r\n\t* [onPaginate]{@link module:moonstone/PagingControl~PagingControl#onPaginate} event with a delta\r\n\t* value for the bounceback effect.\r\n\t*\r\n\t* @fires module:moonstone/PagingControl~PagingControl#onPaginate\r\n\t* @public\r\n\t*/\r\n\thitBoundary: function () {\r\n\t\tthis.stopHoldJob();\r\n\t\tthis.downTime = null;\r\n\t\tthis.doPaginate({scrollDelta: this.delta * this.bumpDeltaMultiplier});\r\n\t\tSpotlight.Accelerator.cancel();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_iconMappings: {\r\n\t\t'top': 'arrowlargeup',\r\n\t\t'bottom': 'arrowlargedown',\r\n\t\t'left': 'arrowlargeleft',\r\n\t\t'right': 'arrowlargeright'\r\n\t},\r\n\r\n\t/**\r\n\t* Set this control's CSS class based on its [side]{@link module:moonstone/PagingControl~PagingControl#side}\r\n\t* value.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsideChanged: function (old) {\r\n\t\tvar s = this.side;\r\n\t\tif(old) {\r\n\t\t\tthis.removeClass(old);\r\n\t\t}\r\n\t\tthis.addClass(s);\r\n\t\tthis.setIcon(this._iconMappings[s]);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdown: function (sender, event) {\r\n\t\tif (this.disabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.downTime = utils.perfNow();\r\n\t\tthis.delta = this.initialDelta;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thold: function (sender, event) {\r\n\t\tif (this.disabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.startHoldJob();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdepress: function (sender, event) {\r\n\t\tIconButton.prototype.depress.apply(this, arguments);\r\n\t\t// keydown events repeat (while mousedown/hold does not); simulate\r\n\t\t// hold behavior with mouse by catching the second keydown event\r\n\t\tif (event.keyCode === 13) {\r\n\t\t\tthis.set('pressed', true);\r\n\t\t\tif (!this.downCount) {\r\n\t\t\t\tthis.down();\r\n\t\t\t\tthis.downCount = 1;\r\n\t\t\t} else {\r\n\t\t\t\tthis.downCount++;\r\n\t\t\t}\r\n\t\t\tif (this.downCount == 2) {\r\n\t\t\t\tthis.hold();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tundepress: function (sender, event) {\r\n\t\tthis.set('pressed', false);\r\n\t\tIconButton.prototype.undepress.apply(this, arguments);\r\n\t\tthis.endHold(sender, event);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tendHold: function (sender, event) {\r\n\t\tif (!this.downTime) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.downCount = 0;\r\n\t\tthis.stopHoldJob();\r\n\t\tthis.sendPaginateEvent();\r\n\t\tthis.downTime = null;\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:moonstone/PagingControl~PagingControl#onPaginateScroll\r\n\t* @private\r\n\t*/\r\n\tstartHoldJob: function () {\r\n\t\tthis.stopHoldJob();\r\n\r\n\t\tvar t0 = utils.perfNow(),\r\n\t\t\tt = 0\r\n\t\t;\r\n\r\n\t\tvar fn = this.bindSafely(function () {\r\n\t\t\tthis.job = animation.requestAnimationFrame(fn);\r\n\r\n\t\t\tt = (utils.perfNow() - t0)/1000;\r\n\t\t\tthis.delta = Math.min(this.maxDelta, this.delta + (0.1 * Math.pow(t, 1.1)));\r\n\r\n\t\t\tthis.doPaginateScroll({scrollDelta: this.delta});\r\n\t\t});\r\n\r\n\t\tthis.job = animation.requestAnimationFrame(fn);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstopHoldJob: function () {\r\n\t\tthis.job = animation.cancelAnimationFrame(this.job);\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:moonstone/PagingControl~PagingControl#onPaginate\r\n\t* @private\r\n\t*/\r\n\tsendPaginateEvent: function () {\r\n\t\tvar tapThreshold = 200,\r\n\t\t\ttimeElapsed = utils.perfNow() - this.downTime,\r\n\t\t\tdelta = (timeElapsed <= tapThreshold) ? this.tapDelta : this.delta;\r\n\r\n\t\tthis.doPaginate({scrollDelta: delta});\r\n\t},\r\n\r\n\t/**\r\n\t* Overrides default focused handling to make sure scroller doesn't scroll to\r\n\t* this button.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tspotlightFocused: function () {\r\n\t\tthis.set('spotted', true);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightBlurred: function (sender, event) {\r\n\t\tIconButton.prototype.spotlightBlurred.apply(this, arguments);\r\n\t\tthis.set('spotted', false);\r\n\t\tthis.endHold(sender, event);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnoop: function () { return true; },\r\n\r\n\t// Accessibility\r\n\r\n\t/*\r\n\t* @private\r\n\t*/\r\n\tspotted: false,\r\n\r\n\t/*\r\n\t* @private\r\n\t*/\r\n\tpressed: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taccessibilityLive: 'off',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: ['side', 'spotted'], method: function () {\r\n\t\t\tvar side = this.get('side');\r\n\t\t\tif (this.spotted) {\r\n\t\t\t\tswitch(side) {\r\n\t\t\t\t\tcase 'top':\r\n\t\t\t\t\t\tthis.set('accessibilityLabel', $L('scroll up'));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'bottom':\r\n\t\t\t\t\t\tthis.set('accessibilityLabel', $L('scroll down'));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'left':\r\n\t\t\t\t\t\tthis.set('accessibilityLabel', $L('scroll left'));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'right':\r\n\t\t\t\t\t\tthis.set('accessibilityLabel', $L('scroll right'));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}},\r\n\t\t{path: 'pressed', method: function () {\r\n\t\t\tvar side = this.get('side');\r\n\t\t\tif (this.pressed) {\r\n\t\t\t\tswitch(side) {\r\n\t\t\t\t\tcase 'top':\r\n\t\t\t\t\t\tthis.set('accessibilityLabel', $L('UP'));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'bottom':\r\n\t\t\t\t\t\tthis.set('accessibilityLabel', $L('DOWN'));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'left':\r\n\t\t\t\t\t\tthis.set('accessibilityLabel', $L('LEFT'));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'right':\r\n\t\t\t\t\t\tthis.set('accessibilityLabel', $L('RIGHT'));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tthis.set('accessibilityAlert', true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.set('accessibilityAlert', null);\r\n\t\t\t\tthis.set('accessibilityLabel', null);\r\n\t\t\t}\r\n\t\t}}\r\n\t]\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:moonstone/VideoFullscreenToggleButton~VideoFullscreenToggleButton} kind.\r\n* @module moonstone/VideoFullscreenToggleButton\r\n*/\r\n\r\nrequire('moonstone');\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\t$L = require('../i18n'),\r\n\tIconButton = require('moonstone/IconButton');\r\n\r\n/**\r\n* {@link module:moonstone/VideoFullscreenToggleButton~VideoFullscreenToggleButton} is a specialized {@link module:moonstone/IconButton~IconButton};\r\n* when placed inside a {@link module:moonstone/VideoPlayer~VideoPlayer}, the button may be tapped to toggle\r\n* the video player's fullscreen state.\r\n*\r\n* @class VideoFullscreenToggleButton\r\n* @extends module:moonstone/IconButton~IconButton\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/VideoFullscreenToggleButton~VideoFullscreenToggleButton */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.VideoFullscreenToggleButton',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: IconButton,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ticon : 'exitfullscreen',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsmall: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses : 'moon-icon-exitfullscreen-font-style',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\t/**\r\n\t\t* {@link module:moonstone/VideoPlayer~VideoPlayer#onRequestToggleFullscreen}\r\n\t\t*/\r\n\t\tonRequestToggleFullscreen:''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\t/**\r\n\t\t* @fires module:moonstone/VideoPlayer~VideoPlayer#onRequestToggleFullscreen\r\n\t\t*/\r\n\t\tontap: 'doRequestToggleFullscreen'\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: 'icon', method: function () {\r\n\t\t\tif (this.icon === 'exitfullscreen') {\r\n\t\t\t\tthis.set('accessibilityLabel', $L('original screen'));\r\n\t\t\t} else {\r\n\t\t\t\tthis.set('accessibilityLabel', $L('full screen'));\r\n\t\t\t}\r\n\t\t}}\r\n\t]\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Slider~Slider} kind.\r\n* @module moonstone/Slider\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tgesture = require('enyo/gesture'),\r\n\tControl = require('enyo/Control'),\r\n\tAnimator = require('enyo/Animator');\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\nvar\r\n\tProgressBar = require('../ProgressBar'),\r\n\tIconButton = require('../IconButton');\r\n\r\nvar\r\n\t$L = require('../i18n');\r\n\r\n/**\r\n* Fires when bar position is set.\r\n*\r\n* @event module:moonstone/Slider~Slider#onChange\r\n* @type {Object}\r\n* @property {Number} value - The value of the current position.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires while control knob is being dragged.\r\n*\r\n* @event module:moonstone/Slider~Slider#onChanging\r\n* @type {Object}\r\n* @property {Number} value - The value of the current position.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when animation to a position finishes. No additional information is passed with this\r\n* event.\r\n*\r\n* @event module:moonstone/Slider~Slider#onAnimateFinish\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/Slider~Slider} is a [control]{@link module:enyo/Control~Control}\r\n* that presents a range of selection options in the form of a horizontal slider\r\n* with a control knob. The knob may be tapped and dragged to the desired location.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tSlider = require('moonstone/Slider');\r\n*\r\n* \t{kind: Slider, value: 30}\r\n* ```\r\n*\r\n* @class Slider\r\n* @extends module:moonstone/ProgressBar~ProgressBar\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/Slider~Slider.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Slider',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: ProgressBar,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-slider',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/Slider~Slider.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Position of slider, expressed as an integer between `0` and `100`, inclusive.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tvalue: 0,\r\n\r\n\t\t/**\r\n\t\t* Sliders may \"snap\" to multiples of this value in either direction.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tincrement: 0,\r\n\r\n\t\t/**\r\n\t\t* When `true`, current progress is styled differently from rest of bar.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tlockBar: true,\r\n\r\n\t\t/**\r\n\t\t* When `true`, tapping on bar will change current position.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttappable: true,\r\n\r\n\t\t/**\r\n\t\t* When `true`, jumpIncrement button will be displayed in both side of slider.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tenableJumpIncrement: false,\r\n\r\n\t\t/**\r\n\t\t* Sliders will increase or decrease as much as this percentage or value in either direction\r\n\t\t* when jumpIncrement button is tapped.\r\n\t\t*\r\n\t\t* @type {Number|String}\r\n\t\t* @default '10%'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tjumpIncrement: '10%',\r\n\r\n\t\t/**\r\n\t\t* Sliders will use this icon name for the button that decreases the value. Another good\r\n\t\t* alternative would be 'minus'.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'arrowlargeleft'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdecrementIcon: 'arrowlargeleft',\r\n\r\n\t\t/**\r\n\t\t* Sliders will use this icon name for the button that increases the value. Another good\r\n\t\t* alternative would be 'plus'.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'arrowlargeright'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tincrementIcon: 'arrowlargeright',\r\n\r\n\t\t/**\r\n\t\t* CSS classes to apply to the knob.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'moon-slider-knob'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tknobClasses: 'moon-slider-knob',\r\n\r\n\t\t/**\r\n\t\t* CSS classes to apply to the tap area.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'moon-slider-taparea'\r\n\t\t* @deprecated This control no longer uses a DOM element as a tap area and relies on a\r\n\t\t* \truntime pseudo-class to capture taps.\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttapAreaClasses: 'moon-slider-taparea',\r\n\r\n\t\t/**\r\n\t\t* If set to `true`, button is shown as disabled and does not generate tap events.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdisabled: false,\r\n\r\n\t\t/**\r\n\t\t* When `true`, knob and progress move with animation when left or right direction\r\n\t\t* key is pressed, or when bar is tapped.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tanimate: true,\r\n\r\n\t\t/**\r\n\t\t* When `false`, knob may be moved past the\r\n\t\t* [bgProgress]{@link module:moonstone/ProgressBar~ProgressBar#bgProgress} value.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tconstrainToBgProgress: false,\r\n\r\n\t\t/**\r\n\t\t* Overriding the default value of popup to `true`\r\n\t\t*\r\n\t\t* @see module:moonstone/ProgressBar~ProgressBar#popup\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpopup: true,\r\n\r\n\t\t/**\r\n\t\t* When `false`, the popup bubble is displayed while the slider is being adjusted.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @deprecated Replaced by {@link module:moonstone/ProgressBar~ProgressBar#popup}\r\n\t\t* @public\r\n\t\t*/\r\n\t\tnoPopup: false,\r\n\r\n\t\t/**\r\n\t\t* If set to `true`, an elastic visual effect is seen when the knob is dragged past\r\n\t\t* the [bgProgress]{@link module:moonstone/ProgressBar~ProgressBar#bgProgress} value.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\telasticEffect: false\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonChange: '',\r\n\t\tonChanging: '',\r\n\t\tonAnimateFinish: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tondragstart: 'dragstart',\r\n\t\tondrag: 'drag',\r\n\t\tondragfinish: 'dragfinish',\r\n\t\tonSpotlightFocused: 'spotFocused',\r\n\t\tonSpotlightSelect: 'spotSelect',\r\n\t\tonSpotlightBlur: 'spotBlur',\r\n\t\tonSpotlightUp: 'spotUp',\r\n\t\tonSpotlightDown: 'spotDown',\r\n\t\tonSpotlightLeft: 'spotLeft',\r\n\t\tonSpotlightRight: 'spotRight'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmoreComponents: [\r\n\t\t{name: 'animator', kind: Animator, onStep: 'animatorStep', onEnd: 'animatorComplete'},\r\n\t\t{name: 'knob', kind: Control, ondown: 'handleKnobDown', onup: 'handleKnobUp'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tjumpWrapperComponents: [\r\n\t\t{\r\n\t\t\tname: 'buttonLeft',\r\n\t\t\tkind: IconButton,\r\n\t\t\tbackgroundOpacity: 'transparent',\r\n\t\t\tclasses: 'moon-slider-button left',\r\n\t\t\ticon: 'arrowlargeleft',\r\n\t\t\tonSpotlightSelect: 'preventEvent',\r\n\t\t\tonSpotlightKeyDown: 'jumpButtonTriggered',\r\n\t\t\tonSpotlightKeyUp: 'jumpButtonReleased',\r\n\t\t\tondown: 'jumpButtonTriggered',\r\n\t\t\tonup: 'jumpButtonReleased',\r\n\t\t\tonholdpulse: 'jumpButtonTriggered',\r\n\t\t\tonrelease: 'jumpButtonReleased',\r\n\t\t\tondragstart: 'preventEvent',\r\n\t\t\tdefaultSpotlightDisappear: 'buttonRight'\r\n\t\t},\r\n\t\t{name: 'slider', classes: 'moon-slider', spotlight: true, accessibilityLive: 'polite'},\r\n\t\t{\r\n\t\t\tname: 'buttonRight',\r\n\t\t\tkind: IconButton,\r\n\t\t\tbackgroundOpacity: 'transparent',\r\n\t\t\tclasses: 'moon-slider-button right',\r\n\t\t\ticon: 'arrowlargeright',\r\n\t\t\tonSpotlightSelect: 'preventEvent',\r\n\t\t\tonSpotlightKeyDown: 'jumpButtonTriggered',\r\n\t\t\tonSpotlightKeyUp: 'jumpButtonReleased',\r\n\t\t\tondown: 'jumpButtonTriggered',\r\n\t\t\tonup: 'jumpButtonReleased',\r\n\t\t\tonholdpulse: 'jumpButtonTriggered',\r\n\t\t\tonrelease: 'jumpButtonReleased',\r\n\t\t\tondragstart: 'preventEvent',\r\n\t\t\tdefaultSpotlightDisappear: 'buttonLeft'\r\n\t\t}\r\n\t],\r\n\r\n\t/**\r\n\t*/\r\n\tanimatingTo: null,\r\n\r\n\t/**\r\n\t* Spotlight state of slider\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @private\r\n\t*/\r\n\tselected: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tselectedChanged: function (was, is) {\r\n\t\tthis.$.knob.addRemoveClass('spotselect', this.selected);\r\n\t\tthis.set('knobSelected', this.selected);\r\n\t},\r\n\r\n\t/**\r\n\t* Knob selected state set by either via tap, drag, or spot\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @private\r\n\t*/\r\n\tknobSelected: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tknobSelectedChanged: function (was, is) {\r\n\t\tthis.$.bar.addRemoveClass('selected', this.knobSelected);\r\n\t},\r\n\r\n\t/**\r\n\t* Drag state of slider\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @private\r\n\t*/\r\n\tdragging: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdraggingChanged: function (was, is) {\r\n\t\tthis.$.knob.addRemoveClass('active', this.dragging);\r\n\t\tthis.set('knobSelected', this.dragging);\r\n\t},\r\n\r\n\t/**\r\n\t* Animates to the given value.\r\n\t*\r\n\t* @param {Number} start - The start position, as an integer between `0` and `100`.\r\n\t* @param {Number} end - The end position, as an integer between `0` and `100`.\r\n\t* @public\r\n\t*/\r\n\tanimateTo: function (start, end) {\r\n\t\tstart = this.clampValue(this.min, this.max, start);\r\n\t\tend = this.clampValue(this.min, this.max, end); // Moved from animatorStep\r\n\t\tthis.animatingTo = end;\r\n\r\n\t\tthis.$.animator.play({\r\n\t\t\tstartValue: start,\r\n\t\t\tendValue: end,\r\n\t\t\tnode: this.hasNode()\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t* Determines whether the slider is currently being dragged.\r\n\t*\r\n\t* @returns {Boolean} `true` if the slider is currently being dragged; otherwise, `false`.\r\n\t* @public\r\n\t*/\r\n\tisDragging: function () {\r\n\t\treturn this.dragging;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tProgressBar.prototype.create.apply(this, arguments);\r\n\t\t// Compatibility code for noPopup. Intentionally updating after the super call because this\r\n\t\t// control assumes the popup will be created and `popup` will only affect its display\r\n\t\tif (this.hasOwnProperty('noPopup')) this.popup = !this.noPopup;\r\n\r\n\t\tthis.initValue();\r\n\t\tthis.disabledChanged();\r\n\t\tthis.knobClassesChanged();\r\n\t\tthis.enableJumpIncrementChanged();\r\n\t\tthis.jumpIncrementChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitComponents: function () {\r\n\t\tif (this.enableJumpIncrement) this.createJumpIncrementButton();\r\n\t\tProgressBar.prototype.initComponents.apply(this, arguments);\r\n\t\tthis.createChrome(this.moreComponents);\r\n\t},\r\n\r\n\t/**\r\n\t* Overriding {@link module:moonstone/ProgressBar~ProgressBar#createPopup} to change the\r\n\t* container of the popup as well as skip the logic to make it persistently shown.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcreatePopup: function () {\r\n\t\tthis.$.knob.createComponents(this.popupComponents, {owner: this});\r\n\t\tthis.$.popup.set('autoDismiss', false);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreateJumpIncrementButton: function () {\r\n\t\tthis.createComponents(this.jumpWrapperComponents, {owner: this});\r\n\t\tthis.controlParent = this.$.slider;\r\n\t\tthis.addClass('moon-slider-wrapper');\r\n\r\n\t\tthis.set('spotlight', false);\r\n\t\tthis.$.buttonLeft.set('icon', this.get('decrementIcon'));\r\n\t\tthis.$.buttonRight.set('icon', this.get('incrementIcon'));\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trendered: function () {\r\n\t\tProgressBar.prototype.rendered.apply(this, arguments);\r\n\t\tthis._setValue(this.value);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tenableJumpIncrementChanged: function () {\r\n\t\tthis.addRemoveClass('incrementable', this.enableJumpIncrement);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdisabledChanged: function () {\r\n\t\tif (this.enableJumpIncrement) {\r\n\t\t\tthis.updateButtonStatus();\r\n\t\t\tthis.$.slider.set('disabled', this.disabled);\r\n\t\t}\r\n\t\tthis.addRemoveClass('disabled', this.disabled);\r\n\t\tthis.$.knob.addRemoveClass('disabled', this.disabled);\r\n\t\tthis.setTappable(!this.disabled);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tknobClassesChanged: function (was) {\r\n\t\tthis.$.knob.removeClass(was);\r\n\t\tthis.$.knob.addClass(this.knobClasses);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tjumpIncrementChanged: function () {\r\n\t\tvar range = this.max - this.min,\r\n\t\t\tincrementBy;\r\n\t\tif (typeof this.jumpIncrement == 'string' && this.jumpIncrement.substr(-1) == '%') {\r\n\t\t\t// jumpIncrement is a percent value\r\n\t\t\tincrementBy = range * parseFloat(this.jumpIncrement.slice(0,-1)) / 100;\r\n\t\t} else {\r\n\t\t\t// jumpIncrement is a plain number\r\n\t\t\tincrementBy = this.jumpIncrement;\r\n\t\t}\r\n\t\tthis._jumpIncrementAmount = incrementBy;\r\n\t},\r\n\r\n\t/**\r\n\t* Slider will snap to multiples of this value.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcalcIncrement: function (val) {\r\n\t\treturn (Math.round(val / this.increment) * this.increment);\r\n\t},\r\n\r\n\t/**\r\n\t* Called only when [constrainToBgProgress]{@link module:moonstone/Slider~Slider#constrainToBgProgress} is\r\n\t* `true`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcalcConstrainedIncrement: function (val) {\r\n\t\treturn (Math.floor(val / this.increment) * this.increment);\r\n\t},\r\n\r\n\t/**\r\n\t* Initializes [value]{@link module:moonstone/Slider~Slider#value} at creation time.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tinitValue: function () {\r\n\t\tif (this.constrainToBgProgress) {\r\n\t\t\tthis.value = this.clampValue(this.min, this.bgProgress, this.value);\r\n\t\t\tthis.value = (this.increment) ? this.calcConstrainedIncrement(this.value) : this.value;\r\n\t\t}\r\n\r\n\t\tthis.updateValues(this.getValue());\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateValues: function (value) {\r\n\t\tif (this.lockBar) {\r\n\t\t\tthis.setProgress(value);\r\n\t\t} else {\r\n\t\t\tif (this.popup) {\r\n\t\t\t\tthis.updatePopup(value);\r\n\t\t\t}\r\n\t\t\tthis.updateKnobPosition(this.calcPercent(value));\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tprogressChanged: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.updateKnobPosition(this.calcPercent(this.progress));\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @override\r\n\t* @private\r\n\t*/\r\n\tshowPercentageChanged: function () {\r\n\t\tthis.updatePopup(this.value);\r\n\t},\r\n\r\n\t/**\r\n\t* @override\r\n\t* @private\r\n\t*/\r\n\tpopupSideChanged: function () {\r\n\t\tthis.updatePopup(this.value);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tvalueChanged: function (was, is) {\r\n\t\tif (!this.dragging) {\r\n\t\t\tvar allowAnimation = this.constrainToBgProgress && is <= this.bgProgress || !this.constrainToBgProgress;\r\n\t\t\tif (this.constrainToBgProgress) {\r\n\t\t\t\tis = this.clampValue(this.min, this.bgProgress, is); // Moved from animatorStep\r\n\t\t\t\tis = (this.increment) ? this.calcConstrainedIncrement(is) : is;\r\n\t\t\t}\r\n\t\t\tif (this.animate && allowAnimation) {\r\n\t\t\t\tthis.animateTo(was, is);\r\n\t\t\t} else {\r\n\t\t\t\tthis._setValue(is);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tminChanged: function (was, is) {\r\n\t\tthis.initValue();\r\n\t\tthis.progressChanged();\r\n\t\tthis.bgProgressChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmaxChanged: function (was, is) {\r\n\t\tthis.initValue();\r\n\t\tthis.progressChanged();\r\n\t\tthis.bgProgressChanged();\r\n\t},\r\n\r\n\t/**\r\n\t * @deprecated To be removed when noPopup removed\r\n\t * @private\r\n\t */\r\n\tnoPopupChanged: function () {\r\n\t\tthis.set('popup', !this.noPopup);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_setValue: function (val) {\r\n\t\tvar v = this.clampValue(this.min, this.max, val);\r\n\r\n\t\tthis.value = v;\r\n\t\tthis.updateButtonStatus();\r\n\r\n\t\tthis.updateValues(v);\r\n\r\n\t\tthis.sendChangeEvent({value: v});\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetValue: function () {\r\n\t\treturn (this.animatingTo !== null) ? this.animatingTo : this.value;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateButtonStatus: function () {\r\n\t\tif (this.enableJumpIncrement) {\r\n\t\t\tthis.$.buttonLeft.set('disabled', this.disabled || this.value <= this.min);\r\n\t\t\tthis.$.buttonRight.set('disabled', this.disabled || this.value >= this.max);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateKnobPosition: function (percent) {\r\n\t\tthis.$.knob.applyStyle(this.get('orientation') == 'vertical' ? 'bottom' : 'left', percent + '%');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdatePopupPosition: function () {\r\n\t\t// Override ProgressBar.updatePopupPosition to prevent unwanted changes\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcKnobPosition: function (e) {\r\n\t\tvar node = this.enableJumpIncrement ? this.$.slider.hasNode() : this.hasNode(),\r\n\t\t\trect = node.getBoundingClientRect(),\r\n\t\t\tdist;\r\n\r\n\t\tif (this.get('orientation') == 'vertical') {\r\n\t\t\tdist = ((rect.height - (e.clientY - rect.top)) / rect.height);\r\n\t\t} else {\r\n\t\t\t// default to horizontal\r\n\t\t\tdist = ((e.clientX - rect.left) / rect.width);\r\n\t\t}\r\n\t\treturn (dist * (this.max - this.min) + this.min);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdragstart: function (sender, e) {\r\n\t\tif (this.disabled) {\r\n\t\t\treturn; // return nothing\r\n\t\t}\r\n\r\n\t\te.preventDefault();\r\n\t\tthis.set('dragging', true);\r\n\t\tSpotlight.freeze();\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdrag: function (sender, e) {\r\n\t\tif (this.dragging) {\r\n\t\t\tvar v = this.calcKnobPosition(e), ev;\r\n\r\n\t\t\tif (this.constrainToBgProgress === true) {\r\n\t\t\t\tv = (this.increment) ? this.calcConstrainedIncrement(v) : v;\r\n\t\t\t\tev = this.bgProgress + (v-this.bgProgress)*0.4;\r\n\t\t\t\tv = this.clampValue(this.min, this.bgProgress, v);\r\n\t\t\t\tthis.elasticFrom = (this.elasticEffect === false || this.bgProgress > v) ? v : ev;\r\n\t\t\t\tthis.elasticTo = v;\r\n\t\t\t} else {\r\n\t\t\t\tv = (this.increment) ? this.calcIncrement(v) : v;\r\n\t\t\t\tv = this.clampValue(this.min, this.max, v);\r\n\t\t\t\tthis.elasticFrom = this.elasticTo = v;\r\n\t\t\t}\r\n\r\n\t\t\tthis.set('value', v);\r\n\r\n\t\t\tthis.updateValues(v);\r\n\r\n\t\t\tthis.sendChangingEvent({value: v});\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdragfinish: function (sender, e) {\r\n\t\tif (this.disabled || !this.dragging) {\r\n\t\t\treturn; // return nothing\r\n\t\t}\r\n\r\n\t\tvar v = this.elasticTo;\r\n\t\tif (this.constrainToBgProgress === true) {\r\n\t\t\tv = (this.increment) ? this.calcConstrainedIncrement(v) : v;\r\n\t\t} else {\r\n\t\t\tv = this.calcKnobPosition(e);\r\n\t\t\tv = (this.increment) ? this.calcIncrement(v) : v;\r\n\t\t\tv = this.clampValue(this.min, this.max, v);\r\n\t\t}\r\n\r\n\t\tthis.set('dragging', false);\r\n\t\tSpotlight.unfreeze();\r\n\t\tthis.set('value', v);\r\n\r\n\t\tthis.updateButtonStatus();\r\n\t\tthis.sendChangeEvent({value: this.getValue()});\r\n\t\te.preventTap();\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttap: function (sender, e) {\r\n\t\tif (this.tappable && !this.disabled && (e.originator === this || e.originator === this.$.slider || e.originator === this.$.bar || e.originator === this.$.bgbar)) {\r\n\t\t\tvar v = this.calcKnobPosition(e);\r\n\t\t\tv = (this.increment) ? this.calcIncrement(v) : v;\r\n\t\t\tv = (this.constrainToBgProgress && v>this.bgProgress) ? this.bgProgress : v;\r\n\t\t\tthis.set('value',v);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tanimatorStep: function (sender) {\r\n\t\tvar\tv = sender.value;\r\n\r\n\t\tthis.updateValues(v);\r\n\r\n\t\tthis.sendChangingEvent({value: v});\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:moonstone/Slider~Slider#onAnimateFinish\r\n\t* @private\r\n\t*/\r\n\tanimatorComplete: function (sender) {\r\n\t\tif (!sender.isAnimating()) {\r\n\t\t\tthis._setValue(sender.value);\r\n\t\t\tthis.animatingTo = null;\r\n\t\t\tthis.doAnimateFinish(sender);\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotFocused: function (sender, e) {\r\n\t\tif ((this.enableJumpIncrement && e.originator.owner === this) || e.originator === this) {\r\n\t\t\tthis.bubble('onRequestScrollIntoView');\r\n\t\t}\r\n\t\tthis.showKnobStatus();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotSelect: function () {\r\n\t\tthis.set('selected', !this.selected);\r\n\t\tif (this.popup) {\r\n\t\t\tif (this.selected) {\r\n\t\t\t\tthis.$.popup.bubble('onRequestScrollIntoView');\r\n\t\t\t}\r\n\t\t\tthis.updatePopup(this.getValue());\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotBlur: function () {\r\n\t\tif (!this.dragging) {\r\n\t\t\tif (this.$.popup) {\r\n\t\t\t\tthis.$.popup.hide();\r\n\t\t\t}\r\n\t\t\tthis.set('selected', false);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotUp: function (sender, e) {\r\n\t\tif (this.get('orientation') == 'vertical' && this.selected && !this.dragging && (!this.enableJumpIncrement || sender == this.$.slider)) {\r\n\t\t\t// If in the process of animating, work from the previously set value\r\n\t\t\tvar v = this.getValue() + (this.increment || 1);\r\n\r\n\t\t\tthis.set('value', v);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotDown: function (sender, e) {\r\n\t\tif (this.get('orientation') == 'vertical' && this.selected && !this.dragging && (!this.enableJumpIncrement || sender == this.$.slider)) {\r\n\t\t\t// If in the process of animating, work from the previously set value\r\n\t\t\tvar v = this.getValue() - (this.increment || 1);\r\n\r\n\t\t\tthis.set('value', v);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotLeft: function (sender, e) {\r\n\t\tif (this.get('orientation') == 'horizontal' && this.selected && !this.dragging && (!this.enableJumpIncrement || sender == this.$.slider)) {\r\n\t\t\t// If in the process of animating, work from the previously set value\r\n\t\t\tvar v = this.getValue() - (this.increment || 1);\r\n\r\n\t\t\tthis.set('value', v);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotRight: function (sender, e) {\r\n\t\tif (this.get('orientation') == 'horizontal' && this.selected && !this.dragging && (!this.enableJumpIncrement || sender == this.$.slider)) {\r\n\t\t\tvar\tv = this.getValue() + (this.increment || 1);\r\n\r\n\t\t\tthis.set('value', v);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleKnobDown: function (sender, e) {\r\n\t\tif (!this.disabled) {\r\n\t\t\te.configureHoldPulse({endHold: 'onMove'});\r\n\t\t\tthis.set('knobSelected', true);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowKnobStatus: function () {\r\n\t\tif (this.popup) {\r\n\t\t\tthis.$.popup.show();\r\n\t\t\tthis.updatePopup(this.getValue());\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleKnobUp: function (sender, e) {\r\n\t\tif (!this.disabled) {\r\n\t\t\tthis.set('knobSelected', false);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tchangeDelayMS: 50,\r\n\r\n\t/**\r\n\t* @fires module:moonstone/Slider~Slider#onChange\r\n\t* @private\r\n\t*/\r\n\tsendChangeEvent: function (data) {\r\n\t\tvar value = this.value;\r\n\t\tthis.throttleJob('sliderChange', function () {\r\n\t\t\tthis.doChange(data);\r\n\t\t\tthis.startJob('sliderChangePost', function () {\r\n\t\t\t\tif (this.value !== value) this.doChange({value: this.value});\r\n\t\t\t}, this.changeDelayMS);\r\n\t\t}, this.changeDelayMS);\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:moonstone/Slider~Slider#onChanging\r\n\t* @private\r\n\t*/\r\n\tsendChangingEvent: function (data) {\r\n\t\tthis.throttleJob('sliderChanging', function () { this.doChanging(data); }, this.changeDelayMS);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tjumpButtonTriggered: function (sender, ev) {\r\n\t\tvar isValidEvent = true;\r\n\t\tif (!sender.disabled && (!this._jumpSender || this._jumpSender == sender)) {\r\n\t\t\tif (ev.keyCode != 13 && ev.type == 'onSpotlightKeyDown') {\r\n\t\t\t\tisValidEvent = false;\r\n\t\t\t}\r\n\t\t\tif (isValidEvent) {\r\n\t\t\t\tif (sender === this.$.buttonLeft) this.previous();\r\n\t\t\t\telse this.next();\r\n\t\t\t\tthis._jumpSender = sender;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tSpotlight.Accelerator.cancel();\r\n\t\t\tgesture.drag.endHold();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tjumpButtonReleased: function (sender, e) {\r\n\t\tthis._jumpSender = null;\r\n\t},\r\n\r\n\t/**\r\n\t* Prevent events that start on the left and right jump buttons\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpreventEvent: function (sender, event) {\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* Decrement slider by jumpIncrement value.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tprevious: function () {\r\n\t\tthis.set('value', this.value - this._jumpIncrementAmount);\r\n\t},\r\n\r\n\t/**\r\n\t* Increment slider by jumpIncrement value.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tnext: function () {\r\n\t\tthis.set('value', this.value + this._jumpIncrementAmount);\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @default slider\r\n\t* @type {String}\r\n\t* @see enyo/AccessibilitySupport~AccessibilitySupport#accessibilityRole\r\n\t* @public\r\n\t*/\r\n\taccessibilityRole: 'slider',\r\n\r\n\t/**\r\n\t* Custom value for accessibility (ignored if `null`).\r\n\t*\r\n\t* @type {String|null}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\taccessibilityValueText: null,\r\n\r\n\t/**\r\n\t* When `true`, VoiceReadout will be prevented.\r\n\t*\r\n\t* @default false\r\n\t* @type {Boolean}\r\n\t* @public\r\n\t*/\r\n\taccessibilityDisabled: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{to: 'aria-atomic', value: true},\r\n\t\t{from: 'disabled', method: function () {\r\n\t\t\tthis.setAriaAttribute('aria-disabled', this.disabled || null);\r\n\t\t}},\r\n\t\t{path: 'enableJumpIncrement', method: function () {\r\n\t\t\t// if enableJumpIncrement is true we set the spinbutton role to this.$.slider to be able to\r\n\t\t\t// read accessibilityHint of buttons.\r\n\t\t\tif (this.enableJumpIncrement) {\r\n\t\t\t\tthis.$.slider.set('accessibilityRole', 'slider');\r\n\t\t\t\tthis.$.buttonLeft.set('accessibilityHint', $L('press ok button to decrease the value'));\r\n\t\t\t\tthis.$.buttonRight.set('accessibilityHint', $L('press ok button to increase the value'));\r\n\t\t\t}\r\n\t\t}},\r\n\t\t{path: 'selected', method: function () {\r\n\t\t\tif (this.selected) {\r\n\t\t\t\t// avoid using readAlert api, temporary set accessibilityRole to alert\r\n\t\t\t\t// this will be reset on resetAccessibilityProperties\r\n\t\t\t\tvar hint = (this.get('orientation') == 'horizontal') ?\r\n\t\t\t\t\t\t\t\t$L('change a value with left right button') : $L('change a value with up down button');\r\n\t\t\t\tthis.set('accessibilityRole', 'alert');\r\n\t\t\t\tthis.set('accessibilityLive', 'off');\r\n\t\t\t\tthis.set('accessibilityHint', hint);\r\n\t\t\t} else {\r\n\t\t\t\tthis.resetAccessibilityProperties();\r\n\t\t\t}\r\n\t\t}},\r\n\t\t// moonstone/ProgressBar observes accessibilityValueText and the popup label so this kind\r\n\t\t// need only observe its unique properties for updating aria-valuetext\r\n\t\t{path: ['value', 'dragging'], method: 'ariaValue'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tresetAccessibilityProperties: function () {\r\n\t\tthis.set('accessibilityRole', !this.enableJumpIncrement ? 'spinbutton' : null);\r\n\t\tthis.set('accessibilityLive', null);\r\n\t\tthis.set('accessibilityHint', null);\r\n\t},\r\n\r\n\t/**\r\n\t* Overriding {@link module:moonstone/ProgressBar~ProgressBar#ariaValue} to guard updating value\r\n\t* when dragging.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tariaValue: function () {\r\n\t\tvar value = this.$.animator.isAnimating() ? this.$.animator.endValue : this.value,\r\n\t\t\tusePercent = this.popup && this.showPercentage && !this.popupContent,\r\n\t\t\ttext = this.accessibilityValueText ||\r\n\t\t\t\t\tthis.popup && this.popupContent ||\r\n\t\t\t\t\tusePercent && this.calcPopupLabel(this.calcPercent(value)) ||\r\n\t\t\t\t\tvalue;\r\n\r\n\t\tif (!this.dragging) {\r\n\t\t\tthis.resetAccessibilityProperties();\r\n\t\t\tthis.setAriaAttribute('aria-valuetext', text);\r\n\t\t\tif (this.enableJumpIncrement) {\r\n\t\t\t\tthis.$.slider.setAriaAttribute('aria-valuetext', text);\r\n\t\t\t\tthis.$.buttonLeft.set('accessibilityLabel', String(text));\r\n\t\t\t\tthis.$.buttonRight.set('accessibilityLabel', String(text));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/SimplePicker~SimplePicker} kind.\r\n* @module moonstone/SimplePicker\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom'),\r\n\tControl = require('enyo/Control');\r\n\r\nvar\r\n\t$L = require('../i18n'),\r\n\tIconButton = require('../IconButton'),\r\n\tMarquee = require('../Marquee'),\r\n\tMarqueeSupport = Marquee.Support,\r\n\tMarqueeText\t= Marquee.Text;\r\n\r\n/**\r\n* Fires when the currently selected item changes.\r\n*\r\n* @event module:moonstone/SimplePicker~SimplePicker#onChange\r\n* @type {Object}\r\n* @property {module:enyo/Control~Control} selected - A reference to the currently selected item.\r\n* @property {String} content - The content of the currently selected item.\r\n* @property {Number} index - The index of the currently selected item.\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/SimplePicker~SimplePicker} is a [control]{@link module:enyo/Control~Control} that solicits a\r\n* choice from the user by cycling through a list of options. The picker's child\r\n* [components]{@link module:enyo/Component~Component}, {@link module:moonstone/Marquee~MarqueeText}\r\n* [objects]{@glossary Object} by default, become the options for the picker.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tSimplePicker = require('moonstone/SimplePicker');\r\n*\r\n* \t{kind: SimplePicker, onChange: 'changed', selectedIndex: 1, components: [\r\n* \t\t{content: 'San Francisco'},\r\n* \t\t{content: 'Boston'},\r\n* \t\t{content: 'Tokyo'}\r\n* \t]}\r\n* ```\r\n*\r\n* The picker may be changed programmatically by calling\r\n* [previous()]{@link module:moonstone/SimplePicker~SimplePicker#previous} or\r\n* [next()]{@link module:moonstone/SimplePicker~SimplePicker#next}, or by\r\n* modifying the [selectedIndex]{@link module:moonstone/SimplePicker~SimplePicker#selectedIndex}\r\n* property by calling `set('selectedIndex', <value>)`.\r\n*\r\n* The picker options may be modified programmatically in the standard manner, by calling\r\n* `createComponent().render()` or `destroy()`.\r\n*\r\n* ```javascript\r\n* \t// Add new items to picker\r\n* \tthis.$.simplePicker.createComponent({'New York'}).render();\r\n* \tthis.$.simplePicker.createComponent({'London'}).render();\r\n*\r\n* \t// Remove currently selected item from picker\r\n* \tthis.$.simplePicker.getSelected().destroy();\r\n* ```\r\n*\r\n* @class SimplePicker\r\n* @extends module:enyo/Control~Control\r\n* @mixes module:moonstone/Marquee~MarqueeSupport\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/SimplePicker~SimplePicker.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.SimplePicker',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-simple-picker',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [MarqueeSupport],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonChange: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/SimplePicker~SimplePicker.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Reference to currently selected item, if any.\r\n\t\t*\r\n\t\t* @type {module:enyo/Control~Control}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tselected: '',\r\n\r\n\t\t/**\r\n\t\t* Index of currently selected item, if any.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tselectedIndex: 0,\r\n\r\n\t\t/**\r\n\t\t* When `true`, picker transitions animate left/right.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tanimate: true,\r\n\r\n\t\t/**\r\n\t\t* When `true`, buttons are shown as disabled and do not generate tap events.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdisabled: false,\r\n\r\n\t\t/**\r\n\t\t* When `true`, picker will wrap around from last item to first.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\twrap: false,\r\n\r\n\t\t/**\r\n\t\t* By default, {@link module:moonstone/SimplePicker~SimplePicker} is an inline-block element;\r\n\t\t* setting `block: true` makes it a block element.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tblock: false\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdefaultKind: MarqueeText,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonSpotlightFocused: 'scrollIntoView'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'buttonLeft',  kind: IconButton, backgroundOpacity: 'transparent', classes: 'moon-simple-picker-button left', icon:'arrowlargeleft', onSpotlightSelect: 'left', ondown: 'downLeft', onholdpulse:'left', defaultSpotlightDisappear: 'buttonRight', accessibilityHint: $L('press ok button to change the value'), accessibilityLabel: ' '}, // note: single space accessibilityLabel used to suppress icon in aria-label\r\n\t\t{name: 'clientWrapper', kind: Control, classes:'moon-simple-picker-client-wrapper', components: [\r\n\t\t\t{name: 'client', kind: Control, classes: 'moon-simple-picker-client', accessibilityRole: 'spinbutton'}\r\n\t\t]},\r\n\t\t{name: 'buttonRight', kind: IconButton, backgroundOpacity: 'transparent', classes: 'moon-simple-picker-button right', icon:'arrowlargeright', onSpotlightSelect: 'right', ondown: 'downRight', onholdpulse:'right', defaultSpotlightDisappear: 'buttonLeft', accessibilityHint: $L('press ok button to change the value'), accessibilityLabel: ' '}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tthis._created = true;\r\n\t\tthis.animateChanged();\r\n\t\tthis.initializeActiveItem();\r\n\t\tthis.disabledChanged();\r\n\t\tthis.selectedIndexChanged();\r\n\t\tthis.updateMarqueeDisable();\r\n\t\tthis.blockChanged();\r\n\t\tthis.showHideNavButtons();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tscrollIntoView: function() {\r\n\t\tthis.bubble('onRequestScrollIntoView');\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:moonstone/SimplePicker~SimplePicker#onChange\r\n\t* @private\r\n\t*/\r\n\tfireChangedEvent: function() {\r\n\t\tif (!this.generated) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.doChange({\r\n\t\t\tselected:   this.selected,\r\n\t\t\tcontent:    this.selected && this.selected.content,\r\n\t\t\tindex:      this.selected && this.selectedIndex\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tblockChanged: function() {\r\n\t\tthis.addRemoveClass('block', this.block);\r\n\t},\r\n\r\n\t/**\r\n\t* Shows/hides previous/next buttons based on current index.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshowHideNavButtons: function() {\r\n\t\tvar index = this.getSelectedIndex(),\r\n\t\t\tmaxIndex = this.getClientControls().length - 1;\r\n\t\tvar prevButton = this.$.buttonLeft;\r\n\t\tvar nextButton = this.$.buttonRight;\r\n\r\n\t\tif (this.disabled) {\r\n\t\t\tthis.hideNavButton(prevButton);\r\n\t\t\tthis.hideNavButton(nextButton);\r\n\t\t// Always show buttons if _this.wrap_ is _true_\r\n\t\t} else if (this.wrap) {\r\n\t\t\tthis.showNavButton(prevButton);\r\n\t\t\tthis.showNavButton(nextButton);\r\n\t\t// If we have one or less options, always show no buttons\r\n\t\t} else if (maxIndex <= 0) {\r\n\t\t\tthis.hideNavButton(prevButton);\r\n\t\t\tthis.hideNavButton(nextButton);\r\n\t\t// If we are on the first option, hide the left button\r\n\t\t} else if (index <= 0) {\r\n\t\t\tthis.showNavButton(nextButton);\r\n\t\t\tthis.hideNavButton(prevButton);\r\n\t\t// If we are on the last item, hide the right button\r\n\t\t} else if (index >= maxIndex) {\r\n\t\t\tthis.showNavButton(prevButton);\r\n\t\t\tthis.hideNavButton(nextButton);\r\n\t\t// Otherwise show both buttons\r\n\t\t} else {\r\n\t\t\tthis.showNavButton(prevButton);\r\n\t\t\tthis.showNavButton(nextButton);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdestroy: function() {\r\n\t\tthis.destroying = true;\r\n\t\tControl.prototype.destroy.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taddControl: function(ctl) {\r\n\t\tControl.prototype.addControl.apply(this, arguments);\r\n\t\tvar addedIdx = this.getClientControls().indexOf(ctl),\r\n\t\t\tselectedIdx = this.selectedIndex;\r\n\t\tif (this._created) {\r\n\t\t\tif ((selectedIdx < 0) || (addedIdx < selectedIdx)) {\r\n\t\t\t\tthis.setSelectedIndex(selectedIdx + 1);\r\n\t\t\t} else if (selectedIdx == addedIdx) {\r\n\t\t\t\t// Force change handler, since the currently selected item actually changed\r\n\t\t\t\tthis.selectedIndexChanged();\r\n\t\t\t}\r\n\t\t\tthis.showHideNavButtons();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tremoveControl: function(ctl) {\r\n\t\tif (!this.destroying) {\r\n\t\t\tvar removedIdx = this.getClientControls().indexOf(ctl),\r\n\t\t\t\tselectedIdx = this.selectedIndex,\r\n\t\t\t\twasLast = (removedIdx == this.getClientControls().length-1);\r\n\r\n\t\t\tControl.prototype.removeControl.apply(this, arguments);\r\n\r\n\t\t\t// If removedIdx is -1, that means that the Control being removed is\r\n\t\t\t// not one of our picker items, so we don't need to update our state.\r\n\t\t\t// Probably, we're being torn down.\r\n\t\t\tif (removedIdx !== -1) {\r\n\t\t\t\tif ((removedIdx < selectedIdx) || ((selectedIdx == removedIdx) && wasLast)) {\r\n\t\t\t\t\tthis.setSelectedIndex(selectedIdx - 1);\r\n\t\t\t\t} else if (selectedIdx == removedIdx) {\r\n\t\t\t\t\t// Force change handler, since the currently selected item actually changed\r\n\t\t\t\t\tthis.selectedIndexChanged();\r\n\t\t\t\t}\r\n\t\t\t\tthis.showHideNavButtons();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.inherited(arguments);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Hides passed-in [control]{@link module:enyo/Control~Control} and disables {@glossary Spotlight}\r\n\t* functionality.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\thideNavButton: function(ctl) {\r\n\t\tctl.setDisabled(true);\r\n\t},\r\n\r\n\t/**\r\n\t* Shows passed-in [control]{@link module:enyo/Control~Control} and enables {@glossary Spotlight}\r\n\t* functionality.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshowNavButton: function(ctl) {\r\n\t\tctl.setDisabled(false);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdisabledChanged: function() {\r\n\t\tthis.$.client.addRemoveClass('disabled', this.disabled);\r\n\t\tif (this.generated) {\r\n\t\t\tthis.showHideNavButtons();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tanimateChanged: function() {\r\n\t\tthis.$.client.addRemoveClass('animated', this.animate);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tselectedChanged: function (was, is) {\r\n\t\tvar idx = this.getClientControls().indexOf(this.selected);\r\n\t\tif (idx >= 0) {\r\n\t\t\tthis.setSelectedIndex(idx);\r\n\t\t}\r\n\t},\r\n\r\n\t/*\r\n\t* When the picker is initialized, looks for any items with the `active` flag set to\r\n\t* `true`; if one is found, it is set as the currently selected item. This is done\r\n\t* without triggering an [onChange]{@link module:moonstone/SimplePicker~SimplePicker#onChange} event, as\r\n\t* it happens during initialization.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tinitializeActiveItem: function() {\r\n\t\tvar i,\r\n\t\t\tcontrols = this.getClientControls();\r\n\t\tfor (i = 0; i < controls.length; i++) {\r\n\t\t\tif (controls[i].active) {\r\n\t\t\t\tthis.set('selectedIndex', i);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tselectedIndexChanged: function() {\r\n\t\tdom.transform(this.$.client, {translateX: (this.selectedIndex * -100) + '%'});\r\n\t\tthis.updateMarqueeDisable();\r\n\t\tthis.setSelected(this.getClientControls()[this.selectedIndex]);\r\n\t\tthis.fireChangedEvent();\r\n\t\tthis.showHideNavButtons();\r\n\t\tthis.startMarquee();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateMarqueeDisable: function() {\r\n\t\tthis.stopMarquee();\r\n\t\tvar i,\r\n\t\t\tc = this.getClientControls();\r\n\t\tfor (i = 0; i < c.length; i++) {\r\n\t\t\tif (i == this.selectedIndex) {\r\n\t\t\t\tc[i].disabled = false;\r\n\t\t\t} else {\r\n\t\t\t\tc[i].disabled = true;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tleft: function(sender, e) {\r\n\t\tif (e && e.sentHold) { return; }\r\n\t\tthis.previous(sender, e);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tright: function(sender, e) {\r\n\t\tif (e && e.sentHold) { return; }\r\n\t\tthis.next(sender, e);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdownLeft: function(sender, e) {\r\n\t\tthis.left(sender, e);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdownRight: function(sender, e) {\r\n\t\tthis.right(sender, e);\r\n\t},\r\n\r\n\t/**\r\n\t* Cycles the selected item to the one before the currently selected item. If chained from\r\n\t* an event, {@link Spotlight} hold pulse events will be canceled once the first item is\r\n\t* reached, unless [wrap]{@link module:moonstone/SimplePicker~SimplePicker#wrap} is `true`. When calling this method\r\n\t* directly, no arguments are required.\r\n\t*\r\n\t* @param {Object} sender - (unused) Sender, if chained from event.\r\n\t* @param {Object} e - Event object, if chained from event.\r\n\t* @public\r\n\t*/\r\n\tprevious: function(sender, e) {\r\n\t\tif (!this.disabled) {\r\n\t\t\tvar idx = this.selectedIndex - 1;\r\n\t\t\tif (idx < 0) {\r\n\t\t\t\tidx = this.wrap ? this.getClientControls().length - 1 : 0;\r\n\t\t\t}\r\n\t\t\tif (!this.wrap && idx === 0 && e && e.cancelHoldPulse) {\r\n\t\t\t\te.cancelHoldPulse();\r\n\t\t\t}\r\n\t\t\tthis.setSelectedIndex(idx);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Cycles the selected item to the one after the currently selected item. If chained from\r\n\t* an event, {@link Spotlight} hold pulse events will be canceled once the last item is\r\n\t* reached, unless [wrap]{@link module:moonstone/SimplePicker~SimplePicker#wrap} is `true`. When\r\n\t* calling this method directly, no arguments are required.\r\n\t*\r\n\t* @param {Object} sender - (unused) Sender, if chained from event.\r\n\t* @param {Object} e - Event object, if chained from event.\r\n\t* @public\r\n\t*/\r\n\tnext: function(sender, e) {\r\n\t\tif (!this.disabled) {\r\n\t\t\tvar idx = this.selectedIndex + 1;\r\n\t\t\tif (idx > this.getClientControls().length - 1) {\r\n\t\t\t\tidx = this.wrap ? 0 : this.getClientControls().length - 1;\r\n\t\t\t}\r\n\t\t\tif (!this.wrap && idx === this.getClientControls().length - 1\r\n\t\t\t\t&& e && e.cancelHoldPulse) {\r\n\t\t\t\te.cancelHoldPulse();\r\n\t\t\t}\r\n\t\t\tthis.setSelectedIndex(idx);\r\n\t\t}\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t// update slected content on button left/right and client\r\n\t\t{path: 'selected', method: function () {\r\n\t\t\tif (this.selected) {\r\n\t\t\t\tthis.$.buttonLeft.set('accessibilityLabel', this.selected.content);\r\n\t\t\t\tthis.$.buttonRight.set('accessibilityLabel', this.selected.content);\r\n\t\t\t\tthis.$.client.setAttribute('aria-valuetext', this.selected.content);\r\n\t\t\t}\r\n\t\t}}\r\n\t]\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:moonstone/NewPagingControl~PagingControl} kind.\r\n* @wip\r\n* @module moonstone/NewPagingControl\r\n*/\r\n\r\nvar\r\n\tanimation = require('enyo/animation'),\r\n\tkind = require('enyo/kind'),\r\n\tutils = require('enyo/utils');\r\n\r\nvar\r\n\tSpotlight = require('spotlight'),\r\n\t$L = require('../i18n');\r\n\r\nvar\r\n\tIconButton = require('../IconButton');\r\n\r\n// TODO: Document the fact that this sends simulated mousewheel events\r\n\r\n/**\r\n* {@link module:moonstone/NewPagingControl~PagingControl} is a paging control button derived from\r\n* {@link module:moonstone/IconButton~IconButton}. This control is not intended for use outside of\r\n* {@link module:moonstone/Scroller~Scroller}.\r\n*\r\n* @class PagingControl\r\n* @extends module:moonstone/IconButton~IconButton\r\n* @wip\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/NewPagingControl~PagingControl.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.NewPagingControl',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: IconButton,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-paging-button no-background',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/NewPagingControl~PagingControl.prototype\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* The side of the control where the button will be.\r\n\t\t*\r\n\t\t* Supported values are `'top'`, `'right'`, `'bottom'`, and `'left'`.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tside: null\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbackgroundOpacity: 'transparent',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonSpotlightKeyDown: 'down',\r\n\t\tonSpotlightKeyUp: 'release',\r\n\t\tondown: 'down',\r\n\t\tonhold: 'hold',\r\n\t\tonrelease: 'release',\r\n\t\tonActivate: 'noop'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitialDelta: 2.5,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdelta: 0,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmaxDelta: 45,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function() {\r\n\t\tIconButton.prototype.create.apply(this, arguments);\r\n\t\tthis.sideChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdisabledChanged: function () {\r\n\t\tif (this.disabled && Spotlight.Accelerator.isAccelerating()) {\r\n\t\t\tthis.stopHoldJob();\r\n\t\t\tSpotlight.Accelerator.cancel();\r\n\t\t}\r\n\t\tIconButton.prototype.disabledChanged.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_iconMappings: {\r\n\t\t'top': 'arrowlargeup',\r\n\t\t'bottom': 'arrowlargedown',\r\n\t\t'left': 'arrowlargeleft',\r\n\t\t'right': 'arrowlargeright'\r\n\t},\r\n\r\n\t/**\r\n\t* Set this control's CSS class based on its [side]{@link module:moonstone/NewPagingControl~PagingControl#side}\r\n\t* value.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsideChanged: function (old) {\r\n\t\tvar s = this.side;\r\n\t\tif(old) {\r\n\t\t\tthis.removeClass(old);\r\n\t\t}\r\n\t\tthis.addClass(s);\r\n\t\tthis.setIcon(this._iconMappings[s]);\r\n\t\tthis.deltaProp = (s === 'top' || s === 'bottom') ? 'wheelDeltaY' : 'wheelDeltaX';\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdown: function (sender, event) {\r\n\t\tif (this.disabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (event.keyCode === undefined || event.keyCode === 13) {\r\n\t\t\tthis.set('pressed', true);\r\n\t\t\tevent.configureHoldPulse({\r\n\t\t\t\tendHold: 'onLeave',\r\n\t\t\t\tpreventTap: true\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thold: function (sender, event) {\r\n\t\tif (this.disabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.delta = this.initialDelta;\r\n\t\tthis.startHoldJob();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trelease: function (sender, event) {\r\n\t\tthis.set('pressed', false);\r\n\t\tthis.endHold(sender, event);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tendHold: function (sender, event) {\r\n\t\tthis.stopHoldJob();\r\n\t\t// Restore the scroller's previous setting `suppressMouseEvents`\r\n\t\t// setting -- see startHoldJob() for an explanation.\r\n\t\tthis.scroller.suppressMouseEvents = this._suppressMouseEvents;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstartHoldJob: function () {\r\n\t\t// Scroller may be set up to suppress mouse events during\r\n\t\t// scrolling, but we don't want that when scrolling is driven\r\n\t\t// by holding a paging control, since we rely on mouse\r\n\t\t// movements to detect whether the hold is still in progress.\r\n\t\t//\r\n\t\t// We therefore use the scroller's `suppressMouseEvents` API\r\n\t\t// to disable event suppression for the duration of the hold.\r\n\t\t// We store the previous value of `suppressMouseEvents` so that\r\n\t\t// we can restore it when the hold is done.\r\n\t\tthis._suppressMouseEvents = this.scroller.suppressMouseEvents;\r\n\t\tthis.scroller.suppressMouseEvents = false;\r\n\r\n\t\tthis.stopHoldJob();\r\n\r\n\t\tvar t0 = utils.perfNow(),\r\n\t\t\tt = 0\r\n\t\t;\r\n\r\n\t\tvar fn = this.bindSafely(function () {\r\n\t\t\tvar evt = {\r\n\t\t\t\t\tsimulated: true,\r\n\t\t\t\t\tpreventDefault: this.noop\r\n\t\t\t\t},\r\n\t\t\t\tside = this.side,\r\n\t\t\t\tdir = (side === 'top' || side === 'left') ? 1 : -1;\r\n\r\n\t\t\tif (this.rtl && (side === 'left' || side === 'right')) {\r\n\t\t\t\tdir = -dir;\r\n\t\t\t}\r\n\r\n\t\t\tthis.job = animation.requestAnimationFrame(fn);\r\n\r\n\t\t\tt = (utils.perfNow() - t0)/1000;\r\n\t\t\tthis.delta = Math.min(this.maxDelta, this.delta + (0.1 * Math.pow(t, 1.1)));\r\n\r\n\t\t\tevt[this.deltaProp] = dir * this.delta;\r\n\r\n\t\t\tthis.bubble('onmousewheel', evt);\r\n\r\n\t\t});\r\n\r\n\t\tthis.job = animation.requestAnimationFrame(fn);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstopHoldJob: function () {\r\n\t\tthis.job = animation.cancelAnimationFrame(this.job);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightFocused: function () {\r\n\t\tthis.set('spotted', true);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightBlurred: function () {\r\n\t\tIconButton.prototype.spotlightBlurred.apply(this, arguments);\r\n\t\tthis.set('spotted', false);\r\n\t},\r\n\r\n\t/**\r\n\t* Overrides default focused handling to make sure scroller doesn't scroll to\r\n\t* this button.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tnoop: function () { return true; },\r\n\r\n\t// Accessibility\r\n\r\n\t/*\r\n\t* @private\r\n\t*/\r\n\tspotted: false,\r\n\r\n\t/*\r\n\t* @private\r\n\t*/\r\n\tpressed: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taccessibilityLive: 'off',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: ['side', 'spotted'], method: function () {\r\n\t\t\tvar side = this.get('side');\r\n\t\t\tif (this.spotted) {\r\n\t\t\t\tswitch(side) {\r\n\t\t\t\t\tcase 'top':\r\n\t\t\t\t\t\tthis.set('accessibilityLabel', $L('scroll up'));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'bottom':\r\n\t\t\t\t\t\tthis.set('accessibilityLabel', $L('scroll down'));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'left':\r\n\t\t\t\t\t\tthis.set('accessibilityLabel', $L('scroll left'));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'right':\r\n\t\t\t\t\t\tthis.set('accessibilityLabel', $L('scroll right'));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}},\r\n\t\t{path: 'pressed', method: function () {\r\n\t\t\tvar side = this.get('side');\r\n\t\t\tif (this.pressed) {\r\n\t\t\t\tthis.set('accessibilityAlert', true);\r\n\t\t\t\tswitch(side) {\r\n\t\t\t\t\tcase 'top':\r\n\t\t\t\t\t\tthis.set('accessibilityLabel', $L('UP'));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'bottom':\r\n\t\t\t\t\t\tthis.set('accessibilityLabel', $L('DOWN'));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'left':\r\n\t\t\t\t\t\tthis.set('accessibilityLabel', $L('LEFT'));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'right':\r\n\t\t\t\t\t\tthis.set('accessibilityLabel', $L('RIGHT'));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.set('accessibilityAlert', null);\r\n\t\t\t\tthis.set('accessibilityLabel', null);\r\n\t\t\t}\r\n\t\t}}\r\n\t]\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/ToggleSwitch~ToggleSwitch} kind.\r\n* @module moonstone/ToggleSwitch\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutil = require('enyo/utils');\r\n\r\nvar\r\n\tCheckbox = require('../Checkbox');\r\n\r\n/**\r\n* {@link module:moonstone/ToggleSwitch~ToggleSwitch}, which extends {@link module:moonstone/Checkbox~Checkbox}, is a control\r\n* that looks like a switch with 'on' and 'off' states. When the toggle switch is\r\n* tapped, it switches its state and fires an\r\n* [onChange]{@link module:enyo/Checkbox~Checkbox#onChange} event.\r\n*\r\n* @class ToggleSwitch\r\n* @extends module:moonstone/Checkbox~Checkbox\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/ToggleSwitch~ToggleSwitch.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ToggleSwitch',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Checkbox,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ticon: 'circle',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-toggle-switch',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trendered: function () {\r\n\t\tCheckbox.prototype.rendered.apply(this, arguments);\r\n\t\t// wait until after we're rendered to allow animation.\r\n\t\tutil.asyncMethod(this, function () {\r\n\t\t\tthis.addClass('animated');\r\n\t\t});\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Header~Header} kind.\r\n* @module moonstone/Header\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom'),\r\n\tri = require('enyo/resolution'),\r\n\tutil = require('enyo/utils'),\r\n\tControl = require('enyo/Control');\r\n\r\nvar\r\n\tInput = require('../Input'),\r\n\tInputDecorator = require('../InputDecorator'),\r\n\tStyleAnimator = require('../StyleAnimator'),\r\n\tMarquee = require('../Marquee'),\r\n\tMarqueeSupport = Marquee.Support,\r\n\tMarqueeText = Marquee.Text;\r\n\r\nvar _delayedMeasurementFinished;\r\n\r\n/**\r\n* Custom input event to allow apps to distinguish header inputs from regular inputs.\r\n*\r\n* @event module:moonstone/Header~Header#onInputHeaderInput\r\n* @type {Object}\r\n* @property {Object} originalEvent - The original event fired from the input. See\r\n*\t{@link module:enyo/Input~Input#oninput} for more event information.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Custom input change event to allow apps to distinguish header input changes from\r\n* regular input changes.\r\n*\r\n* @event module:moonstone/Header~Header#onInputHeaderChange\r\n* @type {Object}\r\n* @property {Object} originalEvent - The original event fired from the input. See\r\n*\t{@link module:enyo/Input~Input#onchange} for more event information.\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/Header~Header} is a Moonstone-styled control with a large title and an area for\r\n* additional controls.\r\n*\r\n* @class Header\r\n* @extends module:enyo/Control~Control\r\n* @mixes module:moonstone/MarqueeSupport~MarqueeSupport\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/Header~Header.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Header',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-header',\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/Header~Header.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Title of the header.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttitle: '',\r\n\r\n\t\t/**\r\n\t\t* Text above the header.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttitleAbove: '',\r\n\r\n\t\t/**\r\n\t\t* Text below the header.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttitleBelow: '',\r\n\r\n\t\t/**\r\n\t\t* Sub-text below the header.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsubTitleBelow: '',\r\n\r\n\t\t/**\r\n\t\t* Size of the header, for styling purposes. Will be one of `'large'` (the default),\r\n\t\t* `'medium'`, or `'small'`. If `'large'`, the `moon-header` CSS class will be applied\r\n\t\t* to this header; if `'medium'`, the `moon-medium-header` class will be applied; if\r\n\t\t* `'small'`, the `moon-small-header` class will be applied.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'large'\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttype: 'large',\r\n\r\n\t\t/**\r\n\t\t* If `true`, the `moon-medium-header` CSS class will be applied to this header.\r\n\t\t*\r\n\t\t* Note that this property will be deprecated soon. For now, it is being left in\r\n\t\t* for backward compatibility. Until it is removed, `small: true` refers to the\r\n\t\t* historical header size, which is now equivalent to `type: 'medium'`.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsmall: false,\r\n\r\n\t\t/**\r\n\t\t* URL(s) of background image(s).\r\n\t\t* This may be a string referring a single background image, or an array of strings\r\n\t\t* referring to multiple background images. To support multiple background images at\r\n\t\t* multiple resolutions, this property accepts data in several formats:\r\n\t\t*\r\n\t\t* 1. A string `src` value\r\n\t\t* 2. An array of string `src` values\r\n\t\t* 3. A [multi-resolution hash]{@link module:enyo/resolution#selectSrc~src}\r\n\t\t* 4. An array of [multi-resolution hashes]{@link module:enyo/resolution#selectSrc~src}\r\n\t\t*\r\n\t\t* @type {(String|String[]|module:enyo/resolution#selectSrc~src|module:enyo/resolution#selectSrc~src[])}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tbackgroundSrc: null,\r\n\r\n\t\t/**\r\n\t\t* Position of background image, defined as a string of the form\r\n\t\t* `'<vertical> <horizontal>'`, with a space separating the `<vertical>`\r\n\t\t* and `<horizontal>` values (e.g., `'top right'`). If no second property\r\n\t\t* is specified, the `<horizontal>` value will default to `'right'`. As\r\n\t\t* with [backgroundSrc]{@link module:moonstone/Header~Header#backgroundSrc}, an array of strings\r\n\t\t* may be supplied to position multiple background images. The order of items\r\n\t\t* should be the same as in `backgroundSrc`.\r\n\t\t*\r\n\t\t* @type {(String|String[])}\r\n\t\t* @default 'top right'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tbackgroundPosition: 'top right',\r\n\r\n\t\t/**\r\n\t\t* When using a full-bleed background image, set this property to `true` to indent\r\n\t\t* the header text/controls and remove the header lines.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tfullBleedBackground: false,\r\n\r\n\t\t/**\r\n\t\t* If `true`, title will be an input.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tinputMode: false,\r\n\r\n\t\t/**\r\n\t\t* When `true`, input will be blurred on Enter keypress, if it was previously\r\n\t\t* focused.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdismissOnEnter: false,\r\n\r\n\t\t/**\r\n\t\t* Text to display when the input is empty.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tplaceholder: '',\r\n\r\n\t\t/**\r\n\t\t* The value of the input.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tvalue: '',\r\n\r\n\t\t/**\r\n\t\t* When `true`, the title text will have locale-safe uppercasing applied.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tuppercase: true,\r\n\r\n\t\t/**\r\n\t\t* @deprecated Replaced by [uppercase]{@link module:moonstone/Header~Header#uppercase}.\r\n\t\t*\r\n\t\t* Formerly defaulted to `true`, now defaults to `null` and will only have\r\n\t\t* an effect when explicitly set (for complete backward compatibility).\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttitleUpperCase: null\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [MarqueeSupport],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmarqueeOnSpotlight: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmarqueeOnHover: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmarqueeOnRender: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmarqueeOnRenderDelay: 10000,\r\n\r\n\t/**\r\n\t* Described in .moon-header class\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tstandardHeight: 360,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\toninput: 'handleInput',\r\n\t\tonchange: 'handleChange'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\r\n\t\t/**\r\n\t\t* Custom input event to allow apps to distinguish header inputs from regular inputs.\r\n\t\t*/\r\n\t\tonInputHeaderInput: '',\r\n\r\n\t\t/**\r\n\t\t* Custom input change event to allow apps to distinguish header input changes from\r\n\t\t* regular input changes.\r\n\t\t*/\r\n\t\tonInputHeaderChange: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'titleAbove', kind: Control, classes: 'moon-super-header-text moon-header-title-above'},\r\n\t\t{name: 'titleWrapper', kind: Control, classes: 'moon-header-title-wrapper', components: [\r\n\t\t\t{name: 'title', kind: MarqueeText, classes: 'moon-header-text moon-header-title', canGenerate: false},\r\n\t\t\t{name: 'inputDecorator', kind: InputDecorator, classes: 'moon-input-header-input-decorator',canGenerate: false, components: [\r\n\t\t\t\t{name: 'titleInput', kind: Input, classes: 'moon-header-text moon-header-title'}\r\n\t\t\t]}\r\n\t\t]},\r\n\t\t{name: 'titleBelow', kind: MarqueeText, classes: 'moon-sub-header-text moon-header-title-below'},\r\n\t\t{name: 'subTitleBelow', kind: MarqueeText, classes: 'moon-sub-header-text moon-header-sub-title-below'},\r\n\t\t{name: 'client', kind: Control, classes: 'moon-hspacing moon-header-client'},\r\n\t\t{name: 'animator', kind: StyleAnimator, onComplete: 'animationComplete'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: '.value', to: '.$.titleInput.value', oneWay: false},\r\n\t\t{from: '.dismissOnEnter', to: '.$.titleInput.dismissOnEnter'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tthis.inherited(arguments);\r\n\r\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\r\n\t\t// the titleUpperCase property is fully deprecated and removed. The legacy\r\n\t\t// property takes precedence if it exists.\r\n\t\tif (this.titleUpperCase !== null) this.uppercase = this.titleUpperCase;\r\n\r\n\t\t// Note: This smallchanged() line will be deprecated soon. For backward compatiblity, I leave it for a\r\n\t\t// while.\r\n\t\tthis.smallChanged();\r\n\t\tthis.typeChanged();\r\n\t\tthis.titleChanged();\r\n\t\tthis.titleAboveChanged();\r\n\t\tthis.titleBelowChanged();\r\n\t\tthis.subTitleBelowChanged();\r\n\t\tthis.allowHtmlChanged();\r\n\t\tthis.backgroundSrcChanged();\r\n\t\tthis.backgroundPositionChanged();\r\n\t\tthis.inputModeChanged();\r\n\t\tthis.placeholderChanged();\r\n\t\tthis.fullBleedBackgroundChanged();\r\n\t},\r\n\r\n\trendered: function() {\r\n\t\tthis.inherited(arguments);\r\n\t\t// At the first render, the fonts may not have finished loading yet. We delay the first\r\n\t\t// time using an async method, and set a flag so we know the deed is done at subsequent calls.\r\n\t\tif (_delayedMeasurementFinished) {\r\n\t\t\tthis.adjustTitleWidth();\r\n\t\t} else {\r\n\t\t\tutil.asyncMethod(this, function () {\r\n\t\t\t\tthis.adjustTitleWidth();\r\n\t\t\t\t_delayedMeasurementFinished = true;\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tallowHtmlChanged: function () {\r\n\t\tthis.$.title.setAllowHtml( this.get('type') == 'small' ? true : this.allowHtml );\r\n\t\tthis.$.titleBelow.setAllowHtml(this.allowHtml);\r\n\t\tthis.$.subTitleBelow.setAllowHtml(this.allowHtml);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbackgroundSrcChanged: function () {\r\n\t\tvar bgs = (util.isArray(this.backgroundSrc)) ? this.backgroundSrc : [this.backgroundSrc];\r\n\t\tbgs = util.map(bgs, this.bindSafely(function (inBackgroundSource) {\r\n\t\t\t\treturn inBackgroundSource ? 'url(' + ri.selectSrc(inBackgroundSource) + ')' : null;\r\n\t\t\t}));\r\n\t\tthis.applyStyle('background-image', (bgs.length) ? bgs.join(', ') : null);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbackgroundPositionChanged: function () {\r\n\t\tvar bgp = this.backgroundPosition;\r\n\t\tif (util.isArray(bgp)) {\r\n\t\t\tbgp = (bgp.length) ? bgp.join(', ') : null;\r\n\t\t}\r\n\t\t// If `this.backgroundPosition` is set explicitly to inherit or initial, apply that\r\n\t\t// instead of assuming a position.\r\n\t\tif (bgp == 'inherit' || bgp == 'initial') {\r\n\t\t\tthis.applyStyle('background-position', bgp);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar posArray = bgp && bgp.split(' ') || [],\r\n\t\t\tposStr = (posArray.length === 0) ? 'top right'\r\n\t\t\t\t\t: (posArray.length === 1) ? posArray[0] + ' right' : bgp;\r\n\t\tthis.applyStyle('background-position', posStr);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tfullBleedBackgroundChanged: function () {\r\n\t\tthis.addRemoveClass('full-bleed', this.fullBleedBackground);\r\n\t},\r\n\r\n\t/**\r\n\t* Collapses the drawer, hiding its contents.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tcollapseToSmall: function () {\r\n\t\tif (this.collapsed) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar myStyle = dom.getComputedStyle(this.hasNode());\r\n\t\tvar titleWrapperStyle = dom.getComputedStyle(this.$.titleWrapper.hasNode());\r\n\t\tvar titleBelowStyle = dom.getComputedStyle(this.$.titleBelow.hasNode());\r\n\t\tvar subTitleBelowStyle = dom.getComputedStyle(this.$.subTitleBelow.hasNode());\r\n\t\tvar titleAboveStyle = dom.getComputedStyle(this.$.titleAbove.hasNode());\r\n\r\n\t\t// TODO - animator should track initial positions so we don't have to store these if we\r\n\t\t// want to reverse the animation\r\n\t\tthis.smallAnimProps = {\r\n\t\t\t'height': myStyle['height']\r\n\t\t};\r\n\t\tthis.$.titleWrapper.smallAnimProps = {\r\n\t\t\t'padding-left': titleWrapperStyle['padding-left'],\r\n\t\t\t'top': titleWrapperStyle['top']\r\n\t\t};\r\n\t\tthis.$.title.smallAnimProps = {};\r\n\t\tthis.$.titleAbove.smallAnimProps = {\r\n\t\t\t'height': titleAboveStyle['height'],\r\n\t\t\t'opacity': titleAboveStyle['opacity']\r\n\t\t};\r\n\t\tthis.$.titleBelow.smallAnimProps = {\r\n\t\t\t'top': titleBelowStyle['top']\r\n\t\t};\r\n\t\tthis.$.subTitleBelow.smallAnimProps = {\r\n\t\t\t'top': subTitleBelowStyle['top']\r\n\t\t};\r\n\r\n\t\tthis.$.animator.newAnimation({\r\n\t\t\tname: 'collapseToSmall',\r\n\t\t\tduration: 200,\r\n\t\t\ttimingFunction: 'linear',\r\n\t\t\tkeyframes: {\r\n\t\t\t\t0: [{\r\n\t\t\t\t\tcontrol: this,\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t'height': 'current'\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tcontrol: this.$.titleWrapper,\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t'padding-left': 'current',\r\n\t\t\t\t\t\t'top': 'current'\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tcontrol: this.$.titleAbove,\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t'height': 'current',\r\n\t\t\t\t\t\t'opacity': 'current',\r\n\t\t\t\t\t\t'margin-top': 'current'\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tcontrol: this.$.title,\r\n\t\t\t\t\tproperties: {}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tcontrol: this.$.titleBelow,\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t'top': 'current'\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tcontrol: this.$.subTitleBelow,\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t'top': 'current'\r\n\t\t\t\t\t}\r\n\t\t\t\t}],\r\n\t\t\t\t70: [],\r\n\t\t\t\t100: [{\r\n\t\t\t\t\tcontrol: this,\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t'height': dom.unit(ri.scale(260), 'rem')\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tcontrol: this.$.titleWrapper,\r\n\t\t\t\t\tproperties: {}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tcontrol: this.$.titleAbove,\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t'height': 0,\r\n\t\t\t\t\t\t'opacity': 0,\r\n\t\t\t\t\t\t'margin-top': 0\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tcontrol: this.$.title,\r\n\t\t\t\t\tproperties: {}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tcontrol: this.$.titleBelow,\r\n\t\t\t\t\tproperties: {}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tcontrol: this.$.subTitleBelow,\r\n\t\t\t\t\tproperties: {}\r\n\t\t\t\t}]\r\n\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.$.animator.play('collapseToSmall');\r\n\t\tthis.collapsed = true;\r\n\t},\r\n\r\n\t/**\r\n\t* Expands the drawer, showing its contents.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\texpandToLarge: function () {\r\n\t\tif (!this.collapsed) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.$.animator.newAnimation({\r\n\t\t\tname: 'expandToLarge',\r\n\t\t\tduration: 200,\r\n\t\t\ttimingFunction: 'linear',\r\n\t\t\tkeyframes: {\r\n\t\t\t\t0: [{\r\n\t\t\t\t\tcontrol: this,\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t'height': 'current'\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tcontrol: this.$.titleWrapper,\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t'padding-left': 'current',\r\n\t\t\t\t\t\t'top': 'current'\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tcontrol: this.$.titleAbove,\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t'height': 'current',\r\n\t\t\t\t\t\t'opacity': 'current',\r\n\t\t\t\t\t\t'margin-top': 'current'\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tcontrol: this.$.title,\r\n\t\t\t\t\tproperties: {}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tcontrol: this.$.titleBelow,\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t'top': 'current'\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tcontrol: this.$.subTitleBelow,\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t'top': 'current'\r\n\t\t\t\t\t}\r\n\t\t\t\t}],\r\n\t\t\t\t30: [],\r\n\t\t\t\t100: [{\r\n\t\t\t\t\tcontrol: this,\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t'height': this.smallAnimProps.height\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tcontrol: this.$.titleWrapper,\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t'padding-left': this.$.titleWrapper.smallAnimProps['padding-left'],\r\n\t\t\t\t\t\t'top': this.$.titleWrapper.smallAnimProps['top']\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tcontrol: this.$.titleAbove,\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t'height': this.$.titleAbove.smallAnimProps['height'],\r\n\t\t\t\t\t\t'opacity': this.$.titleAbove.smallAnimProps['opacity'],\r\n\t\t\t\t\t\t'margin-top': this.$.titleAbove.smallAnimProps['margin-top']\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tcontrol: this.$.title,\r\n\t\t\t\t\tproperties: {}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tcontrol: this.$.titleBelow,\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t'top': this.$.titleBelow.smallAnimProps['top']\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\tcontrol: this.$.subTitleBelow,\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t'top': this.$.subTitleBelow.smallAnimProps['top']\r\n\t\t\t\t\t}\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.$.animator.play('expandToLarge');\r\n\t\tthis.collapsed = false;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttypeChanged: function () {\r\n\t\tthis.addRemoveClass('moon-large-header', this.get('type') == 'large');\r\n\t\tthis.addRemoveClass('moon-medium-header', this.get('type') == 'medium');\r\n\t\tthis.addRemoveClass('moon-small-header', this.get('type') == 'small');\r\n\t\tthis.contentChanged();\r\n\t\tif (this.generated) this.adjustTitleWidth();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tvalueChanged: function () {\r\n\t\tthis.$.titleInput.detectTextDirectionality((this.$.titleInput.value || this.$.titleInput.value === 0 || this.$.titleInput.value === '0') ? this.$.titleInput.value : this.$.titleInput.get('placeholder'));\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tadjustTitleWidth: function() {\r\n\t\tvar type = this.get('type'),\r\n\t\t\t// Measure client area's width + 40px of spacing\r\n\t\t\tclient = this.$.client ? this.$.client.hasNode() : null,\r\n\t\t\tclientWidth = client ? client.offsetWidth : null,\r\n\t\t\tclientStyle = client ? (client.currentStyle || dom.getComputedStyle(client)) : null,\t\t// Originally by YuC @ http://stackoverflow.com/questions/349257/detecting-true-border-padding-and-margin-from-javascript\r\n\t\t\tclientMargin = client ? (parseInt(clientStyle.marginLeft, 10) + parseInt(clientStyle.marginRight, 10)) : null,\r\n\t\t\tclientSpaceSmall = dom.unit(clientWidth + clientMargin + ri.scale(36), 'rem'),\r\n\t\t\tclientSpace = dom.unit(clientWidth + ri.scale(36), 'rem'),\r\n\t\t\trtl = this.rtl;\r\n\r\n\t\tif (client) {\r\n\t\t\t// Set the margin on the correct side for the correct control, otherwise set it to nothing\r\n\t\t\tthis.$.title.applyStyle('margin-right', (type == 'small' && !rtl && clientWidth) ? clientSpaceSmall : null);\r\n\t\t\tthis.$.title.applyStyle('margin-left', (type == 'small' && rtl && clientWidth) ? clientSpaceSmall : null);\r\n\r\n\t\t\tthis.$.titleBelow.applyStyle('margin-right', (type == 'medium' && !rtl && clientWidth) ? clientSpace : null);\r\n\t\t\tthis.$.titleBelow.applyStyle('margin-left', (type == 'medium' && rtl && clientWidth) ? clientSpace : null);\r\n\r\n\t\t\tthis.$.subTitleBelow.applyStyle('margin-right', (type == 'medium' && !rtl && clientWidth) ? clientSpace : null);\r\n\t\t\tthis.$.subTitleBelow.applyStyle('margin-left', (type == 'medium' && rtl && clientWidth) ? clientSpace : null);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Note that this method will be deprecated soon. For now, it is being left in for\r\n\t* backward compatibility.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsmallChanged: function () {\r\n\t\tthis.addRemoveClass('moon-medium-header', this.get('small'));\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontentChanged: function () {\r\n\t\tvar title = this.get('uppercase')\r\n\t\t\t\t\t? util.toUpperCase(this.get('title') || this.get('content'))\r\n\t\t\t\t\t: (this.get('title') || this.get('content')),\r\n\t\t\tsubtitle = this.get('titleBelow');\r\n\t\tif ((this.get('type') == 'small') && subtitle) {\r\n\t\t\tthis.$.title.set('allowHtml', true);\r\n\t\t\tif (!this.allowHtml) {\r\n\t\t\t\ttitle = dom.escape(title);\r\n\t\t\t\tsubtitle = dom.escape(subtitle);\r\n\t\t\t}\r\n\t\t\tthis.$.title.set('content', Control.prototype.rtl && !util.isRtl(subtitle + title) ?\r\n\t\t\t\t'<span class=\"moon-sub-header-text moon-header-sub-title\">' + subtitle + '</span>' + '   ' + title :\r\n\t\t\t\ttitle + '   ' + '<span class=\"moon-sub-header-text moon-header-sub-title\">' + subtitle + '</span>');\r\n\t\t} else {\r\n\t\t\tthis.$.title.set('allowHtml', this.get('allowHtml') );\r\n\t\t\tthis.$.title.set('content', title);\r\n\t\t}\r\n\t\tthis.placeholderChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* For backward-compatibility with original API.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\ttitleChanged: function () {\r\n\t\tthis.contentChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tplaceholderChanged: function () {\r\n\t\t// For backward-compatibility with original API\r\n\t\tthis.$.titleInput.set('placeholder', this.getTitleUpperCase()\r\n\t\t\t\t? util.toUpperCase(this.placeholder || this.title || this.content)\r\n\t\t\t\t: (this.placeholder || this.title || this.content) );\r\n\t\tthis.valueChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tuppercaseChanged: function () {\r\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\r\n\t\t// titleUpperCase is fully deprecated and removed.\r\n\t\tif (this.titleUpperCase != this.uppercase) this.titleUpperCase = this.uppercase;\r\n\t\tthis.titleChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttitleUpperCaseChanged: function () {\r\n\t\tif (this.uppercase != this.titleUpperCase) this.uppercase = this.titleUpperCase;\r\n\t\tthis.uppercaseChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttitleAboveChanged: function () {\r\n\t\tthis.$.titleAbove.addRemoveClass('no-border', this.titleAbove === '');\r\n\t\tthis.$.titleAbove.set('content', this.titleAbove);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttitleBelowChanged: function () {\r\n\t\tthis.$.titleBelow.set('content', this.titleBelow || '');\r\n\t\tthis.contentChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsubTitleBelowChanged: function () {\r\n\t\tthis.$.subTitleBelow.set('content', this.subTitleBelow || '');\r\n\t},\r\n\r\n\t/**\r\n\t* Placeholder\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t// animationComplete: function (inSender, inEvent) {\r\n\t\t// Do something?\r\n\t// },\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinputModeChanged: function () {\r\n\t\tthis.$.title.canGenerate = !this.inputMode;\r\n\t\tthis.$.title.setShowing(!this.inputMode);\r\n\t\tthis.$.inputDecorator.canGenerate = this.inputMode;\r\n\t\tthis.$.inputDecorator.setShowing(this.inputMode);\r\n\r\n\t\tif (!this.inputMode) {\r\n\t\t\tif (!this.$.title.hasNode()) {\r\n\t\t\t\tthis.$.title.render();\r\n\t\t\t}\r\n\t\t\t// Reset marquees when coming back to static text\r\n\t\t\tif (this.generated) {\r\n\t\t\t\tthis.stopMarquee();\r\n\t\t\t\tthis.startMarquee();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.inputMode && !this.$.inputDecorator.hasNode()) {\r\n\t\t\tthis.$.inputDecorator.render();\r\n\t\t}\r\n\t\tthis.addRemoveClass('moon-input-header', this.inputMode);\r\n\t},\r\n\r\n\t/**\r\n\t* Handles `input` event, firing custom\r\n\t* [onInputHeaderInput]{@link module:moonstone/Header~Header#onInputHeaderInput} event.\r\n\t*\r\n\t* @fires module:moonstone/Header~Header#onInputHeaderInput\r\n\t* @private\r\n\t*/\r\n\thandleInput: function (inSender, inEvent) {\r\n\t\tthis.doInputHeaderInput({originalEvent: util.clone(inEvent, true)});\r\n\t},\r\n\r\n\t/**\r\n\t* Handles `change` event, firing custom\r\n\t* [onInputHeaderChange]{@link module:moonstone/Header~Header#onInputHeaderChange} event.\r\n\t*\r\n\t* @fires module:moonstone/Header~Header#onInputHeaderChange\r\n\t* @private\r\n\t*/\r\n\thandleChange: function (inSender, inEvent) {\r\n\t\tthis.doInputHeaderChange({originalEvent: util.clone(inEvent, true)});\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/ContextualPopupDecorator~ContextualPopupDecorator} kind.\r\n* @module moonstone/ContextualPopupDecorator\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tControl = require('enyo/Control');\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\nvar\r\n\tButton = require('../Button');\r\n\r\n/**\r\n* {@link module:moonstone/ContextualPopupDecorator~ContextualPopupDecorator} is a control that loosely couples a\r\n* {@link module:moonstone/ContextualPopup~ContextualPopup} with an activating control, which may be a button\r\n* or any other control that fires an [onActivate]{@link module:enyo/Control~Control#onActivate}\r\n* event. The decorator surrounds both the activating control and the contextual popup.\r\n*\r\n* When the control is activated, the popup shows itself in the correct position\r\n* relative to the activator.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tContextualPopup = require('moonstone/ContextualPopup'),\r\n* \t\tContextualPopupDecorator = require('moonstone/ContextualPopupDecorator');\r\n*\r\n* \t{kind: ContextualPopupDecorator, components: [\r\n* \t\t{content: 'Show Popup'},\r\n* \t\t{kind: ContextualPopup,\r\n* \t\t\tcomponents: [\r\n* \t\t\t\t{content:'Sample component in popup'}\r\n* \t\t\t]\r\n* \t\t}\r\n* \t]}\r\n* ```\r\n*\r\n* @class ContextualPopupDecorator\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/ContextualPopupDecorator~ContextualPopupDecorator.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ContextualPopupDecorator',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdefaultKind: Button,\r\n\r\n\t/**\r\n\t* Selection on iOS prevents tap events, so avoid.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-contextual-popup-decorator',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: 'container',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightRememberFocus: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonActivate: 'activated',\r\n\t\tonShow: 'popupShown',\r\n\t\tonHide: 'popupHidden',\r\n\t\tonRequestSpot: 'requestSpot'\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:enyo/Control~Control#onActivate\r\n\t* @private\r\n\t*/\r\n\tactivated: function (inSender, inEvent) {\r\n\t\t// Don't process activate events that came from inside this decorator\r\n\t\tif (inEvent.sentFromPopup && inEvent.sentFromPopup.isDescendantOf(this)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (inEvent.originator.active) {\r\n\t\t\tthis.activator = inEvent.originator;\r\n\t\t\t// if this ContextualPopup is already activated\r\n\t\t\tif (this.popupActivated) {\r\n\t\t\t\tthis.requestHidePopup();\r\n\t\t\t\tinEvent.originator.active = false;\r\n\t\t\t\tthis.popupActivated = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.activator.addClass('active');\r\n\t\t\t\tthis.requestShowPopup();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.requestHidePopup();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Handles `onShow` event.  Since the popup is a 'client control' of the decorator,\r\n\t* we should provide a connector between them.\r\n\t*\r\n\t* @param {Object} inSender - The component that most recently propagated the `onShow` event.\r\n\t* @param {Object} inEvent - An object containing event information.\r\n\t* @private\r\n\t*/\r\n\tpopupShown: function (inSender, inEvent) {\r\n\t\tif (this.popup === undefined) {\r\n\t\t\tthis.popup = inEvent.originator;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Handles `onHide` event. If you tap outside of the popup, it will close.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpopupHidden: function () {\r\n\t\tif (this.activator) {\r\n\t\t\tthis.popupActivated = this.popup.popupActivated;\r\n\t\t\tthis.activator.active = false;\r\n\t\t\tthis.activator.removeClass('active');\r\n\t\t\tthis.activator.removeClass('pressed');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Event waterfalls down.\r\n\t* @fires module:moonstone/ContextualPopup~ContextualPopup#onRequestShowPopup\r\n\t* @private\r\n\t*/\r\n\trequestShowPopup: function () {\r\n\t\tthis.waterfallDown('onRequestShowPopup', {activator: this.activator});\r\n\t},\r\n\r\n\t/**\r\n\t* Event waterfalls down.\r\n\t* @fires module:moonstone/ContextualPopup~ContextualPopup#onRequestHidePopup\r\n\t* @private\r\n\t*/\r\n\trequestHidePopup: function () {\r\n\t\tthis.waterfallDown('onRequestHidePopup');\r\n\t},\r\n\r\n\t/**\r\n\t* When back key is pressed, return spotlight focus to popup button\r\n\t*\r\n\t* @private\r\n\t*/\r\n\trequestSpot: function (inSender, inEvent) {\r\n\t\tSpotlight.spot(this);\r\n\t\treturn true;\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/TooltipDecorator~TooltipDecorator} kind.\r\n* @module moonstone/TooltipDecorator\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tControl = require('enyo/Control');\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\nvar\r\n\tButton = require('../Button');\r\n\r\n/**\r\n* Bubble this event from a contained [control]{@link module:enyo/Control~Control} to mute tooltips. No data\r\n* needs be passed with this event.\r\n*\r\n* @event module:moonstone/TooltipDecorator~TooltipDecorator#onRequestMuteTooltip\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Bubble this event from a contained [control]{@link module:enyo/Control~Control} to unmute tooltips. No data\r\n* needs be passed with this event.\r\n*\r\n* @event module:moonstone/TooltipDecorator~TooltipDecorator#onRequestUnmuteTooltip\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/TooltipDecorator~TooltipDecorator} is a control that\r\n* activates a {@link module:moonstone/Tooltip~Tooltip}. It surrounds a control\r\n* such as a button and displays the tooltip when the control generates an\r\n* `onenter` event:\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tButton = require('moonstone/Button'),\r\n* \t\tTooltip = require('moonstone/Tooltip'),\r\n* \t\tTooltipDecorator = require('moonstone/TooltipDecorator');\r\n*\r\n* \t{kind: TooltipDecorator, components: [\r\n* \t\t{kind: Button, content: 'Tooltip'},\r\n* \t\t{kind: Tooltip, content: 'I am a tooltip for a button.'}\r\n* \t]}\r\n* ```\r\n*\r\n* Here is an example with a {@link module:moonstone/Input~Input} control and a decorator around the input:\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tInput = require('moonstone/Input'),\r\n* \t\tInputDecorator = require('moonstone/InputDecorator'),\r\n* \t\tTooltip = require('moonstone/Tooltip'),\r\n* \t\tTooltipDecorator = require('moonstone/TooltipDecorator');\r\n*\r\n* \t{kind: TooltipDecorator, components: [\r\n* \t\t{kind: InputDecorator, components: [\r\n* \t\t\t{kind: Input, placeholder: 'Just an input...'}\r\n* \t\t]},\r\n* \t\t{kind: Tooltip, content: 'I am just a tooltip for an input.'}\r\n* \t]}\r\n* ```\r\n*\r\n* Automatic hiding and showing of tooltips may be disabled by calling\r\n* [mute()]{@link module:moonstone/TooltipDecorator~TooltipDecorator#mute} or by bubbling the\r\n* [onRequestMuteTooltip]{@link module:moonstone/TooltipDecorator~TooltipDecorator#onRequestMuteTooltip} event;\r\n* it may be re-enabled by calling [unmute()]{@link module:moonstone/TooltipDecorator~TooltipDecorator#unmute}\r\n* or by bubbling the\r\n* [onRequestUnmuteTooltip]{@link module:moonstone/TooltipDecorator~TooltipDecorator#onRequestUnmuteTooltip} event.\r\n*\r\n* @class TooltipDecorator\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/TooltipDecorator~TooltipDecorator.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.TooltipDecorator',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdefaultKind: Button,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-tooltip-decorator',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonenter: 'requestShowTooltip',\r\n\t\tonleave: 'requestHideTooltip',\r\n\t\tonSpotlightFocused: 'requestShowTooltip',\r\n\t\tonSpotlightBlur: 'requestHideTooltip',\r\n\t\tonRequestMuteTooltip: 'mute',\r\n\t\tonRequestUnmuteTooltip: 'unmute'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/TooltipDecorator~TooltipDecorator.prototype\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* Boolean indicating whether tooltips are automatically shown when the activator is\r\n\t\t* hovered over.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tautoShow: true\r\n\t},\r\n\r\n\t/**\r\n\t* Disables automatic tooltip showing and hiding.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tmute: function () {\r\n\t\tthis.setAutoShow(false);\r\n\t},\r\n\r\n\t/**\r\n\t* Re-enables automatic tooltip showing and hiding after being muted.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tunmute: function () {\r\n\t\tthis.setAutoShow(true);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tautoShowChanged: function () {\r\n\t\tif (!this.autoShow) {\r\n\t\t\tthis.requestHideTooltip();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttap: function () {\r\n\t\tthis.requestHideTooltip();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trequestShowTooltip: function (inSender, inEvent) {\r\n\t\tif (this.autoShow && !Spotlight.isFrozen()) {\r\n\t\t\tif (inEvent.type == 'onSpotlightFocused' || Spotlight.getPointerMode()) {\r\n\t\t\t\tthis.waterfallDown('onRequestShowTooltip', {originator: inSender}, this);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trequestHideTooltip: function () {\r\n\t\tthis.waterfallDown('onRequestHideTooltip');\r\n\t},\r\n\r\n\t/**\r\n\t* Cancel any pending tooltip showing if the decorator or one of its ancestors is hidden\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshowingChangedHandler: function (sender, event) {\r\n\t\tControl.prototype.showingChangedHandler.apply(this, arguments);\r\n\t\tif (!event.showing) {\r\n\t\t\tthis.requestHideTooltip();\r\n\t\t}\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/ToggleButton~ToggleButton} kind.\r\n* @module moonstone/ToggleButton\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutil = require('enyo/utils');\r\n\r\nvar\r\n\tButton = require('../Button');\r\n\r\n/**\r\n* Fires when the value of the toggle button changes.\r\n*\r\n* @event module:moonstone/ToggleButton~ToggleButton:onChange\r\n* @type {Object}\r\n* @property {Boolean} value - Current state of the ToggleButton.\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/ToggleButton~ToggleButton}, which extends {@link module:moonstone/Button~Button}, is a button with two\r\n* states, 'on' and 'off'. When the toggle button is tapped, it switches its state\r\n* and fires an [onChange]{@link module:moonstone/ToggleButton~ToggleButton#onChange} event.\r\n*\r\n* You may show the same text for both toggle states (via the\r\n* [content]{@link module:enyo/Control~Control#content} property), or different text for each state,\r\n* using the [toggleOnLabel]{@link module:moonstone/ToggleButton~ToggleButton#toggleOnLabel} and\r\n* [toggleOffLabel]{@link module:moonstone/ToggleButton~ToggleButton#toggleOffLabel} properties. Note that both\r\n* `toggleOnLabel` and `toggleOffLabel` must be set in order to display different labels;\r\n* otherwise, the `content` property will be used.\r\n*\r\n* @class ToggleButton\r\n* @extends module:moonstone/Button~Button\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/ToggleButton~ToggleButton.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ToggleButton',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Button,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/ToggleButton~ToggleButton.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Boolean indicating whether toggle button is currently in the 'on' state.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tvalue: false,\r\n\r\n\t\t/**\r\n\t\t* Button text displayed in the 'on' state. If not specified, the\r\n\t\t* [content]{@link module:enyo/Control~Control#content} property will be used as button text.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttoggleOnLabel: '',\r\n\r\n\t\t/**\r\n\t\t* Button text displayed in the 'off' state. If not specified, the\r\n\t\t* [content]{@link module:enyo/Control~Control#content} property will be used as button text.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttoggleOffLabel: ''\r\n\t},\r\n\r\n\t/*\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonChange: ''\r\n\t},\r\n\r\n\t/*\r\n\t* @private\r\n\t*/\r\n\t_rendered: false,\r\n\r\n\t/*\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-toggle-button',\r\n\r\n\t/*\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tButton.prototype.create.apply(this, arguments);\r\n\t\tthis.updateContent();\r\n\t\tthis.updateVisualState();\r\n\t},\r\n\r\n\t/*\r\n\t* @private\r\n\t*/\r\n\trendered: function () {\r\n\t\tButton.prototype.rendered.apply(this, arguments);\r\n\t\tthis.setActive(this.value);\r\n\t\tthis.fireChangeEvent();\r\n\t\tthis._rendered = true;\r\n\t},\r\n\r\n\t/*\r\n\t* @private\r\n\t*/\r\n\tupdateVisualState: function () {\r\n\t\tthis.addRemoveClass('moon-toggle-button-on', this.value && !this.disabled);\r\n\t},\r\n\r\n\t/*\r\n\t* @private\r\n\t*/\r\n\tdisabledChanged: function () {\r\n\t\tButton.prototype.disabledChanged.apply(this, arguments);\r\n\t\tthis.updateVisualState();\r\n\t},\r\n\r\n\t/*\r\n\t* @private\r\n\t*/\r\n\tvalueChanged: function () {\r\n\t\tthis.updateContent();\r\n\t\tthis.updateVisualState();\r\n\t\tthis.setActive(this.value);\r\n\t\tthis.fireChangeEvent();\r\n\t},\r\n\r\n\t/*\r\n\t* @private\r\n\t*/\r\n\ttoggleOnLabelChanged: function () {\r\n\t\tthis.updateContent();\r\n\t},\r\n\r\n\t/*\r\n\t* @private\r\n\t*/\r\n\ttoggleOffLabelChanged: function () {\r\n\t\tthis.updateContent();\r\n\t},\r\n\r\n\t/*\r\n\t* We override the inherited `activeChanged()` method.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tactiveChanged: function () {\r\n\t\tif (this._rendered) {\r\n\t\t\tthis.active = util.isTrue(this.active);\r\n\t\t\tthis.setValue(this.active);\r\n\t\t}\r\n\t\tthis.bubble('onActivate');\r\n\t},\r\n\r\n\t/*\r\n\t* we override the inherited `tap()` method.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\ttap: function () {\r\n\t\tif (this.disabled) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\tthis.setValue(!this.value);\r\n\t\t}\r\n\t},\r\n\r\n\t/*\r\n\t* @private\r\n\t*/\r\n\tupdateContent: function () {\r\n\t\tif (!this.toggleOnLabel || !this.toggleOffLabel) {\r\n\t\t\tthis.setContent(this.content);\r\n\t\t} else {\r\n\t\t\tthis.setContent(this.value ? this.toggleOnLabel : this.toggleOffLabel);\r\n\t\t}\r\n\t},\r\n\r\n\t/*\r\n\t* @private\r\n\t*/\r\n\tfireChangeEvent: function () {\r\n\t\tthis.doChange({value: this.value});\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* The active state for a ToggleButton is relevant so we want to use `aria-pressed`\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @public\r\n\t*/\r\n\taccessibilityPressed: true\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:moonstone/AnimatedButton~AnimatedButton} kind.\r\n* @wip\r\n* @module moonstone/AnimatedButton\r\n*/\r\n\r\nrequire('moonstone');\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutil = require('enyo/utils');\r\n\r\nvar\r\n\tButton = require('moonstone/Button'),\r\n\tAnimatedButtonSvg = require('./AnimatedButtonSvg');\r\n\r\n/**\r\n* {@link module:moonstone/AnimatedButton~AnimatedButton} is a\r\n* {@link module:moonstone/Button~Button} with Moonstone styling applied. The color of the button may\r\n* be customized by specifying a background color.\r\n*\r\n* For more information, see the documentation on\r\n* [Buttons]{@linkplain $dev-guide/building-apps/controls/buttons.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class AnimatedButton\r\n* @extends module:enyo/AnimatedButton~AnimatedButton\r\n* @mixes module:moonstone/MarqueeSupport~MarqueeSupport\r\n* @ui\r\n* @wip\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/AnimatedButton~AnimatedButton.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.AnimatedButton',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Button,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/AnimatedButton~AnimatedButton.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* The length of time, in milliseconds, that the animation will run.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 400\r\n\t\t* @public\r\n\t\t*/\r\n\t\tduration: 400\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-button-animated',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonSpotlightFocus: 'animateSpotlightFocus',\r\n\t\tonSpotlightBlur: 'animateSpotlightBlur'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: 'duration', to: '$.animation.duration'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitComponents: function () {\r\n\t\t// Always add an SVG element, unless one already exists\r\n\t\tthis.createChrome([\r\n\t\t\t{classes: 'moon-button-animated-frame', components: [\r\n\t\t\t\t{name: 'animation', kind: AnimatedButtonSvg, onEnd: 'animDone'}\r\n\t\t\t]}\r\n\t\t]);\r\n\r\n\t\tButton.prototype.initComponents.apply(this, arguments);\r\n\r\n\t\tif (this.$.client) {\r\n\t\t\tthis.$.client.addClass('button-client');\r\n\t\t} else {\r\n\t\t\t// No client? Drop all the components into a client frame to keep them safe from evil.\r\n\t\t\tthis.createComponent({name: 'client', classes: 'button-client', isChrome: true});\r\n\t\t\tvar i,\r\n\t\t\t\tnewClient = this.$.client,\r\n\t\t\t\tchildren = this.getClientControls();\r\n\t\t\tfor (i = 0; i < children.length; i++) {\r\n\t\t\t\tchildren[i].set('container', newClient);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tanimateSpotlightFocus: function () {\r\n\t\tthis.$.animation.startFocus();\r\n\t\tutil.asyncMethod(this, function () {\r\n\t\t\tthis.removeClass('spotlight');\r\n\t\t});\r\n\t\tthis.startJob('textTransition', function () {\r\n\t\t\tthis.addClass('nearly-spotlight');\r\n\t\t}, this.get('duration') / 2);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tanimateSpotlightBlur: function () {\r\n\t\tthis.stopJob('textTransition');\r\n\t\tthis.removeClass('nearly-spotlight');\r\n\t\tthis.$.animation.startBlur();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tanimDone: function (sender, ev) {\r\n\t\tthis.addRemoveClass('spotlight', ev.focused);\r\n\t\tthis.removeClass('nearly-spotlight');\r\n\t\treturn true;\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Popup~Popup} kind.\r\n* @module moonstone/Popup\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutil = require('enyo/utils'),\r\n\tControl = require('enyo/Control'),\r\n\tEnyoHistory = require('enyo/History'),\r\n\tPopup = require('enyo/Popup');\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\nvar\r\n\t$L = require('../i18n'),\r\n\tScrim = require('../Scrim'),\r\n\tButton = require('../Button'),\r\n\tIconButton = require('../IconButton'),\r\n\tHistorySupport = require('../HistorySupport');\r\n\r\n/**\r\n* {@link module:moonstone/Popup~Popup} is an {@link module:enyo/Popup~Popup} that appears at the bottom of the\r\n* screen and takes up the full screen width.\r\n*\r\n* @class Popup\r\n* @extends module:enyo/Popup~Popup\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/Popup~Popup.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Popup',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Popup,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [HistorySupport],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmodal: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon moon-neutral enyo-unselectable moon-popup',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tfloating: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_bounds: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: 'container',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightRememberFocus: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tallowDefault: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonRequestScrollIntoView   : '_preventEventBubble',\r\n\t\tontransitionend           : 'animationEnd',\r\n\t\tonSpotlightSelect         : 'handleSpotlightSelect'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\teventsToCapture: {\r\n\t\tonSpotlightFocus: 'capturedFocus',\r\n\t\tonkeydown: 'captureKeyDown'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/Popup~Popup.prototype\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* Determines whether a scrim will appear when the dialog is modal. If `true`,\r\n\t\t* a transparent (i.e., invisible) overlay prevents the propagation of tap events.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tscrimWhenModal: true,\r\n\r\n\t\t/**\r\n\t\t* Determines whether or not to display a scrim. Only displays scrims when floating. When\r\n\t\t* the scrim is in the floating state (`floating: true`), it covers the entire viewport\r\n\t\t* (i.e., it is displayed on top of other controls).\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tscrim: true,\r\n\r\n\t\t/**\r\n\t\t* Optional class name to apply to the scrim. Be aware that the scrim is a singleton and\r\n\t\t* you will be modifying the scrim instance used for other popups.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tscrimClassName: '',\r\n\r\n\t\t/**\r\n\t\t* If `true`, {@glossary Spotlight} (focus) cannot leave the area of the popup unless the\r\n\t\t* popup is explicitly closed; if `false`, spotlight may be moved anywhere within the\r\n\t\t* viewport.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tspotlightModal: true,\r\n\r\n\t\t/**\r\n\t\t* When `true`, the close button is shown; when `false`, it is hidden.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tshowCloseButton: false,\r\n\r\n\t\t/**\r\n\t\t* When `true`, popups will animate on/off screen.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tanimate: true\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttools: [\r\n\t\t{name: 'client', kind: Control, classes: 'enyo-fill'},\r\n\t\t{name: 'closeButton', kind: IconButton, icon: 'closex', classes: 'moon-popup-close', ontap: 'closePopup', backgroundOpacity: 'transparent', accessibilityLabel: $L('Close'), showing: false}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstatics: { count: 0 },\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdefaultZ: 120,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tactivator: null,\r\n\r\n\t/**\r\n\t* Creates chrome components.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tinitComponents: function() {\r\n\t\tthis.createComponents(this.tools, {owner: this});\r\n\t\tPopup.prototype.initComponents.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tPopup.prototype.create.apply(this, arguments);\r\n\t\tthis.animateChanged();\r\n\t\tthis.showCloseButtonChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tanimateChanged: function() {\r\n\t\tthis.addRemoveClass('animate', this.animate);\r\n\t\tif (!this.animate) {\r\n\t\t\tthis.applyStyle('bottom', null);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Renders {@link module:moonstone/Popup~Popup}, extending {@link module:enyo/Popup~Popup}\r\n\t*\r\n\t* @private\r\n\t*/\r\n\trender: function() {\r\n\t\tthis.allowHtmlChanged();\r\n\t\tthis.contentChanged();\r\n\t\tPopup.prototype.render.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontentChanged: function() {\r\n\t\tthis.$.client.setContent(this.content);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tallowHtmlChanged: function() {\r\n\t\tthis.$.client.setAllowHtml(this.allowHtml);\r\n\t},\r\n\r\n\t/**\r\n\t* Sets `this.downEvent` on `onSpotlightSelect` event.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\thandleSpotlightSelect: function(sender, event) {\r\n\t\tthis.downEvent = event;\r\n\t},\r\n\r\n\t/**\r\n\t* If `this.downEvent` is set to a {@glossary Spotlight} event, skips normal popup\r\n\t* `capturedTap()` code.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcapturedTap: function(sender, event) {\r\n\t\tif (!this.downEvent || (this.downEvent.type != 'onSpotlightSelect')) {\r\n\t\t\tPopup.prototype.capturedTap.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* If the popup has no spottable children, an [Enter] key down will cause it to be hidden\r\n\t* because Spotlight will try to spot the nearest or last control for a 5-way key down.\r\n\t* Since there isn't a spottable child, a control outside the popup is focused which triggers\r\n\t* `capturedFocus` which hides the Popup.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcaptureKeyDown: function (sender, event) {\r\n\t\tthis.preventHide = (event.keyCode == 13 || event.keyCode == 16777221) && !Spotlight.isSpottable(this);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcapturedFocus: function (sender, event) {\r\n\t\t// While we're open, we hijack Spotlight focus events. In all cases, we want\r\n\t\t// to prevent the default 5-way behavior (which is to focus on the control nearest\r\n\t\t// to the pointer in the chosen direction)...\r\n\t\tvar last = Spotlight.getLastControl(),\r\n\t\t\tcur = Spotlight.getCurrent(),\r\n\t\t\tfocusCapturedControl = event.originator;\r\n\t\t// There are two cases where we want to focus back on ourselves...\r\n\t\t// NOTE: The logic used here to detect these cases is highly dependent on certain\r\n\t\t// nuances of how Spotlight currently tracks the \"last\" and \"current\" focus. It will\r\n\t\t// probably need to be updated if / when Spotlight gets some love in this area.\r\n\t\tif (\r\n\t\t\t// Case 1: We were probably just opened in pointer mode. The pointer is outside\r\n\t\t\t// the popup, which means a 5-way press will likely focus some control outside the\r\n\t\t\t// popup, unless we prevent it by re-spotting ourselves.\r\n\t\t\t//(last === this && !cur.isDescendantOf(this)) ||\r\n\t\t\t(last === this && !focusCapturedControl.isDescendantOf(this)) ||\r\n\t\t\t// Case 2: We were probably opened in 5-way mode and then the pointer was moved\r\n\t\t\t// (likely due to incidental movement of the magic remote). It's possible that the\r\n\t\t\t// user actually wants to exit the popup by focusing on something outside, but more\r\n\t\t\t// likely that they have accidentally wiggled the remote and intend to be moving\r\n\t\t\t// around within the popup -- so, again, we re-spot ourselves.\r\n\t\t\t(last.isDescendantOf(this) && cur !== this)\r\n\r\n\t\t) {\r\n\t\t\tSpotlight.spot(this);\r\n\t\t}\r\n\t\t// In all other cases, the user probably means to exit the popup by moving out, so we\r\n\t\t// close ourselves.\r\n\t\telse if (!this.preventHide) {\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* Called if [showCloseButton]{@link module:moonstone/Popup~Popup#showCloseButton} changes and\r\n\t* determines whether to display close button.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshowCloseButtonChanged: function() {\r\n\t\tif (this.showCloseButton != this.$.closeButton.get('showing')) {\r\n\t\t\tthis.$.closeButton.set('showing', this.showCloseButton);\r\n\t\t\tthis.addRemoveClass('reserve-close', this.showCloseButton);\r\n\t\t\tif (this.generated) {\r\n\t\t\t\tthis.resize();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowingChanged: function() {\r\n\t\t// reset flag to prevent hiding popup when Enter pressed on unspottable popup\r\n\t\tthis.preventHide = false;\r\n\r\n\t\tif (this.showing) {\r\n\t\t\tif (this.isAnimatingHide) {\r\n\t\t\t\t// need to call this early to prevent race condition where animationEnd\r\n\t\t\t\t// originated from a \"hide\" context but we are already in a \"show\" context\r\n\t\t\t\tthis.animationEnd = util.nop;\r\n\t\t\t\tPopup.count--;\r\n\t\t\t\t// if we are currently animating the hide transition, release\r\n\t\t\t\t// the events captured when popup was initially shown\r\n\t\t\t\tif (this.captureEvents) {\r\n\t\t\t\t\tthis.release();\r\n\t\t\t\t}\r\n\t\t\t\tthis.isAnimatingHide = false;\r\n\t\t\t}\r\n\t\t\tthis.activator = Spotlight.getCurrent();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (this.generated) {\r\n\t\t\t\tthis.respotActivator();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.showing) {\r\n\t\t\t// Run inherited immediately\r\n\t\t\tPopup.prototype.showingChanged.apply(this, arguments);\r\n\t\t\tthis.show();\r\n\t\t} else {\r\n\t\t\tthis.hide();\r\n\t\t\tif (this.animate) {\r\n\t\t\t\tthis.isAnimatingHide = true;\r\n\t\t\t\t// Instead of hiding the scrim with the inherited enyo method, when the\r\n\t\t\t\t// animation is finished, fire it now, so interactive control is returned to the\r\n\t\t\t\t// applicaiton while our popup is animating to the closed position.\r\n\t\t\t\tthis.showHideScrim(this.showing);\r\n\t\t\t\tvar args = arguments;\r\n\t\t\t\tthis.animationEnd = this.bindSafely(function (sender, ev) {\r\n\t\t\t\t\tif (ev.originator === this) {\r\n\t\t\t\t\t\t// Delay inherited until animationEnd\r\n\t\t\t\t\t\tPopup.prototype.showingChanged.apply(this, args);\r\n\t\t\t\t\t\tthis.animationEnd = util.nop;\r\n\t\t\t\t\t\tthis.isAnimatingHide = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Run inherited immediately\r\n\t\t\t\tPopup.prototype.showingChanged.apply(this, arguments);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.showing) {\r\n\t\t\t// Spot ourselves, unless we're already spotted\r\n\t\t\tvar current = Spotlight.getCurrent();\r\n\t\t\tif (!current || !current.isDescendantOf(this)) {\r\n\t\t\t\tif (Spotlight.isSpottable(this)) {\r\n\t\t\t\t\tSpotlight.spot(this);\r\n\t\t\t\t}\r\n\t\t\t\t// If we're not spottable, just unspot whatever was previously spotted\r\n\t\t\t\telse {\r\n\t\t\t\t\tSpotlight.unspot();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.allowBackKey) {\r\n\t\t\tif (this.showing) {\r\n\t\t\t\tthis.pushBackHistory();\r\n\t\t\t} else if(!this.showing && !EnyoHistory.isProcessing()) {\r\n\t\t\t\tEnyoHistory.drop();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Show the popup. This respects the current state of the\r\n\t* [animate]{@link module:moonstone/Popup~Popup#animate} property, showing with or without animation.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tshow: function() {\r\n\t\tPopup.prototype.show.apply(this, arguments);\r\n\t\tthis.addClass('showing');\r\n\t},\r\n\r\n\t/**\r\n\t* Hide the popup. This respects the current state of the\r\n\t* [animate]{@link module:moonstone/Popup~Popup#animate} property, hiding with or without animation.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\thide: function() {\r\n\t\tPopup.prototype.hide.apply(this, arguments);\r\n\t\tthis.removeClass('showing');\r\n\t},\r\n\r\n\t/**\r\n\t* Overrides the default `getShowing()` behavior to avoid setting `this.showing` based on the\r\n\t* CSS `display` property.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgetShowing: function() {\r\n\t\tif (this.animate) {\r\n\t\t\treturn this.showing;\r\n\t\t} else {\r\n\t\t\treturn Popup.prototype.getShowing.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Skips animation and jumps to the final shown state.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tshowDirect: function() {\r\n\t\tvar anim = this.animate;\r\n\t\tif (anim) {\r\n\t\t\tthis.set('animate', false);\r\n\t\t}\r\n\t\tthis.show();\r\n\t\tif (anim) {\r\n\t\t\t// getComputedStyleValue forces the browser to update the style rules before\r\n\t\t\t// proceeding. Otherwise the removal and addition of the \"animate\" class happens in\r\n\t\t\t// one rendering-pass, which will have no visual difference.\r\n\t\t\tthis.getComputedStyleValue('display');\r\n\t\t\tthis.set('animate', anim);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Skips animation and jumps to the final hidden state.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\thideDirect: function() {\r\n\t\tvar anim = this.animate;\r\n\t\tif (anim) {\r\n\t\t\tthis.set('animate', false);\r\n\t\t}\r\n\t\tthis.hide();\r\n\t\tif (anim) {\r\n\t\t\tthis.set('animate', anim);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowHideScrim: function(show) {\r\n\t\tif (this.floating && (this.scrim || (this.modal && this.scrimWhenModal))) {\r\n\t\t\tvar scrim = this.getScrim();\r\n\t\t\tif (show && this.modal && this.scrimWhenModal) {\r\n\t\t\t\t// move scrim to just under the popup to obscure rest of screen\r\n\t\t\t\tvar i = this.getScrimZIndex();\r\n\t\t\t\tthis._scrimZ = i;\r\n\t\t\t\tscrim.showAtZIndex(i);\r\n\t\t\t} else {\r\n\t\t\t\tscrim.hideAtZIndex(this._scrimZ);\r\n\t\t\t}\r\n\t\t\tscrim.addRemoveClass(this.scrimClassName, scrim.showing);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetScrimZIndex: function() {\r\n\t\t// Position scrim directly below popup\r\n\t\treturn this.findZIndex()-1;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetScrim: function() {\r\n\t\t// show a transparent scrim for modal popups if scrimWhenModal is true\r\n\t\t// if scrim is true, then show a regular scrim.\r\n\t\tif (this.modal && this.scrimWhenModal && !this.scrim) {\r\n\t\t\treturn Scrim.scrimTransparent.make();\r\n\t\t}\r\n\t\treturn Scrim.scrim.make();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\r\n\t/**\r\n\t* Removes focused style from close button and hides the popup.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tclosePopup: function(sender, event) {\r\n\t\tif (this.$.closeButton) {\r\n\t\t\tthis.$.closeButton.removeClass('pressed');\r\n\t\t}\r\n\t\tthis.hide();\r\n\t},\r\n\r\n\t/**\r\n\t* Attempts to respot the activating control when the popup is hidden.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\trespotActivator: function() {\r\n\t\tvar a = this.activator;\r\n\t\t// We're about to spot something, so we first call release() to avoid capturing\r\n\t\t// (and preventing) the resulting SpotlightFocus event.\r\n\t\tthis.release();\r\n\t\t// Attempt to identify and re-spot the activator if present\r\n\t\tif (a && !a.destroyed) {\r\n\t\t\tSpotlight.spot(a);\r\n\t\t\tif (a instanceof Button) {\r\n\t\t\t\ta.removeClass('pressed');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// As a failsafe, attempt to spot the container if no activator is present\r\n\t\t\tSpotlight.spot(Spotlight.getFirstChild(this.container));\r\n\t\t}\r\n\t\tthis.activator = null;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_preventEventBubble: function(sender, event) {\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdestroy: function() {\r\n\t\tthis.showHideScrim(false);\r\n\t\tPopup.prototype.destroy.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* When `true`, the contents of the popup will be read when shown.\r\n\t*\r\n\t* @default true\r\n\t* @type {Boolean}\r\n\t* @public\r\n\t*/\r\n\taccessibilityReadAll: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taccessibilityLive: 'off',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: ['accessibilityReadAll', 'accessibilityRole', 'showing'], method: function () {\r\n\t\t\tthis.startJob('alert', function () {\r\n\t\t\t\tthis.setAriaAttribute('role', this.accessibilityReadAll && this.showing ? 'alert' : this.accessibilityRole);\r\n\t\t\t}, 100);\r\n\t\t}}\r\n\t]\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/ProgressButton~ProgressButton} kind.\r\n* @module moonstone/ProgressButton\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tAnimator = require('enyo/Animator'),\r\n\tControl = require('enyo/Control');\r\n\r\nvar\r\n\tButton = require('../Button');\r\n\r\n/**\r\n* Fires when progress button finishes animating to a position. No event-specific data is sent \r\n* with this event.\r\n*\r\n* @event module:moonstone/ProgressButton~ProgressButton#onButtonProgressFinish\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/ProgressButton~ProgressButton} is an animated button\r\n* that shows progress from one state to another.\r\n*\r\n* ```\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tProgressButton = require('moonstone/ProgressButton');\r\n*\r\n* \t{kind: ProgressButton, progress: 10, content: 'Download', postContent: 'Launch'}\r\n* ```\r\n*\r\n* To animate progress changes, call the {@link module:moonstone/ProgressButton~ProgressButton#animateProgressTo} method:\r\n*\r\n* ```\r\n* \tthis.$.progressButton.animateProgressTo(50);\r\n* ```\r\n*\r\n* You may customize the color of the bar by applying a style via the\r\n* {@link module:moonstone/ProgressButton~ProgressButton#barClasses} property, e.g.:\r\n*\r\n* ```\r\n* \t{kind: ProgressButton, barClasses: 'class-name'}\r\n* ```\r\n*\r\n* For more information, see the documentation on [Progress Button\r\n* Indicators](building-apps/controls/progress-button-indicators.html) in the Enyo\r\n* Developer Guide\r\n*\r\n* @class ProgressButton\r\n* @extends module:moonstone/Button~Button\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/ProgressButton~ProgressButton.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ProgressButton',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Button,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-progress-button',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/ProgressButton~ProgressButton.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Current position of progress button.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tprogress: 0,\r\n\r\n\t\t/**\r\n\t\t* Minimum progress value (i.e., no progress made).\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmin: 0,\r\n\r\n\t\t/**\r\n\t\t* Maximum progress value (i.e., process complete).\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 100\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmax: 100,\r\n\r\n\t\t/**\r\n\t\t* Optional CSS classes to apply to progress button bar.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tbarClasses: '',\r\n\r\n\t\t/**\r\n\t\t* The text to display after the progress has been completed.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'Completed'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpostContent: 'Completed',\r\n\r\n\t\t/**\r\n\t\t* Toggle whether there will be animation on the progress updates\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tanimated: true,\r\n\r\n\t\t/**\r\n\t\t* The amount of fixed-steps the progress bar should increment to. 4 steps would step to\r\n\t\t* 25%, 50%, 75%, and 100%. 5 steps would step to 20%, 40%, 60%, 80%, and 100%. etc.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 4\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsteps: 4\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\r\n\t\t/**\r\n\t\t* {@link module:moonstone/ProgressButton~ProgressButton#onButtonProgressFinish}\r\n\t\t*/\r\n\t\tonButtonProgressFinish: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'progressAnimator', kind: Animator, onStep: 'progressAnimatorStep', onEnd: 'progressAnimatorComplete'},\r\n\t\t{name: 'bar', kind: Control, classes: 'moon-progress-button-bar'},\r\n\t\t{name: 'progressPercent', kind: Control, classes: 'moon-progress-button-progresspercent'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tButton.prototype.create.apply(this, arguments);\r\n\t\tthis.preContent = this.content;\r\n\t\tthis.addRemoveClass('moon-progress-button-rtl', this.rtl);\r\n\t\tthis.progressChanged();\r\n\t\tthis.animatedChanged();\r\n\t\tthis.barClassesChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbarClassesChanged: function (old) {\r\n\t\tthis.$.bar.removeClass(old);\r\n\t\tthis.$.bar.addClass(this.barClasses);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tprogressChanged: function () {\r\n\t\tthis.progress = this.clampValue(this.min, this.max, this.progress);\r\n\r\n\t\tvar progress,\r\n\t\t\tpercent = this.calcPercent(this.progress),\r\n\t\t\toffset = -10,\r\n\t\t\tminimumVisibleProgress = 10,\r\n\t\t\tincrement = parseInt(100 / this.get('steps'), 10);\r\n\t\tif (percent < 100) {\r\n\t\t\tthis.removeClass('completed');\r\n\t\t}\r\n\t\tif (percent < 5) {\r\n\t\t\tif (percent === 0) {\r\n\t\t\t\tthis._inProgress(false);\r\n\t\t\t\tthis.set('content', this.preContent);\r\n\t\t\t\tthis.$.progressPercent.set('content', '');\r\n\t\t\t\tthis.removeClass('in-progress');\r\n\t\t\t} else {\r\n\t\t\t\tthis._inProgress(true);\r\n\t\t\t\tthis.updateProgressPercent(percent);\r\n\t\t\t}\r\n\t\t\t// The value is so small that it should not be visible.\r\n\t\t\tthis.$.bar.applyStyle('transform', 'translateX(-100%)');\r\n\t\t\tthis.$.bar.applyStyle('-webkit-transform', 'translateX(-100%)');\r\n\t\t\tprogress = 0;\r\n\t\t} else if (percent >= 5 && percent < 100) {\r\n\t\t\t// Disable spotlight: you can't click a button once it's in progress\r\n\t\t\tthis._inProgress(true);\r\n\t\t\tif (percent < increment) {\r\n\t\t\t\t// Statically set the size of the progress bar if it's less than 1 increment.\r\n\t\t\t\tprogress = minimumVisibleProgress;\r\n\t\t\t} else {\r\n\t\t\t\t// Calculate how many increments we should use\r\n\t\t\t\tprogress = parseInt(percent / increment, 10) * increment;\r\n\t\t\t}\r\n\t\t\tthis.updateProgressPercent(percent);\r\n\t\t\t// Only change the progress bar if it's different from the last time this was run\r\n\t\t\tif (progress != this._visibleProgress) {\r\n\t\t\t\tthis.$.bar.applyStyle('transform', 'translateX(-' + (100 + offset - progress) + '%)');\r\n\t\t\t\tthis.$.bar.applyStyle('-webkit-transform', 'translateX(-' + (100 + offset - progress) + '%)');\r\n\t\t\t}\r\n\t\t} else if (percent >= 100) {\r\n\t\t\t// Make it spottable again, now that it's finished.\r\n\t\t\tthis.$.bar.applyStyle('transform', null);\r\n\t\t\tthis.$.bar.applyStyle('-webkit-transform', null);\r\n\t\t\tthis.setPostContent();\r\n\t\t\tprogress = 100;\r\n\t\t}\r\n\t\t// Remember the last progress state\r\n\t\tthis._visibleProgress = progress;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_inProgress: function (state) {\r\n\t\tthis.addRemoveClass('in-progress', state);\r\n\t\tthis.set('spotlight', !state);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclampValue: function (min, max, value) {\r\n\t\treturn Math.max(min, Math.min(value, max));\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tanimatedChanged: function () {\r\n\t\tthis.addRemoveClass('animated', this.get('animated'));\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcRatio: function (value) {\r\n\t\treturn (value - this.min) / (this.max - this.min);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcPercent: function (value) {\r\n\t\treturn this.calcRatio(value) * 100;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateBarPosition: function (percent) {\r\n\t\tthis.$.bar.applyStyle('width', percent + '%');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateProgressPercent: function(percent) {\r\n\t\tthis.set('content', '');\r\n\t\tthis.$.progressPercent.set('content', Math.round(percent) + '%');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetPostContent: function(){\r\n\t\tthis.startJob('completeProgress', function () {\r\n\t\t\tthis.$.progressPercent.set('content', '');\r\n\t\t\tthis.addClass('completed');\r\n\t\t\tthis.set('content', this.get('postContent'));\r\n\r\n\t\t\t// When the animation is done, we are finally no longer in-progress.\r\n\t\t\tthis.startJob('completeProgressDone', function () {\r\n\t\t\t\tthis._inProgress(false);\r\n\t\t\t}, 200); // Same as the CSS transition duration\r\n\t\t}, 1000);\r\n\t},\r\n\r\n\t/**\r\n\t* Animates progress to the passed-in value.\r\n\t*\r\n\t* @param {Number} value  The destination number\r\n\t* @public\r\n\t*/\r\n\tanimateProgressTo: function (value) {\r\n\t\tthis.$.progressAnimator.play({\r\n\t\t\tstartValue: this.progress,\r\n\t\t\tendValue: value,\r\n\t\t\tnode: this.hasNode()\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tprogressAnimatorStep: function (sender) {\r\n\t\tthis.setProgress(sender.value);\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:moonstone/ProgressBar~ProgressBar#onButtonProgressFinish\r\n\t* @private\r\n\t*/\r\n\tprogressAnimatorComplete: function (sender) {\r\n\t\tthis.doButtonProgressFinish();\r\n\t\treturn true;\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/CheckboxItem~CheckboxItem} kind.\r\n* @module moonstone/CheckboxItem\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tCheckbox = require('../Checkbox'),\r\n\tItem = require('../Item'),\r\n\tMarquee = require('../Marquee'),\r\n\tMarqueeItem = Marquee.Item;\r\n\r\n/**\r\n* Fires when the control is either checked or unchecked.\r\n*\r\n* @event module:moonstone/CheckboxItem~CheckboxItem#onActivate\r\n* @type {Object}\r\n* @property {Boolean} checked - Whether the checkbox is currently checked.\r\n* @property {Object} toggledControl - A reference to the\r\n*\t{@link module:moonstone/CheckboxItem~CheckboxItem} whose state changed. (Note that the\r\n*\toriginator of this event is actually the {@link module:moonstone/Checkbox~Checkbox} contained\r\n*\twithin the CheckboxItem, so use this property\r\n* to reference the CheckboxItem itself.)\r\n*\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/CheckboxItem~CheckboxItem} is a control that combines a\r\n* {@link module:moonstone/Checkbox~Checkbox} with a text label. The label text may be set via the\r\n* [content]{@link module:enyo/Control~Control#content} property. The state of the checkbox may be\r\n* retrieved by querying the [checked]{@link module:moonstone/CheckboxItem~CheckboxItem#checked}\r\n* property.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tCheckboxItem = require('moonstone/CheckboxItem');\r\n*\r\n* \t{kind: CheckboxItem, content: 'San Francisco',\r\n* \t\tonchange: 'checkedChanged'},\r\n*\r\n* \tcheckedChanged: function (sender, ev) {\r\n* \t\tvar checked = sender.get('checked');\r\n* \t}\r\n* ```\r\n*\r\n* You may place CheckboxItem objects inside an {@link module:enyo/Group~Group} to create a group\r\n* of checkboxes in which only one may be checked at any given time (similar to how a\r\n* [RadioItemGroup]{@link module:moonstone/RadioItemGroup~RadioItemGroup} behaves):\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tGroup = require('enyo/Group'),\r\n* \t\tCheckboxItem = require('moonstone/CheckboxItem');\r\n*\r\n* \t{kind: Group, components: [\r\n* \t\t{kind: CheckboxItem, content: 'New York'},\r\n* \t\t{kind: CheckboxItem, content: 'London'},\r\n* \t\t{kind: CheckboxItem, content: 'San Francisco'},\r\n* \t\t{kind: CheckboxItem, content: 'Beijing'}\r\n* \t]}\r\n* ```\r\n*\r\n* @class CheckboxItem\r\n* @extends module:enyo/Control~Control\r\n* @mixes moonstone/CheckboxItem/CheckboxItemAccessibilitySupport~CheckboxItemAccessibilitySupport\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/CheckboxItem~CheckboxItem.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.CheckboxItem',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Item,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/CheckboxItem~CheckboxItem.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Boolean value indicating whether checkbox is currently checked.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tchecked: false,\r\n\r\n\t\t/**\r\n\t\t* Boolean value indicating whether checkbox is currently active item in group.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tactive: false,\r\n\r\n\t\t/**\r\n\t\t* If `true`, checkbox will be displayed on the right side of the checkbox item;\r\n\t\t* otherwise, it will be displayed on the left side.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcheckboxOnRight: false,\r\n\r\n\t\t/**\r\n\t\t* If `true`, the value of the\r\n\t\t* [checked]{@link module:moonstone/CheckboxItem~CheckboxItem#checked} property cannot be\r\n\t\t* changed through user input.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tlocked: false,\r\n\r\n\t\t/**\r\n\t\t* Name of a font-based icon to use when displaying the checkbox. Consult\r\n\t\t* {@link module:moonstone/Icon~Icon} for valid values.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'check'\r\n\t\t* @public\r\n\t\t*/\r\n\t\ticon: 'check',\r\n\r\n\t\t/**\r\n\t\t* Optional path to an image asset. May be used to customize checkbox appearance.\r\n\t\t*\r\n\t\t* @type {String|module:enyo/resolution#selectSrc~src}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsrc: '',\r\n\r\n\t\t/**\r\n\t\t* If used as the base control within a {@link module:moonstone/DataList~DataList} or\r\n\t\t* {@glossary subkind}, this should be set to `false` so that selection support can be\r\n\t\t* synchronized to the checked state of this control.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\thandleTapEvent: true\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\r\n\t\t/**\r\n\t\t* {@link module:moonstone/CheckboxItem~CheckboxItem#onActivate}\r\n\t\t*/\r\n\t\tonActivate: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-checkbox-item',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tontap: 'tap',\r\n\t\tonActivate: 'decorateActivateEvent'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'client', mixins: [MarqueeItem], classes: 'moon-checkbox-item-label-wrapper'},\r\n\t\t{name: 'input', kind: Checkbox, accessibilityDisabled: true, spotlight: false}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: 'allowHtml', to: '$.client.allowHtml'},\r\n\t\t{from: 'active', to: '$.input.active', oneWay: false}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tItem.prototype.create.apply(this, arguments);\r\n\t\tthis.disabledChanged();\r\n\t\tthis.checkboxOnRightChanged();\r\n\t\tthis.lockedChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trendered: function () {\r\n\t\tItem.prototype.rendered.apply(this, arguments);\r\n\t\tif (this.get('src') != null || this.get('icon') != null) {\r\n\t\t\tthis.srcChanged();\r\n\t\t\tthis.iconChanged();\r\n\t\t}\r\n\t\tthis.checkedChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdisabledChanged: function () {\r\n\t\tItem.prototype.disabledChanged.apply(this, arguments);\r\n\t\tthis.$.input.set('disabled', this.disabled);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcheckedChanged: function () {\r\n\t\tthis.$.input.set('checked', this.checked);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcheckboxOnRightChanged: function () {\r\n\t\tthis.addRemoveClass('left-handed', !this.checkboxOnRight);\r\n\t},\r\n\r\n\t/**\r\n\t* waterfall event\r\n\t* @fires module:enyo/Control~Control#ontap\r\n\t* @private\r\n\t*/\r\n\ttap: function (sender, ev) {\r\n\t\tif (this.disabled) return true;\r\n\t\tif (this.handleTapEvent) {\r\n\t\t\tif (sender != this.$.input) {\r\n\t\t\t\tthis.waterfallDown('ontap', ev, sender);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:moonstone/CheckboxItem~CheckboxItem#onActivate\r\n\t* @private\r\n\t*/\r\n\tdecorateActivateEvent: function (sender, ev) {\r\n\t\tev.toggledControl = this;\r\n\t\tthis.set('checked', this.$.input.checked);\r\n\t\tev.checked = this.checked;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontentChanged: function () {\r\n\t\tthis.$.client.set('content', this.content);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tlockedChanged: function() {\r\n\t\tthis.$.input.set('locked', this.locked);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ticonChanged: function() {\r\n\t\tthis.$.input.set('icon', this.icon);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsrcChanged: function() {\r\n\t\tthis.$.input.set('src', this.src);\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @default checkbox\r\n\t* @type {String}\r\n\t* @see enyo/AccessibilitySupport~AccessibilitySupport#accessibilityRole\r\n\t* @public\r\n\t*/\r\n\taccessibilityRole: 'checkbox',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{from: 'checked', to: 'aria-checked'}\r\n\t]\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/LabeledTextItem~LabeledTextItem} kind.\r\n* @module moonstone/LabeledTextItem\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tItem = require('../Item'),\r\n\tMarquee = require('../Marquee');\r\n\r\n/**\r\n* {@link module:moonstone/LabeledTextItem~LabeledTextItem}, which extends {@link module:moonstone/Item~Item}, is a\r\n* [control]{@link module:enyo/Control~Control} that combines text content with a text label and\r\n* marquees it.\r\n*\r\n* @class LabeledTextItem\r\n* @extends module:moonstone/Item~Item\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/LabeledTextItem~LabeledTextItem.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.LabeledTextItem',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Item,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [Marquee.Support],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-labeledtextitem',\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/LabeledTextItem~LabeledTextItem.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* The label to be displayed along with the text.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tlabel: '',\r\n\r\n\t\t/**\r\n\t\t* The text to be displayed in the item.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttext: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: 'label', to: '$.header.content'},\r\n\r\n\t\t// Accessibility\r\n\t\t{from: '_accessibilityText', to: '$.text.accessibilityLabel'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents:[\r\n\t\t{name: 'header', kind: Marquee.Text, classes: 'moon-labeledtextitem-header'},\r\n\t\t{name: 'text', classes: 'moon-labeledtextitem-text'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tItem.prototype.create.apply(this, arguments);\r\n\t\tthis.textChanged();\r\n\t},\r\n\r\n\t/**\r\n\t/* @private\r\n\t*/\r\n\ttextChanged: function () {\r\n\t\tvar validValue = this.text || this.text === 0;\r\n\t\tthis.addRemoveClass('with-text', validValue);\r\n\t\tthis.$.text.set('content', this.text);\r\n\t\tif (validValue) this.$.text.detectTextDirectionality(this.text);\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_accessibilityText: '',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: ['label', 'text', 'accessibilityHint', 'accessibilityLabel'], method: function () {\r\n\t\t\tvar text = this._accessibilityText ? this._accessibilityText : this.text,\r\n\t\t\t\tcontent = this.label + ' ' + text ,\r\n\t\t\t\tprefix = this.accessibilityLabel || content || null,\r\n\t\t\t\tlabel = this.accessibilityHint && prefix && (prefix + ' ' + this.accessibilityHint) ||\r\n\t\t\t\t\t\tthis.accessibilityHint ||\r\n\t\t\t\t\t\tthis.accessibilityLabel ||\r\n\t\t\t\t\t\tnull;\r\n\r\n\t\t\t\tthis.setAriaAttribute('aria-label', label);\r\n\t\t}}\r\n\t]\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/SelectableItem~SelectableItem} kind.\r\n* @module moonstone/SelectableItem\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutils = require('enyo/utils');\r\n\r\nvar\r\n\tItem = require('../Item');\r\n\r\n/**\r\n* Fires when the item is tapped. No event-specific data is sent with this event.\r\n*\r\n* @event module:moonstone/SelectableItem~SelectableItem#onActivate\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/SelectableItem~SelectableItem} is a {@link module:moonstone/Item~Item} with a flag to track\r\n* selection state.  It is particularly useful within the context of the\r\n* [Enyo Group API]{@link module:enyo/Group~Group}.\r\n*\r\n* When selected, the item appears as underlined.\r\n*\r\n* If multiple SelectableItem objects are used in a group, only one of them\r\n* may be in the selected state at a given time.\r\n*\r\n* @class SelectableItem\r\n* @extends module:moonstone/Item~Item\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/SelectableItem~SelectableItem.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.SelectableItem',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Item,\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-selectable-item',\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonActivate: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/SelectableItem~SelectableItem.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Will be `true` if this item is currently selected; otherwise, `false`.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tselected: false,\r\n\r\n\t\t/**\r\n\t\t* For use with the [Enyo Group API]{@link module:enyo/Group~Group}. Will be `true` if this item\r\n\t\t* is the selected item in the group. Within this kind, the\r\n\t\t* [selected]{@link module:moonstone/SelectableItem~SelectableItem#selected} and `active` properties appear to\r\n\t\t* behave similarly; however, `active` is meant to be used by {@link module:enyo/Group~Group},\r\n\t\t* while `selected` is to be used for changing selection state.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tactive: false,\r\n\t\t\r\n\t\t/**\r\n\t\t* If used as the base control within a {@link module:moonstone/DataList~DataList} or {@glossary subkind},\r\n\t\t* this should be set to `false` so that selection support can be synchronized to the\r\n\t\t* checked state of this control.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\thandleTapEvent: true\r\n\t},\r\n\t\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: function() {\r\n\t\tItem.prototype.create.apply(this, arguments);\r\n\t\tthis.contentChanged();\r\n\t\tthis.updateSelectedValue();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trendered: function() {\r\n\t\tItem.prototype.rendered.apply(this, arguments);\r\n\t\tthis.updateActiveValue();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshouldDoTransition: function(selected) {\r\n\t\treturn selected === true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttap: function(sender, e) {\r\n\t\tif (this.disabled) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (this.handleTapEvent) {\r\n\t\t\tthis.setActive(!this.getActive());\r\n\t\t\tthis.bubble('onchange');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateSelectedValue: function() {\r\n\t\tvar selected = this.getSelected();\r\n\t\tthis.addRemoveClass('selected', selected);\r\n\t\tthis.setNodeProperty('selected', selected);\r\n\t\tthis.setAttribute('selected', selected ? 'selected' : '');\r\n\t\tthis.reflow();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateActiveValue: function() {\r\n\t\tthis.setActive(this.getSelected());\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tselectedChanged: function() {\r\n\t\tthis.updateSelectedValue();\r\n\t\tthis.updateActiveValue();\r\n\t},\r\n\r\n\t/**\r\n\t* For use with the [Enyo Group API]{@link module:enyo/Group~Group}, which is supported by this object.\r\n\t* Called when the active item within the group changes. The\r\n\t* [active]{@link module:moonstone/SelectableItem~SelectableItem#active} property and\r\n\t* [onActivate]{@link module:moonstone/SelectableItem~SelectableItem#onActivate} event are both part of the\r\n\t* Group API.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tactiveChanged: function() {\r\n\t\tthis.active = utils.isTrue(this.active);\r\n\t\tthis.setSelected(this.active);\r\n\t\tthis.resetMarquee();\r\n\t\tthis.bubble('onActivate');\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @default radio\r\n\t* @type {String}\r\n\t* @see enyo/AccessibilitySupport~AccessibilitySupport#accessibilityRole\r\n\t* @public\r\n\t*/\r\n\taccessibilityRole: 'radio',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{from: 'selected', to: 'aria-checked'}\r\n\t]\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Drawers~Drawers} kind.\r\n* @module moonstone/Drawers\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdispatcher = require('enyo/dispatcher'),\r\n\tAnimator = require('enyo/Animator'),\r\n\tControl = require('enyo/Control'),\r\n\tDrawer = require('enyo/Drawer'),\r\n\tEnyoHistory = require('enyo/History'),\r\n\tdom = require('enyo/dom');\r\n\r\nvar\r\n\toptions = require('../options'),\r\n\tIcon = require('../Icon'),\r\n\tItem = require('../Item'),\r\n\tHistorySupport = require('../HistorySupport');\r\n\r\nvar\r\n\t$L = require('../i18n'),\r\n\tMoonDrawer = require('./Drawer');\r\n\r\n/**\r\n* {@link module:moonstone/Drawers~Drawers} is a container kind designed to hold\r\n* a set of {@link module:moonstone/Drawers/Drawer~Drawer} objects and client content.\r\n* The [drawers]{@link module:moonstone/Drawers~Drawers#drawers} property accepts\r\n* an array of Drawer controls. The associated handles are positioned in their\r\n* own small drawer, centered at the top of the \"dresser\" (the region containing\r\n* the array of Drawer controls and the activator nub).\r\n*\r\n* When a handle is selected, it opens the corresponding Drawer object's main\r\n* drawer or control drawer, depending on how the Drawer object is configured.\r\n* The control's child components may be of any kind.\r\n*\r\n* ```\r\n* var\r\n* \tkind = require('enyo/kind'),\r\n* \tDrawers = require('moonstone/Drawers'),\r\n* \tDrawer = Drawers.Drawer;\r\n*\r\n* {\r\n*\tkind: Drawers,\r\n*\tdrawers: [\r\n*\t\t{\r\n*\t\t\tname: 'musicDrawer',\r\n*\t\t\tkind: Drawer,\r\n*\t\t\thandle: {content: 'Handle'},\r\n*\t\t\tcomponents: [\r\n*\t\t\t\t{content: 'Drawer Content'}\r\n*\t\t\t],\r\n*\t\t\tcontrolDrawerComponents: [\r\n*\t\t\t\t{content: 'Controls'}\r\n*\t\t\t]\r\n*\t\t}\r\n*\t],\r\n*\tcomponents: [\r\n*\t\t{content: 'Content Area'}\r\n*\t]\r\n* }\r\n* ```\r\n*\r\n* @class Drawers\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/Drawers~Drawers.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Drawers',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins : [HistorySupport],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-drawers enyo-fit',\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/Drawers~Drawers.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Populate with an array of {@link module:moonstone/Drawers/Drawer~Drawer} components.\r\n\t\t*\r\n\t\t* @type {Object[]}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdrawers: null,\r\n\r\n\t\t/**\r\n\t\t* When using a font-based icon, the name of the icon to be used.\r\n\t\t* The following icon names are valid:\r\n\t\t*\r\n\t\t* 'drawer'\r\n\t\t* 'arrowlargeup'\r\n\t\t* 'arrowlargedown'\r\n\t\t* 'arrowlargeleft'\r\n\t\t* 'arrowlargeright'\r\n\t\t* 'arrowsmallup'\r\n\t\t* 'arrowsmalldown'\r\n\t\t* 'arrowsmallleft'\r\n\t\t* 'arrowsmallright'\r\n\t\t* 'closex'\r\n\t\t* 'check'\r\n\t\t* 'search'\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\ticon: '',\r\n\r\n\t\t/**\r\n\t\t* URL specifying path to icon image.\r\n\t\t*\r\n\t\t* @type {String|module:enyo/resolution#selectSrc~src}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsrc: ''\r\n\t},\r\n\r\n\t/**\r\n\t* Default icon displayed on drawer handle when open\r\n\t*\r\n\t* @type {String}\r\n\t* @default 'arrowsmalldown'\r\n\t* @private\r\n\t*/\r\n\ticonClosed: 'arrowsmalldown',\r\n\r\n\t/**\r\n\t* Default icon displayed on drawer handle when closed\r\n\t*\r\n\t* @type {String}\r\n\t* @default 'arrowsmallup'\r\n\t* @private\r\n\t*/\r\n\ticonOpen: 'arrowsmallup',\r\n\r\n\t/**\r\n\t* Cached value of the top position of the client area. Used for non-accelerated animation.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default 0\r\n\t* @private\r\n\t*/\r\n\tclientTop: 0,\r\n\r\n\t/**\r\n\t* Value for Drawer open or close state\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @private\r\n\t*/\r\n\t_activated: false,\r\n\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taccessibilityPreventScroll: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\t//* Handlers to update the activator when the state of the contained drawers changes\r\n\t\tonActivate: 'drawerActivated',\r\n\t\tonDeactivate: 'drawerDeactivated',\r\n\t\tonDrawerAnimationEnd: 'drawerAnimationComplete',\r\n\t\tonSpotlightDown: 'spotDown',\r\n\t\tonSpotlightUp: 'spotUp'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'activator', kind: Control, classes: 'moon-drawers-activator', spotlight: true, ontap: 'activatorTapped', components: [\r\n\t\t\t{name: 'activatorIcon', kind: Icon, classes: 'moon-drawers-activator-icon', small: false}\r\n\t\t]},\r\n\t\t{name: 'handleContainer', kind: Drawer, classes: 'moon-drawers-handle-container', resizeContainer: false, open: false, spotlightDisabled: true, components: [\r\n\t\t\t{name: 'handles', kind: Control, classes: 'moon-neutral moon-drawers-handles'}\r\n\t\t]},\r\n\t\t{name: 'drawers', kind: Control, classes: 'moon-drawers-drawer-container'},\r\n\t\t{name: 'client', kind: Control, classes: 'moon-drawers-client'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\teventsToCapture: {\r\n\t\tontap: 'captureTapSelect',\r\n\t\tonSpotlightFocus: 'captureSpotFocus',\r\n\t\tonSpotlightSelect: 'captureTapSelect'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tthis.drawers = this.$.drawers.createComponents(this.drawers, {kind: MoonDrawer, owner: this.owner});\r\n\t\tif (!options.accelerate) this.createComponent({name: 'animator', kind: Animator, onStep: 'animationStep'});\r\n\t\tthis.setupHandles();\r\n\t\tthis._activatedChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trendered: function () {\r\n\t\tControl.prototype.rendered.apply(this, arguments);\r\n\t\tthis.updateDrawerHeight();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdestroy: function () {\r\n\t\tvar i,\r\n\t\t\tc$ = this.drawers;\r\n\t\tdispatcher.release(this.$.handleContainer);\r\n\t\tfor (i = 0; i < c$.length; i++) {\r\n\t\t\tdispatcher.release(c$[i]);\r\n\t\t}\r\n\t\tControl.prototype.destroy.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsrcChanged: function () {\r\n\t\tthis.updateActivator();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ticonChanged: function () {\r\n\t\tthis.updateActivator();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetupHandles: function () {\r\n\t\tvar i, len, handle,\r\n\t\t\tdef = {kind: Item, owner: this},\r\n\t\t\ttap = this.bindSafely(this.handleTapped);\r\n\r\n\t\tfor (i = 0, len = this.drawers.length; i < len; i++) {\r\n\t\t\thandle = this.$.handles.createComponent(this.drawers[i].handle || {}, def);\r\n\t\t\thandle.addClass('moon-drawers-handle');\r\n\t\t\thandle.tap = tap;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Updates the icon and styling of the activator for the state of the drawer\r\n\t*\r\n\t* @param {Boolean} open Drawer state\r\n\t* @private\r\n\t*/\r\n\tupdateActivator: function (open) {\r\n\t\tthis.set('_activated', !!open, {force: true});\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_activatedChanged: function () {\r\n\t\tvar icon, src;\r\n\r\n\t\tif (this._activated) {\r\n\t\t\tsrc = '';\r\n\t\t\ticon = this.iconOpen;\r\n\t\t} else {\r\n\t\t\tsrc = this.src;\r\n\t\t\ticon = (src && !this.icon) ? '' : (this.icon || this.iconClosed);\r\n\t\t}\r\n\r\n\t\tthis.$.activator.addRemoveClass('open', this._activated);\r\n\t\tthis.$.activatorIcon.set('src', src);\r\n\t\tthis.$.activatorIcon.set('icon', icon);\r\n\t},\r\n\r\n\t/**\r\n\t* Inform each drawer of the total available height\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdateDrawerHeight: function () {\r\n\t\tvar dh = document.body.getBoundingClientRect().height,\r\n\t\t\tdrawer, i;\r\n\t\tfor (i = this.drawers.length - 1; i >= 0; --i) {\r\n\t\t\tdrawer = this.drawers[i];\r\n\t\t\tif (drawer instanceof MoonDrawer) drawer.set('fullHeight', dh);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tactivatorTapped: function () {\r\n\t\tvar handles;\r\n\t\tif (this.isDrawerOpen()) {\r\n\t\t\tthis.closeDrawers();\r\n\t\t} else {\r\n\t\t\thandles = this.$.handles.getControls();\r\n\t\t\tif (handles.length == 1) {\r\n\t\t\t\tthis.openDrawer(handles[0]);\r\n\t\t\t\tthis.updateActivator(true);\r\n\t\t\t} else if (this.$.handleContainer.getOpen()) {\r\n\t\t\t\tthis.closeHandleContainer();\r\n\t\t\t} else {\r\n\t\t\t\tthis.openHandleContainer();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\topenHandleContainer: function () {\r\n\t\tthis.$.handleContainer.spotlightDisabled = false;\r\n\t\tthis.$.handleContainer.setOpen(true);\r\n\t\tthis.updateActivator(true);\r\n\t\tdispatcher.capture(this.$.handleContainer, this.eventsToCapture, this);\r\n\t\tif (this.allowBackKey) {\r\n\t\t\tthis.pushBackHistory();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcloseHandleContainer: function () {\r\n\t\tdispatcher.release(this.$.handleContainer);\r\n\t\tthis.$.handleContainer.spotlightDisabled = true;\r\n\t\tthis.$.handleContainer.setOpen(false);\r\n\t\tthis.updateActivator(this.isDrawerOpen());\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleTapped: function (sender, ev) {\r\n\t\tEnyoHistory.drop();\r\n\t\tthis.openDrawer(ev.originator);\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\topenDrawer: function (handle) {\r\n\t\tvar drawer,\r\n\t\t\thandles = this.$.handles.getControls();\r\n\t\tfor (var index = 0; index < handles.length; ++index) {\r\n\t\t\tif (handle.isDescendantOf(handles[index])) {\r\n\t\t\t\tdrawer = this.$.drawers.getControls()[index];\r\n\t\t\t\tdrawer.show();\r\n\t\t\t\tdrawer.toggleDrawer();\r\n\t\t\t\tthis.closeHandleContainer();\r\n\t\t\t\tdispatcher.capture(drawer, this.eventsToCapture, this);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tisDrawerOpen: function () {\r\n\t\tvar drawers = this.$.drawers.getControls();\r\n\t\tfor (var index = 0; index < drawers.length; ++index) {\r\n\t\t\tif (drawers[index].get('open') || drawers[index].get('controlsOpen')) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcloseDrawers: function () {\r\n\t\tvar drawers = this.$.drawers.getControls();\r\n\t\tfor (var index = 0; index < drawers.length; ++index) {\r\n\t\t\tvar drawer = drawers[index];\r\n\t\t\tif (drawer.get('open') || drawer.get('controlsOpen')) {\r\n\t\t\t\tdispatcher.release(drawer);\r\n\t\t\t\tdrawer.set('open', false);\r\n\t\t\t\tdrawer.set('controlsOpen', false);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.$.client.spotlightDisabled = false;\r\n\t\tthis.updateActivator(false);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcaptureSpotFocus: function (sender, ev) {\r\n\t\t// Only close drawers on 5-way focus in the client (not pointer focus)\r\n\t\tif (ev.dir && ev.dispatchTarget.isDescendantOf(this.$.client)) {\r\n\t\t\tthis.closeDrawers();\r\n\t\t\tthis.closeHandleContainer();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcaptureTapSelect: function (sender, ev) {\r\n\t\t// Any tap or select in the client area closes the dresser/drawer\r\n\t\tif (ev.dispatchTarget.isDescendantOf(this.$.client)) {\r\n\t\t\tthis.closeDrawers();\r\n\t\t\tthis.closeHandleContainer();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Animates the position of the client area when a drawer is opened or closed\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tanimate: function (height) {\r\n\t\tif (options.accelerate) {\r\n\t\t\tdom.transformValue(this.$.client, 'translateY', height + 'px');\r\n\t\t} else {\r\n\t\t\tthis.$.animator.play({\r\n\t\t\t\tstartValue: this.clientTop,\r\n\t\t\t\tendValue: height\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* When `!options.accelerate`, this handles {@link module:enyo/Animator~Animator#onStep}\r\n\t* to update the position of the client area.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tanimationStep: function (sender, event) {\r\n\t\t// cache the last top value to be reused by animate() as the startValue\r\n\t\tthis.clientTop = sender.value;\r\n\t\tthis.$.client.setBounds({top: this.clientTop + 'px'});\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdrawerActivated: function (sender, ev) {\r\n\t\tvar drawer = ev.originator instanceof MoonDrawer ? ev.originator : null;\r\n\t\tif (drawer) {\r\n\t\t\tthis.updateActivator(true);\r\n\t\t\t// show/hide() is expensive. Use spotlightDisabled feature instead\r\n\t\t\tthis.$.client.spotlightDisabled = drawer.open;\r\n\t\t\tthis.animate(ev.height);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdrawerDeactivated: function (sender, ev) {\r\n\t\tvar drawer = ev.originator instanceof MoonDrawer ? ev.originator : null;\r\n\t\tif (drawer) {\r\n\t\t\tif (!drawer.open && !drawer.controlsOpen) this.updateActivator(false);\r\n\t\t\t// show/hide() is expensive. Use spotlightDisabled feature instead\r\n\t\t\tthis.$.client.spotlightDisabled = drawer.open;\r\n\t\t\tthis.animate(ev.height);\r\n\t\t}\r\n\t},\r\n\r\n\tdrawerAnimationComplete: function (sender, ev) {\r\n\t\tvar drawer = ev.originator instanceof MoonDrawer ? ev.originator : null;\r\n\t\tif (drawer && !drawer.open && !drawer.controlsOpen) {\r\n\t\t\tdrawer.hide();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleResize: function () {\r\n\t\tControl.prototype.handleResize.apply(this, arguments);\r\n\t\tthis.updateDrawerHeight();\r\n\t\tthis.updateActivator(false);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbackKeyHandler: function () {\r\n\t\tthis.closeHandleContainer();\r\n\t\treturn true;\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\tariaObservers: [\r\n\t\t{path: ['accessibilityLabel', 'accessibilityHint', '_activated'], method: function() {\r\n\t\t\t// According to drawer is open or close or handleContainer state, drawers activator label is defined.\r\n\t\t\t// In addition, if user add accessibilityLabel, label is determined with accessibilityLabel instead of default string.\r\n\t\t\t// However, if user add only accessibilityHint, hint text is appended to default string.\r\n\t\t\tvar defaultLabel = (this._activated || this.$.handleContainer.getOpen()) ? $L('Close drawer') : $L('Open drawer'),\r\n\t\t\t\tprefix = this.accessibilityLabel || defaultLabel,\r\n\t\t\t\tlabel = this.accessibilityHint && (prefix + ' ' + this.accessibilityHint) ||\r\n\t\t\t\t\t\tprefix;\r\n\t\t\tthis.$.activator.set('accessibilityLabel', label);\r\n\t\t}}\r\n\t]\r\n});\r\n\r\nmodule.exports.Drawer = MoonDrawer;\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Image~Image} kind.\r\n* @module moonstone/Image\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tControl = require('enyo/Control'),\r\n\tImg = require('enyo/Image');\r\n\r\nvar\r\n\tIcon = require('../Icon'),\r\n\tOverlay = require('../Overlay');\r\n\r\n/**\r\n* {@link module:moonstone/Image~Image} is a simple control that wraps an {@link module:enyo/Image~Image} to provide proper\r\n* alignment with text-based controls.\r\n*\r\n* In addition, `moonstone/Image` adds [overlay]{@link module:moonstone/Overlay} support to show controls over the image. This\r\n* can be used to add action icons as in the example below.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tImage = require('moonstone/Image'),\r\n* \t\tIcon = require('moonstone/Icon');\r\n*\r\n* \t{kind: Image, src: 'moonstone/src/assets/movie.png',\r\n* \t\toverlayShowing: 'spotlight', overlayPosition: 'bottom', overlayComponents: [\r\n* \t\t\t{kind: Icon, src: 'moonstone/src/assets/icon-recommended.png'},\r\n* \t\t\t{kind: Icon, icon: 'star'},\r\n* \t\t\t{kind: Icon, src: 'moonstone/src/assets/icon-new.png'}\r\n* \t\t]\r\n* \t}\r\n* ```\r\n*\r\n* For backwards compatibility, component configurations specified using the `components` block\r\n* within a `moonstone/Image` will be mapped to `overlayComponents` and will default the `kind` to be\r\n* {@link module:moonstone/Icon~Icon}. This behavior is considered deprecated and will be removed in a future release.\r\n*\r\n* @class Image\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/Image~Image.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Image',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [Overlay.Support],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-image',\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/Image~Image.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* The URL of the image.\r\n\t\t*\r\n\t\t* @type {String|module:enyo/resolution#selectSrc~src}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsrc: '',\r\n\r\n\t\t/**\r\n\t\t* The `alt` text for the image.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\talt: '',\r\n\r\n\t\t/**\r\n\t\t* If `true`, badges will only be shown when the image is within a\r\n\t\t* spotlightable component that has focus.  Otherwise, any badges provided\r\n\t\t* will always be shown.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tshowBadgesOnSpotlight: false,\r\n\r\n\t\t/**\r\n\t\t* The image sizing strategy. See {@link module:enyo/Image~Image} for details.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsizing: '',\r\n\r\n\t\t/**\r\n\t\t* The image position when [sizing]{@link module:moonstone/Image~Image#sizing} is used.  See\r\n\t\t* {@link module:enyo/Image~Image} for details.\r\n\t\t*\r\n\t\t* @type {Object}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tposition: '',\r\n\r\n\t\t/**\r\n\t\t* See {@link module:enyo/Image~Image#placeholder}\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tplaceholder: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'image', kind: Img}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: 'src', to: '$.image.src'},\r\n\t\t{from: 'alt', to: '$.image.alt'},\r\n\t\t{from: 'sizing', to: '$.image.sizing'},\r\n\t\t{from: 'position', to: '$.image.position'},\r\n\t\t{from: 'placeholder', to: '$.image.placeholder'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tthis.adaptComponentsBlock();\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* Adapting from the prior API. We'll assume that the presence of components but not\r\n\t* overlayComponents means the consumer is expecting the former ImageBadge-style overlay.\r\n\t*\r\n\t* @deprecated Backwards compatibility for `moon/ImageBadge`s within components block\r\n\t* @private\r\n\t*/\r\n\tadaptComponentsBlock: function () {\r\n\t\tvar i, c;\r\n\t\tif (this.components && !this.overlayComponents) {\r\n\t\t\tthis.overlayComponents = this.components;\r\n\t\t\tthis.components = null;\r\n\t\t\tfor (i = this.overlayComponents.length - 1; i >= 0; --i) {\r\n\t\t\t\tc = this.overlayComponents[i];\r\n\t\t\t\tc.kind = c.kind || Icon;\r\n\t\t\t}\r\n\t\t\tthis.overlayPosition = this.overlayPosition || 'bottom';\r\n\t\t\tthis.showBadgesOnSpotlightChanged();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowBadgesOnSpotlightChanged: function (was, is) {\r\n\t\tthis.set('overlayShowing', this.showBadgesOnSpotlight ? 'spotlight' : true);\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/ScrollStrategy~ScrollStrategy} kind.\r\n* @module moonstone/ScrollStrategy\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdispatcher = require('enyo/dispatcher'),\r\n\tdom = require('enyo/dom'),\r\n\tutil = require('enyo/utils'),\r\n\tplatform = require('enyo/platform'),\r\n\tControl = require('enyo/Control'),\r\n\tScrollStrategy = require('enyo/ScrollStrategy'),\r\n\tTouchScrollStrategy = require('enyo/TouchScrollStrategy'),\r\n\tScrollMath = require('enyo/ScrollMath'),\r\n\tSignals = require('enyo/Signals');\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\nvar\r\n\tconfig = require('../options'),\r\n\tPagingControl = require('../PagingControl'),\r\n\tScrollThumb = require('../ScrollThumb');\r\n\r\nfunction calcNodeVisibility (nodePos, nodeSize, scrollPos, scrollSize) {\r\n\treturn (nodePos >= scrollPos && nodePos + nodeSize <= scrollPos + scrollSize)\r\n\t\t? 0\r\n\t\t: nodePos - scrollPos > 0\r\n\t\t\t? 1\r\n\t\t\t: nodePos - scrollPos < 0\r\n\t\t\t\t? -1\r\n\t\t\t\t: 0;\r\n}\r\n\r\n/**\r\n* {@link module:moonstone/ScrollStrategy~ScrollStrategy} inherits from {@link module:enyo/TouchScrollStrategy~TouchScrollStrategy}.\r\n* Its main purpose is to handle scroller paging for {@link module:moonstone/Scroller~Scroller} and\r\n* {@link module:moonstone/DataList~DataList}.\r\n*\r\n* @class ScrollStrategy\r\n* @extends module:enyo/TouchScrollStrategy~TouchScrollStrategy\r\n* @public\r\n*/\r\nvar MoonScrollStrategy = module.exports = kind(\r\n\t/** @lends module:moonstone/ScrollStrategy~ScrollStrategy.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ScrollStrategy',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: TouchScrollStrategy,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/ScrollStrategy~ScrollStrategy.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* The ratio of mousewheel \"delta\" units to pixels scrolled. Increase this value to\r\n\t\t* increase the distance scrolled by the scroll wheel. Note that mice/trackpads do not\r\n\t\t* emit the same delta units per \"notch\" or flick of the scroll wheel/trackpad; that\r\n\t\t* can vary based on intensity and momentum.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 2\r\n\t\t* @public\r\n\t\t*/\r\n\t\tscrollWheelMultiplier: 2,\r\n\r\n\t\t/**\r\n\t\t* The ratio of the maximum distance scrolled by each scroll wheel event to the\r\n\t\t* height/width of the viewport. Setting a value larger than `1` is not advised since,\r\n\t\t* in that scenario, a single scroll event could potentially move more than one\r\n\t\t* viewport's worth of content (depending on the delta received), resulting in skipped\r\n\t\t* content.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0.2\r\n\t\t* @public\r\n\t\t*/\r\n\t\tscrollWheelPageMultiplier: 0.2,\r\n\r\n\t\t/**\r\n\t\t* The ratio of the distance scrolled per tap of the paging button to the height/width\r\n\t\t* of the viewport. Setting a value larger than `1` is not advised since, in that\r\n\t\t* scenario, a single paging button tap would move more than one viewport's worth of\r\n\t\t* content, resulting in skipped content.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0.8\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpaginationPageMultiplier: 0.8,\r\n\r\n\t\t/**\r\n\t\t* The ratio of continuous-scrolling \"delta\" units to pixels scrolled. Increase this\r\n\t\t* value to increase the distance scrolled when the pagination buttons are held.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 8\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpaginationScrollMultiplier: 8,\r\n\r\n\t\t/**\r\n\t\t* If 'true', paging controls are hidden when content fit in scroller\r\n\t\t* even when spotlightPagingControls is true.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\thideScrollColumnsWhenFit: false\r\n\t},\r\n\r\n\t/**\r\n\t* If `true`, measure the size of the scroll columns on initial render.\r\n\t* See {@link module:moonstone/ScrollStrategy~ScrollStrategy#measureScrollColumns} for details.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tmeasureScrollColumns: false,\r\n\r\n\t// The scrollToBoundary configuration parameters below\r\n\t// are considered private for now, but have been factored\r\n\t// this way and are facaded by Scroller so that they can\r\n\t// be changed in one place and could be overridden in case\r\n\t// of emergency.\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tscrollToBoundaryDelay: 100,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tscrollToBoundaryAnimate: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonRequestScrollIntoView : 'requestScrollIntoView',\r\n\t\tonRequestSetupBounds\t: 'requestSetupBounds',\r\n\t\tonenter                 : 'enter',\r\n\t\tonleave                 : 'leave',\r\n\t\tonSpotlightFocused      : 'manageSpotlightFocus',\r\n\t\tonSpotlightBlur         : 'manageSpotlightFocus',\r\n\t\tonSpotlightFocus        : 'store5WayFocusInfo'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttools: [\r\n\t\t{kind: ScrollMath, onScrollStart: 'scrollMathStart', onScroll: 'scrollMathScroll', onScrollStop: 'scrollMathStop', onStabilize: 'scrollMathStabilize'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'clientContainer', kind: Control, classes: 'moon-scroller-client-wrapper', components: [\r\n\t\t\t{name: 'viewport', kind: Control, classes:'moon-scroller-viewport', components: [\r\n\t\t\t\t{name: 'client', kind: Control, classes: 'enyo-touch-scroller enyo-touch-scroller-client matrix-scroll-client matrix3dsurface'}\r\n\t\t\t]}\r\n\t\t]},\r\n\t\t{name: 'vColumn', kind: Control, classes: 'moon-scroller-v-column', components: [\r\n\t\t\t{name: 'pageUpControl', kind: PagingControl, defaultSpotlightDisappear: 'pageDownControl', defaultSpotlightDown: 'pageDownControl', side: 'top', onPaginateScroll: 'paginateScroll', onPaginate: 'paginate', onSpotlightUp: 'spotPaging'},\r\n\t\t\t{name: 'vthumbContainer', kind: Control, classes: 'moon-scroller-thumb-container moon-scroller-vthumb-container', components: [\r\n\t\t\t\t{name: 'vthumb', kind: ScrollThumb, classes: 'moon-scroller-vthumb hidden', axis: 'v'}\r\n\t\t\t]},\r\n\t\t\t{name: 'pageDownControl', kind: PagingControl, defaultSpotlightDisappear: 'pageUpControl', defaultSpotlightUp: 'pageUpControl', side: 'bottom', onPaginateScroll: 'paginateScroll', onPaginate: 'paginate', onSpotlightDown: 'spotPaging'}\r\n\t\t]},\r\n\t\t{name: 'hColumn', kind: Control, classes: 'moon-scroller-h-column', components: [\r\n\t\t\t{name: 'pageLeftControl', kind: PagingControl, defaultSpotlightDisappear: 'pageRightControl', defaultSpotlightRight: 'pageRightControl', side: 'left', onPaginateScroll: 'paginateScroll', onPaginate: 'paginate', onSpotlightLeft: 'spotPaging'},\r\n\t\t\t{name: 'hthumbContainer', kind: Control, classes: 'moon-scroller-thumb-container moon-scroller-hthumb-container', components: [\r\n\t\t\t\t{name: 'hthumb', kind: ScrollThumb, classes: 'moon-scroller-hthumb hidden', axis: 'h'}\r\n\t\t\t]},\r\n\t\t\t{name: 'pageRightControl', kind: PagingControl, defaultSpotlightDisappear: 'pageLeftControl', defaultSpotlightLeft: 'pageLeftControl', side: 'right', onPaginateScroll: 'paginateScroll', onPaginate: 'paginate', onSpotlightRight: 'spotPaging'}\r\n\t\t]},\r\n\t\t{kind: Signals, onSpotlightModeChanged: 'spotlightModeChanged', isChrome: true}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function() {\r\n\t\tTouchScrollStrategy.prototype.create.apply(this, arguments);\r\n\t\tthis.transform = dom.canTransform();\r\n\t\tthis.accel = dom.canAccelerate();\r\n\t\tthis.container.addClass('enyo-touch-strategy-container');\r\n\t\tthis.translation = this.accel ? 'matrix3d' : 'matrix';\r\n\t\tthis.showHideScrollColumns(this.spotlightPagingControls);\r\n\t},\r\n\r\n\t/**\r\n\t* Calls super-super-inherited (i.e., skips {@link module:enyo/TouchScrollStrategy~TouchScrollStrategy}'s) `rendered()`\r\n\t* function to avoid thumb flicker at render time. Then shows or hides page controls.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\trendered: function() {\r\n\t\tvar measure = this.measureScrollColumns && !ScrollStrategy._scrollColumnsMeasured;\r\n\r\n\t\tif (measure) {\r\n\t\t\t// We temporarily add the v-scroll-enabled class so that\r\n\t\t\t// we can measure the width of the vertical scroll column\r\n\t\t\t// after rendering and store it as a static property -- see\r\n\t\t\t// _measureScrollColumns().\r\n\t\t\t//\r\n\t\t\t// The v-scroll-enabled class will automatically be removed\r\n\t\t\t// after we measure, when we call setupBounds() (which in\r\n\t\t\t// turn calls enableDisableScrollColumns()).\r\n\t\t\tthis.$.clientContainer.addClass('v-scroll-enabled');\r\n\t\t}\r\n\r\n\t\tScrollStrategy.prototype.rendered.apply(this, arguments);\r\n\r\n\t\tif (measure) {\r\n\t\t\tthis._measureScrollColumns();\r\n\t\t}\r\n\t\tthis.setupBounds();\r\n\t\tthis.spotlightPagingControlsChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* Moonstone's data grid list delegate uses scroll column metrics to calculate\r\n\t* available space for list controls. These metrics are derived via some LESS\r\n\t* calculations, so to avoid brittleness we choose to measure them from the DOM\r\n\t* rather than mirror the calculations in JavaScript.\r\n\t*\r\n\t* Upon request, we do the measurement here (the first time a scroller is rendered)\r\n\t* and cache the values in static properties, to avoid re-measuring each time we need\r\n\t* the metrics.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_measureScrollColumns: function() {\r\n\t\tvar cs;\r\n\t\tcs = dom.getComputedStyle(this.$.clientContainer.hasNode());\r\n\t\tMoonScrollStrategy.vScrollColumnSize =\r\n\t\t\tparseInt(cs['padding-left'], 10) +\r\n\t\t\tparseInt(cs['padding-right'], 10);\r\n\t\tMoonScrollStrategy.hScrollColumnSize = this.$.hColumn.hasNode().offsetHeight;\r\n\t\tMoonScrollStrategy._scrollColumnsMeasured = true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleResize: function() {\r\n\t\tthis.resizing = true;\r\n\t\tthis.resetCachedValues();\r\n\t\tthis.setupBounds();\r\n\t\tthis.resizing = false;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetupBounds: function() {\r\n\t\tthis.calcBoundaries();\r\n\t\tthis.syncScrollMath();\r\n\t\tthis.enableDisableScrollColumns();\r\n\t\tthis.remeasure();\r\n\t\tthis.setThumbSizeRatio();\r\n\t\tthis.clampScrollPosition();\r\n\t},\r\n\r\n\t/**\r\n\t* Gets the left scroll position within the scroller.\r\n\t*\r\n\t* @returns {Number} The left scroll position.\r\n\t* @public\r\n\t*/\r\n\tgetScrollLeft: function() {\r\n\t\treturn this.scrollLeft;\r\n\t},\r\n\r\n\t/**\r\n\t* Gets the top scroll position within the scroller.\r\n\t*\r\n\t* @returns {Number} The top scroll position.\r\n\t* @public\r\n\t*/\r\n\tgetScrollTop: function() {\r\n\t\treturn this.scrollTop;\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the left scroll position within the scroller.\r\n\t*\r\n\t* @param {Number} left - The desired scroll-left measurement (in pixels).\r\n\t* @public\r\n\t*/\r\n\tsetScrollLeft: function(left) {\r\n\t\tvar m = this.$.scrollMath,\r\n\t\t\tp = this.scrollLeft;\r\n\t\tm.setScrollX(-left);\r\n\t\tm.stabilize();\r\n\t\tif (p != -m.x) {\r\n\t\t\t// We won't get a native scroll event,\r\n\t\t\t// so need to make one ourselves\r\n\t\t\tm.doScroll();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the top scroll position within the scroller.\r\n\t*\r\n\t* @param {Number} top - The desired scroll-top measurement (in pixels).\r\n\t* @public\r\n\t*/\r\n\tsetScrollTop: function(top) {\r\n\t\tvar m = this.$.scrollMath,\r\n\t\t\tp = this.scrollTop;\r\n\t\tm.setScrollY(-top);\r\n\t\tm.stabilize();\r\n\t\tif (p != -m.y) {\r\n\t\t\t// We won't get a native scroll event,\r\n\t\t\t// so need to make one ourselves\r\n\t\t\tm.doScroll();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Scrolls to specific x/y positions within the scroll area.\r\n\t*\r\n\t* @param {Number} x - The horizontal position.\r\n\t* @param {Number} y - The vertical position.\r\n\t* @param {Boolean} [animate=true] - Whether to animate to the new scroll position.\r\n\t* @public\r\n\t*/\r\n\tscrollTo: function(x, y, animate) {\r\n\t\tthis.stop();\r\n\t\tif (this.resizing || animate === false) {\r\n\t\t\tvar b = this.getScrollBounds();\r\n\t\t\tx = Math.max(Math.min(x, b.maxLeft), 0);\r\n\t\t\ty = Math.max(Math.min(y, b.maxTop),  0);\r\n\t\t\tthis.effectScroll(x, y);\r\n\t\t\tthis.syncScrollMath();\r\n\t\t\tthis.bubble('onScroll');\r\n\t\t} else {\r\n\t\t\tthis._scrollTo(x, y);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Overrides {@link module:enyo/TouchScrollStrategy~TouchScrollStrategy#maxHeightChanged}.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tmaxHeightChanged: function() {\r\n\t\t// content should cover scroller at a minimum if there's no max-height.\r\n\t\tthis.$.client.applyStyle('min-height', this.maxHeight ? null : '100%');\r\n\t\tthis.$.client.applyStyle('max-height', this.maxHeight);\r\n\t\tthis.$.clientContainer.addRemoveClass('enyo-scrollee-fit', !this.maxHeight);\r\n\t},\r\n\r\n\t// Event handling\r\n\r\n\t/**\r\n\t* Disables dragging on non-touch devices.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshouldDrag: function(sender, event) {\r\n\t\tif (platform.touch) {\r\n\t\t\tevent.dragger = this;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tscrollMathStart: function () {\r\n\t\tif (platform.touch) {\r\n\t\t\tSpotlight.mute(this);\r\n\t\t}\r\n\t\treturn TouchScrollStrategy.prototype.scrollMathStart.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tscrollMathStop: function () {\r\n\t\tvar r = TouchScrollStrategy.prototype.scrollMathStop.apply(this, arguments);\r\n\t\tif (platform.touch) {\r\n\t\t\tSpotlight.unmute(this);\r\n\t\t}\r\n\t\treturn r;\r\n\t},\r\n\r\n\t/**\r\n\t* On `hold` event, stops scrolling.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\thold: function(sender, event) {\r\n\t\tif (!this.isPageControl(event.originator)) {\r\n\t\t\tTouchScrollStrategy.prototype.hold.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* On `down` event, stops scrolling.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdown: function(sender, event) {\r\n\t\tif (platform.touch) {\r\n\t\t\tevent.configureHoldPulse({\r\n\t\t\t\tendHold: 'onMove'\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (!this.isPageControl(event.originator) && this.isScrolling() && !this.isOverscrolling()) {\r\n\t\t\tevent.preventTap();\r\n\t\t\tthis.stop();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* On `mousewheel` event, scrolls a fixed amount.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tmousewheel: function(sender, event) {\r\n\t\tif (this.useMouseWheel) {\r\n\t\t\tvar isScrolling = this.isScrolling();\r\n\t\t\tthis.setupBounds();\r\n\t\t\tthis.scrollBounds = this._getScrollBounds();\r\n\r\n\t\t\tvar x = null,\r\n\t\t\t\ty = null,\r\n\t\t\t\twheelDelta = null,\r\n\t\t\t\tshowVertical = this.showVertical(),\r\n\t\t\t\tshowHorizontal = this.showHorizontal(),\r\n\t\t\t\tdir = null,\r\n\t\t\t\tval = null,\r\n\t\t\t\tmax = null,\r\n\t\t\t\tdelta = null\r\n\t\t\t;\r\n\r\n\t\t\t//* If we don't have to scroll, allow mousewheel event to bubble\r\n\t\t\tif (!showVertical && !showHorizontal) {\r\n\t\t\t\tthis.scrollBounds = null;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (showVertical) {\r\n\t\t\t\tdir = event.wheelDeltaY >= 0 ? 1 : -1;\r\n\t\t\t\tval = Math.abs(event.wheelDeltaY * this.scrollWheelMultiplier);\r\n\t\t\t\tmax = this.scrollBounds.clientHeight * this.scrollWheelPageMultiplier;\r\n\t\t\t\tdelta = Math.min(val, max);\r\n\t\t\t\ty = (isScrolling ? this.lastScrollToY : this.scrollTop) + -dir * delta;\r\n\t\t\t}\r\n\r\n\t\t\tif (showHorizontal) {\r\n\t\t\t\tvar intDirection = 1;\r\n\t\t\t\t// Reverse the direction for RTL\r\n\t\t\t\tif (this.$.pageLeftControl.rtl) {\r\n\t\t\t\t\tintDirection = -1;\r\n\t\t\t\t}\r\n\t\t\t\t// only use vertical wheel for horizontal scrolling when no vertical bars shown\r\n\t\t\t\twheelDelta = !showVertical && event.wheelDeltaY || event.wheelDeltaX;\r\n\t\t\t\tdir = (wheelDelta >= 0 ? 1 : -1) * intDirection;\r\n\t\t\t\tval = Math.abs(wheelDelta * this.scrollWheelMultiplier);\r\n\t\t\t\tmax = this.scrollBounds.clientWidth * this.scrollWheelPageMultiplier;\r\n\t\t\t\tdelta = Math.min(val, max);\r\n\t\t\t\tx = (isScrolling ? this.lastScrollToX : this.scrollLeft) + -dir * delta;\r\n\t\t\t}\r\n\r\n\t\t\tthis.scrollTo(x, y);\r\n\t\t\tif (!isScrolling && this.thumb) {\r\n\t\t\t\tthis.showThumbs();\r\n\t\t\t\tthis.delayHideThumbs(100);\r\n\t\t\t}\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.scrollBounds = null;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* On `enter` event, sets `this.hovering` to `true` and shows pagination controls.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tenter: function(sender, event) {\r\n\t\tthis.hovering = true;\r\n\t\tthis.calcBoundaries();\r\n\t\tthis.enableDisableScrollColumns();\r\n\t\tthis.showHideScrollColumns(true);\r\n\t\tthis.updateHoverOnPagingControls(true);\r\n\t},\r\n\r\n\t/**\r\n\t* On `leave` event, sets `this.hovering` to `false` and hides pagination controls.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tleave: function(sender, event) {\r\n\t\tthis.hovering = false;\r\n\t\tthis.showHideScrollColumns(false);\r\n\t},\r\n\r\n\t/**\r\n\t* Show / hide pagination controls in response to 5-way focus / blur events.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tmanageSpotlightFocus: function(sender, event) {\r\n\t\tif (!Spotlight.getPointerMode()) {\r\n\t\t\tthis.showHideScrollColumns(event.type == 'onSpotlightFocused');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Handles `paginate` events sent from [paging control]{@link module:moonstone/PagingControl~PagingControl} buttons.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpaginate: function(sender, event) {\r\n\t\tvar sb = this.getScrollBounds(),\r\n\t\t\tscrollYDelta = sb.clientHeight * this.paginationPageMultiplier,\r\n\t\t\tscrollXDelta = sb.clientWidth * this.paginationPageMultiplier,\r\n\t\t\tside = event.originator.side,\r\n\t\t\tx = this.getScrollLeft(),\r\n\t\t\ty = this.getScrollTop()\r\n\t\t;\r\n\r\n\t\tswitch (side) {\r\n\t\tcase 'left':\r\n\t\t\tx -= scrollXDelta;\r\n\t\t\tbreak;\r\n\t\tcase 'top':\r\n\t\t\ty -= scrollYDelta;\r\n\t\t\tbreak;\r\n\t\tcase 'right':\r\n\t\t\tx += scrollXDelta;\r\n\t\t\tbreak;\r\n\t\tcase 'bottom':\r\n\t\t\ty += scrollYDelta;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tx = Math.max(0, Math.min(x, sb.maxLeft));\r\n\t\ty = Math.max(0, Math.min(y, sb.maxTop));\r\n\r\n\t\tthis._scrollTo(x, y);\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* Handles `paginateScroll` events sent from [paging control]{@link module:moonstone/PagingControl~PagingControl}\r\n\t* buttons.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpaginateScroll: function(sender, event) {\r\n\t\tif (!event || !event.scrollDelta) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar delta = event.scrollDelta * this.paginationScrollMultiplier,\r\n\t\t\tside = event.originator.side,\r\n\t\t\tval\r\n\t\t;\r\n\r\n\t\tswitch (side) {\r\n\t\t\tcase 'left':\r\n\t\t\t\tval = this.scrollLeft - delta;\r\n\t\t\t\t// When we hit the left, bounce and end scrolling\r\n\t\t\t\tif (val <= -this.$.scrollMath.leftBoundary) {\r\n\t\t\t\t\tthis.setScrollLeft(-this.$.scrollMath.leftBoundary);\r\n\t\t\t\t\tthis.$.pageLeftControl.hitBoundary();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setScrollLeft(val);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'top':\r\n\t\t\t\tval = this.scrollTop - delta;\r\n\t\t\t\t// When we hit the top, bounce and end scrolling\r\n\t\t\t\tif (val <= -this.$.scrollMath.topBoundary) {\r\n\t\t\t\t\tthis.setScrollTop(-this.$.scrollMath.topBoundary);\r\n\t\t\t\t\tthis.$.pageUpControl.hitBoundary();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setScrollTop(val);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'right':\r\n\t\t\t\tval = this.scrollLeft + delta;\r\n\t\t\t\t// When we hit the right, bounce and end scrolling\r\n\t\t\t\tif (val >= -this.$.scrollMath.rightBoundary) {\r\n\t\t\t\t\tthis.setScrollLeft(-this.$.scrollMath.rightBoundary);\r\n\t\t\t\t\tthis.$.pageRightControl.hitBoundary();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setScrollLeft(val);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'bottom':\r\n\t\t\t\tval = this.scrollTop + delta;\r\n\t\t\t\t// When we hit the bottom, bounce and end scrolling\r\n\t\t\t\tif (val >= -this.$.scrollMath.bottomBoundary) {\r\n\t\t\t\t\tthis.setScrollTop(-this.$.scrollMath.bottomBoundary);\r\n\t\t\t\t\tthis.$.pageDownControl.hitBoundary();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setScrollTop(val);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* Scrolls to specific x/y positions within the scroll area.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_scrollTo: function(x, y) {\r\n\t\tthis.lastScrollToX = x;\r\n\t\tthis.lastScrollToY = y;\r\n\t\tthis.$.scrollMath.scrollTo(x, y);\r\n\t},\r\n\r\n\t/**\r\n\t* Returns `true` if passed-in [control]{@link module:enyo/Control~Control} is one of four page controls.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tisPageControl: function(control) {\r\n\t\treturn (\r\n\t\t\tcontrol === this.$.pageUpControl ||\r\n\t\t\tcontrol === this.$.pageDownControl ||\r\n\t\t\tcontrol === this.$.pageLeftControl ||\r\n\t\t\tcontrol === this.$.pageRightControl\r\n\t\t);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcBoundaries: function() {\r\n\t\tvar s = this.$.scrollMath || this,\r\n\t\t\tb = this._getScrollBounds()\r\n\t\t;\r\n\t\ts.bottomBoundary = -1 * b.maxTop;\r\n\t\ts.rightBoundary = -1 * b.maxLeft;\r\n\r\n\t\tthis.updatePagingControlState();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\teffectScroll: function(x, y) {\r\n\t\tthis.scrollLeft = (x !== null && !isNaN(x))? x: (this.scrollLeft || 0);\r\n\t\tthis.scrollTop  = (y !== null && !isNaN(y))? y: (this.scrollTop  || 0);\r\n\t\tdom.transformValue(this.$.client, this.translation, this.generateMatrix());\r\n\r\n\t\t// since effectScroll will happen frequently but paging control status changes\r\n\t\t// infrequently, fire it immediately and then throttle the next update\r\n\t\tif (!this._updatePagingJob) {\r\n\t\t\tthis.updatePagingControlState();\r\n\t\t} else {\r\n\t\t\tclearTimeout(this._updatePagingJob);\r\n\t\t}\r\n\r\n\t\tthis._updatePagingJob = setTimeout(this.bindSafely(function () {\r\n\t\t\tthis.updatePagingControlState();\r\n\t\t\tthis._updatePagingJob = null;\r\n\t\t}), 32);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgenerateMatrix: function() {\r\n\t\tvar x = -1 * this.scrollLeft,\r\n\t\t\ty = -1 * this.scrollTop\r\n\t\t;\r\n\r\n\t\t/// Reverse the direction for RTL\r\n\t\tif (this.$.pageLeftControl.rtl) {\r\n\t\t\tx*= -1;\r\n\t\t}\r\n\r\n\t\treturn (this.accel)\r\n\t\t\t?   '1,         0,     0,  0, '\r\n\t\t\t+   '0,         1,     0,  0, '\r\n\t\t\t+   '0,         0,     1,  0, '\r\n\t\t\t+    x + ', ' + y + ', 0,  1'\r\n\r\n\t\t\t:   '1, 0, 0, 1, ' + x + ', ' + y\r\n\t\t;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\teffectScrollStop: function() { },\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\teffectOverscroll: function() { },\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightPagingControlsChanged: function() {\r\n\t\tthis.updateHoverOnPagingControls(!this.spotlightPagingControls);\r\n\t\tthis.showHideScrollColumns(this.spotlightPagingControls);\r\n\t\tif (this.generated) {\r\n\t\t\tthis.setupBounds();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateHoverOnPagingControls: function(hover) {\r\n\t\tthis.$.pageLeftControl.addRemoveClass('hover', hover);\r\n\t\tthis.$.pageRightControl.addRemoveClass('hover', hover);\r\n\t\tthis.$.pageUpControl.addRemoveClass('hover', hover);\r\n\t\tthis.$.pageDownControl.addRemoveClass('hover', hover);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdatePagingControlState: function () {\r\n\t\t// Update disabled state of paging controls based on bounds\r\n\t\tvar m = this.$.scrollMath,\r\n\t\t\tb = this._getScrollBounds(),\r\n\t\t\tcanVScroll = b.height > b.clientHeight,\r\n\t\t\tcanHScroll = b.width > b.clientWidth,\r\n\t\t\tdisablePageUp = (b.top <= 0) || !canVScroll,\r\n\t\t\tdisablePageDown = (b.top >= -1 * m.bottomBoundary) || !canVScroll,\r\n\t\t\tdisablePageLeft = (b.left <= 0) || !canHScroll,\r\n\t\t\tdisablePageRight = (b.left >= -1 * m.rightBoundary) || !canHScroll;\r\n\r\n\t\t// Enable all of the paging controls (which are not already enabled) first, so that we\r\n\t\t// are not beholden to any ordering issues that can cause erratic Spotlight behavior.\r\n\t\tif (!disablePageUp) this.$.pageUpControl.set('disabled', false);\r\n\t\tif (!disablePageDown) this.$.pageDownControl.set('disabled', false);\r\n\t\tif (!disablePageLeft) this.$.pageLeftControl.set('disabled', false);\r\n\t\tif (!disablePageRight) this.$.pageRightControl.set('disabled', false);\r\n\r\n\t\tif (disablePageUp) this.$.pageUpControl.set('disabled', true);\r\n\t\tif (disablePageDown) this.$.pageDownControl.set('disabled', true);\r\n\t\tif (disablePageLeft) this.$.pageLeftControl.set('disabled', true);\r\n\t\tif (disablePageRight) this.$.pageRightControl.set('disabled', true);\r\n\t},\r\n\r\n\t/**\r\n\t* Decorate spotlight events from paging controls so user can 5-way out of container\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tspotPaging: function (sender, event) {\r\n\t\tevent.requestLeaveContainer = true;\r\n\t},\r\n\r\n\t/**\r\n\t* Because the thumb columns are a fixed size that impacts the scroll bounds, we capture\r\n\t* the difference for use in thumb rendering math.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsetThumbSizeRatio: function() {\r\n\t\tvar scrollBounds = this.getScrollBounds();\r\n\t\tthis.$.vthumb.setSizeRatio(this.getVerticalThumbBounds().height/scrollBounds.clientHeight);\r\n\t\tthis.$.hthumb.setSizeRatio(this.getHorizontalThumbBounds().width/scrollBounds.clientWidth);\r\n\t},\r\n\r\n\t/**\r\n\t* Store information about the most recent Spotlight focus event on a child of the scroller.\r\n\t* This information is used in `requestScrollIntoView()` to capture the direction of the\r\n\t* 5-way move (if any) that is associated with the request to scroll, since we can use the\r\n\t* direction to help us figure out whether we should scroll all the way to the nearest\r\n\t* boundary.\r\n\t*\r\n\t* Ideally, we'd get information about the direction from the `onRequestScrollIntoView` event\r\n\t* itself, but passing the direction with the event would require changes to Spotlight and to\r\n\t* many individual Moonstone controls, so we're trying this approach for now.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tstore5WayFocusInfo: function (sender, event) {\r\n\t\tif (event.direction) {\r\n\t\t\tthis._focusTarget = event.originator;\r\n\t\t\tthis._focusDirection = event.direction;\r\n\t\t}\r\n\t\telse if (event.focusType === '5-way bounce') {\r\n\t\t\tthis._focusTarget = event.originator;\r\n\t\t\tthis._focusBounce = true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Responds to child components' requests to be scrolled into view.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\trequestScrollIntoView: function(sender, event) {\r\n\t\tvar originator, showVertical, showHorizontal, bounce, direction,\r\n\t\t\tbubble = false;\r\n\t\tif (!Spotlight.getPointerMode() || event.scrollInPointerMode === true) {\r\n\t\t\toriginator = event.originator;\r\n\t\t\tif (originator === this._focusTarget) {\r\n\t\t\t\tbounce = this._focusBounce;\r\n\t\t\t\tdirection = this._focusDirection;\r\n\t\t\t\tthis._focusTarget = this._focusDirection = this._focusBounce = null;\r\n\t\t\t}\r\n\t\t\tif (!bounce) {\r\n\t\t\t\tthis.scrollBounds = this._getScrollBounds();\r\n\t\t\t\tthis.setupBounds();\r\n\t\t\t\tshowVertical = this.showVertical();\r\n\t\t\t\tshowHorizontal = this.showHorizontal();\r\n\t\t\t\tthis.scrollBounds = null;\r\n\t\t\t\tif ((showVertical || showHorizontal) && (originator.getAbsoluteShowing())) {\r\n\t\t\t\t\tthis.animateToControl(originator, event.scrollFullPage, event.scrollInPointerMode || false, direction);\r\n\t\t\t\t\tif ((showVertical && this.$.scrollMath.bottomBoundary) || (showHorizontal && this.$.scrollMath.rightBoundary)) {\r\n\t\t\t\t\t\tthis.alertThumbs();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Scrollers that don't need to scroll bubble their onRequestScrollIntoView,\r\n\t\t\t\t\t// to allow items in nested scrollers to be scrolled\r\n\t\t\t\t\tbubble = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn !bubble;\r\n\t},\r\n\r\n\t/**\r\n\t* Responds to child components' requests to update scroll bounds without\r\n\t* scrolling into view.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\trequestSetupBounds: function(sender, event) {\r\n\t\tif (this.generated) {\r\n\t\t\tthis.scrollBounds = this._getScrollBounds();\r\n\t\t\tthis.setupBounds();\r\n\t\t\tthis.scrollBounds = null;\r\n\t\t\tif ((this.showVertical() && this.$.scrollMath.bottomBoundary) || (this.showHorizontal() && this.$.scrollMath.rightBoundary)) {\r\n\t\t\t\tthis.alertThumbs();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightModeChanged: function(sender, event) {\r\n\t\tvar activatePageControls = this.shouldShowPageControls();\r\n\t\tthis.showHideScrollColumns(activatePageControls);\r\n\t\tthis.updateHoverOnPagingControls(activatePageControls);\r\n\t},\r\n\r\n\t/**\r\n\t* Enables or disables scroll columns.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tenableDisableScrollColumns: function() {\r\n\t\tvar vWas = this.verticalScrollEnabled,\r\n\t\t\thWas = this.horizontalScrollEnabled;\r\n\t\tthis.enableDisableVerticalScrollControls(this.showVertical());\r\n\t\tthis.enableDisableHorizontalScrollControls(this.showHorizontal());\r\n\t\tif ((vWas !== this.verticalScrollEnabled || hWas !== this.horizontalScrollEnabled) && !this.resizing) {\r\n\t\t\tthis.resize();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Enables or disables vertical scroll column.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tenableDisableVerticalScrollControls: function(enabled) {\r\n\t\tthis.$.clientContainer.addRemoveClass('v-scroll-enabled', enabled);\r\n\t\tthis.$.vColumn.addRemoveClass('v-scroll-enabled', enabled);\r\n\t\tthis.$.hColumn.addRemoveClass('v-scroll-enabled', enabled);\r\n\t\tthis.$.pageUpControl.spotlight = enabled && this.spotlightPagingControls;\r\n\t\tthis.$.pageDownControl.spotlight = enabled && this.spotlightPagingControls;\r\n\t\tthis.verticalScrollEnabled = enabled;\r\n\t},\r\n\r\n\t/**\r\n\t* Enables or disables horizontal scroll column.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tenableDisableHorizontalScrollControls: function(enabled) {\r\n\t\tthis.$.clientContainer.addRemoveClass('h-scroll-enabled', enabled);\r\n\t\tthis.$.vColumn.addRemoveClass('h-scroll-enabled', enabled);\r\n\t\tthis.$.hColumn.addRemoveClass('h-scroll-enabled', enabled);\r\n\t\tthis.$.pageLeftControl.spotlight = enabled && this.spotlightPagingControls;\r\n\t\tthis.$.pageRightControl.spotlight = enabled && this.spotlightPagingControls;\r\n\t\tthis.horizontalScrollEnabled = enabled;\r\n\t},\r\n\r\n\t/**\r\n\t* Shows or hides scroll columns.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshowHideScrollColumns: function(show) {\r\n\t\tthis.showHideVerticalScrollColumns(show);\r\n\t\tthis.showHideHorizontalScrollColumns(show);\r\n\t},\r\n\r\n\t/**\r\n\t* Shows or hides vertical scroll columns.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshowHideVerticalScrollColumns: function(show) {\r\n\t\tthis.$.vColumn.addRemoveClass('visible', show || this.spotlightPagingControls);\r\n\t},\r\n\r\n\t/**\r\n\t* Shows or hides horizontal scroll columns.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshowHideHorizontalScrollColumns: function(show) {\r\n\t\tthis.$.hColumn.addRemoveClass('visible', show || this.spotlightPagingControls);\r\n\t},\r\n\r\n\t/**\r\n\t* Returns boolean indicating whether page controls should be shown at all for this scroller.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshouldShowPageControls: function() {\r\n\t\treturn (Spotlight.getPointerMode() && this.hovering && !this.spotlightPagingControls);\r\n\t},\r\n\r\n\t/**\r\n\t* Determines whether we should be showing the vertical scroll column.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshowVertical: function() {\r\n\t\treturn (this.getVertical() == 'scroll' ||\r\n\t\t\t\t(this.getVertical() !== 'hidden' &&\r\n\t\t\t\t((-1 * this.$.scrollMath.bottomBoundary > 0) ||\r\n\t\t\t\t(this.spotlightPagingControls && !this.hideScrollColumnsWhenFit))));\r\n\t},\r\n\r\n\t/**\r\n\t* Determines whether we should be showing the horizontal scroll column.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshowHorizontal: function() {\r\n\t\treturn (this.getHorizontal() == 'scroll' ||\r\n\t\t\t\t(this.getHorizontal() !== 'hidden' &&\r\n\t\t\t\t((-1 * this.$.scrollMath.rightBoundary > 0) ||\r\n\t\t\t\t(this.spotlightPagingControls && !this.hideScrollColumnsWhenFit))));\r\n\t},\r\n\r\n\t/**\r\n\t* Update bounds after change hideScrollColumnsWhenFit option changes.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\thideScrollColumnsWhenFitChanged: function(old) {\r\n\t\tthis.requestSetupBounds();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_getScrollBounds: function() {\r\n\t\tif (this.scrollBounds) {\r\n\t\t\treturn this.scrollBounds;\r\n\t\t}\r\n\t\tvar containerBounds = this.getContainerBounds(),\r\n\t\t\ts = this.getScrollSize(),\r\n\t\t\tb = {\r\n\t\t\t\ttop: this.getScrollTop(),\r\n\t\t\t\tleft: this.getScrollLeft(),\r\n\t\t\t\tclientHeight: containerBounds.height,\r\n\t\t\t\tclientWidth: containerBounds.width,\r\n\t\t\t\theight: s.height,\r\n\t\t\t\twidth: s.width\r\n\t\t\t};\r\n\r\n\t\tb.maxLeft = Math.max(0, b.width - b.clientWidth);\r\n\t\tb.maxTop = Math.max(0, b.height - b.clientHeight);\r\n\r\n\t\tutil.mixin(b, this.getOverScrollBounds());\r\n\r\n\t\treturn b;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetContainerBounds: function() {\r\n\t\tvar containerBounds = this.$.clientContainer.getBounds();\r\n\t\tif(containerBounds) {\r\n\t\t\tvar paddingExtents = dom.calcPaddingExtents(this.$.clientContainer.hasNode());\r\n\t\t\tcontainerBounds.width  -= (paddingExtents.left + paddingExtents.right);\r\n\t\t\tcontainerBounds.height -= (paddingExtents.top  + paddingExtents.bottom);\r\n\t\t}\r\n\t\treturn containerBounds;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetVerticalThumbBounds: function() {\r\n\t\treturn this.vBounds ? this.vBounds : this.$.vthumbContainer.getBounds();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetHorizontalThumbBounds: function() {\r\n\t\treturn this.hBounds ? this.hBounds : this.$.hthumbContainer.getBounds();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tresetCachedValues: function() {\r\n\t\tthis.vBounds = null;\r\n\t\tthis.hBounds = null;\r\n\t\tthis.scrollBounds = null;\r\n\t},\r\n\r\n\t/**\r\n\t* Helper function for `animateToControl()`\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tat5WayLimit: function (control, direction) {\r\n\t\treturn !Spotlight.NearestNeighbor.getNearestNeighbor(direction, control, {root: Spotlight.getParent(control)});\r\n\t},\r\n\r\n\t/**\r\n\t* Helper function for `animateToControl()`\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgetOffsets: function (control) {\r\n\t\tvar offsets  = control.getAbsoluteBounds(),\r\n\t\t\tviewportBounds = this.$.viewport.getAbsoluteBounds(),\r\n\t\t\tscrollBounds   = this._getScrollBounds();\r\n\r\n\t\toffsets.right = document.body.offsetWidth - offsets.right;\r\n\t\tviewportBounds.right = document.body.offsetWidth - viewportBounds.right;\r\n\r\n\t\t// Make absolute controlBounds relative to scroll position\r\n\t\toffsets.top += scrollBounds.top;\r\n\t\tif (this.rtl) {\r\n\t\t\toffsets.right += scrollBounds.left;\r\n\t\t} else {\r\n\t\t\toffsets.left += scrollBounds.left;\r\n\t\t}\r\n\r\n\t\toffsets.top = offsets.top - viewportBounds.top;\r\n\t\toffsets.left = (this.rtl ? offsets.right : offsets.left) - (this.rtl ? viewportBounds.right : viewportBounds.left);\r\n\r\n\t\treturn offsets;\r\n\t},\r\n\r\n\t/**\r\n\t* Scrolls until the passed-in [control]{@link module:enyo/Control~Control} is in view.\r\n\t* If `scrollFullPage` is set, scrolls until the edge of `control` is aligned\r\n\t* with the edge of the visible scroll area.\r\n\t*\r\n\t* @param {Control} control - The [control]{@link module:enyo/Control~Control} to scroll into view.\r\n\t* @param {Boolean} [scrollFullPage] - If `true`, scrolls until the edge of `control` is\r\n\t*\taligned with the edge of the visible scroll area. If `undefined`, the value in the\r\n\t*\tcontainer's `scrollFullPage` property is used.\r\n\t* @param {Boolean} [animate=true] - Set to `false` to prevent animation.\r\n\t* @param {String} direction - If the [control]{@link module:enyo/Control~Control} is being\r\n\t*   animated to as a result of a 5-way move, the direction of the 5-way move should be passed\r\n\t*   via this parameter. This information is used to scroll all the way to the scroller's boundary\r\n\t*   if there are no focusable elements between the control and the boundary, and the control is\r\n\t*   close enough to the boundary that it will be in view. This parameter is used internally; app\r\n\t*   code calling `animateToControl()` should generaly not need to use it.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tanimateToControl: function(control, scrollFullPage, animate, direction) {\r\n\t\tvar offsets = this.getOffsets(control),\r\n\t\t\tscrollBounds = this._getScrollBounds(),\r\n\t\t\txDir,\r\n\t\t\tyDir,\r\n\t\t\tx,\r\n\t\t\ty;\r\n\r\n\t\t// Allow local scrollFullPage param to override scroller property\r\n\t\tscrollFullPage = (typeof scrollFullPage === 'undefined') ? this.container.getScrollFullPage() : scrollFullPage;\r\n\r\n\t\t// 0: currently visible, 1: right of viewport, -1: left of viewport\r\n\t\txDir = calcNodeVisibility(offsets.left, offsets.width, scrollBounds.left, scrollBounds.clientWidth);\r\n\t\t// 0: currently visible, 1: below viewport, -1: above viewport\r\n\t\tyDir = calcNodeVisibility(offsets.top, offsets.height, scrollBounds.top, scrollBounds.clientHeight);\r\n\r\n\t\tswitch (xDir) {\r\n\t\t\tcase 0:\r\n\t\t\t\tx = this.getScrollLeft();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\t// If control requested to be scrolled all the way to the viewport's left, or if the control\r\n\t\t\t\t// is larger than the viewport, scroll to the control's left edge. Otherwise, scroll just\r\n\t\t\t\t// far enough to get the control into view.\r\n\t\t\t\tif (scrollFullPage || offsets.width > scrollBounds.clientWidth) {\r\n\t\t\t\t\tx = offsets.left;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tx = offsets.left - scrollBounds.clientWidth + offsets.width;\r\n\t\t\t\t\t// If nodeStyle exists, add the _marginRight_ to the scroll value.\r\n\t\t\t\t\tx += dom.getComputedBoxValue(control.hasNode(), 'margin', 'right');\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase -1:\r\n\t\t\t\t// If control requested to be scrolled all the way to the viewport's right, or if the control\r\n\t\t\t\t// is larger than the viewport, scroll to the control's right edge. Otherwise, scroll just\r\n\t\t\t\t// far enough to get the control into view.\r\n\t\t\t\tif (scrollFullPage || offsets.width > scrollBounds.clientWidth) {\r\n\t\t\t\t\tx = offsets.left - scrollBounds.clientWidth + offsets.width;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tx = offsets.left;\r\n\t\t\t\t\t// If nodeStyle exists, subtract the _marginLeft_ to the scroll value.\r\n\t\t\t\t\tx -= dom.getComputedBoxValue(control.hasNode(), 'margin', 'left');\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tswitch (yDir) {\r\n\t\t\tcase 0:\r\n\t\t\t\ty = this.getScrollTop();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\t// If control requested to be scrolled all the way to the viewport's top, or if the control\r\n\t\t\t\t// is larger than the viewport, scroll to the control's top edge. Otherwise, scroll just\r\n\t\t\t\t// far enough to get the control into view.\r\n\t\t\t\tif (scrollFullPage || offsets.height > scrollBounds.clientHeight) {\r\n\t\t\t\t\ty = offsets.top;\r\n\t\t\t\t\t// If nodeStyle exists, add the _marginBottom_ to the scroll value.\r\n\t\t\t\t\ty -= dom.getComputedBoxValue(control.hasNode(), 'margin', 'top');\r\n\t\t\t\t} else {\r\n\t\t\t\t\ty = offsets.top - scrollBounds.clientHeight + offsets.height;\r\n\t\t\t\t\t// If nodeStyle exists, add the _marginBottom_ to the scroll value.\r\n\t\t\t\t\ty += dom.getComputedBoxValue(control.hasNode(), 'margin', 'bottom');\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase -1:\r\n\t\t\t\t// If control requested to be scrolled all the way to the viewport's bottom, or if the control\r\n\t\t\t\t// is larger than the viewport, scroll to the control's bottom edge. Otherwise, scroll just\r\n\t\t\t\t// far enough to get the control into view.\r\n\t\t\t\tif (scrollFullPage || offsets.height > scrollBounds.clientHeight) {\r\n\t\t\t\t\ty = offsets.top - scrollBounds.clientHeight + offsets.height;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ty = offsets.top;\r\n\t\t\t\t\t// If nodeStyle exists, subtract the _marginTop_ to the scroll value.\r\n\t\t\t\t\ty -= dom.getComputedBoxValue(control.hasNode(), 'margin', 'bottom');\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// First, scroll as far as needed to bring the element into view, respecting\r\n\t\t// the requested scroll options\r\n\t\tthis.scrollIfChanged(x, y, animate);\r\n\r\n\t\t// Then, if we're in 5-way mode, check to see if we should scroll all the way\r\n\t\t// to a scroller boundary along either axis. We scroll all the way to boundary\r\n\t\t// if a) there are no more focusable elements between the control we're scrolling\r\n\t\t// to and the boundary; and b) the control we're scrolling to is close enough to\r\n\t\t// the boundary that it will still be in view. The main purpose of this logic is\r\n\t\t// to ensure that users scrolling via 5-way remotes can still scroll to the edges\r\n\t\t// of the scroller's contents, even if there are no focusable elements immediately\r\n\t\t// adjacent to the scroller boundaries. This can happen in app layouts where there\r\n\t\t// are inherently non-focusable elements (e.g. headers) or in layouts where normally\r\n\t\t// focusable elements near the scroller boundaries have been disabled and therefore\r\n\t\t// can't be focused.\r\n\t\tif (!Spotlight.getPointerMode()) {\r\n\t\t\t// Do this in a job, since we don't want to perform the expensive Spotlight check\r\n\t\t\t// when the user is holding down a 5-way key to scroll rapidly; this way, we'll\r\n\t\t\t// only check when scrolling is finished.\r\n\t\t\tthis.startJob('scrollToBoundary', this.bindSafely(function () {\r\n\t\t\t\tvar hDir, hLimit, vDir, vLimit, pos, size, scrollSize;\r\n\r\n\t\t\t\t// We check the left boundary if we are explicitly moving\r\n\t\t\t\t// left, but also if the algorithm above has determined that\r\n\t\t\t\t// we need to scroll left. Same thing goes for the other three\r\n\t\t\t\t// boundaries. We consider implicit direction because if the scroller\r\n\t\t\t\t// is scrolling in two dimensions, there may be cases where (for\r\n\t\t\t\t// example) an element reached via a vertical move happens to be\r\n\t\t\t\t// the closest element to a horizontal boundary. \r\n\t\t\t\tif (direction === 'LEFT' || xDir === -1) {\r\n\t\t\t\t\thDir = 'LEFT';\r\n\t\t\t\t\thLimit = 0;\r\n\t\t\t\t}\r\n\t\t\t\telse if (direction === 'RIGHT' || xDir === 1) {\r\n\t\t\t\t\thDir = 'RIGHT';\r\n\t\t\t\t\thLimit = scrollBounds.maxLeft;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If we've determined that we're moving right or left, check\r\n\t\t\t\t// the corresponding boundary and see whether we're at the limit\r\n\t\t\t\t// of 5-way navigation in that direction.\r\n\t\t\t\tif (hDir && this.at5WayLimit(control, hDir)) {\r\n\t\t\t\t\t// If we are at the limit, we need to make sure that the control\r\n\t\t\t\t\t// we're scrolling to will still be in view if we scroll all the\r\n\t\t\t\t\t// way to the boundary\r\n\t\t\t\t\tpos = offsets.left;\r\n\t\t\t\t\tsize = offsets.width;\r\n\t\t\t\t\tscrollSize = scrollBounds.clientWidth;\r\n\t\t\t\t\tif (calcNodeVisibility(pos, size, hLimit, scrollSize) === 0) {\r\n\t\t\t\t\t\tx = hLimit;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Same logic as above, but applied to vertical moves\r\n\t\t\t\tif (direction === 'UP' || yDir === -1) {\r\n\t\t\t\t\tvDir = 'UP';\r\n\t\t\t\t\tvLimit = 0;\r\n\t\t\t\t}\r\n\t\t\t\telse if (direction === 'DOWN' || yDir === 1) {\r\n\t\t\t\t\tvDir = 'DOWN';\r\n\t\t\t\t\tvLimit = scrollBounds.maxTop;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (vDir && this.at5WayLimit(control, vDir)) {\r\n\t\t\t\t\tpos = offsets.top;\r\n\t\t\t\t\tsize = offsets.height;\r\n\t\t\t\t\tscrollSize = scrollBounds.clientHeight;\r\n\t\t\t\t\tif (calcNodeVisibility(pos, size, vLimit, scrollSize) === 0) {\r\n\t\t\t\t\t\ty = vLimit;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If we have determined we should scroll to the boundary, do it now\r\n\t\t\t\tthis.scrollIfChanged(x, y, this.scrollToBoundaryAnimate);\r\n\t\t\t}), this.scrollToBoundaryDelay);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tscrollIfChanged: function (x, y, animate) {\r\n\t\t// If x or y changed, scroll to new position\r\n\t\tif (x !== this.getScrollLeft() || y !== this.getScrollTop()) {\r\n\t\t\tthis.scrollTo(x, y, animate);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclampScrollPosition: function() {\r\n\t\tvar x = this.clampX(),\r\n\t\t\ty = this.clampY();\r\n\r\n\t\tif (x !== this.getScrollLeft() || y !== this.getScrollTop()) {\r\n\t\t\tthis.scrollTo(x, y);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclampX: function() {\r\n\t\tvar m = this.$.scrollMath;\r\n\t\treturn Math.min(Math.max(this.getScrollLeft(), -1*m.leftBoundary), -1*m.rightBoundary);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclampY: function() {\r\n\t\tvar m = this.$.scrollMath;\r\n\t\treturn Math.min(Math.max(this.getScrollTop(), -1*m.topBoundary), -1*m.bottomBoundary);\r\n\t}\r\n});\r\n\r\n// FIXME: Webkit will change the scrollTop value of the scroller viewport to keep the current\r\n// tab-focused control onscreen if we allow it to handle tabs itself, so we defeat native\r\n// TAB focus movement here.\r\ndispatcher.features.push(function(e) {\r\n\tif ((e.type == 'keydown') && (e.keyCode == 9)) {\r\n\t\te.preventDefault();\r\n\t}\r\n});\r\n\r\nMoonScrollStrategy.Touch = kind({\r\n\tname: 'moon.TouchScrollStrategy',\r\n\tkind: TouchScrollStrategy,\r\n\tcreate: function () {\r\n\t\tTouchScrollStrategy.prototype.create.apply(this, arguments);\r\n\t\tif (!config.accelerate) {\r\n\t\t\tthis.transform = false;\r\n\t\t\tthis.accel = false;\r\n\r\n\t\t\tif(this.overscroll) {\r\n\t\t\t\t//so we can adjust top/left if browser can't handle translations\r\n\t\t\t\tthis.$.client.applyStyle('position', 'relative');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:moonstone/VideoTransportSlider~VideoTransportSlider} kind.\r\n* @module moonstone/VideoTransportSlider\r\n*/\r\n\r\nrequire('moonstone');\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom'),\r\n\tri = require('enyo/resolution'),\r\n\tControl = require('enyo/Control'),\r\n\tPopup = require('enyo/Popup');\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\nvar\r\n\tDurationFmt = require('enyo-ilib/DurationFmt'),\r\n\tLocale = require('enyo-ilib/Locale');\r\n\r\nvar\r\n\tSlider = require('moonstone/Slider'),\r\n\tVideoFeedback = require('../VideoFeedback');\r\n\r\nvar\r\n\t$L = require('../i18n'),\r\n\tdefaultKnobIncrement = '5%';\r\n\r\n/**\r\n* The parameter [object]{@glossary Object} used when displaying a {@link module:moonstone/VideoFeedback~VideoFeedback}\r\n* control.\r\n*\r\n* @typedef {Object} module:moonstone/VideoTransportSlider~VideoTransportSlider~FeedbackParameterObject\r\n* @property {Number} [playbackRate] - The playback rate.\r\n* @property {Number} [jumpSize] - The jump size.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when user starts dragging the video position knob. No additional data is\r\n* provided in this event.\r\n*\r\n* @event module:moonstone/VideoTransportSlider~VideoTransportSlider#onSeekStart\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when user changes the video position by tapping the bar.\r\n*\r\n* @event module:moonstone/VideoTransportSlider~VideoTransportSlider#onSeek\r\n* @type {Object}\r\n* @property {Number} value - The position to seek to.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when user stops dragging the video position knob.\r\n*\r\n* @event module:moonstone/VideoTransportSlider~VideoTransportSlider#onSeekFinish\r\n* @type {Object}\r\n* @property {Number} value - The position to seek to.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when cursor enters the tap area.\r\n* Note. this event will be deprecated and replaced with #onSpotlightFocused\r\n*\r\n* @event module:moonstone/VideoTransportSlider~VideoTransportSlider#onEnterTapArea\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when cursor leaves the tap area.\r\n* Note. this event will be deprecated and replaced with #onSpotlightBlur\r\n*\r\n* @event module:moonstone/VideoTransportSlider~VideoTransportSlider#onLeaveTapArea\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/VideoTransportSlider~VideoTransportSlider} extends {@link module:moonstone/Slider~Slider}, adding specialized\r\n* behavior related to video playback.\r\n*\r\n* ```javascript\r\n* var VideoTransportSlider = require('moonstone/VideoTransportSlider');\r\n*\r\n* {kind: VideoTransportSlider, value: 30}\r\n* ```\r\n*\r\n* The [onSeekStart]{@link module:moonstone/VideoTransportSlider~VideoTransportSlider#onSeekStart} event is fired while\r\n* the control knob is being dragged, the\r\n* [onSeekFinish]{@link module:moonstone/VideoTransportSlider~VideoTransportSlider#onSeekFinish} event is fired when the\r\n* drag finishes, and the [onSeek]{@link module:moonstone/VideoTransportSlider~VideoTransportSlider#onSeek} event is fired\r\n* when the position is set by tapping the bar.\r\n*\r\n* @class VideoTransportSlider\r\n* @extends module:moonstone/Slider~Slider\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/VideoTransportSlider~VideoTransportSlider.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.VideoTransportSlider',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Slider,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-video-player-transport-slider',\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/VideoTransportSlider~VideoTransportSlider.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Starting point of slider.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\trangeStart: 0,\r\n\r\n\t\t/**\r\n\t\t* Ending point of slider.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 100\r\n\t\t* @public\r\n\t\t*/\r\n\t\trangeEnd: 100,\r\n\r\n\t\t/**\r\n\t\t* Controls the slider draw.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsyncTick: true,\r\n\r\n\t\t/**\r\n\t\t* When `true`, label is shown at the start and end positions.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tshowTickText: true,\r\n\r\n\t\t/**\r\n\t\t* When `true`, progress may extend past the hour markers.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tliveMode: false,\r\n\r\n\t\t/**\r\n\t\t* CSS classes to apply to background progress bar.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'bg-bar'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tbgBarClasses: 'bg-bar',\r\n\r\n\t\t/**\r\n\t\t* CSS classes to apply to progress bar.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'bar-bar'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tbarClasses: 'bar-bar',\r\n\r\n\t\t/**\r\n\t\t* CSS classes to apply to popup label.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'popup-label'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpopupLabelClasses: 'popup-label',\r\n\r\n\t\t/**\r\n\t\t* CSS classes to apply to knob.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'knob'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tknobClasses: 'knob',\r\n\r\n\t\t/**\r\n\t\t* Color of value popup\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default '#fff'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpopupColor: '#4B4B4B',\r\n\r\n\t\t/**\r\n\t\t* Popup offset in pixels.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 144 - controls height(132) + margin (12)\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpopupOffset: 144,\r\n\r\n\t\t/**\r\n\t\t* Threshold value (percentage) for using animation effect on slider progress change.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 1\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsmallVariation: 1,\r\n\r\n\t\t/**\r\n\t\t* Popup height in pixels.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 67\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpopupHeight: 48,\r\n\r\n\t\t/**\r\n\t\t* Sliders will increase or decrease as much as knobIncrement in either direction\r\n\t\t* when left or right key is pressed in 5-way mode.\r\n\t\t* If you'd like to use a specific value instead of a percentage,\r\n\t\t* specify the value in this property when you instantiate the VideoPlayer.\r\n\t\t*\r\n\t\t* @type {Number|String}\r\n\t\t* @default '5%'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tknobIncrement: defaultKnobIncrement\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonresize: 'handleResize',\r\n\t\tonSpotlightKeyDown: 'spotlightKeyDownHandler',\r\n\t\tonmove: 'preview'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonSeekStart: '',\r\n\t\tonSeek: '',\r\n\t\tonSeekFinish: '',\r\n\t\tonEnterTapArea: '',\r\n\t\tonLeaveTapArea: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttickComponents: [\r\n\t\t{name: 'startWrapper', classes: 'indicator-wrapper start', components: [\r\n\t\t\t{name: 'beginTickText', classes: 'indicator-text left', content: '00:00'}\r\n\t\t]},\r\n\t\t{name: 'endWrapper', classes: 'indicator-wrapper end', components: [\r\n\t\t\t{name: 'endTickText', classes: 'indicator-text right', content: '00:00'}\r\n\t\t]}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpopupComponents: [\r\n\t\t{name: 'popup', kind: Popup, classes: 'moon-slider-popup above status-indicator', accessibilityDisabled: true, components: [\r\n\t\t\t{name: 'popupLabel', classes: 'moon-slider-popup-center' }\r\n\t\t]}\r\n\t],\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpopupLabelComponents: [\r\n\t\t{name: 'feedback', kind: VideoFeedback, showing:false},\r\n\t\t{name: 'popupLabelText', kind: Control}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_previewMode: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_enterEnable: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreatePopup: function () {\r\n\t\tthis.createComponents(this.popupComponents);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tSlider.prototype.create.apply(this, arguments);\r\n\t\tthis.$.popup.setAutoDismiss(false);\t\t//* Always showing popup\r\n\t\tthis.$.popup.captureEvents = false;\t\t//* Hot fix for bad originator on tap, drag ...\r\n\r\n\t\t//* Extend components\r\n\t\tthis.createTickComponents();\r\n\t\tthis.createPopupLabelComponents();\r\n\t\tthis.showTickTextChanged();\r\n\t\tthis.knobIncrementChanged();\r\n\r\n\t\tthis.durfmt = new DurationFmt({length: 'medium', style: 'clock', useNative: false});\r\n\t\tthis.$.beginTickText.setContent(this.formatTime(0));\r\n\r\n\t\tvar loc = new Locale(),\r\n\t\t\tlanguage = loc.getLanguage(),\r\n\t\t\t// Hash of languages and the additional % widths they'll need to not run off the edge.\r\n\t\t\tlangWidths = {\r\n\t\t\t\tja: 0.05,\r\n\t\t\t\tpt: 0.05,\r\n\t\t\t\tvi: 0.02\r\n\t\t\t};\r\n\r\n\t\tif (langWidths[language]) {\r\n\t\t\t//Todo. Instead of adjust begin or end postion, find proper way tpo conpensate language matter\r\n\t\t\t//move begin position to right as much as langWidths[language]\r\n\t\t\t//move end position to left as much as langWidths[language] );\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Ugly to need to do this but avoid the overhead of calculations used wastefully by this\r\n\t* method in ProgressBar (not needed since this kind overloads the child components).\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdrawToCanvas: function () {\r\n\t\t// nop\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreateTickComponents: function () {\r\n\t\tthis.createComponents(this.tickComponents, {owner: this, addBefore: this.$.knob});\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreatePopupLabelComponents: function () {\r\n\t\tthis.$.popupLabel.createComponents(this.popupLabelComponents, {owner: this});\r\n\t\tthis.currentTime = 0;\r\n\t},\r\n\r\n\t/**\r\n\t* If user presses enter on `this.$.tapArea`, seeks to that point.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tspotlightKeyDownHandler: function (sender, e) {\r\n\t\tvar val;\r\n\t\tif (this.tappable && !this.disabled && e.keyCode == 13) {\r\n\t\t\tthis.set('knobSelected', true);\r\n\t\t\tthis.startJob('simulateTapEnd', function () {\r\n\t\t\t\tthis.set('knobSelected', false);\r\n\t\t\t}, 200);\r\n\t\t\tval = this.transformToVideo(this.knobPosValue);\r\n\t\t\tthis.sendSeekEvent(val);\r\n\t\t\tthis.set('_enterEnable', true);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotFocused: function (sender, e) {\r\n\t\tSlider.prototype.spotFocused.apply(this, arguments);\r\n\t\tif (!this.disabled) {\r\n\t\t\tthis.spotSelect();\r\n\t\t\t// this.knobPosValue will be used for knob positioning.\r\n\t\t\tthis.knobPosValue = this.get('value');\r\n\t\t\t// Todo: visible does not mean slider is visible. it means knob is visible\r\n\t\t\t// we'd better change its name to preview or more intuitive name\r\n\t\t\tthis.addClass('visible');\r\n\t\t\t//fires enyo.VideoTransportSlider#onEnterTapArea\r\n\t\t\tthis.doEnterTapArea();\r\n\t\t}\r\n\r\n\t\t// if slider is in preview mode, preview() will update knobPosition\r\n\t\tif (!Spotlight.getPointerMode()) {\r\n\t\t\tthis._updateKnobPosition(this.knobPosValue);\r\n\t\t}\r\n\t\tthis.startPreview();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotSelect: function () {\r\n\t\tthis.selected = true;\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotBlur: function () {\r\n\t\tthis.set('_enterEnable', false);\r\n\t\tthis.selected = false;\r\n\t\tthis.removeClass('visible');\r\n\t\tthis.endPreview();\r\n\t\t//fires enyo.VideoTransportSlider#onLeaveTapArea\r\n\t\tthis.doLeaveTapArea();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotLeft: function (sender, e) {\r\n\t\tif (this.selected && this.knobPosValue > this.min) {\r\n\t\t\t// If in the process of animating, work from the previously set value\r\n\t\t\tvar v = this.clampValue(this.min, this.max, this.knobPosValue || this.getValue());\r\n\t\t\tv = (v - this._knobIncrement < this.min) ? this.min : v - this._knobIncrement;\r\n\t\t\tthis._updateKnobPosition(v);\r\n\t\t\tthis.set('knobPosValue', v);\r\n\t\t\tthis.set('_enterEnable', false);\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotRight: function (sender, e) {\r\n\t\tif (this.selected && this.knobPosValue < this.max - 1) {\r\n\t\t\tvar value = (typeof this.knobPosValue != 'undefined') ? this.knobPosValue : this.getValue(),\r\n\t\t\t\tv = this.clampValue(this.min, this.max, value);\r\n\t\t\tv = (v + this._knobIncrement > this.max) ? this.max - 1 : v + this._knobIncrement;\r\n\t\t\tthis._updateKnobPosition(v);\r\n\t\t\tthis.set('knobPosValue', v);\r\n\t\t\tthis.set('_enterEnable', false);\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tknobIncrementChanged: function () {\r\n\t\tvar increment = this.knobIncrement || defaultKnobIncrement;\r\n\r\n\t\tif (typeof increment == 'number' && increment > 0) {\r\n\t\t\tthis._knobIncrement = increment;\r\n\t\t} else {\r\n\t\t\tif (typeof increment != 'string' || increment.charAt(increment.length - 1) != '%') {\r\n\t\t\t\tincrement = defaultKnobIncrement;\r\n\t\t\t}\r\n\t\t\tthis._knobIncrement = (this.max - this.min) * increment.substr(0, increment.length - 1) / 100;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* onmove event handler. When mouse moves on slider, it will update knob's position\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpreview: function (sender, e) {\r\n\t\tif (!this.disabled && !this.dragging) {\r\n\t\t\tif (!this._previewMode) {\r\n\t\t\t\tthis.startPreview();\r\n\t\t\t}\r\n\t\t\tvar v = this.knobPosValue = this.calcKnobPosition(e);\r\n\t\t\tthis.currentTime = this.transformToVideo(v);\r\n\t\t\tthis._updateKnobPosition(this.currentTime);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstartPreview: function (sender, e) {\r\n\t\tthis._previewMode = true;\r\n\t\tthis.$.feedback.setShowing(false);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tendPreview: function (sender, e) {\r\n\t\tthis._previewMode = false;\r\n\t\tthis.updatePopupLabel(this.value);\r\n\t\tif (this.$.feedback.isPersistShowing()) {\r\n\t\t\tthis.$.feedback.setShowing(true);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tisInPreview: function (sender, e) {\r\n\t\treturn this._previewMode;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleResize: function () {\r\n\t\tSlider.prototype.handleResize.apply(this, arguments);\r\n\t\tthis.updateSliderRange();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateSliderRange: function () {\r\n\t\tthis.setRangeStart(this.min);\r\n\t\tthis.setRangeEnd(this.max);\r\n\r\n\t\tif (this.dragging || !this.isInPreview()) {\r\n\t\t\tthis._updateKnobPosition(this.value);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetMin: function () {\r\n\t\tSlider.prototype.setMin.apply(this, arguments);\r\n\t\tthis.knobIncrementChanged();\r\n\t\tthis.updateSliderRange();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetMax: function () {\r\n\t\tSlider.prototype.setMax.apply(this, arguments);\r\n\t\tthis.knobIncrementChanged();\r\n\t\tthis.updateSliderRange();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetRangeStart: function (val) {\r\n\t\tthis.rangeStart = this.clampValue(this.getMin(), this.getMax(), val);\r\n\t\tthis.rangeStartChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetRangeEnd: function (val) {\r\n\t\tthis.rangeEnd = this.clampValue(this.getMin(), this.getMax(), val);\r\n\t\tthis.rangeEndChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tknobSelectedChanged: function () {\r\n\t\tSlider.prototype.knobSelectedChanged.apply(this, arguments);\r\n\t\tthis.addRemoveClass('pressed', this.knobSelected);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowTickTextChanged: function () {\r\n\t\tthis.$.beginTickText.setShowing(this.getShowTickText());\r\n\t\tthis.$.endTickText.setShowing(this.getShowTickText());\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trangeStartChanged: function () {\r\n\t\tthis.updateInternalProperty();\r\n\t\tvar p = this._calcPercent(this.rangeStart),\r\n\t\t\tproperty = 'margin-left';\r\n\t\tif (this.liveMode) {\r\n\t\t\tproperty = 'padding-left';\r\n\t\t}\r\n\t\tthis.$.bar.applyStyle(property, p + '%');\r\n\t\tthis.$.bgbar.applyStyle(property, p + '%');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trangeEndChanged: function () {\r\n\t\tthis.updateInternalProperty();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateInternalProperty: function () {\r\n\t\tthis.updateScale();\r\n\t\tthis.progressChanged();\r\n\t\tthis.bgProgressChanged();\r\n\t},\r\n\t//* Sets value of hidden variable, _scaleFactor_.\r\n\tupdateScale: function () {\r\n\t\tthis.scaleFactor = (this.rangeEnd-this.rangeStart)/(this.max-this.min);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcPercent: function (val) {\r\n\t\treturn (this.calcRatio(val) * 100) * this.scaleFactor;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_calcPercent: function (val) {\r\n\t\treturn this.calcRatio(val) * 100;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcVariationRatio: function (val, currentVal) {\r\n\t\treturn (val - currentVal) / (this.max - this.min);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcVariationPercent: function (val, currentVal) {\r\n\t\treturn this.calcVariationRatio(val, currentVal) * 100;\r\n\t},\r\n\r\n\t/**\r\n\t* Override Slider.updateKnobPosition to only update the popupLabelText\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdateKnobPosition: function (val) {\r\n\t\tif (this.dragging) {\r\n\t\t\tthis.updatePopupLabel(this.currentTime);\r\n\t\t} else if (!this.isInPreview()) {\r\n\t\t\tthis.updatePopupLabel(val);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Calculate slider knob's position and apply it.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_updateKnobPosition: function (val) {\r\n\t\t// If knob is visible, we need update its current position\r\n\t\tif (this.hasClass('visible')) {\r\n\t\t\tvar p = this.clampValue(this.min, this.max, val);\r\n\t\t\tp = this._calcPercent(p);\r\n\t\t\tvar slider = this.inverseToSlider(p);\r\n\t\t\tthis.$.knob.applyStyle('left', slider + '%');\r\n\t\t}\r\n\r\n\t\tthis.updatePopupLabel(val);\r\n\t},\r\n\r\n\t/**\r\n\t* Override default behavior\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdatePopupLabel: function (timeVal) {\r\n\t\tif (Spotlight.getCurrent() === this) {\r\n\t\t\tthis.$.popupLabelText.setContent(this.formatTime(timeVal));\r\n\t\t} else if (this.currentTime !== undefined) {\r\n\t\t\tthis.$.popupLabelText.setContent(this.formatTime(this.currentTime));\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinverseToSlider: function (percent) {\r\n\t\tvar val = this.scaleFactor * percent + this._calcPercent(this.rangeStart);\r\n\t\treturn val;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttransformToVideo: function (val) {\r\n\t\tval = this.clampValue(this.getMin(), this.getMax(), val);\r\n\t\treturn (val - this.rangeStart) / this.scaleFactor;\r\n\t},\r\n\r\n\t/**\r\n\t* If user presses `slider`, seeks to that point.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\ttap: function (sender, e) {\r\n\t\tvar val;\r\n\t\tif (this.tappable && !this.disabled) {\r\n\t\t\tval = this.transformToVideo(this.calcKnobPosition(e));\r\n\t\t\tthis.sendSeekEvent(val);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetValue: function (val) {\r\n\t\tthis.currentTime = val;\r\n\t\tif (Math.abs(this.calcVariationPercent(val, this.value)) > this.smallVariation ||\r\n\t\t\tthis.calcVariationPercent(this.max, val) < this.smallVariation) {\r\n\t\t\tSlider.prototype.setValue.apply(this, arguments);\r\n\t\t} else {\r\n\t\t\tthis._setValue(val);\r\n\t\t}\r\n\t\tthis._updateBeginText(val);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_updateBeginText: function (val) {\r\n\t\tvar v = this.clampValue(this.min, this.max, val);\r\n\t\tthis.$.beginTickText.setContent(this.formatTime(v));\r\n\t},\r\n\r\n\t/**\r\n\t* If `dragstart`, bubbles [onSeekStart]{@link module:moonstone/VideoTransportSlider~VideoTransportSlider#onSeekStart}\r\n\t* event.\r\n\t*\r\n\t* @fires module:moonstone/VideoTransportSlider~VideoTransportSlider#onSeekStart\r\n\t* @private\r\n\t*/\r\n\tdragstart: function (sender, e) {\r\n\t\tif (this.disabled) {\r\n\t\t\treturn; // return nothing\r\n\t\t}\r\n\r\n\t\t// the call to the super class freezes spotlight, so it needs to be unfrozen in dragfinish\r\n\t\tvar dragstart = Slider.prototype.dragstart.apply(this, arguments);\r\n\t\tif (dragstart) {\r\n\t\t\tthis.doSeekStart();\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* If `drag`, bubbles [onSeek]{@link module:moonstone/VideoTransportSlider~VideoTransportSlider#onSeek} event and\r\n\t* overrides parent `drag` handler.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdrag: function (sender, e) {\r\n\t\tif (this.dragging) {\r\n\t\t\tvar v = this.calcKnobPosition(e);\r\n\r\n\t\t\t//* Default behavior to support elastic effect\r\n\t\t\tv = this.transformToVideo(v);\r\n\t\t\tif (this.constrainToBgProgress === true) {\r\n\t\t\t\tv = (this.increment) ? this.calcConstrainedIncrement(v) : v;\r\n\t\t\t\tvar ev = this.bgProgress + (v-this.bgProgress)*0.4;\r\n\t\t\t\tv = this.clampValue(this.min, this.bgProgress, v);\r\n\t\t\t\tthis.elasticFrom = (this.elasticEffect === false || this.bgProgress > v) ? v : ev;\r\n\t\t\t\tthis.elasticTo = v;\r\n\t\t\t} else {\r\n\t\t\t\tv = (this.increment) ? this.calcIncrement(v) : v;\r\n\t\t\t\tv = this.clampValue(this.min, this.max, v);\r\n\t\t\t\tthis.elasticFrom = this.elasticTo = v;\r\n\t\t\t}\r\n\t\t\tthis.currentTime = v;\r\n\t\t\tthis._updateKnobPosition(this.elasticFrom);\r\n\r\n\t\t\tif (this.lockBar) {\r\n\t\t\t\tthis.setProgress(this.elasticFrom);\r\n\t\t\t\tthis.sendChangingEvent({value: this.elasticFrom});\r\n\t\t\t\tthis.sendSeekEvent(this.elasticFrom);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdragfinish: function (sender, e) {\r\n\t\tif (this.disabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.cleanUpDrag(e);\r\n\t\te.preventTap();\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:moonstone/VideoTransportSlider~VideoTransportSlider#onSeekFinish\r\n\t* @private\r\n\t*/\r\n\tcleanUpDrag: function (ev) {\r\n\t\tvar v, z;\r\n\t\tif (this.get('dragging')) {\r\n\t\t\tif (ev) {\r\n\t\t\t\tv = this.calcKnobPosition(ev);\r\n\t\t\t\tv = this.transformToVideo(v);\r\n\t\t\t} else { // use the last known-good time value (i.e. from the last drag event)\r\n\t\t\t\tv = this.currentTime;\r\n\t\t\t}\r\n\t\t\tz = this.elasticTo;\r\n\t\t\tif (this.constrainToBgProgress === true) {\r\n\t\t\t\tz = (this.increment) ? this.calcConstrainedIncrement(z) : z;\r\n\t\t\t\tthis.animateTo(this.elasticFrom, z);\r\n\t\t\t\tv = z;\r\n\t\t\t} else {\r\n\t\t\t\tv = (this.increment) ? this.calcIncrement(v) : v;\r\n\t\t\t\tthis._setValue(v);\r\n\t\t\t}\r\n\t\t\tthis.doSeekFinish({value: v});\r\n\t\t\tSpotlight.unfreeze();\r\n\r\n\t\t\tthis.endPreview();\r\n\r\n\t\t\tthis.$.knob.removeClass('active');\r\n\t\t\tthis.set('dragging', false);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowingChangedHandler: function (sender, ev) {\r\n\t\tSlider.prototype.showingChangedHandler.apply(this, arguments);\r\n\t\tif (!ev.showing) {\r\n\t\t\tthis.cleanUpDrag(); // clean-up any in-progress drags, if we (or an ancestor) is hidden\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Sends [onSeek]{@link module:moonstone/VideoTransportSlider~VideoTransportSlider#onSeek} event.\r\n\t*\r\n\t* @fires module:moonstone/VideoTransportSlider~VideoTransportSlider#onSeek\r\n\t* @private\r\n\t*/\r\n\tsendSeekEvent: function (val) {\r\n\t\tthis.doSeek({value: val});\r\n\t},\r\n\r\n\t/**\r\n\t* During time update, updates buffered progress, canvas and video currentTime\r\n\t*\r\n\t* @private\r\n\t*/\r\n\ttimeUpdate: function (val) {\r\n\t\tif (!this.dragging && this.isInPreview()) { return; }\r\n\t\tthis.currentTime = val;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdurationUpdate: function (val) {\r\n\t\tthis.duration = val;\r\n\t\tthis.$.endTickText.setContent(this.formatTime(this.duration));\r\n\t},\r\n\r\n\t/**\r\n\t* Properly formats time.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tformatTime: function (val) {\r\n\t\tvar hour = Math.floor(val / (60*60));\r\n\t\tvar min = Math.floor((val / 60) % 60);\r\n\t\tvar sec = Math.floor(val % 60);\r\n\t\tvar time = {minute: min, second: sec};\r\n\t\tif (hour) {\r\n\t\t\ttime.hour = hour;\r\n\t\t}\r\n\t\treturn this.durfmt.format(time);\r\n\t},\r\n\r\n\t/**\r\n\t* Time formatting helper.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpadDigit: function (val) {\r\n\t\treturn (val) ? (String(val).length < 2) ? '0'+val : val : '00';\r\n\t},\r\n\r\n\t/**\r\n\t* Sends current status to [feedback]{@link module:moonstone/VideoFeedback~VideoFeedback} control in response to\r\n\t* user input.\r\n\t*\r\n\t* @param {String} msg - The string to display.\r\n\t* @param {module:moonstone/VideoTransportSlider~VideoTransportSlider~FeedbackParameterObject} params - A\r\n\t*\t[hash]{@glossary Object} of parameters that accompany the message.\r\n\t* @param {Boolean} persist - If `true`, the [feedback]{@link module:moonstone/VideoFeedback~VideoFeedback} control will\r\n\t*\tnot be automatically hidden.\r\n\t* @param {String} leftSrc - The source url for the image displayed on the left side of\r\n\t*\tthe feedback control.\r\n\t* @param {String} rightSrc - The source url for the image displayed on the right side\r\n\t*\tof the feedback control.\r\n\t* @public\r\n\t*/\r\n\tfeedback: function (msg, params, persist, leftSrc, rightSrc) {\r\n\t\tthis.showKnobStatus();\r\n\t\tthis.$.feedback.feedback(msg, params, persist, leftSrc, rightSrc, this.isInPreview());\r\n\t},\r\n\r\n\t/**\r\n\t* Override of [updatePopup]{@link module:moonstone/ProgressBar~ProgressBar#updatePopup}\r\n\t* this method is called when progess updated but from Slider, we use value instead of progress\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdatePopup: function (val) {\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdatePopupHeight: function () {\r\n\t\tvar h = this.getPopupHeight();\r\n\t\tthis.$.popupLabel.applyStyle('height', dom.unit(ri.scale(h), 'rem'));\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdatePopupOffset: function () {\r\n\t\tthis.$.popup.applyStyle('top', dom.unit(-(ri.scale(this.getPopupHeight() + this.getPopupOffset())), 'rem'));\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* When `true`, VoiceReadout will be prevented.\r\n\t*\r\n\t* @default true\r\n\t* @type {Boolean}\r\n\t* @public\r\n\t*/\r\n\taccessibilityDisabled: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: 'selected', method: function() {\r\n\t\t\tif (this.selected) {\r\n\t\t\t\tthis.set('accessibilityRole', 'slider');\r\n\t\t\t\tthis.set('accessibilityLive', null);\r\n\t\t\t\tthis.set('accessibilityHint', null);\r\n\t\t\t} else {\r\n\t\t\t\tthis.setAriaAttribute('aria-valuetext', null);\r\n\t\t\t}\r\n\t\t}},\r\n\t\t{path: ['$.popupLabelText.content', '_enterEnable'], method: 'ariaValue'}\r\n\t],\r\n\r\n\t/**\r\n\t* Overriding {@link module:moonstone/ProgressBar~ProgressBar#ariaValue} to guard updating value\r\n\t* when dragging.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tariaValue: function () {\r\n\t\tvar valueText;\r\n\t\tif (this.showing && !Spotlight.getPointerMode() && this.$.popupLabelText && this.$.popupLabelText.content && this.selected) {\r\n\t\t\tvalueText = this._enterEnable ? this.$.popupLabelText.content : $L('jump to ') + this.$.popupLabelText.content;\r\n\t\t\t// Screen reader should read valueText when slider is only spotlight focused, but there is a timing issue between spotlight focus and observed\r\n\t\t\t// popupLabelText's content, so Screen reader reads valueText twice. We added below timer code for preventing this issue.\r\n\t\t\tsetTimeout(this.bindSafely(function(){\r\n\t\t\t\tthis.set('accessibilityDisabled', false);\r\n\t\t\t\tthis.setAriaAttribute('aria-valuetext', valueText);\r\n\t\t\t}), 0);\r\n\t\t} else {\r\n\t\t\tthis.set('accessibilityDisabled', true);\r\n\t\t}\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Calendar~Calendar} kind.\r\n* @deprecated Since 2.6\r\n* @module moonstone/Calendar\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutil = require('enyo/utils'),\r\n\tControl = require('enyo/Control'),\r\n\tGroup = require('enyo/Group');\r\n\r\nvar\r\n\tilib = require('enyo-ilib'),\r\n\tcalendarFactory = require('enyo-ilib/CalendarFactory'),\r\n\tdateFactory = require('enyo-ilib/DateFactory'),\r\n\tDateFmt = require('enyo-ilib/DateFmt'),\r\n\tLocaleInfo = require('enyo-ilib/LocaleInfo');\r\n\r\nvar\r\n\tSimplePicker = require('../SimplePicker');\r\n\r\n/**\r\n* Fires when a date is selected. No additional data is passed in this event.\r\n*\r\n* @event module:moonstone/Calendar~CalendarDate#onDateSelected\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when [value]{@link module:moonstone/Calendar~Calendar#value} changes.\r\n*\r\n* @event module:moonstone/Calendar~Calendar#onChange\r\n* @type {Object}\r\n* @property {Date} value - A standard JavaScript {@glossary Date} object\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/Calendar~CalendarDate} implements a control representing a single day, used by\r\n* the monthly calendar kind {@link module:moonstone/Calendar~Calendar}.\r\n*\r\n* @class CalendarDate\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @deprecated Since 2.6\r\n* @public\r\n*/\r\nvar CalendarDate = kind(\r\n\t/** @lends module:moonstone/Calendar~CalendarDate.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.CalendarDate',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/Calendar~CalendarDate.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* {@glossary Date} object\r\n\t\t*\r\n\t\t* @type {Date}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tvalue: null,\r\n\r\n\t\t/**\r\n\t\t* Whether this date's coloring should be different from normal.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcolor: false,\r\n\r\n\t\t/**\r\n\t\t* Used when the CalendarDate is part of an {@link module:enyo/Group~Group}.\r\n\t\t* A value of `true` indicates that this is the active button of the group;\r\n\t\t* `false`, that it is not the active button.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tactive: false\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonDateSelected:''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsmall: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmarquee: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tminWidth: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-calendar-picker-date enyo-unselectable',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tif (arguments.length > 0 && typeof(arguments[0].formatter) !== 'undefined') {\r\n\t\t\t// re-use this formatter to avoid creating a new one for each calendar date instance\r\n\t\t\tthis._dateFmt = arguments[0].formatter;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcolorChanged: function () {\r\n\t\tthis.addRemoveClass('moon-calendar-picker-date-shadow', this.color);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tvalueChanged: function () {\r\n\t\tif (this.value) {\r\n\t\t\tthis.localeValue = dateFactory({\r\n\t\t\t\tunixtime: this.value.getTime(),\r\n\t\t\t\ttimezone: 'local'\r\n\t\t\t});\r\n\t\t\tthis.setContent(this._dateFmt.format(this.localeValue));\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Allows the same formatter to be shared across all calendar date instances,\r\n\t* which is more efficient than having each one make its own formatter.\r\n\t* @private\r\n\t*/\r\n\tsetDateFormatter: function (formatter) {\r\n\t\tthis._dateFmt = formatter;\t\t// need to recreate the local value because\r\n\t\t// the new locale may have a different time\r\n\t\t// zone or calendar, so the date components\r\n\t\t// (year/month/day) may be different than before\r\n\t\tthis.valueChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t* @fires module:moonstone/Calendar~CalendarDate#onDateSelected\r\n\t*/\r\n\ttap: function () {\r\n\t\tthis.doDateSelected();\r\n\t}\r\n});\r\n\r\n/**\r\n* {@link module:moonstone/Calendar~SimpleMonthPicker} implements a month picker\r\n* control with support for internationalized months. This picker is used by the\r\n* monthly calendar kind {@link module:moonstone/Calendar~Calendar}.\r\n*\r\n* @class SimpleMonthPicker\r\n* @extends module:moonstone/SimplePicker~SimplePicker\r\n* @ui\r\n* @deprecated Since 2.6\r\n* @public\r\n*/\r\nvar SimpleMonthPicker = kind(\r\n\t/** @lends module:moonstone/Calendar~SimpleMonthPicker.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.SimpleMonthPicker',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: SimplePicker,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished: /** @lends module:moonstone/Calendar~SimpleMonthPicker.prototype */ {\r\n\r\n\t\t/**\r\n\t\t* The number of months to show. A few international calendars have more than\r\n\t\t* 12 months in some years, but we default to the Gregorian calendar's value\r\n\t\t* of 12.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 12\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmonths: 12\r\n\t},\r\n\r\n\t/**\r\n\t* Shows/hides previous/next buttons based on current index.\r\n\t*\r\n\t* @private\r\n\t* @override\r\n\t*/\r\n\tshowHideNavButtons: function() {\r\n\t\tvar index = this.getSelectedIndex(),\r\n\t\t\tmaxIndex = Math.max(this.months, this.getClientControls().filter(function(val, idx, arr) { return val.content; }).length) - 1;\r\n\t\tvar prevButton = this.rtl ? this.$.buttonRight : this.$.buttonLeft;\r\n\t\tvar nextButton = this.rtl ? this.$.buttonLeft : this.$.buttonRight;\r\n\r\n\t\tif (this.disabled) {\r\n\t\t\tthis.hideNavButton(prevButton);\r\n\t\t\tthis.hideNavButton(nextButton);\r\n\t\t// Always show buttons if _this.wrap_ is _true_\r\n\t\t} else if (this.wrap) {\r\n\t\t\tthis.showNavButton(prevButton);\r\n\t\t\tthis.showNavButton(nextButton);\r\n\t\t// If we have one or less options, always show no buttons\r\n\t\t} else if (maxIndex <= 0) {\r\n\t\t\tthis.hideNavButton(prevButton);\r\n\t\t\tthis.hideNavButton(nextButton);\r\n\t\t// If we are on the first option, hide the left button\r\n\t\t} else if (index <= 0) {\r\n\t\t\tthis.showNavButton(nextButton);\r\n\t\t\tthis.hideNavButton(prevButton);\r\n\t\t// If we are on the last item, hide the right button\r\n\t\t} else if (index >= maxIndex) {\r\n\t\t\tthis.showNavButton(prevButton);\r\n\t\t\tthis.hideNavButton(nextButton);\r\n\t\t// Otherwise show both buttons\r\n\t\t} else {\r\n\t\t\tthis.showNavButton(prevButton);\r\n\t\t\tthis.showNavButton(nextButton);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Cycles the selected item to the one after the currently selected item.\r\n\t* Make sure not to cycle past the last month in the picker for this\r\n\t* calendar.\r\n\t*\r\n\t* @public\r\n\t* @override\r\n\t*/\r\n\tnext: function(sender, e) {\r\n\t\tif (!this.disabled) {\r\n\t\t\tvar idx = this.selectedIndex + 1;\r\n\t\t\tvar max = Math.min(this.getClientControls().length, this.months);\r\n\t\t\tif (idx > max - 1) {\r\n\t\t\t\tidx = this.wrap ? 0 : max - 1;\r\n\t\t\t}\r\n\t\t\tif (!this.wrap && idx === max - 1\r\n\t\t\t\t&& e && e.cancelHoldPulse) {\r\n\t\t\t\te.cancelHoldPulse();\r\n\t\t\t}\r\n\t\t\tthis.setSelectedIndex(idx);\r\n\t\t}\r\n\t}\r\n\r\n});\r\n\r\n/**\r\n* THIS KIND IS DEPRECATED.\r\n* {@link module:moonstone/Calendar~Calendar} is a control that displays a monthly calendar, with the\r\n* month name at the top and a grid of days, grouped into rows by week, below.\r\n*\r\n* The header buttons are used to navigate to the desired month; the desired day\r\n* is selected by tapping on it.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tCalendar = require('moonstone/Calendar');\r\n*\r\n* \t{kind: Calendar, content: 'Calendar Title'}\r\n* ```\r\n*\r\n* @deprecated Since 2.6\r\n* @class Calendar\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/Calendar~Calendar.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Calendar',\r\n\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/Calendar~Calendar.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t*\r\n\t\t* Current locale used for formatting. May be set after the control is\r\n\t\t* created, in which case the control will be updated to reflect the\r\n\t\t* new value.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tlocale: '',\r\n\r\n\t\t/**\r\n\t\t*\r\n\t\t* The current {@glossary Date} object.\r\n\t\t*\r\n\t\t* @type {Date}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tvalue: null,\r\n\r\n\t\t/**\r\n\t\t*\r\n\t\t* The first day of the week in the current locale.\r\n\t\t* Valid values are `0` (i.e., Sunday) through `6` (Saturday). Default is `0`.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tfirstDayOfWeek: 0,\r\n\r\n\t\t/**\r\n\t\t*\r\n\t\t* Maximum number of weeks to display on a screen.\r\n\t\t* If this value is greater than `9`, dates two months in the future may be\r\n\t\t* shown. Unexpected input may result in errors.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 6\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmaxWeeks: 6,\r\n\r\n\t\t/**\r\n\t\t*\r\n\t\t* Start value for range of years displayed in year picker.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 1900\r\n\t\t* @public\r\n\t\t*/\r\n\t\tstartYear: 1900,\r\n\r\n\t\t/**\r\n\t\t*\r\n\t\t* End value for range of years displayed in year picker.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 2200\r\n\t\t* @public\r\n\t\t*/\r\n\t\tendYear: 2200,\r\n\r\n\t\t/**\r\n\t\t* When `true`, the days will have locale-safe uppercasing applied.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tuppercaseDays: true,\r\n\r\n\t\t/**\r\n\t\t*\r\n\t\t* CSS classes used to decorate day labels (e.g., `'moon-divider'`).\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdayOfWeekClasses: '',\r\n\r\n\t\t/**\r\n\t\t*\r\n\t\t* Length of abbreviation to use for day of the week.\r\n\t\t* Accepted values are `'short'`, `'medium'`, `'long'`, and `'full'`.\r\n\t\t* You may also use the first character of the desired value, since\r\n\t\t* [iLib]{@glossary ilib} stores the first character only.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'short' || 's'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdayOfWeekLength: 's'\t//short\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\t/**\r\n\t\t\tFires when the date changes.\r\n\r\n\t\t\t`inEvent.value` contains a standard JavaScript Date object representing\r\n\t\t\tthe current date.\r\n\t\t*/\r\n\t\tonChange: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmonths: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdays: ['S','M','T','W','T','F','S'],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-calendar-picker',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'monthPicker', kind: SimpleMonthPicker, classes: 'moon-calendar-picker-month', onChange: 'selectMonthPicker'},\r\n\t\t{name: 'yearPicker', kind: SimplePicker, classes: 'moon-calendar-picker-year', onChange: 'selectYearPicker'},\r\n\t\t{name: 'days', classes: 'moon-calendar-picker-days moon-neutral', kind: Group},\r\n\t\t{name: 'dates', kind: Group}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tthis.initCalendar();\r\n\t\tthis.set('value', this.value || new Date(), true);\r\n\t\tthis.setLocale(new LocaleInfo().locale);\r\n\t},\r\n\r\n\t/**\r\n\t* Creates picker contents with default `(en-US)` values.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tinitCalendar: function () {\r\n\t\tvar i;\r\n\t\tvar startYear = this.getStartYear(),\r\n\t\t\tendYear = this.getEndYear(),\r\n\t\t\t// Create 13 months components in the month picker to take care of\r\n\t\t\t// the Hebrew calendar, but only show the last month in those Hebrew\r\n\t\t\t// years that actually have 13 months\r\n\t\t\tnumberOfMonths = 13;\r\n\r\n\t\tthis.cal = calendarFactory();\r\n\t\tthis.localeValue = dateFactory({timezone: 'local'});\r\n\t\tthis._dateFmt = new DateFmt({\r\n\t\t\ttype: 'date',\t// only format the date component, not the time\r\n\t\t\tdate: 'd',\t\t// 'd' is the date of month\r\n\t\t\tuseNative: false,\r\n\t\t\tlength: 'short',\t//it uses 2 chars to abbreviate properly\r\n\t\t\ttimezone: 'local'\r\n\t\t});\r\n\r\n\t\t//Populates SimplePicker with years.\r\n\t\tfor (i = startYear; i <= endYear; i++) {\r\n\t\t\tthis.$.yearPicker.createComponent({content: i, classes: 'picker-content'});\r\n\t\t}\r\n\t\t//Populates SimplePicker with months of the year, from JAN to DEC.\r\n\t\tvar months = this.months;\r\n\t\tfor (i = 0; i < numberOfMonths; i++) {\r\n\t\t\tthis.$.monthPicker.createComponent({content: months[i], classes: 'picker-content'});\r\n\t\t}\r\n\t\t//Initializes days of the week. SUN is the first and SAT is the last.\r\n\t\tfor(i = 0; i < 7; i++) {\r\n\t\t\tthis.$.days.createComponent({\r\n\t\t\t\tcontent: this.days[i],\r\n\t\t\t\tclasses: 'moon-calendar-picker-day-base ' + (this.dayOfWeekClasses || 'moon-calendar-picker-day'),\r\n\t\t\t\tdisabled: true\r\n\t\t\t});\r\n\t\t}\r\n\t\t//Populates Calendar with CalendarDate objects.\r\n\t\tif (!this.$.dates.controls.length) {\r\n\t\t\tfor (i = 1; i <= this.maxWeeks * 7; i++) {\r\n\t\t\t\tthis.$.dates.createComponent({\r\n\t\t\t\t\tkind: CalendarDate,\r\n\t\t\t\t\tonDateSelected:'selectDate',\r\n\t\t\t\t\tformatter: this._dateFmt\r\n\t\t\t\t}, {owner:this});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* According to the value, adjusts the year bounds and updates the year picker.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tadjustYearBounds: function(){\r\n\t\tvar i, yearDiff,\r\n\t\t\tcount = this.$.yearPicker.getClientControls().length,\r\n\t\t\tyear = this.value instanceof Date ? this.value.getFullYear() : this.startYear;\r\n\r\n\t\tthis.startYear = year < this.startYear ? year : this.startYear;\r\n\t\tthis.endYear = year > this.endYear ? year : this.endYear;\r\n\t\tyearDiff = this.endYear - this.startYear;\r\n\t\tif(count <= yearDiff){\r\n\t\t\tfor(i = count; i <= yearDiff; i++) {\r\n\t\t\t\tthis.$.yearPicker.createComponent({classes: 'picker-content'});\r\n\t\t\t}\r\n\t\t\tthis.updateYearPicker();\r\n\t\t\tthis.$.yearPicker.render();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Calculates the start year in the current calendar.\r\n\t *\r\n\t * @private\r\n\t */\r\n\tgetStartYear: function() {\r\n\t\tvar greg = dateFactory({\r\n\t\t\ttype: \"gregorian\",\r\n\t\t\tyear: this.startYear,\r\n\t\t\tmonth: 1,\r\n\t\t\tday: 1,\r\n\t\t\ttimezone: 'local'\r\n\t\t});\r\n\t\tvar localCalendarDate = dateFactory({\r\n\t\t\tjulianday: greg.getJulianDay(),\r\n\t\t\ttimezone: \"local\"\r\n\t\t});\r\n\t\treturn localCalendarDate.getYears();\r\n\t},\r\n\r\n\t/**\r\n\t * Calculates the end year in the current calendar.\r\n\t *\r\n\t * @private\r\n\t */\r\n\tgetEndYear: function() {\r\n\t\tvar greg = dateFactory({\r\n\t\t\ttype: \"gregorian\",\r\n\t\t\tyear: this.endYear,\r\n\t\t\tmonth: 1,\r\n\t\t\tday: 1,\r\n\t\t\ttimezone: 'local'\r\n\t\t});\r\n\t\tvar localCalendarDate = dateFactory({\r\n\t\t\tjulianday: greg.getJulianDay(),\r\n\t\t\ttimezone: \"local\"\r\n\t\t});\r\n\t\treturn localCalendarDate.getYears();\r\n\t},\r\n\r\n\t/**\r\n\t* Sets locale to value passed in at Calendar instantiation time, sending\r\n\t* appropriate notifications.\r\n\t*\r\n\t* @fires module:moonstone/Calendar~Calendar#onChange\r\n\t* @private\r\n\t*/\r\n\tlocaleChanged: function () {\r\n\t\tilib.setLocale(this.locale);\r\n\t\t// the new locale may use a different calendar,\r\n\t\t// so redo the local date in that new calendar\r\n\t\t// The this.value does not change, but the local date does.\r\n\t\tthis.localeValue = dateFactory({\r\n\t\t\tunixtime: this.value.getTime(),\r\n\t\t\ttimezone: 'local'\r\n\t\t});\r\n\r\n\t\tthis._monthFmt = undefined; // force it to recreate the formatter\r\n\t\tthis._dayFmt = undefined;\r\n\t\tthis.calendarChanged();\r\n\t\tthis.firstDayOfWeek = -1; // Force change handler when locale changes\r\n\t\tthis.setFirstDayOfWeek(new LocaleInfo(this.locale).getFirstDayOfWeek());\r\n\r\n\t\t// notify each date instance as well\r\n\t\tvar dates = this.$.dates.getControls();\r\n\t\tthis._dateFmt = new DateFmt({\r\n\t\t\ttype: 'date',\t// only format the date component, not the time\r\n\t\t\tdate: 'd',\t\t// 'd' is the date of month\r\n\t\t\tuseNative: false,\r\n\t\t\tlength: 's',\t//\"short\" uses 2 chars to abbreviate properly\r\n\t\t\ttimezone: 'local'\r\n\t\t});\r\n\t\tfor (var i = 0; i < this.$.dates.controls.length; i++) {\r\n\t\t\tdates[i].setDateFormatter(this._dateFmt);\r\n\t\t}\r\n\t\tthis.updateYearPicker();\r\n\t\tthis.updateMonthPicker();\r\n\t\tthis.setDayOfWeekLength(this._dateFmt.length);\r\n\t\tthis.doChange({value: this.value});\r\n\t},\r\n\r\n\t/**\r\n\t* Sometimes the first day of week changes because of a locale change.\r\n\t* When this happens, we destroy the day label and reconstruct it.\r\n\t* We create a new `ilib.Date` instance with the time of the given day, and\r\n\t* get a Gregorian date instance that represents the first day of the week.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tfirstDayOfWeekChanged: function () {\r\n\t\tthis.updateDays();\r\n\t\tthis.updateDates();\r\n\t},\r\n\r\n\t/**\r\n\t* We were previously relying on a non-guaranteed ordering of calls (change handlers\r\n\t* on bindings, transformation of binding values) to perform validation on the\r\n\t* Date value before updating a control with this value. Though this ordering was\r\n\t* non-guaranteed, it has since changed and can possibly affect any code that is\r\n\t* improperly relying on the specific ordering of these calls. We instead handle the\r\n\t* validation in the generic setter and facade this via the `setValue()` method.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsetValue: function (inValue) {\r\n\t\tthis.set('value', inValue);\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tset: function (path, value) {\r\n\t\tif (path == 'value') {\r\n\t\t\tif(isNaN(value) || value === null) {\r\n\t\t\t\tvalue = new Date();\r\n\t\t\t}\r\n\t\t}\r\n\t\tControl.prototype.set.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:moonstone/Calendar~Calendar#onChange\r\n\t* @private\r\n\t*/\r\n\tvalueChanged: function (inOld) {\r\n\t\tvar month, year;\r\n\t\tthis.localeValue = dateFactory({\r\n\t\t\tunixtime: this.value.getTime(),\r\n\t\t\ttimezone: 'local'\r\n\t\t});\r\n\t\tmonth = this.localeValue.getMonths() - 1;\r\n\t\tyear = this.localeValue.getYears();\r\n\t\tthis.adjustYearBounds();\r\n\t\tif (!this.generated || this.$.monthPicker.getSelectedIndex() != month) {\r\n\t\t\tthis.$.monthPicker.setSelectedIndex(month);\r\n\t\t}\r\n\t\tif (!this.generated || this.$.yearPicker.getSelected().getContent() != year) {\r\n\t\t\tthis.$.yearPicker.setSelectedIndex(year - this.getStartYear());\r\n\t\t}\r\n\t\tthis.updateDates();\r\n\t\tif (this.value) {\r\n\t\t\tthis.doChange({value: this.value});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Updates year picker.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdateYearPicker: function () {\r\n\t\tvar i, l,\r\n\t\t\tyearPickerControls = this.$.yearPicker.getClientControls(),\r\n\t\t\tstartYear = this.getStartYear(),\r\n\t\t\tendYear = this.getEndYear();\r\n\t\tfor (i = 0, l = endYear - startYear; i <= l; i++) {\r\n\t\t\tyearPickerControls[i].setContent(i + startYear);\r\n\t\t}\r\n\t\tvar year = this.localeValue.getYears();\r\n\t\tthis.$.yearPicker.setSelectedIndex(year - this.getStartYear());\r\n\t},\r\n\r\n\t/**\r\n\t* Updates month name displayed in month picker.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdateMonthPicker: function () {\r\n\t\tvar month;\r\n\t\tif (typeof(this._monthFmt) === 'undefined') {\r\n\t\t\tthis._monthFmt = new DateFmt({\r\n\t\t\t\tlocale: this.locale,\r\n\t\t\t\ttype: 'date',\t//only format the date component, not the time\r\n\t\t\t\tdate: 'm',\t\t//'m' is the month of year\r\n\t\t\t\tuseNative: false,\r\n\t\t\t\tlength: 'long'\r\n\t\t\t});\r\n\t\t}\r\n\t\tvar numberOfMonths = this.cal.getNumMonths(this.localeValue.getYears());\r\n\t\tvar monthPickerControls = this.$.monthPicker.getClientControls();\r\n\r\n\t\t// show the 13th month for those calendars that use it, and only in those\r\n\t\t// years that use it\r\n\t\tthis.$.monthPicker.setMonths(numberOfMonths);\r\n\r\n\t\t// this depends on the year because some calendars have 12 or 13 months,\r\n\t\t// depending on which year it is\r\n\t\tvar monthNames = this._monthFmt.getMonthsOfYear({\r\n\t\t\tyear: this.localeValue.getYears(),\r\n\t\t\tlength: 'long'\r\n\t\t});\r\n\t\tfor (var i = 0; i < monthNames.length - 1; i++) {\r\n\t\t\tmonthPickerControls[i].setContent(monthNames[i+1]);\r\n\t\t}\r\n\t\tmonth = this.localeValue.getMonths() - 1;\r\n\t\tthis.$.monthPicker.setSelectedIndex(month);\r\n\t},\r\n\r\n\t/**\r\n\t* Updates days of the week from first day to last day.\r\n\t* A `'0'` value for `this.firstDayOfweek` means Sunday and `'1'` means Monday.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdateDays: function () {\r\n\t\tif (typeof(this._dayFmt) === 'undefined' && ilib) {\r\n\t\t\tthis._dayFmt = new DateFmt({\r\n\t\t\t\ttype: 'date',\t//only format the date component, not the time\r\n\t\t\t\tdate: 'w',\t\t//'w' is the day of the week\r\n\t\t\t\tuseNative: false,\r\n\t\t\t\tlength: this.dayOfWeekLength,\r\n\t\t\t\tlocale: this.locale\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar daysControls = this.$.days.getClientControls(),\r\n\t\t\tdaysOfWeek = this._dayFmt.getDaysOfWeek(),\r\n\t\t\tdayOfWeek;\r\n\t\tfor(var i = 0; i < 7; i++) {\r\n\t\t\tdayOfWeek = (this.firstDayOfWeek + i) % 7;\r\n\t\t\tdaysControls[i].setContent(this.get('uppercaseDays') ? util.toUpperCase(daysOfWeek[dayOfWeek]) : daysOfWeek[dayOfWeek]);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Sets up first week of this month.\r\n\t* Before the first day of this month, days from the previous month will be\r\n\t* used to fill the calendar.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdatePrevMonth: function () {\r\n\t\tvar dates,\r\n\t\t\ti,\r\n\t\t\t// get the first of this month\r\n\t\t\tdt = dateFactory({\r\n\t\t\t\tyear: this.localeValue.getYears(),\r\n\t\t\t\tmonth: this.localeValue.getMonths(),\r\n\t\t\t\tday: 1,\r\n\t\t\t\ttimezone: 'local'\r\n\t\t\t});\r\n\r\n\t\t// find the week-start day on or before the first of the month\r\n\t\tvar sunday = dt.onOrBefore(this.firstDayOfWeek);\r\n\r\n\t\t// if the sunday is before the current date\r\n\t\tvar sunJD = sunday.getJulianDay();\r\n\t\tvar daysBefore = Math.floor(dt.getJulianDay() - sunJD);\r\n\t\tif (daysBefore > 0) {\r\n\t\t\tdates = this.$.dates.getControls();\r\n\t\t\tvar temp;\r\n\t\t\tfor (i = 0; i <= daysBefore; i++) {\r\n\t\t\t\ttemp = dateFactory({\r\n\t\t\t\t\tjulianday: sunJD + i,\r\n\t\t\t\t\ttimezone: 'local'\r\n\t\t\t\t});\r\n\t\t\t\tdates[i].setValue(temp.getJSDate());\r\n\t\t\t\tdates[i].setColor(true);\r\n\t\t\t}\r\n\t\t\treturn daysBefore;\r\n\t\t}\r\n\t\treturn 0;\r\n\t},\r\n\r\n\t/**\r\n\t* Sets up last week of this month.\r\n\t* After the last day of this month, days from the next month will be used to\r\n\t* fill the calendar.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdateNextMonth: function (datesOfPrevMonth, monthLength) {\r\n\t\tvar startIndex = datesOfPrevMonth + monthLength,\r\n\t\t\tdates = this.$.dates.getControls(),\r\n\t\t\ti;\r\n\r\n\t\tvar lastDay = dateFactory({\r\n\t\t\tyear: this.localeValue.getYears(),\r\n\t\t\tmonth: this.localeValue.getMonths(),\r\n\t\t\tday: monthLength,\r\n\t\t\ttimezone: 'local'\r\n\t\t});\r\n\r\n\t\t// get the first day of the next month\r\n\t\tvar jd = lastDay.getJulianDay() + 1;\r\n\t\tvar temp;\r\n\t\tfor (i = 0; i < this.$.dates.controls.length - startIndex; i++) {\r\n\t\t\ttemp = dateFactory({\r\n\t\t\t\tjulianday: jd + i,\r\n\t\t\t\ttimezone: 'local'\r\n\t\t\t});\r\n\t\t\tdates[startIndex + i].setValue(temp.getJSDate());\r\n\t\t\tdates[startIndex + i].setColor(true);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateDates: function () {\r\n\t\tvar datesOfPrevMonth = this.updatePrevMonth(),\r\n\t\t\tthisYear = this.localeValue.getYears(),\r\n\t\t\tthisMonth = this.localeValue.getMonths(),\r\n\t\t\tmonthLength = this.getMonthLength(thisYear, thisMonth),\r\n\t\t\tdates = this.$.dates.getControls(),\r\n\t\t\ttemp,\r\n\t\t\ti;\r\n\r\n\t\tfor (i = 0; i < monthLength; i++) {\r\n\t\t\ttemp = dateFactory({\r\n\t\t\t\tyear: thisYear,\r\n\t\t\t\tmonth: thisMonth,\r\n\t\t\t\tday: i + 1,\r\n\t\t\t\ttimezone: 'local'\r\n\t\t\t});\r\n\t\t\tdates[datesOfPrevMonth + i].setValue(temp.getJSDate());\r\n\t\t\tdates[datesOfPrevMonth + i].setColor(false);\r\n\t\t}\r\n\t\tthis.$.dates.setActive(dates[datesOfPrevMonth - 1 + this.localeValue.getDays()]);\r\n\t\tthis.updateNextMonth(datesOfPrevMonth, monthLength);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetYear: function (newYear) {\r\n\t\tvar month,\r\n\t\t\tday,\r\n\t\t\tnewMonthLength;\r\n\r\n\t\tif (this.localeValue.getYears() != newYear) {\r\n\t\t\tmonth = this.localeValue.getMonths();\r\n\t\t\tday = this.localeValue.getDays();\r\n\r\n\t\t\tnewMonthLength = this.getMonthLength(newYear, month);\r\n\r\n\t\t\tthis.localeValue = dateFactory({\r\n\t\t\t\tyear: newYear,\r\n\t\t\t\tmonth: month,\r\n\t\t\t\tday: (day > newMonthLength) ? newMonthLength : day,\r\n\t\t\t\ttimezone: 'local'\r\n\t\t\t});\r\n\r\n\t\t\tthis.setValue(this.localeValue.getJSDate());\r\n\r\n\t\t\t// Some years have a different number of months in other calendars,\r\n\t\t\t// so we need to make sure to update the month names in the picker\r\n\t\t\tthis.updateMonthPicker();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetMonth: function (newMonth) {\r\n\t\tvar year,\r\n\t\t\tday,\r\n\t\t\tnewMonthLength;\r\n\r\n\t\tnewMonth++; // convert to ilib month\r\n\t\tif (this.localeValue.getMonths() != newMonth) {\r\n\t\t\tyear = this.localeValue.getYears();\r\n\t\t\tday = this.localeValue.getDays();\r\n\r\n\t\t\tnewMonthLength = this.getMonthLength(year, newMonth);\r\n\r\n\t\t\tthis.localeValue = dateFactory({\r\n\t\t\t\tyear: year,\r\n\t\t\t\tmonth: newMonth,\r\n\t\t\t\tday: (day > newMonthLength) ? newMonthLength : day,\r\n\t\t\t\ttimezone: 'local'\r\n\t\t\t});\r\n\r\n\t\t\tthis.setValue(this.localeValue.getJSDate());\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetDate: function (newDate) {\r\n\t\tvar year = this.localeValue.getYears(),\r\n\t\t\tmonth = this.localeValue.getMonths(),\r\n\t\t\tnewMonthLength = this.getMonthLength(year, month);\r\n\r\n\t\t\tthis.localeValue = dateFactory({\r\n\t\t\t\tyear: year,\r\n\t\t\t\tmonth: month,\r\n\t\t\t\tday: (newDate > newMonthLength) ? newMonthLength : newDate,\r\n\t\t\t\ttimezone: 'local'\r\n\t\t\t});\r\n\r\n\t\t\tthis.setValue(this.localeValue.getJSDate());\r\n\t},\r\n\r\n\t/**\r\n\t* Responds to selection of a particular [CalendarDate]{@link module:moonstone/Calendar~CalendarDate}.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tselectDate: function (inSender, inEvent) {\r\n\t\tvar newValue = inEvent.originator.value;\r\n\t\tthis.setValue(newValue);\r\n\t\tthis.localeValue = dateFactory({\r\n\t\t\tunixtime: newValue.getTime(),\r\n\t\t\ttimezone: 'local'\r\n\t\t});\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* Responds to change of year in year picker.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tselectYearPicker: function (inSender, inEvent) {\r\n\t\tvar year = this.$.yearPicker.getSelected().getContent();\r\n\t\tthis.setYear(year);\r\n\t\t// some calendars have a different number of months and different\r\n\t\t// names of months depending on the year\r\n\t\tthis.updateMonthPicker();\r\n\t},\r\n\r\n\t/**\r\n\t* Responds to change of month in month picker.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tselectMonthPicker: function (inSender, inEvent) {\r\n\t\tvar month = this.$.monthPicker.getSelectedIndex();\r\n\t\tthis.setMonth(month);\r\n\t},\r\n\r\n\t/**\r\n\t* Returns number of days in a particular month/year.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgetMonthLength: function (inYear, inMonth) {\r\n\t\treturn this.cal.getMonLength(inMonth, inYear);\r\n\t},\r\n\r\n\t/**\r\n\t* When type of calendar is changed (e.g., from `gregorian` to `thaisolar`,\r\n\t* `julian`, `arabic`, `hebrew`, or `chinese`), checks for differences in year,\r\n\t* month, and day.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcalendarChanged: function () {\r\n\t\tvar newCalendar = calendarFactory();\r\n\t\tif (newCalendar.getType() !== this.cal.getType()) {\r\n\t\t\tthis.cal = newCalendar;\r\n\t\t\tthis._monthFmt = undefined; // force it to recreate the formatter\r\n\t\t\tthis.updateMonthPicker();\r\n\t\t\tthis.updateYearPicker();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Switches CSS classes when the user (or developer) changes the day label\r\n\t* style dynamically.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdayOfWeekClassesChanged: function (inOld) {\r\n\t\tvar dayControls = this.$.days.getClientControls();\r\n\t\tfor (var i = 0; i < dayControls.length; i++) {\r\n\t\t\tdayControls[i].removeClass(inOld || 'moon-calendar-picker-day');\r\n\t\t\tdayControls[i].addClass(this.dayOfWeekClasses || 'moon-calendar-picker-day');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdayOfWeekLengthChanged: function () {\r\n\t\tthis._dayFmt = undefined;\r\n\t\tthis.updateDays();\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:moonstone/ScrollControls~ScrollControls} kind.\r\n* @wip\r\n* @module moonstone/ScrollControls\r\n*/\r\nvar\r\n\tdom = require('enyo/dom'),\r\n\tkind = require('enyo/kind'),\r\n\tControl = require('enyo/Control'),\r\n\tNewScrollThumb = require('enyo/NewThumb'),\r\n\tSignals = require('enyo/Signals');\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\nvar\r\n\tNewPagingControl = require('../NewPagingControl');\r\n\r\n/**\r\n* TODO: {@link module:moonstone/ScrollControls~ScrollControls} needs to be documented.\r\n*\r\n* @class ScrollControls\r\n* @wip\r\n* @ui\r\n* @public\r\n*/\r\nvar ScrollControls = module.exports = kind(\r\n\t/** @lends module:moonstone/ScrollControls~ScrollControls.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ScrollControls',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttag: null,\r\n\r\n\t/**\r\n\t* If `true`, paging controls are focusable (in 5-way mode).  Normally, this\r\n\t* is not required, since the scroller will automatically scroll to ensure\r\n\t* most focusable items are in view.  It is intended to be used when the\r\n\t* scroller contents have no spotlightable controls, such as the case of a\r\n\t* scroller with a long body of text.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tspotlightPagingControls: true,\r\n\r\n\t/**\r\n\t* If `true`, measure the size of the scroll columns on initial render.\r\n\t* See {@link module:moonstone/ScrollControls~ScrollControls#measureScrollColumns} for details.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tmeasureScrollColumns: true,\r\n\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'vColumn', classes: 'moon-scroller-v-column', components: [\r\n\t\t\t{name: 'pageUpControl', kind: NewPagingControl, disabled: true, ontap: 'pageUp', defaultSpotlightDisappear: 'pageDownControl', defaultSpotlightDown: 'pageDownControl', side: 'top', onSpotlightUp: 'spotPaging'},\r\n\t\t\t{name: 'vthumbContainer', classes: 'moon-scroller-thumb-container moon-scroller-vthumb-container', components: [\r\n\t\t\t\t{name: 'vthumb', kind: NewScrollThumb, classes: 'moon-scroller-vthumb hidden', axis: 'v', minSize: 20}\r\n\t\t\t]},\r\n\t\t\t{name: 'pageDownControl', kind: NewPagingControl, disabled: true, ontap: 'pageDown', defaultSpotlightDisappear: 'pageUpControl', defaultSpotlightUp: 'pageUpControl', side: 'bottom', onSpotlightDown: 'spotPaging'}\r\n\t\t]},\r\n\t\t{name: 'hColumn', classes: 'moon-scroller-h-column', components: [\r\n\t\t\t{name: 'pageLeftControl', kind: NewPagingControl, disabled: true, ontap: 'pageLeft', defaultSpotlightDisappear: 'pageRightControl', defaultSpotlightRight: 'pageRightControl', side: 'left', onSpotlightLeft: 'spotPaging'},\r\n\t\t\t{name: 'hthumbContainer', classes: 'moon-scroller-thumb-container moon-scroller-hthumb-container', components: [\r\n\t\t\t\t{name: 'hthumb', kind: NewScrollThumb, classes: 'moon-scroller-hthumb hidden', axis: 'h', minSize: 20}\r\n\t\t\t]},\r\n\t\t\t{name: 'pageRightControl', kind: NewPagingControl, disabled: true, ontap: 'pageRight', defaultSpotlightDisappear: 'pageLeftControl', defaultSpotlightLeft: 'pageLeftControl', side: 'right', onSpotlightRight: 'spotPaging'}\r\n\t\t]},\r\n\t\t{kind: Signals, onSpotlightModeChanged: 'spotlightModeChanged', isChrome: true}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function() {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\r\n\t\t// TODO: Figure out how not to use parent here and elsewhere -- should be able to get there from scroller\r\n\t\tthis.parent.addClass('moon-scroller-client-wrapper');\r\n\r\n\t\tthis._updateScrollability = this.bindSafely(this.updateScrollability);\r\n\t\tthis.scrollerChanged();\r\n\t},\r\n\r\n\tscrollerChanged: function(was) {\r\n\t\tif (was) {\r\n\t\t\twas.off('scrollabilityChanged', this._updateScrollability);\r\n\t\t}\r\n\t\tif (this.scroller) {\r\n\t\t\tthis.scroller.on('scrollabilityChanged', this._updateScrollability);\r\n\t\t\tthis.$.vthumb.set('scroller', this.scroller);\r\n\t\t\tthis.$.hthumb.set('scroller', this.scroller);\r\n\t\t\tthis.$.pageUpControl.set('scroller', this.scroller);\r\n\t\t\tthis.$.pageDownControl.set('scroller', this.scroller);\r\n\t\t\tthis.$.pageLeftControl.set('scroller', this.scroller);\r\n\t\t\tthis.$.pageRightControl.set('scroller', this.scroller);\r\n\t\t}\r\n\t},\r\n\r\n\tupdateScrollability: function() {\r\n\t\tvar s = this.scroller;\r\n\r\n\t\tthis.enableDisableHorizontalScrollControls(s.hEnabled);\r\n\t\tthis.enableDisableVerticalScrollControls(s.vEnabled);\r\n\t\tthis.showHideHorizontalScrollColumns(s.canScrollX);\r\n\t\tthis.showHideVerticalScrollColumns(s.canScrollY);\r\n\t\tthis.$.pageUpControl.set('disabled', !s.canScrollUp);\r\n\t\tthis.$.pageDownControl.set('disabled', !s.canScrollDown);\r\n\t\tthis.$.pageLeftControl.set('disabled', !s.canScrollLeft);\r\n\t\tthis.$.pageRightControl.set('disabled', !s.canScrollRight);\r\n\t},\r\n\r\n\tpageUp: function() {\r\n\t\tthis.scroller.pageUp();\r\n\t},\r\n\r\n\tpageDown: function() {\r\n\t\tthis.scroller.pageDown();\r\n\t},\r\n\r\n\tpageLeft: function() {\r\n\t\tthis.scroller.pageLeft();\r\n\t},\r\n\r\n\tpageRight: function() {\r\n\t\tthis.scroller.pageRight();\r\n\t},\r\n\r\n\t/**\r\n\t* Measures scroll columns as needed, then shows or hides page controls.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\trendered: function() {\r\n\t\tvar measure = this.measureScrollColumns && !ScrollControls._scrollColumnsMeasured;\r\n\r\n\t\tif (measure) {\r\n\t\t\t// We temporarily add the v-scroll-enabled class so that\r\n\t\t\t// we can measure the width of the vertical scroll column\r\n\t\t\t// after rendering and store it as a static property -- see\r\n\t\t\t// _measureScrollColumns().\r\n\t\t\t//\r\n\t\t\t// The v-scroll-enabled class will automatically be removed\r\n\t\t\t// after we measure, when we call setupBounds() (which in\r\n\t\t\t// turn calls enableDisableScrollColumns()).\r\n\t\t\tthis.parent.addClass('v-scroll-enabled');\r\n\t\t}\r\n\r\n\t\tControl.prototype.rendered.apply(this, arguments);\r\n\t\t\r\n\t\tif (measure) {\r\n\t\t\tthis._measureScrollColumns();\r\n\t\t}\r\n\r\n\t\tthis.spotlightPagingControlsChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* Moonstone's data grid list delegate uses scroll column metrics to calculate\r\n\t* available space for list controls. These metrics are derived via some LESS\r\n\t* calculations, so to avoid brittleness we choose to measure them from the DOM\r\n\t* rather than mirror the calculations in JavaScript.\r\n\t* \r\n\t* Upon request, we do the measurement here (the first time a scroller is rendered)\r\n\t* and cache the values in static properties, to avoid re-measuring each time we need\r\n\t* the metrics.\r\n\t* \r\n\t* @private\r\n\t*/\r\n\t_measureScrollColumns: function() {\r\n\t\tvar cs;\r\n\t\tcs = dom.getComputedStyle(this.parent.hasNode());\r\n\t\tScrollControls.vScrollColumnSize =\r\n\t\t\tparseInt(cs['padding-left'], 10) +\r\n\t\t\tparseInt(cs['padding-right'], 10);\r\n\t\tScrollControls.hScrollColumnSize = this.$.hColumn.hasNode().offsetHeight;\r\n\t\tScrollControls._scrollColumnsMeasured = true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightPagingControlsChanged: function() {\r\n\t\tthis.updateHoverOnPagingControls(!this.spotlightPagingControls);\r\n\t\tthis.showHideScrollColumns(this.spotlightPagingControls);\r\n\t\t// if (this.generated) {\r\n\t\t// \tthis.setupBounds();\r\n\t\t// }\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateHoverOnPagingControls: function(hover) {\r\n\t\tthis.$.pageLeftControl.addRemoveClass('hover', hover);\r\n\t\tthis.$.pageRightControl.addRemoveClass('hover', hover);\r\n\t\tthis.$.pageUpControl.addRemoveClass('hover', hover);\r\n\t\tthis.$.pageDownControl.addRemoveClass('hover', hover);\r\n\t},\r\n\r\n\t/**\r\n\t* Decorate spotlight events from paging controls so user can 5-way out of container\r\n\t* \r\n\t* @private\r\n\t*/\r\n\tspotPaging: function (sender, event) {\r\n\t\tevent.requestLeaveContainer = true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightModeChanged: function(sender, event) {\r\n\t\tvar activatePageControls = this.shouldShowPageControls();\r\n\t\tthis.showHideScrollColumns(activatePageControls);\r\n\t\tthis.updateHoverOnPagingControls(activatePageControls);\r\n\t},\r\n\r\n\t/**\r\n\t* Enables or disables vertical scroll column.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tenableDisableVerticalScrollControls: function(enabled) {\r\n\t\tvar hOffProp = this.rtl ? 'leftOffset' : 'rightOffset',\r\n\t\t\thOffVal = enabled ? ScrollControls.vScrollColumnSize : 0;\r\n\r\n\t\tthis.scroller.set(hOffProp, hOffVal);\r\n\t\tthis.parent.addRemoveClass('v-scroll-enabled', enabled);\r\n\t\tthis.$.vColumn.addRemoveClass('v-scroll-enabled', enabled);\r\n\t\tthis.$.hColumn.addRemoveClass('v-scroll-enabled', enabled);\r\n\t\tthis.$.pageUpControl.spotlight = enabled && this.spotlightPagingControls;\r\n\t\tthis.$.pageDownControl.spotlight = enabled && this.spotlightPagingControls;\r\n\t},\r\n\r\n\t/**\r\n\t* Enables or disables horizontal scroll column.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tenableDisableHorizontalScrollControls: function(enabled) {\r\n\t\tvar bOffVal = enabled ? ScrollControls.hScrollColumnSize : 0;\r\n\r\n\t\tthis.scroller.set('bottomOffset', bOffVal);\r\n\t\tthis.parent.addRemoveClass('h-scroll-enabled', enabled);\r\n\t\tthis.$.vColumn.addRemoveClass('h-scroll-enabled', enabled);\r\n\t\tthis.$.hColumn.addRemoveClass('h-scroll-enabled', enabled);\r\n\t\tthis.$.pageLeftControl.spotlight = enabled && this.spotlightPagingControls;\r\n\t\tthis.$.pageRightControl.spotlight = enabled && this.spotlightPagingControls;\r\n\t},\r\n\r\n\t/**\r\n\t* Shows or hides scroll columns.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshowHideScrollColumns: function(show) {\r\n\t\tthis.showHideVerticalScrollColumns(show);\r\n\t\tthis.showHideHorizontalScrollColumns(show);\r\n\t},\r\n\r\n\t/**\r\n\t* Shows or hides vertical scroll columns.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshowHideVerticalScrollColumns: function(show) {\r\n\t\tthis.$.vColumn.addRemoveClass('visible', show || this.spotlightPagingControls);\r\n\t},\r\n\r\n\t/**\r\n\t* Shows or hides horizontal scroll columns.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshowHideHorizontalScrollColumns: function(show) {\r\n\t\tthis.$.hColumn.addRemoveClass('visible', show || this.spotlightPagingControls);\r\n\t},\r\n\r\n\t/**\r\n\t* Returns boolean indicating whether page controls should be shown at all for this scroller.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshouldShowPageControls: function() {\r\n\t\treturn (Spotlight.getPointerMode() && this.hovering && !this.spotlightPagingControls);\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:moonstone/Panel~Panel} kind.\r\n* @module moonstone/Panel\r\n*/\r\n\r\nrequire('moonstone');\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutil = require('enyo/utils'),\r\n\tdom = require('enyo/dom'),\r\n\tControl = require('enyo/Control');\r\n\r\nvar\r\n\tFittableLayout = require('layout/FittableLayout'),\r\n\tFittableRows = require('layout/FittableRows'),\r\n\tFittableRowsLayout = FittableLayout.Rows;\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\nvar\r\n\tHeader = require('moonstone/Header');\r\n\r\n/**\r\n* Fires when this [panel]{@link module:moonstone/Panel~Panel} has completed its pre-arrangement transition.\r\n* No additional data is passed with this event.\r\n*\r\n* @event module:moonstone/Panel~Panel#onPreTransitionComplete\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when this [panel]{@link module:moonstone/Panel~Panel} has completed its post-arrangement transition.\r\n* No additional data is passed with this event.\r\n*\r\n* @event module:moonstone/Panel~Panel#onPostTransitionComplete\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/Panel~Panel} is the default kind for controls\r\n* created inside a {@link module:moonstone/Panels~Panels} container. A\r\n* Panels container will typically contain several instances of Panel.\r\n*\r\n* The built-in features include an embedded {@link module:moonstone/Header~Header}\r\n* and a {@link module:layout/FittableRows~FittableRows} layout for the main body\r\n* content.\r\n*\r\n* @class Panel\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\n\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/Panel~Panel.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Panel',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/Panel~Panel.prototype\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* Facade for the [title]{@link module:moonstone/Header~Header#title} property of the embedded\r\n\t\t* {@link module:moonstone/Header~Header}.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttitle: '',\r\n\r\n\t\t/**\r\n\t\t* Facade for the [titleAbove]{@link module:moonstone/Header~Header#titleAbove} property of the\r\n\t\t* embedded {@link module:moonstone/Header~Header}.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttitleAbove: '',\r\n\r\n\t\t/**\r\n\t\t* Facade for the [titleBelow]{@link module:moonstone/Header~Header#titleBelow} property of the\r\n\t\t* embedded {@link module:moonstone/Header~Header}.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttitleBelow: '',\r\n\r\n\t\t/**\r\n\t\t* Facade for the [subTitleBelow]{@link module:moonstone/Header~Header#subTitleBelow} property\r\n\t\t* of the embedded {@link module:moonstone/Header~Header}.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsubTitleBelow: '',\r\n\r\n\t\t/**\r\n\t\t* When `true`, the header's [titleAbove]{@link module:moonstone/Header~Header#titleAbove} property\r\n\t\t* is automatically populated with the panel index.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tautoNumber: true,\r\n\r\n\t\t/**\r\n\t\t* Facade for the [type]{@link module:moonstone/Header~Header#type} property of the embedded\r\n\t\t* {@link module:moonstone/Header~Header}.\r\n\t\t* Valid values are: `'large'`, `'small'`, and `'medium'`.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'large'\r\n\t\t* @public\r\n\t\t*/\r\n\t\theaderType: 'large',\r\n\r\n\t\t/**\r\n\t\t* Facade for the [allowHtml]{@link module:enyo/Control~Control#allowHtml} property of the\r\n\t\t* embedded {@link module:moonstone/Header~Header}.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tallowHtmlHeader: false,\r\n\r\n\t\t/**\r\n\t\t* Facade for the [backgroundSrc]{@link module:moonstone/Header~Header#backgroundSrc} property\r\n\t\t* of the embedded {@link module:moonstone/Header~Header}.\r\n\t\t*\r\n\t\t* @type {(String|String[]|module:enyo/resolution#selectSrc~src|module:enyo/resolution#selectSrc~src[])}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\theaderBackgroundSrc: null,\r\n\r\n\t\t/**\r\n\t\t* Facade for the [backgroundPosition]{@link module:moonstone/Header~Header#backgroundPosition}\r\n\t\t* property of the embedded {@link module:moonstone/Header~Header}.\r\n\t\t*\r\n\t\t* @type {(String|String[])}\r\n\t\t* @default 'top right'\r\n\t\t* @public\r\n\t\t*/\r\n\t\theaderBackgroundPosition: 'top right',\r\n\r\n\t\t/**\r\n\t\t* An object containing additional settings for the {@link module:moonstone/Header~Header}. Any\r\n\t\t* values specified here will be mixed into the header definition.\r\n\t\t*\r\n\t\t* @type {Object}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\theaderOptions: null,\r\n\r\n\t\t/**\r\n\t\t* Facade for the [titleUpperCase]{@link module:moonstone/Header~Header#titleUpperCase} property\r\n\t\t* of the embedded {@link module:moonstone/Header~Header}.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttitleUpperCase: true\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonSpotlightFocus: 'disableSpotlightDummy'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: 'container',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-panel',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tlayoutKind: FittableRowsLayout,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tuseFlex: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpanelTools : [\r\n\t\t/* header will be created here programmatically in createTools after mixing-in headerOptions */\r\n\t\t{name: 'panelBody', kind: FittableRows, fit: true, classes: 'moon-panel-body'},\r\n\t\t{name: 'spotlightDummy', kind: Control, spotlight: false, style: 'width:0; height:0;'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\theaderConfig : {name: 'header', kind: Header, isChrome: true},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: 'title', to: '$.header.title'},\r\n\t\t{from: 'title', to: '$.breadcrumbText.content'},\r\n\t\t{from: 'titleAbove', to: '$.header.titleAbove'},\r\n\t\t{from: 'titleAbove', to: '$.breadcrumbTitleAbove.content'},\r\n\t\t{from: 'titleBelow', to: '$.header.titleBelow'},\r\n\t\t{from: 'subTitleBelow', to: '$.header.subTitleBelow'},\r\n\t\t{from: 'allowHtmlHeader', to: '$.header.allowHtml'},\r\n\t\t{from: 'allowHtmlHeader', to: '$.breadcrumbText.allowHtml'},\r\n\t\t{from: 'headerBackgroundSrc', to: '$.header.backgroundSrc'},\r\n\t\t{from: 'headerBackgroundPosition', to: '$.header.backgroundPosition'},\r\n\t\t{from: 'titleUpperCase', to: '$.header.titleUpperCase'},\r\n\t\t{from: 'headerType', to: '$.header.type', oneWay: false}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\theaderComponents: [],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tisOffscreen: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonPanelOnscreen: '',\r\n\t\tonPanelOffscreen: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\t// FIXME: Need to determine whether headerComponents was passed on the instance or kind to get the ownership correct\r\n\t\tif (this.headerComponents) {\r\n\t\t\tvar owner = this.hasOwnProperty('headerComponents') ? this.getInstanceOwner() : this;\r\n\t\t\tthis.$.header.createComponents(this.headerComponents, {owner: owner});\r\n\t\t}\r\n\t\tthis.autoNumberChanged();\r\n\t\tthis.headerTypeChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitComponents: function () {\r\n\t\tthis.createTools();\r\n\t\tthis.controlParentName = 'panelBody';\r\n\t\tthis.discoverControlParent();\r\n\t\tControl.prototype.initComponents.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreateTools: function () {\r\n\t\t// Create everything but the header\r\n\t\tthis.createChrome(this.panelTools);\r\n\t\t// Special-handling for header, which can have its options modified by the instance\r\n\t\tvar hc = util.clone(this.headerConfig || {});\r\n\t\thc.addBefore = this.$.panelBody;\r\n\t\tutil.mixin(hc, this.headerOptions || this.headerOption);\r\n\t\tthis.createComponent(hc, {owner:this});\r\n\t},\r\n\r\n\t/**\r\n\t* On reflow, updates `this.$.contentWrapper` bounds.\r\n\t* @private\r\n\t*/\r\n\treflow: function () {\r\n\t\tControl.prototype.reflow.apply(this, arguments);\r\n\t\tthis.getInitAnimationValues();\r\n\t\tthis.updatePanelBodySize();\r\n\t},\r\n\r\n\t/**\r\n\t* Updates `this.$.contentWrapper` to have the height/width of `this`.\r\n\t* @private\r\n\t*/\r\n\tupdatePanelBodySize: function () {\r\n\t\tvar node = this.hasNode();\r\n\r\n\t\tif (!node) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.$.panelBody.applyStyle('height', this.initialHeight + 'px');\r\n\t},\r\n\r\n\t/**\r\n\t* Forcibly applies layout kind changes to `this.$.panelBody`.\r\n\t* @private\r\n\t*/\r\n\tlayoutKindChanged: function () {\r\n\t\tthis.$.panelBody.setLayoutKind(this.layoutKind);\r\n\t},\r\n\r\n\t/**\r\n\t* If spottable controls are added to the Panel instance after initial creation, we need to\r\n\t* disable the spotlightDummy. Unfortunately, there's no other reliable way to detect when\r\n\t* controls are added *anywhere* within a control's component tree so we have to watch for\r\n\t* onSpotlightFocus events to disable the spotlightDummy.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdisableSpotlightDummy: function (sender, event) {\r\n\t\tif (this.$.spotlightDummy.spotlight && event.originator !== this && event.originator !== this.$.spotlightDummy) {\r\n\t\t\tthis.$.spotlightDummy.spotlight = false;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateSpotability: function () {\r\n\t\tif (this.isOffscreen) {\r\n\t\t\tthis.spotlightDisabled = true;\r\n\t\t} else {\r\n\t\t\tthis.spotlightDisabled = false;\r\n\t\t\tthis.$.spotlightDummy.spotlight = false;\r\n\t\t\tif (!Spotlight.isSpottable(this)) {\r\n\t\t\t\t// make dummy div spottable if there is no spottable child\r\n\t\t\t\tthis.$.spotlightDummy.spotlight = true;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\theaderTypeChanged: function () {\r\n\t\tthis.$.header.setType(this.headerType);\r\n\t\tthis.$.header.adjustTitleWidth();\r\n\t\tif (this.generated) {\r\n\t\t\tthis.resize();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Updates [titleAbove]{@link module:moonstone/Panel~Panel#titleAbove} when\r\n\t* [autoNumber]{@link module:moonstone/Panel~Panel#autoNumber} changes.\r\n\t* @private\r\n\t*/\r\n\tautoNumberChanged: function () {\r\n\t\tif (this.getAutoNumber() === true && this.container) {\r\n\t\t\t// This gets the index regardless of whether the panel is client or chome\r\n\t\t\tvar n = this.parent.indexOfChild(this) + 1;\r\n\t\t\tn = ((n < 10) ? '0' : '') + n;\r\n\t\t\tthis.setTitleAbove(n);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tenableMarquees: function () {\r\n\t\tthis.$.header.enableMarquee();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdisableMarquees: function () {\r\n\t\tthis.$.header.disableMarquee();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstartMarqueeAsNeeded: function (info) {\r\n\t\tvar onscreen = !info.isOffscreen;\r\n\t\tif (onscreen) {\r\n\t\t\tthis.$.header.enableMarquee();\r\n\t\t\tthis.$.header.startMarquee();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetHeader: function () {\r\n\t\treturn this.$.header;\r\n\t},\r\n\r\n\t/**\r\n\t* Called directly by {@link module:moonstone/Panels~Panels}.\r\n\t* @private\r\n\t*/\r\n\tinitPanel: function (info) {\r\n\t\tthis.set('isOffscreen', info.isOffscreen);\r\n\t\tthis.updateSpotability();\r\n\t\tthis.disableMarquees();\r\n\t\tthis.startMarqueeAsNeeded(info);\r\n\t},\r\n\r\n\t/**\r\n\t* Called directly by {@link module:moonstone/Panels~Panels}.\r\n\t* @private\r\n\t*/\r\n\tupdatePanel: function (info) {\r\n\t\tif (!info.animate) {\r\n\t\t\tthis.disableMarquees();\r\n\t\t}\r\n\r\n\t\tthis.set('isOffscreen', info.isOffscreen);\r\n\t\tthis.updateSpotability();\r\n\t\tthis.startMarqueeAsNeeded(info);\r\n\t},\r\n\r\n\t/**\r\n\t* Called directly on the panel by {@link module:moonstone/Panels~Panels} when the panel has completed a\r\n\t* transition. You may override this function in a panel subkind to perform\r\n\t* post-transition work (e.g., loading data for the panel).\r\n\t*\r\n\t* @param {Object} info - Information from the [Panels]{@link module:moonstone/Panels~Panels} component.\r\n\t* Additional information may be supplied by the arranger, such as breadcrumb and\r\n\t* offscreen status.\r\n\t* @param {Number} info.from - The index the parent Panels was moving from for this transition.\r\n\t* @param {Number} info.to - The index the parent Panels was moving to for this transition.\r\n\t* @param {Number} info.index - The current index of this [panel]{@link module:moonstone/Panel~Panel}.\r\n\t* @param {Boolean} info.animate - Whether the parent Panels is set to animate.\r\n\t* @public\r\n\t*/\r\n\ttransitionFinished: function (info) {\r\n\t\tthis.updatePanel(info);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tisOffscreenChanged: function () {\r\n\t\t// Tell the children we're on or off screen\r\n\t\tif (this.isOffscreen) {\r\n\t\t\tthis.waterfallDown('onPanelOffscreen');\r\n\t\t} else {\r\n\t\t\tthis.waterfallDown('onPanelOnscreen');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Was protected\r\n\t* @private\r\n\t*/\r\n\tgetInitAnimationValues: function () {\r\n\t\tvar panelNode = this.hasNode(), headerNode = this.$.header.hasNode(), bodyNode = this.$.panelBody.hasNode(),\r\n\t\t\tpanelPaddingT = parseInt(dom.getComputedStyleValue(panelNode, 'padding-top'), 10),\r\n\t\t\tpanelPaddingB = parseInt(dom.getComputedStyleValue(panelNode, 'padding-bottom'), 10),\r\n\t\t\tbodyPaddingT = parseInt(dom.getComputedStyleValue(bodyNode, 'padding-top'), 10),\r\n\t\t\tpanelHeight = panelNode.getBoundingClientRect().height,\r\n\t\t\theaderHeight = headerNode.getBoundingClientRect().height;\r\n\t\tthis.initialHeight = panelHeight - headerHeight - (panelPaddingT + panelPaddingB + bodyPaddingT);\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taccessibilityRole: 'region',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: ['title', 'accessibilityLabel', 'accessibilityHint'], method: function () {\r\n\t\t\tvar content = this.title,\r\n\t\t\t\tprefix = this.accessibilityLabel || content || null,\r\n\t\t\t\tlabel = this.accessibilityHint && prefix && (prefix + ' ' + this.accessibilityHint) ||\r\n\t\t\t\t\t\tthis.accessibilityHint ||\r\n\t\t\t\t\t\tthis.accessibilityLabel ||\r\n\t\t\t\t\t\tprefix ||\r\n\t\t\t\t\t\tnull;\r\n\r\n\t\t\tthis.setAriaAttribute('aria-label', label);\r\n\t\t}}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taccessibilityLive: 'off'\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/InputHeader~InputHeader} kind.\r\n* @module moonstone/InputHeader\r\n* @deprecated\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tHeader = require('./Header');\r\n\r\n/**\r\n* {@link module:moonstone/InputHeader~InputHeader} is a header that uses an input for the title. While this\r\n* was initially created as an independent subkind of {@link module:moonstone/Header~Header}, its unique\r\n* functionality has since been folded back into the latter kind, making the current\r\n* incarnation of `InputHeader` simply a `Header` whose\r\n* [inputMode]{@link module:moonstone/Header~Header#inputMode} is set to `true`. This kind\r\n* is now deprecated.\r\n*\r\n* The [title]{@link module:moonstone/Header~Header#title} property is used as the input placeholder,\r\n* while the [value]{@link module:moonstone/Header~Header#value} property contains the contents of the\r\n* input. Developers may listen for\r\n* [onInputHeaderInput]{@link module:moonstone/Header~Header#onInputHeaderInput} and\r\n* [onInputHeaderChange]{@link module:moonstone/Header~Header#onInputHeaderChange} events from the\r\n* embedded input to respond to changes.\r\n*\r\n* ```\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tInputHeader = require('moonstone/InputHeader'),\r\n* \t\tIconButton = require('moonstone/IconButton');\r\n*\r\n* \t{\r\n* \t\tkind: InputHeader,\r\n* \t\ttitle: 'Input Header',\r\n* \t\ttitleAbove: '02',\r\n* \t\ttitleBelow: 'Sub Header',\r\n* \t\tsubTitleBelow: 'Sub-sub Header',\r\n* \t\tcomponents: [\r\n* \t\t\t{kind: IconButton, src: 'moonstone/assets/icon-like.png'},\r\n* \t\t\t{kind: IconButton, src: 'moonstone/assets/icon-next.png'}\r\n* \t\t]\r\n* \t}\r\n* ```\r\n*\r\n* @class InputHeader\r\n* @extends module:moonstone/Header~Header\r\n* @ui\r\n* @public\r\n* @deprecated\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/InputHeader~InputHeader.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.InputHeader',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Header,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinputMode: true\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:moonstone/LightPanels~LightPanel} kind.\r\n*\r\n* Note: LightPanel is exported from {@link module:moonstone/LightPanels}. This module should not be\r\n* required directly.\r\n* @wip\r\n* @ignore\r\n* @module moonstone/LightPanels\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tLightPanel = require('enyo/LightPanels').Panel,\r\n\tStates = LightPanel.States;\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\nvar\r\n\tHeader = require('../Header');\r\n\r\n/**\r\n* A lightweight panels implementation that has basic support for side-to-side transitions\r\n* between child components.\r\n*\r\n* @class LightPanel\r\n* @name module:moonstone/LightPanels~LightPanel\r\n* @extends module:enyo/LightPanels~LightPanel\r\n* @wip\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/LightPanels~LightPanel.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.LightPanel',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: LightPanel,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-light-panel',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: 'container',\r\n\r\n\t\t/**\r\n\t* The title of this panel.\r\n\t*\r\n\t* @type {String}\r\n\t* @default ''\r\n\t* @public\r\n\t*/\r\n\ttitle: '',\r\n\r\n\t/**\r\n\t* Components that are part of the header.\r\n\t*\r\n\t* @type {Object}\r\n\t* @default {}\r\n\t* @public\r\n\t*/\r\n\theaderComponents: {},\r\n\r\n\t/**\r\n\t* The amount of time, in milliseconds, to run the fade-in animation for the panel body.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default 500\r\n\t* @public\r\n\t*/\r\n\tclientDuration: 500,\r\n\r\n\t/**\r\n\t* The timing function to be applied to the fade-in animation for the panel body.\r\n\t*\r\n\t* @type {String}\r\n\t* @default 'ease-out'\r\n\t* @public\r\n\t*/\r\n\tclientTimingFunction: 'ease-out',\r\n\r\n\t/**\r\n\t* Facade for the [titleUpperCase]{@link module:moonstone/Header~Header#titleUpperCase} property\r\n\t* of the embedded {@link module:moonstone/Header~Header}.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @public\r\n\t*/\r\n\ttitleUpperCase: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonSpotlightFocus: 'disableSpotlightPlaceholder'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{kind: Header, name: 'header', type: 'medium', marqueeOnRenderDelay: 1000},\r\n\t\t{name: 'client', classes: 'client', spotlight: 'container'},\r\n\t\t{name: 'spotlightPlaceholder', spotlight: false, style: 'width:0;height:0;'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: 'title', to: '$.header.title'},\r\n\t\t{from: 'titleUpperCase', to: '$.header.titleUpperCase'}\r\n\t],\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tLightPanel.prototype.create.apply(this, arguments);\r\n\r\n\t\tvar transValue = 'opacity ' + this.clientDuration + 'ms ' + this.clientTimingFunction;\r\n\t\tthis.$.client.applyStyle('-webkit-transition', transValue);\r\n\t\tthis.$.client.applyStyle('transition', transValue);\r\n\r\n\t\tif (this.headerComponents) {\r\n\t\t\tvar owner = this.hasOwnProperty('headerComponents') ? this.getInstanceOwner() : this;\r\n\t\t\tthis.$.header.createComponents(this.headerComponents, {owner: owner});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* This overridable method is called before a transition.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tpreTransition: function () {\r\n\t\tLightPanel.prototype.preTransition.apply(this, arguments);\r\n\r\n\t\tvar current = Spotlight.getCurrent(),\r\n\t\t\tcurrentSpottable = current && Spotlight.isSpottable(current),\r\n\t\t\tisChild = current && current.isDescendantOf(this);\r\n\r\n\t\tthis.$.header.stopMarquee();\r\n\r\n\t\t// This is highly related to the order in which \"preTransition\" is fired for the outgoing\r\n\t\t// and the incoming panel. The outgoing panel's method is fired before that of the incoming\r\n\t\t// panel.\r\n\t\tif (this.state == States.ACTIVATING && !currentSpottable) {\r\n\t\t\t// We pause Spotlight to prevent re-spotting of the last control in the outgoing panel.\r\n\t\t\tif (!Spotlight.getPointerMode()) Spotlight.pause();\r\n\t\t} else if (this.state == States.DEACTIVATING && (isChild || !currentSpottable)) {\r\n\t\t\tSpotlight.unfreeze();\r\n\t\t\tSpotlight.unspot();\r\n\t\t}\r\n\r\n\t\tthis.spotlightDisabled = true; // we do not want to allow 5-way spotting during transition\r\n\t},\r\n\r\n\t/**\r\n\t* This overridable (or extendable) method is called after a transition.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tpostTransition: function () {\r\n\t\tLightPanel.prototype.postTransition.apply(this, arguments);\r\n\r\n\t\tif (this.state == States.ACTIVE) this.spotlightDisabled = false;\r\n\r\n\t\tif (!this.$.client.children.length) {\r\n\t\t\tvar owner = this.hasOwnProperty('clientComponents') ? this.getInstanceOwner() : this;\r\n\t\t\tthis.createComponents(this.clientComponents, {owner: owner});\r\n\t\t\tthis.$.client.render();\r\n\t\t\tthis.didClientRender();\r\n\t\t}\r\n\r\n\t\tif (this.state == States.ACTIVE) {\r\n\t\t\tthis.checkSpottability();\r\n\t\t\tthis.$.header.startMarquee();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcheckSpottability: function () {\r\n\t\tif (!Spotlight.getPointerMode()) {\r\n\t\t\t// Now we need to spot a spottable element (other than the dummy element), if it exists.\r\n\t\t\tvar spotlightPlaceholder = this.$.spotlightPlaceholder,\r\n\t\t\t\tcurrent = Spotlight.getCurrent();\r\n\r\n\t\t\tSpotlight.resume();\r\n\t\t\tspotlightPlaceholder.spotlight = false;\r\n\t\t\tif (!Spotlight.isSpottable(this)) spotlightPlaceholder.spotlight = true;\r\n\t\t\tif (!current || current === spotlightPlaceholder) {\r\n\t\t\t\tsetTimeout(this.bindSafely(function () {\r\n\t\t\t\t\tSpotlight.spot(this);\r\n\t\t\t\t}), 0);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdisableSpotlightPlaceholder: function (sender, event) {\r\n\t\tif (this.$.spotlightPlaceholder.spotlight && event.originator !== this && event.originator !== this.$.spotlightPlaceholder) {\r\n\t\t\tthis.$.spotlightPlaceholder.spotlight = false;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* This overridable (extendable) method is called when the client area has been rendered. This\r\n\t* can be used to perform any actions that should occur once the client components, for example,\r\n\t* of the {@link module:moonstone/LightPanels~LightPanel} have been created and rendered, such as custom focusing logic.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tdidClientRender: function () {\r\n\t\tthis.$.client.addClass('populated');\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taccessibilityRole: 'region',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: ['title', 'accessibilityLabel', 'accessibilityHint'], method: function () {\r\n\t\t\tvar content = this.title,\r\n\t\t\t\tprefix = this.accessibilityLabel || content || null,\r\n\t\t\t\tlabel = this.accessibilityHint && prefix && (prefix + ' ' + this.accessibilityHint) ||\r\n\t\t\t\t\t\tthis.accessibilityHint ||\r\n\t\t\t\t\t\tthis.accessibilityLabel ||\r\n\t\t\t\t\t\tprefix ||\r\n\t\t\t\t\t\tnull;\r\n\r\n\t\t\tthis.setAriaAttribute('aria-label', label);\r\n\t\t}}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taccessibilityLive: 'off'\r\n});\r\n\r\nmodule.exports.States = States;\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declarations for the {@link module:moonstone/ListActions~ListActions}\r\n* and {@link module:moonstone/ListActions~ListActionsPopup} kinds, and the\r\n* {@link module:moonstone/ListActions~ListActionActivationSupport} mixin.\r\n* @module moonstone/ListActions\r\n*/\r\n\r\nvar\r\n\tdom = require('enyo/dom'),\r\n\tri = require('enyo/resolution');\r\n\r\nvar\r\n\tContextualPopup = require('moonstone/ContextualPopup'),\r\n\tContextualPopupDecorator = require('moonstone/ContextualPopupDecorator'),\r\n\tIconButton = require('moonstone/IconButton');\r\n\r\n/**\r\n* An internally-used support mixin added to a {@link module:moonstone/ListActions~ListActions}\r\n* menu, which decorates `activate` events with the menu's `action` property.\r\n*\r\n* @mixin ListActionActivationSupport\r\n* @private\r\n*/\r\nvar ListActionActivationSupport = {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'ListActionActivationSupport',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonActivate: 'activate'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tactivate: function (sender, e) {\r\n\t\te.action = this.action;\r\n\t}\r\n};\r\n\r\n/**\r\n* {@link module:moonstone/ListActions~ListActionsPopup} is a\r\n* [control]{@link module:moonstone/ContextualPopup~ContextualPopup} used by\r\n* {@link module:moonstone/ListActions~ListActions} to house a menu of selectable options.\r\n*\r\n* @class ListActionsPopup\r\n* @extends module:moonstone/ContextualPopup~ContextualPopup\r\n* @ui\r\n* @private\r\n*/\r\nvar ListActionsPopup = ContextualPopup.kind(\r\n\t/** @lends module:moonstone/ListActions~ListActionsPopup */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-list-actions-popup below',\r\n\r\n\t/**\r\n\t* @see moonstone/ContextualPopup~ContextualPopup#spotlightModal\r\n\t*/\r\n\tspotlightModal: true,\r\n\r\n\t/**\r\n\t* @see moonstone/ContextualPopup~ContextualPopup#showCloseButton\r\n\t*/\r\n\tshowCloseButton: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tresetDirection: function () {\r\n\t\tthis.removeClass(this.arrowClasses);\r\n\t\tthis.removeClass('right');\r\n\t\tthis.removeClass('left');\r\n\t},\r\n\r\n\t/**\r\n\t* Adjust popup direction, anchor to the edge of screen if it goes over, and adjust arrow\r\n\t* positions.\r\n\t*\r\n\t* @private\r\n\t* @override\r\n\t*/\r\n\talterDirection: function () {\r\n\t\tif (this.showing) {\r\n\t\t\tvar clientRect = this.getBoundingRect(this.node),\r\n\t\t\t\tviewPortWidth = dom.getWindowWidth(),\r\n\t\t\t\toffsetWidth = (clientRect.width - this.activatorOffset.width) / 2,\r\n\t\t\t\tpopupMargin = ri.scale(24),\r\n\t\t\t\ticonButtonWidth = this.activatorOffset.width + popupMargin,\r\n\t\t\t\tbounds = {top: null, left: null},\r\n\t\t\t\tc;\r\n\r\n\t\t\tthis.resetDirection();\r\n\r\n\t\t\tif(this.activatorOffset.left < offsetWidth) {\r\n\t\t\t\t// flip towards right-side\r\n\t\t\t\tthis.addClass('right');\r\n\r\n\t\t\t\t// adjust arrow position\r\n\t\t\t\tc = Math.round((this.activatorOffset.left - popupMargin) / iconButtonWidth);\r\n\t\t\t\tthis.arrowClasses = 'list-actions-' + (c + 1) + 'h';\r\n\t\t\t\tthis.addClass(this.arrowClasses);\r\n\r\n\t\t\t\t// anchor to the far left\r\n\t\t\t\tbounds.left = popupMargin;\r\n\t\t\t} else if(viewPortWidth - this.activatorOffset.right < offsetWidth) {\r\n\t\t\t\t// flip towards left-side\r\n\t\t\t\tthis.addClass('left');\r\n\r\n\t\t\t\t// adjust arrow position\r\n\t\t\t\tc = Math.round((viewPortWidth - this.activatorOffset.right - popupMargin) / iconButtonWidth);\r\n\t\t\t\tthis.arrowClasses = 'list-actions-' + (c + 1) + 'h';\r\n\t\t\t\tthis.addClass(this.arrowClasses);\r\n\r\n\t\t\t\t// anchor to the far right\r\n\t\t\t\tbounds.left = viewPortWidth - clientRect.width - popupMargin;\r\n\t\t\t} else {\r\n\t\t\t\tbounds.left = this.activatorOffset.left - offsetWidth;\r\n\t\t\t}\r\n\r\n\t\t\tbounds.top = this.activatorOffset.bottom;\r\n\r\n\t\t\tthis.setBounds(bounds);\r\n\t\t}\r\n\t}\r\n});\r\n\r\n/**\r\n* {@link module:moonstone/ListActions~ListActions} is a [control]{@link module:enyo/Control~Control}\r\n* designed to live within a {@link module:moonstone/Header~Header}. It is used to perform actions on\r\n* an associated list of items. A ListActions [object]{@glossary Object} combines an activating\r\n* control with a drawer containing a user-defined menu of selectable options for acting on items in\r\n* the list. When a menu item is selected, an action--such as filtering, sorting, moving, or\r\n* deleting--may be invoked in the application by handling change events from the selected\r\n* items.\r\n*\r\n* @class ListActions\r\n* @extends module:moonstone/ContextualPopupDecorator~ContextualPopupDecorator\r\n* @ui\r\n* @public\r\n*/\r\nvar ListActions = ContextualPopupDecorator.kind({\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-list-actions',\r\n\r\n\t/**\r\n\t* If `true`, the popup will automatically close when the user selects a menu item.\r\n\t*\r\n\t* Note: There is a known issue where {@link module:enyo/DataList~DataList} is used in\r\n\t* `listActions` block and want to set `autoCollapse` to `true`, it will close the popup as it\r\n\t* resizes. In case you need to use the data-bound list in `listActions` block, please use\r\n\t* {@link module:enyo/DataRepeater~DataRepeater} instead.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tautoCollapse: false,\r\n\r\n\t/**\r\n\t* A block of one or more controls to be displayed inside the list actions menu. It should\r\n\t* typically contain a {@link module:moonstone/Divider~Divider} identifying the category and a\r\n\t* {@link module:moonstone/Scroller~Scroller}, containing instances of\r\n\t* {@link module:moonstone/CheckboxItem~CheckboxItem}, \r\n\t* {@link module:moonstone/ToggleItem~ToggleItem}, or\r\n\t* {@link module:moonstone/SelectableItem~SelectableItem} for setting options for the underlying\r\n\t* [panel]{@link module:moonstone/Panel~Panel}. Alternatively, a\r\n\t* {@link module:enyo/DataRepeater~DataRepeater} or a {@link module:moonstone/DataList~DataList}\r\n\t* may be used for populating a data-bound list of options.\r\n\t* {@link module:enyo/DataRepeater~DataRepeater} is preferrable as performance gain from\r\n\t* pagination starts when you have more than two pages worth of items, 11 or more in ListActions\r\n\t* case, in the list.\r\n\t*\r\n\t* More than one option group may be added to the `listActions` block, in which options\r\n\t* are laid out horizontally.\r\n\t*\r\n\t* Each group should have a string value set for the `action` property, as this will\r\n\t* be passed in all events that bubble from the `ListActions`, to allow the user to\r\n\t* identify which category changed.\r\n\t*\r\n\t* @type {Object[]}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\tlistActions: null,\r\n\r\n\t/**\r\n\t* Icon name to be used by the activator button (as in {@link module:moonstone/Icon~Icon} and\r\n\t* {@link module:moonstone/IconButton~IconButton}).\r\n\t*\r\n\t* @type {String}\r\n\t* @default ''\r\n\t* @public\r\n\t*/\r\n\ticon: '',\r\n\r\n\t/**\r\n\t* Source URL for icon image.\r\n\t*\r\n\t* @type {String|module:enyo/resolution#selectSrc~src}\r\n\t* @default ''\r\n\t* @public\r\n\t*/\r\n\ticonSrc: '',\r\n\r\n\t/**\r\n\t* The background-color opacity of the {@link module:moonstone/ListActions~ListActions}' activator\r\n\t* (which is a {@link module:moonstone/IconButton~IconButton}). Please see the valid values defined by\r\n\t* {@link module:moonstone/Button~Button#backgroundOpacity}.\r\n\t*\r\n\t* @type {String}\r\n\t* @default 'opaque'\r\n\t* @public\r\n\t*/\r\n\tbackgroundOpacity: 'opaque',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'activator', kind: IconButton},\r\n\t\t{name: 'listActionsPopup', kind: ListActionsPopup, accessibilityReadAll: false, components: [\r\n\t\t\t{name: 'listActionsWrapper', classes: 'moon-hspacing top moon-list-actions-scroller', controlClasses: 'moon-list-actions-popup-width', onActivate: 'optionSelected'}\r\n\t\t]}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: 'iconSrc', to: '$.activator.src'},\r\n\t\t{from: 'icon', to: '$.activator.icon'},\r\n\t\t{from: 'disabled', to: '$.activator.disabled', oneWay: false},\r\n\t\t{from: 'backgroundOpacity', to: '$.activator.backgroundOpacity'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function() {\r\n\t\tContextualPopupDecorator.prototype.create.apply(this, arguments);\r\n\t\tthis.disabledChanged();\r\n\t\tthis.listActionsChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdisabledChanged: function () {\r\n\t\tthis.addRemoveClass('disabled', this.disabled);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tlistActionsChanged: function() {\r\n\t\tvar i,\r\n\t\t\tlistAction;\r\n\r\n\t\tfor (i = 0; (listAction = this.listActions[i]); i++) {\r\n\t\t\tlistAction.mixins = this.addListActionMixin(listAction);\r\n\t\t\tthis.$.listActionsWrapper.createComponent(\r\n\t\t\t\tlistAction, {\r\n\t\t\t\t\towner: this.hasOwnProperty('listActions') ? this.getInstanceOwner() : this\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.hasNode()) {\r\n\t\t\tthis.$.listActionsWrapper.render();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Adds a mixin to each list action menu that decorates `activate` events with the menu's\r\n\t* `action` property.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\taddListActionMixin: function (listAction) {\r\n\t\tvar mixins = listAction.mixins || [];\r\n\t\tif (mixins.indexOf(ListActionActivationSupport) === -1) {\r\n\t\t\tmixins.push(ListActionActivationSupport);\r\n\t\t}\r\n\t\treturn mixins;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\toptionSelected: function() {\r\n\t\tif (this.autoCollapse && this.$.listActionsPopup.getAbsoluteShowing()) {\r\n\t\t\tthis.startJob('hidePopupJob', function() {\r\n\t\t\t\tthis.$.listActionsPopup.hide();\r\n\t\t\t}, 300);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @override\r\n\t* @private\r\n\t*/\r\n\tpopupShown: function() {\r\n\t\tContextualPopupDecorator.prototype.popupShown.apply(this,arguments);\r\n\t\tthis.bubble('onRequestMuteTooltip');\r\n\t},\r\n\r\n\t/**\r\n\t* @override\r\n\t* @private\r\n\t*/\r\n\tpopupHidden: function() {\r\n\t\tContextualPopupDecorator.prototype.popupHidden.apply(this,arguments);\r\n\t\tthis.bubble('onRequestUnmuteTooltip');\r\n\t}\r\n});\r\n\r\nmodule.exports = ListActions;","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/ApplicationCloseButton~ApplicationCloseButton} kind.\r\n* @module moonstone/ApplicationCloseButton\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom'),\r\n\tri = require('enyo/resolution');\r\n\r\nvar\r\n\t$L = require('../i18n'),\r\n\tTooltipDecorator = require('moonstone/TooltipDecorator'),\r\n\tTooltip = require('moonstone/Tooltip'),\r\n\tIconButton = require('moonstone/IconButton');\r\n\r\nvar buttonDescription = $L('Exit app');\r\n\r\n/**\r\n* {@link module:moonstone/ApplicationCloseButton~ApplicationCloseButton}\r\n* may be added to {@link module:moonstone/Panels~Panels}, or other\r\n* full-screen controls. It includes basic positioning styles that may require\r\n* adjustment for your particular usage. When activated, an `onApplicationClose`\r\n* event is emitted. On its own, an ApplicationCloseButton has no function; you\r\n* must provide your own event handler to close the application. The recommended\r\n* action to take in response to the event is `window.close()`, but you may also\r\n* want to also perform operations such as saving user work or closing database\r\n* connections.\r\n*\r\n* @class ApplicationCloseButton\r\n* @extends module:moonstone/TooltipDecorator~TooltipDecorator\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/ApplicationCloseButton~ApplicationCloseButton.prototype */ {\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ApplicationCloseButton',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: TooltipDecorator,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-application-close-button',\r\n\r\n\t/**\r\n\t* Boolean indicating whether the tooltip is shown soon after the button is focused.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tautoShow: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonApplicationClose: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'button', kind: IconButton, icon: 'closex', small: true, backgroundOpacity: 'transparent', ontap: 'handleButtonTap'},\r\n\t\t{kind: Tooltip, content: buttonDescription, floating: true, position: 'below'}\r\n\t],\r\n\r\n\thandlers: {\r\n\t\tonCustomizeCloseButton: 'handleCustomizeCloseButton'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcustomizeCloseButton: function (properties) {\r\n\t\tvar prop, style;\r\n\r\n\t\tif (properties && typeof properties == 'object') {\r\n\t\t\tfor (prop in properties) {\r\n\t\t\t\tif (prop == 'styles' && typeof properties[prop] == 'object') {\r\n\t\t\t\t\tfor (style in properties[prop]) {\r\n\t\t\t\t\t\tthis.$.button.applyStyle(style, properties[prop][style]);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$.button.set(prop, properties[prop]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* This takes action when the CustomizeCloseButton event is received. It accepts several event\r\n\t* properties, and in their absence resets each to its original value.\r\n\t*\r\n\t* Possible `ev` object members:\r\n\t*   x - (Number|String), positive or negative measurement to offset the X from its natural position.\r\n\t*       This value is automatically inverted in RtL mode.\r\n\t*   y - (Number|String), positive or negative measurement to offset the X from its natural position.\r\n\t*   properties {Object} An object containing key/value pairs to be `set` on the close button.\r\n\t*   For example, this can be used to set the `showing` property of the close button. If present\r\n\t*   and an object, the `styles` member will be iterated through and each style will be applied\r\n\t*   individually and those styles with a `null` value will be removed.\r\n\t*\r\n\t* Ex:\r\n\t*    this.doCustomizeCloseButton({parameters: {showing: false});\r\n\t*\r\n\t* @private\r\n\t*/\r\n\thandleCustomizeCloseButton: function (sender, ev) {\r\n\t\tvar shiftX = ev.x,\r\n\t\t\tshiftY = typeof ev.y == 'number' ? dom.unit(ri.scale(ev.y), 'rem') : ev.y;\r\n\r\n\t\tswitch (typeof shiftX) {\r\n\t\t\tcase 'number':\r\n\t\t\t\tshiftX = dom.unit(ri.scale( this.rtl ? shiftX * -1 : shiftX ), 'rem');\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'string':\r\n\t\t\t\tif (this.rtl) {\r\n\t\t\t\t\tif (shiftX.indexOf('-') === 0) {\r\n\t\t\t\t\t\tshiftX = shiftX.substring(1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tshiftX = '-' + shiftX;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t// Only apply changes that are present. (Undef means don't change me.) dom.transform preserves successive assignments.\r\n\t\tif (typeof shiftX != 'undefined') dom.transform(this, {translateX: shiftX});\r\n\t\tif (typeof shiftY != 'undefined') dom.transform(this, {translateY: shiftY});\r\n\r\n\t\tthis.customizeCloseButton(ev.properties);\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tTooltipDecorator.prototype.create.apply(this, arguments);\r\n\t\tthis.autoShowChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tautoShowChanged: function () {\r\n\t\tTooltipDecorator.prototype.autoShowChanged.apply(this, arguments);\r\n\t\t// Only add an accessibilityLabel to the button if we aren't displaying a tooltip, so the\r\n\t\t// accessibility system doesn't read the label twice, once for the button, and again for the tooltip.\r\n\t\tthis.$.button.set('accessibilityLabel', this.autoShow ? null : buttonDescription);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleButtonTap: function (sender, ev) {\r\n\t\tthis.doApplicationClose();\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Dialog~Dialog} kind.\r\n* @module moonstone/Dialog\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutil = require('enyo/utils'),\r\n\tContentAreaSupport = require('enyo/ContentAreaSupport'),\r\n\tControl = require('enyo/Control');\r\n\r\nvar\r\n\t$L = require('../i18n'),\r\n\tPopup = require('../Popup'),\r\n\tIconButton = require('../IconButton'),\r\n\tBodyText = require('../BodyText'),\r\n\tHistorySupport = require('../HistorySupport'),\r\n\tMarquee = require('../Marquee'),\r\n\tMarqueeText = Marquee.Text,\r\n\tMarqueeSupport = Marquee.Support;\r\n\r\n/**\r\n* {@link module:moonstone/Dialog~Dialog} is a {@link module:moonstone/Popup~Popup} with a title, a subtitle, a\r\n* message, and an area for additional controls.\r\n*\r\n* @class Dialog\r\n* @extends module:moonstone/Popup~Popup\r\n* @mixes module:moonstone/MarqueeSupport~MarqueeSupport\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/Dialog~Dialog.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Dialog',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Popup,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-dialog',\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/Dialog~Dialog.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* The title for the dialog.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttitle: '',\r\n\r\n\t\t/**\r\n\t\t* The subtitle for the dialog.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsubTitle: '',\r\n\r\n\t\t/**\r\n\t\t* Should the dialog use a divider line to separate the titles from the dialog body?\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tuseDivider: false,\r\n\r\n\t\t/**\r\n\t\t* The message for the dialog. May either be a string or component configuration block.\r\n\t\t*\r\n\t\t* @type {String|Object[]}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmessage: '',\r\n\r\n\t\t/**\r\n\t\t* When `true`, the title text will have locale-safe uppercasing applied.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tuppercase: true,\r\n\r\n\t\t/**\r\n\t\t* @deprecated Replaced by [uppercase]{@link module:moonstone/Dialog~Dialog#uppercase}.\r\n\t\t*\r\n\t\t* Formerly defaulted to `true`, now defaults to `null` and will only have\r\n\t\t* an effect when explicitly set (for complete backward compatibility).\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttitleUpperCase: null\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [MarqueeSupport, HistorySupport, ContentAreaSupport],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmarqueeOnSpotlight: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmarqueeOnHover: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmarqueeOnRender: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmarqueeOnRenderDelay: 5000,\r\n\r\n\t/**\r\n\t* When {@link module:moonstone/Dialog~Dialog#message} is a string, it will be set as content\r\n\t* within a component configured by this member.\r\n\t*\r\n\t* @type {Object}\r\n\t* @protected\r\n\t*/\r\n\tbodyConfig: {name: 'messageBody', kind: BodyText, classes: 'moon-dialog-content'},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttools: [\r\n\t\t{name: 'closeButton', kind: IconButton, icon: 'closex', classes: 'moon-popup-close', ontap: 'closePopup', accessibilityLabel: $L('Close'), backgroundOpacity: 'transparent', showing: false},\r\n\t\t{name: 'titleWrapper', classes: 'moon-dialog-title-wrapper', components: [\r\n\t\t\t{name: 'title', kind: MarqueeText, classes: 'moon-popup-header-text moon-dialog-title'},\r\n\t\t\t{name: 'subTitle', kind: Control, classes: 'moon-dialog-sub-title'}\r\n\t\t]},\r\n\t\t{name: 'message'},\r\n\t\t{name: 'client', kind: Control, classes: 'moon-hspacing moon-dialog-client'},\r\n\t\t{name: 'spotlightDummy', kind: Control, spotlight: false}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontentAreas: [\r\n\t\t{target: 'message', content: '_messageBody'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tPopup.prototype.create.apply(this, arguments);\r\n\r\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\r\n\t\t// the titleUpperCase property is fully deprecated and removed. The legacy\r\n\t\t// property takes precedence if it exists.\r\n\t\tif (this.titleUpperCase !== null) this.uppercase = this.titleUpperCase;\r\n\r\n\t\tthis.titleChanged();\r\n\t\tthis.subTitleChanged();\r\n\t\tthis.useDividerChanged();\r\n\t\tthis.messageChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttitleChanged: function () {\r\n\t\tvar title = this.get('title');\r\n\t\t// Logic so we don't show the divider and an empty title\r\n\t\tif (!title) {\r\n\t\t\tthis.$.title.hide();\r\n\t\t\tthis.$.titleWrapper.removeClass('use-divider');\r\n\t\t} else {\r\n\t\t\tthis.$.title.show();\r\n\t\t\tthis.useDividerChanged();\r\n\t\t\tthis.$.title.set('content', this.get('uppercase') ? util.toUpperCase(title) : title );\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tuppercaseChanged: function () {\r\n\t\t// FIXME: Backwards-compatibility for deprecated property - can be removed when\r\n\t\t// titleUpperCase is fully deprecated and removed.\r\n\t\tif (this.titleUpperCase != this.uppercase) this.titleUpperCase = this.uppercase;\r\n\t\tthis.titleChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttitleUpperCaseChanged: function () {\r\n\t\tif (this.uppercase != this.titleUpperCase) this.uppercase = this.titleUpperCase;\r\n\t\tthis.uppercaseChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsubTitleChanged: function () {\r\n\t\t// Technically we shouldn't show the subtitle if there's no title, but this is an edge case for the app developer\r\n\t\tthis.$.subTitle.set('showing', !!this.subTitle);\r\n\t\tif (!this.subTitle) return;\r\n\t\tthis.$.subTitle.set('content', this.subTitle);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tuseDividerChanged: function () {\r\n\t\tthis.$.titleWrapper.addRemoveClass('use-divider', this.get('useDivider'));\r\n\t},\r\n\r\n\t/**\r\n\t* If `message` is a string, we want it to be BodyText. Otherwise, it can pass through with the\r\n\t* user-defined kinds.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tmessageChanged: function () {\r\n\t\tvar body = this.message;\r\n\t\tif (this.message && util.isString(this.message)) {\r\n\t\t\t// optimization - it's a string and the previous value was a string too. no need to\r\n\t\t\t// rerender, just update the content and return.\r\n\t\t\tif (this.$.messageBody) {\r\n\t\t\t\tthis.$.messageBody.set('content', this.message);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// it's a string and wasn't before or we haven't set it up yet, set up the BodyText\r\n\t\t\telse {\r\n\t\t\t\tbody = util.clone(this.bodyConfig);\r\n\t\t\t\tbody.content = this.message;\r\n\t\t\t\tbody.owner = this;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.set('_messageBody', body);\r\n\t},\r\n\r\n\tariaObservers: [\r\n\t\t{from: 'generated', method: function () {\r\n\t\t\tif (!this.generated) return;\r\n\r\n\t\t\tthis.setAriaAttribute('aria-labelledBy',\r\n\t\t\t\tthis.$.title.id + ' ' +\r\n\t\t\t\tthis.$.subTitle.id + ' ' +\r\n\t\t\t\tthis.$.message.id + ' ' +\r\n\t\t\t\tthis.$.client.id\r\n\t\t\t);\r\n\t\t}}\r\n\t]\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/ToggleItem~ToggleItem} kind.\r\n* @module moonstone/ToggleItem\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tCheckboxItem = require('../CheckboxItem'),\r\n\tToggleSwitch = require('../ToggleSwitch');\r\n\r\n/**\r\n* {@link module:moonstone/ToggleItem~ToggleItem} is a control that combines a {@link module:moonstone/ToggleSwitch~ToggleSwitch}\r\n* with a text label.\r\n*\r\n* @class ToggleItem\r\n* @extends module:moonstone/CheckboxItem~CheckboxItem\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/ToggleItem~ToggleItem.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ToggleItem',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: CheckboxItem,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ticon: 'circle',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-toggle-item',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcheckboxOnRight: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponentOverrides: {\r\n\t\tclient: {classes: 'moon-toggle-item-label-wrapper'},\r\n\t\tinput: {kind: ToggleSwitch, spotlight: false}\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/FormCheckbox~FormCheckbox} kind.\r\n* @module moonstone/FormCheckbox\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tCheckboxItem = require('../CheckboxItem');\r\n\r\n/**\r\n* {@link module:moonstone/FormCheckbox~FormCheckbox} is a labeled checkbox\r\n* designed for use in form layouts. Unlike {@link module:moonstone/CheckboxItem~CheckboxItem},\r\n* which it extends, `moonstone/FormCheckbox` provides a circular \"hit target\"\r\n* that is always visible, regardless of whether the checkbox is currently checked.\r\n*\r\n* @class FormCheckbox\r\n* @extends module:moonstone/CheckboxItem~CheckboxItem\r\n* @ui\r\n* @public\r\n*/\r\n\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/FormCheckbox~FormCheckbox.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.FormCheckbox',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: CheckboxItem,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-formcheckbox-item'\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:moonstone/ExpandableListItem/ExpandableListItemHeader~ExpandableListItemHeader} kind.\r\n* @module moonstone/ExpandableListItem/ExpandableListItemHeader\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tComponent = require('enyo/Component');\r\n\r\nvar\r\n\tMarquee = require('../Marquee'),\r\n\tLabeledTextItem = require('../LabeledTextItem');\r\n\r\n/**\r\n* @class ExpandableListItemHeader\r\n* @extends module:moonstone/LabeledTextItem~LabeledTextItem\r\n* @ui\r\n* @private\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/ExpandableListItem/ExpandableListItemHeader~ExpandableListItemHeader.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ExpandableListItemHeader',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: LabeledTextItem,\r\n\r\n\t/**\r\n\t* When `true`, the value of {@link module:moonstone/LabeledTextItem~LabeledTextItem#text}\r\n\t* will be displayed\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @public\r\n\t*/\r\n\ttextShowing: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: 'textShowing', to: '$.text.showing'},\r\n\t\t{from: 'allowHtml', to: '$.text.allowHtml'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitComponents: function () {\r\n\t\tthis.kindComponents = Component.overrideComponents(this.kindComponents, {text: {kind: Marquee.Text}});\r\n\t\tLabeledTextItem.prototype.initComponents.apply(this, arguments);\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\t\r\n\tariaObservers: [\r\n\t\t{from: 'textShowing', method: function () {\r\n\t\t\tthis.$.text.set('accessibilityDisabled', !this.textShowing);\r\n\t\t}}\r\n\t]\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/ImageItem~ImageItem} kind.\r\n* @module moonstone/ImageItem\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tControl = require('enyo/Control'),\r\n\tImg = require('enyo/Image');\r\n\r\nvar\r\n\tItem = require('../Item'),\r\n\tLabeledTextItem = require('../LabeledTextItem');\r\n\r\n/**\r\n* {@link module:moonstone/ImageItem~ImageItem}, which derives from {@link module:moonstone/Item~Item}, is a control that combines an\r\n* {@link module:enyo/Image~Image} with a {@link module:moonstone/LabeledTextItem~LabeledTextItem}. By default, the image is displayed to\r\n* the left of the text; to display the image on the right, set\r\n* [imageAlignRight]{@link module:moonstone/ImageItem~ImageItem#imageAlignRight} to `true`.\r\n*\r\n* @class ImageItem\r\n* @extends module:moonstone/Item~Item\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/ImageItem~ImageItem.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ImageItem',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-imageitem',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Item,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents:[\r\n\t\t{name: 'image', kind: Img},\r\n\t\t{name: 'textItem', kind: LabeledTextItem, spotlight: false}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/ImageItem~ImageItem.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* The absolute URL path to the image.\r\n\t\t*\r\n\t\t* @type {String|module:enyo/resolution#selectSrc~src}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsource: '',\r\n\r\n\t\t/**\r\n\t\t* The label to be displayed along with the text.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tlabel: '',\r\n\r\n\t\t/**\r\n\t\t* The text to be displayed in the item.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttext: '',\r\n\r\n\t\t/**\r\n\t\t* Set to `true` to align image to right of text.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\timageAlignRight: false\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: 'allowHtml', to: '$.textItem.allowHtml'},\r\n\t\t{from: 'source', to: '$.image.src'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tthis.labelChanged();\r\n\t\tthis.textChanged();\r\n\t\tthis.imageAlignRightChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tlabelChanged: function () {\r\n\t\tthis.$.textItem.setLabel(this.label);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttextChanged: function () {\r\n\t\tthis.$.textItem.setText(this.text);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\timageAlignRightChanged: function () {\r\n\t\tthis.addRemoveClass('align-right', this.imageAlignRight);\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: ['label', 'text', 'accessibilityHint', 'accessibilityLabel'], method: function () {\r\n\t\t\tvar content = this.label + ' ' + this.text ,\r\n\t\t\t\tprefix = this.accessibilityLabel || content || null,\r\n\t\t\t\tlabel = this.accessibilityHint && prefix && (prefix + ' ' + this.accessibilityHint) ||\r\n\t\t\t\t\t\tthis.accessibilityHint ||\r\n\t\t\t\t\t\tthis.accessibilityLabel ||\r\n\t\t\t\t\t\tnull;\r\n\r\n\t\t\t\tthis.setAriaAttribute('aria-label', label);\r\n\t\t}}\r\n\t]\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/RadioItem~RadioItem} kind.\r\n* @module moonstone/RadioItem\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tSelectableItem = require('../SelectableItem');\r\n\r\n/**\r\n* {@link module:moonstone/RadioItem~RadioItem} is a modified {@link module:moonstone/Item~Item} designed for use inside\r\n* a {@link module:moonstone/RadioItemGroup~RadioItemGroup}.\r\n*\r\n* For more information, see the documentation on\r\n* [Radio Items]{@linkplain $dev-guide/building-apps/controls/radio-items.html}\r\n* in the Enyo Developer Guide.\r\n*\r\n* @class RadioItem\r\n* @extends module:moonstone/SelectableItem~SelectableItem\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/RadioItem~RadioItem.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.RadioItem',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: SelectableItem,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function() {\r\n\t\tSelectableItem.prototype.create.apply(this, arguments);\r\n\t\tthis.removeClass('moon-selectable-item');\r\n\t\tthis.addClass('moon-radio-item');\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/AudioPlayback~AudioPlayback}\r\n* kind.\r\n* @wip\r\n* @module moonstone/AudioPlayback\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutils = require('enyo/utils'),\r\n\tEnyoAudio = require('enyo/Audio'),\r\n\tSignals = require('enyo/Signals'),\r\n\tEventEmitter = require('enyo/EventEmitter');\r\n\r\n\r\nvar\r\n\tDrawer = require('moonstone/Drawers').Drawer,\r\n\tIconButton = require('moonstone/IconButton'),\r\n\tMoonImage = require('moonstone/Image'),\r\n\tSlider = require('moonstone/Slider'),\r\n\tMarquee = require('moonstone/Marquee');\r\n\r\n/**\r\n* Fires when an audio track is added to the list\r\n*\r\n* @event module:moonstone/AudioPlayback~AudioPlayback#onAddAudio\r\n* @type {Object}\r\n* @property {Object} tracks - contains a reference to the collection of tracks\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when an audio list item is to be removed. The list event data is passed through.\r\n* TODO: When fixed with right list component be sure to link to event data.\r\n*\r\n* @event module:moonstone/AudioPlayback~AudioPlayback#onRemove\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/AudioPlayback~AudioPlayback} is meant to be used\r\n* with {@link module:moonstone/Drawers~Drawers}. It extends\r\n* {@link module:moonstone/Drawers/Drawer~Drawer} by adding an audio playback control\r\n* and playlist for the imported audio.\r\n*\r\n* ```\r\n* var\r\n* \tkind = require('enyo/kind'),\r\n* \tAudioPlayback = require('moonstone/AudioPlayback'),\r\n* \tDrawers = require('moonstone/Drawers');\r\n*\r\n* {kind: Drawers,\r\n* \tdrawers: [\r\n* \t\t{kind: AudioPlayback}\r\n* \t],\r\n* \tcomponents: [\r\n*\t\t\t{content: 'Page Content'}\r\n* \t]\r\n* }\r\n* ```\r\n*\r\n* @class AudioPlayback\r\n* @extends module:moonstone/Drawers~Drawer\r\n* @ui\r\n* @wip\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/AudioPlayback~AudioPlayback.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.AudioPlayback',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Drawer,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [ EventEmitter ],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-audio-playback',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\topen: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontrolsOpen: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontrolDrawerComponents:[],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tplayheadJob: null,\r\n\r\n\t/**\r\n\t* @protected\r\n\t*/\r\n\tplayheadUpdateInterval: 200,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpreviewMode: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmodel: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/AudioPlayback~AudioPlayback.prototype\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* When 'false', audio player doesn't respond to remote controller\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\thandleRemoteControlKey: true,\r\n\r\n\t\t/**\r\n\t\t* When 'true', update current time on every drag or key event on slider.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tliveSeekMode: false,\r\n\r\n\t\t/**\r\n\t\t* Amount of increment (in percentage) on seek by 5way key press.\r\n\t\t*\r\n\t\t* @type {number}\r\n\t\t* @default 5\r\n\t\t* @public\r\n\t\t*/\r\n\t\tincrement: 5,\r\n\r\n\t\t/**\r\n\t\t* Amount of time (in seconds) to jump in response to jump buttons. This value is ignored\r\n\t\t* when [jumpStartEnd]{@link module:moonstone/VideoPlayer~VideoPlayer#jumpStartEnd}\r\n\t\t* is `true`.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 3\r\n\t\t* @public\r\n\t\t*/\r\n\t\tjumpSec: 3,\r\n\r\n\t\t/**\r\n\t\t* If `true`, the \"jump forward\" and \"jump back\" buttons jump to the start and end of the\r\n\t\t* video, respectively.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tjumpStartEnd: false,\r\n\r\n\t\t/**\r\n\t\t* If `false`, the \"jump forward\" and \"jump back\" buttons are hidden.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tshowJumpControls: true,\r\n\r\n\t\t/**\r\n\t\t* When `true`, the fast-forward and rewind buttons are visible.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tshowFFRewindControls: true,\r\n\r\n\t\t/**\r\n\t\t* If `true`, the slider is disabled and will not be enabled when video data has\r\n\t\t* loaded.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdisableSlider: false,\r\n\r\n\t\t/**\r\n\t\t* If `true`, the slider and playback controls are disabled. If the user taps the\r\n\t\t* controls, an\r\n\t\t* [onPlaybackControlsTapped]{@link module:moonstone/VideoPlayer~VideoPlayer#onPlaybackControlsTapped}\r\n\t\t* event will be bubbled.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdisablePlaybackControls: false,\r\n\r\n\t\t/**\r\n\t\t* When `true`, playback controls are hidden when the slider is hovered over.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\thideButtonsOnSlider: false,\r\n\r\n\t\t/**\r\n\t\t* Default hash of playback states and their associated playback rates.\r\n\t\t*\r\n\t\t* @type {Object}\r\n\t\t* @default\r\n\t\t*\tfastForward: ['2', '4', '8', '16'],\r\n\t\t*\trewind: ['-2', '-4', '-8', '-16'],\r\n\t\t*\tslowForward: ['1/4', '1/2'],\r\n\t\t*\tslowRewind: ['-1/2', '-1']\r\n\t\t* @public\r\n\t\t*/\r\n\t\tplaybackRateHash: {\r\n\t\t\tfastForward: ['2', '4', '8', '16'],\r\n\t\t\trewind: ['-2', '-4', '-8', '-16'],\r\n\t\t\tslowForward: ['1/4', '1/2', '1'],\r\n\t\t\tslowRewind: ['-1/2', '-1']\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmediaComponents: [\r\n\t\t{name: 'media', kind: EnyoAudio, onStart: 'onPlayStart', onEnded: 'onPlayEnd', onError: 'onPlayError',\r\n\t\t\tonSlowforward: 'updateFeedback', onFastforward: 'updateFeedback', onSlowrewind: 'updateFeedback', onRewind: 'updateFeedback', onPlay: 'updateFeedback'},\r\n\t\t{kind: Signals, onkeyup: 'remoteKeyHandler', onSpotlightModeChanged: 'spotlightModeChanged'},\r\n\t\t{name: 'playbackControls', rtl: false, spotlight: 'container', classes: 'moon-audio-playback-top moon-hspacing', components: [\r\n\t\t\t{name: 'trackIcon', kind: MoonImage, sizing: 'cover', classes: 'moon-audio-track-icon'},\r\n\t\t\t{name: 'trackInfo', mixins: [ Marquee.Support ], marqueeOnRender: true, classes: 'moon-audio-track-info', components: [\r\n\t\t\t\t{name: 'trackName', publish: true, kind: Marquee.Text, classes: 'moon-audio-playback-track'},\r\n\t\t\t\t{name: 'artistName', publish: true, kind: Marquee.Text, classes: 'moon-audio-playback-artist'}\r\n\t\t\t]},\r\n\t\t\t{name: 'commandControls', classes: 'moon-audio-control-buttons', components: [\r\n\t\t\t\t{name: 'btnJumpBackward', kind: IconButton, publish: true, icon: 'skipbackward', small: false, command: 'jumpBackward', classes: 'moon-audio-icon-button left', ontap: 'commandHandler', onholdpulse: 'holdBackwardHandler', onrelease: 'releaseHandler'},\r\n\t\t\t\t{name: 'btnRewind', kind: IconButton, publish: true, icon: 'backward', small: false, command: 'rewind', classes: 'moon-audio-icon-button left', ontap: 'commandHandler'},\r\n\t\t\t\t{name: 'btnPlay',  kind: IconButton, publish: true, icon: 'play', small: false, command: 'togglePlay', classes: 'moon-audio-icon-button left', ontap: 'commandHandler'},\r\n\t\t\t\t{name: 'btnFastForward', kind: IconButton, publish: true, icon: 'forward', small: false, command: 'fastForward', classes: 'moon-audio-icon-button left', ontap: 'commandHandler'},\r\n\t\t\t\t{name: 'btnJumpForward', kind: IconButton, publish: true, icon: 'skipforward', small: false, command: 'jumpForward', classes: 'moon-audio-icon-button left', ontap: 'commandHandler', onholdpulse: 'holdForwardHandler', onrelease: 'releaseHandler'}\r\n\t\t\t]},\r\n\t\t\t{name: 'moreControls', classes: 'moon-audio-more-buttons moon-hspacing'}\r\n\t\t]},\r\n\t\t{rtl: false, classes: 'moon-audio-playback-bottom', components: [\r\n\t\t\t{kind: Slider, name: 'slider', classes: 'moon-audio-slider',\r\n\t\t\tknobClasses: 'moon-audio-slider-knob', bgBarClasses: 'moon-audio-slider-bg-bar',\r\n\t\t\tbarClasses: 'moon-audio-slider-bar-bar', tapAreaClasses: 'moon-audio-slider-taparea',\r\n\t\t\trtl: false, noPopup: true, lockBar: true, onChanging: 'sliderChanging', onAnimateFinish: 'sliderChanging',\r\n\t\t\tonmove: 'preview', onenter: 'enterTapArea', onleave: 'leaveTapArea'},\r\n\t\t\t{name: 'timePlayed', classes: 'moon-audio-play-time left', content: '0:00'},\r\n\t\t\t{name: 'timeRemaining', classes: 'moon-audio-play-time right', content: '0:00'}\r\n\t\t]}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tobservers: [\r\n\t\t{method: 'modelChanged', path: ['model']}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: 'autoplay', to: '$.media.autoplay'},\r\n\t\t{from: '$.media.src', to: 'src'}, // This is for detecting media src status from playback\r\n\t\t{from: 'showJumpControls', to: '$.btnJumpBackward.showing'},\r\n\t\t{from: 'showJumpControls', to: '$.btnJumpForward.showing'},\r\n\t\t{from: 'showFFRewindControls', to: '$.btnRewind.showing'},\r\n\t\t{from: 'showFFRewindControls', to: '$.btnFastForward.showing'},\r\n\t\t{from: 'disableSlider', to: '$.slider.disabled'},\r\n\t\t{from: 'disablePlaybackControls', to: '$.btnJumpBackward.disabled'},\r\n\t\t{from: 'disablePlaybackControls', to: '$.btnJumpForward.disabled'},\r\n\t\t{from: 'disablePlaybackControls', to: '$.btnRewind.disabled'},\r\n\t\t{from: 'disablePlaybackControls', to: '$.btnFastForward.disabled'},\r\n\t\t{from: 'disablePlaybackControls', to: '$.btnPlay.disabled'},\r\n\t\t{from: 'jumpSec', to: '$.media.jumpSec'},\r\n\t\t{from: 'increment', to: '$.slider.increment'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tthis.inherited(arguments);\r\n\t\tthis.$.controlDrawer.createComponents(this.mediaComponents, {owner: this});\r\n\t\tif (this.moreComponents) {\r\n\t\t\tvar owner = this.hasOwnProperty('moreComponents') ? this.getInstanceOwner() : this;\r\n\t\t\tthis.$.moreControls.createComponents(this.moreComponents, {owner: owner, ontap: 'commandHandler'});\r\n\t\t}\r\n\t\tthis.playbackRateHashChanged();\r\n\t\tthis.enable5waySeek();\r\n\t},\r\n\r\n\t/**\r\n\t* Enable seek by left and right key press on slider\r\n\t* @private\r\n\t*/\r\n\tenable5waySeek: function () {\r\n\t\tthis.$.slider.spotFocused = utils.nop;\r\n\t\tthis.$.slider.spotSelect = utils.nop;\r\n\t\tthis.$.slider.spotBlur = utils.nop;\r\n\t\tthis.$.slider.selected = true;\r\n\t},\r\n\r\n\t/**\r\n\t* Facade playbackRateHash.\r\n\t* @private\r\n\t*/\r\n\tplaybackRateHashChanged: function() {\r\n\t\tthis.$.media.playbackRateHash = this.playbackRateHash;\r\n\t},\r\n\r\n\t/** preview mode */\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tenterTapArea: function (sender, ev) {\r\n\t\tif (ev.originator.name == 'tapArea') {\r\n\t\t\tthis.startPreview();\r\n\t\t\tif (!this.$.slider.disabled && this.hideButtonsOnSlider) {\r\n\t\t\t\tthis.$.playbackControls.set('showing', false);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tleaveTapArea: function (sender, ev) {\r\n\t\tif (ev.originator.name == 'tapArea') {\r\n\t\t\tthis.endPreview();\r\n\t\t\tif (!this.$.slider.disabled && this.hideButtonsOnSlider) {\r\n\t\t\t\tthis.$.playbackControls.set('showing', true);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstartPreview: function () {\r\n\t\tthis.previewMode = true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tendPreview: function () {\r\n\t\tthis.previewMode = false;\r\n\t\tthis.updatePlayhead();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpreview: function (sender, ev) {\r\n\t\tif (!this.$.slider.disabled) {\r\n\t\t\tif (!this.previewMode) {\r\n\t\t\t\tthis.startPreview();\r\n\t\t\t}\r\n\t\t\tthis.previewPos = this.$.slider.calcKnobPosition(ev);\r\n\t\t\tthis.updatePlayhead();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Force end preview mode when user press 5way while dragging\r\n\t* @private\r\n\t*/\r\n\tspotlightModeChanged: function (sender, ev) {\r\n\t\tif (this.dragging && !ev.pointerMode) {\r\n\t\t\tthis.endPreview();\r\n\t\t\tthis.updatePlayhead();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstartPlayheadJob: function () {\r\n\t\tif (this.playheadJob === null) {\r\n\t\t\tthis.playheadJob = setInterval(this.bindSafely('updatePlayhead'), this.playheadUpdateInterval);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tendPlayheadJob: function () {\r\n\t\tclearInterval(this.playheadJob);\r\n\t\tthis.playheadJob = null;\r\n\t\tthis.updatePlayhead();\r\n\t},\r\n\r\n\t/**\r\n\t* Setup playing property\r\n\t*\r\n\t* Use this property to show now playing item on datalist\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tmodelChanged: function (prev, curr) {\r\n\t\tif (prev) prev.set('playing', false);\r\n\t\tif (curr) {\r\n\t\t\tcurr.set('playing', true);\r\n\t\t\tthis.setTrack(curr.get('src'), curr.get('albumArt'), curr.get('trackName'), curr.get('artistName'));\r\n\t\t} else {\r\n\t\t\tthis.setTrack('', '', '', '');\r\n\t\t}\r\n\t\tthis.emit('trackChanged', {prev: prev, current: curr});\r\n\t},\r\n\r\n\t/**\r\n\t* Update disabled status from src\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsrcChanged: function (prev, curr) {\r\n\t\tthis.set('disableSlider', !curr);\r\n\t\tthis.set('disablePlaybackControls', !curr);\r\n\t},\r\n\r\n\t/**\r\n\t* @public\r\n\t*/\r\n\tgetDuration: function () {\r\n\t\treturn this.$.media.getDuration();\r\n\t},\r\n\r\n\t/**\r\n\t* @public\r\n\t*/\r\n\tgetCurrentTime: function () {\r\n\t\treturn this.$.media.getCurrentTime();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdatePlayhead: function () {\r\n\t\tvar totalTime = this.getDuration(),\r\n\t\t\tcurrentTime = this.getCurrentTime(),\r\n\t\t\tbufferTime = this.getBufferedTime(),\r\n\t\t\tplayheadPos, bufferheadPos;\r\n\r\n\t\ttotalTime = isNaN(totalTime) ? 0 : totalTime;\r\n\t\tcurrentTime = isNaN(currentTime) ? 0 : currentTime;\r\n\r\n\t\tplayheadPos = (!totalTime) ? 0 : (currentTime * 100) / totalTime;\r\n\t\tbufferheadPos = (!bufferTime) ? 0 : (bufferTime * 100) / totalTime;\r\n\r\n\t\tthis.$.slider.set('progress', playheadPos);\r\n\t\tthis.$.slider.set('bgProgress', bufferheadPos);\r\n\r\n\t\t// Calculate currentTime from cursor position in previewMode\r\n\t\tif (!this.$.slider.disabled && this.previewMode) {\r\n\t\t\tplayheadPos = this.previewPos;\r\n\t\t\tcurrentTime = (playheadPos / 100) * totalTime;\r\n\t\t}\r\n\r\n\t\tthis.updatePlayTime(this.toReadableTime(currentTime), this.toReadableTime(totalTime));\r\n\t\tthis.$.slider.updateKnobPosition(playheadPos);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetBufferedTime: function() {\r\n\t\tvar bufferData = this.$.media.getBuffered(),\r\n\t\t\tnumberOfBuffers = bufferData.length,\r\n\t\t\thighestBufferPoint = 0,\r\n\t\t\tduration = this.getDuration() || 0,\r\n\t\t\tendPoint = 0,\r\n\t\t\ti\r\n\t\t;\r\n\r\n\t\tif (!duration || isNaN(duration)) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t// Find furthest along buffer end point and use that (only supporting one buffer range for now)\r\n\t\tfor (i = 0; i < numberOfBuffers; i++) {\r\n\t\t\tendPoint = bufferData.end(i);\r\n\t\t\thighestBufferPoint = (endPoint > highestBufferPoint) ? endPoint : highestBufferPoint;\r\n\t\t}\r\n\t\treturn highestBufferPoint;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdatePlayTime: function (start, end) {\r\n\t\tthis.$.timePlayed.set('content', start);\r\n\t\tthis.$.timeRemaining.set('content', end);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsliderChanging: function (sender, ev) {\r\n\t\tif (!this.liveSeekMode && ev.type == 'onChanging') return;\r\n\t\tvar totalTime = this.getDuration();\r\n\t\tvar currentTime = (totalTime / 100) * ev.value;\r\n\t\tthis.updatePlayTime(this.toReadableTime(currentTime), this.toReadableTime(totalTime));\r\n\t\tthis.seekTo(currentTime);\r\n\t},\r\n\r\n\r\n\t/**\r\n\t* Setup track information.\r\n\t* Use model to set media instead of this.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsetTrack: function (src, albumArt, trackName, artistName) {\r\n\t\tthis.$.media.set('src', src);\r\n\t\tthis.$.trackIcon.set('src', albumArt);\r\n\t\tthis.$.trackName.set('content', trackName);\r\n\t\tthis.$.artistName.set('content', artistName);\r\n\t\tthis.updatePlayhead();\r\n\t\tthis.updatePlayTime('0:00', '0:00');\r\n\t\tthis.$.btnPlay.set('icon', 'play');\r\n\t},\r\n\r\n\r\n\r\n\t/*******      Public APIs      ******/\r\n\r\n\r\n\t/**\r\n\t* pauses audio if is playing, and plays it if it is paused\r\n\t*\r\n\t* @public\r\n\t*/\r\n\ttogglePlay: function () {\r\n\t\tif (!this.$.media.getPaused()) {\r\n\t\t\tthis.pause();\r\n\t\t} else {\r\n\t\t\tthis.play();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* plays audio\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tplay: function () {\r\n\t\tif (!this.$.media.get('src')) return;\r\n\t\tthis.$.media.play();\r\n\t\tthis.startPlayheadJob();\r\n\t\tthis.$.btnPlay.set('icon', 'pause');\r\n\t},\r\n\r\n\t/**\r\n\t* pauses audio\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tpause: function () {\r\n\t\tif (!this.$.media.get('src')) return;\r\n\t\tthis.$.media.pause();\r\n\t\tthis.endPlayheadJob();\r\n\t\tthis.$.btnPlay.set('icon', 'play');\r\n\t},\r\n\r\n\t/**\r\n\t* stop audio\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tstop: function () {\r\n\t\tif (!this.$.media.get('src')) return;\r\n\t\tthis.$.media.pause();\r\n\t\tthis.seekTo(0);\r\n\t\tthis.endPlayheadJob();\r\n\t\tthis.updatePlayhead();\r\n\t\tthis.$.btnPlay.set('icon', 'play');\r\n\t},\r\n\r\n\t/**\r\n\t* seek position\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tseekTo: function (value) {\r\n\t\tthis.$.media.seekTo(value);\r\n\t},\r\n\r\n\t/**\r\n\t* plays the track previous to current track\r\n\t*\r\n\t* @public\r\n\t*/\r\n\trewind: function () {\r\n\t\tif (!this.$.media.get('src')) return;\r\n\t\tthis.$.btnPlay.set('icon', 'play');\r\n\t\tthis.$.media.rewind();\r\n\t\tthis.startPlayheadJob();\r\n\t},\r\n\r\n\t/**\r\n\t* plays the track after the current track\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tfastForward: function () {\r\n\t\tif (!this.$.media.get('src')) return;\r\n\t\tthis.$.btnPlay.set('icon', 'pause'); // Fix-me: rewind and fastForward behavior is different.\r\n\t\tthis.$.media.fastForward();\r\n\t\tthis.startPlayheadJob();\r\n\t},\r\n\r\n\t/**\r\n\t* @public\r\n\t*/\r\n\tjumpBackward: function(sender, e) {\r\n\t\tif (!this.$.media.get('src')) return;\r\n\t\tif (this.jumpStartEnd) {\r\n\t\t\tthis.jumpToStart(sender, e);\r\n\t\t} else {\r\n\t\t\tif (!sender._holding || (sender._holding && sender._sentHold !== true)) {\r\n\t\t\t\tthis._jumpBackward(sender, e);\r\n\t\t\t}\r\n\t\t\tsender._holding = false;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @public\r\n\t*/\r\n\tjumpForward: function(sender, e) {\r\n\t\tif (!this.$.media.get('src')) return;\r\n\t\tif (this.jumpStartEnd) {\r\n\t\t\tthis.jumpToEnd(sender, e);\r\n\t\t} else {\r\n\t\t\tif (!sender._holding || (sender._holding && sender._sentHold !== true)) {\r\n\t\t\t\tthis._jumpForward(sender, e);\r\n\t\t\t}\r\n\t\t\tsender._holding = false;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Jumps to beginning of media [source]{@link module:moonstone/VideoPlayer~VideoPlayer#src}\r\n\t* and sets [playbackRate]{@link module:enyo/Video~Video#playbackRate} to `1`.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tjumpToStart: function() {\r\n\t\tif (!this.$.media.get('src')) return;\r\n\t\tthis.$.media.jumpToStart();\r\n\t\tthis.pause();\r\n\t},\r\n\r\n\t/**\r\n\t* Jumps to end of media [source]{@link module:moonstone/VideoPlayer~VideoPlayer#src}\r\n\t* and sets [playbackRate]{@link module:enyo/Video~Video#playbackRate} to `1`.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tjumpToEnd: function() {\r\n\t\tif (!this.$.media.get('src')) return;\r\n\t\tthis.$.media.jumpToEnd();\r\n\t\tthis.pause();\r\n\t},\r\n\r\n\t/********      Private functions      *******/\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_jumpBackward: function (sender, e) {\r\n\t\tthis.$.media.jumpBackward();\r\n\t\tif (this.$.media.isPaused()) this.updatePlayhead();\t// Force update playhead\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_jumpForward: function (sender, e) {\r\n\t\tthis.$.media.jumpForward();\r\n\t\tif (this.$.media.isPaused()) this.updatePlayhead();\t// Force update playhead\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_holdPulseThreadhold: 400,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_holding: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_sentHold: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tholdBackwardHandler: function (sender, e) {\r\n\t\tif (!this.jumpStartEnd) {\r\n\t\t\tif (e.holdTime > this._holdPulseThreadhold) {\r\n\t\t\t\tif (sender._sentHold !== true) {\r\n\t\t\t\t\tthis.jumpToStart(sender, e);\r\n\t\t\t\t\tsender._sentHold = true;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsender._holding = true;\r\n\t\t\t\tsender._sentHold = false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tholdForwardHandler: function (sender, e) {\r\n\t\tif (!this.jumpStartEnd) {\r\n\t\t\tif (e.holdTime > this._holdPulseThreadhold) {\r\n\t\t\t\tif (sender._sentHold !== true) {\r\n\t\t\t\t\tthis.jumpToEnd(sender, e);\r\n\t\t\t\t\tsender._sentHold = true;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsender._holding = true;\r\n\t\t\t\tsender._sentHold = false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\treleaseHandler: function (sender, e) {\r\n\t\tif (sender._sentHold && sender._sentHold === true) sender._sentHold = false;\r\n\t},\r\n\r\n\r\n\r\n\t/********    Protected functions    *******/\r\n\r\n\t/**\r\n\t* Convert time to readable format\r\n\t*\r\n\t* @protected\r\n\t*/\r\n\ttoReadableTime: function (sec) {\r\n\t\tvar minutes = Math.floor(sec / 60).toString();\r\n\t\tvar seconds = Math.floor(sec - minutes * 60).toString();\r\n\t\tif (seconds < 10) {\r\n\t\t\tseconds = '0' + seconds;\r\n\t\t} else if (seconds.length === 1) {\r\n\t\t\tseconds += '0';\r\n\t\t}\r\n\t\treturn minutes + ':' + seconds;\r\n\t},\r\n\r\n\t/**\r\n\t* @protected\r\n\t*/\r\n\tremoteKeyHandler: function (sender, ev) {\r\n\t\tvar command;\r\n\t\tif (this.handleRemoteControlKey) {\r\n\t\t\tswitch (ev.keySymbol) {\r\n\t\t\t\tcase 'playpause':\r\n\t\t\t\t\tcommand = 'togglePlay';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'rewind':\r\n\t\t\t\t\tcommand = 'rewind';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'fastforward':\r\n\t\t\t\t\tcommand = 'fastForward';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tcommand = ev.keySymbol;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tthis.commandHandler(utils.mixin(sender, {command: command}), ev );\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* Decide behavior of playback command.\r\n\t* User can simply give command property on their button to change the behavior.\r\n\t*\r\n\t* @protected\r\n\t*/\r\n\tcommandHandler: function (sender, ev) {\r\n\t\tvar command = sender.command;\r\n\t\tif (this[command]) this[command](sender, ev);\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* Stop if reached start while rewind\r\n\t* @protected\r\n\t*/\r\n\tonPlayStart: function (sender, ev) {\r\n\t\tif (sender.getPlaybackRate() < 0) {\r\n\t\t\tthis.pause();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Stop when play ends\r\n\t* @protected\r\n\t*/\r\n\tonPlayEnd: function (sender, ev) {\r\n\t\tthis.pause();\r\n\t},\r\n\r\n\t/**\r\n\t* Handling error\r\n\t* @protected\r\n\t*/\r\n\tonPlayError: function(sender, ev) {\r\n\t\tthis.warn(ev);\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/GridListImageItem~GridListImageItem} kind.\r\n* @module moonstone/GridListImageItem\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tEnyoImage = require('enyo/Image');\r\n\r\nvar\r\n\tGridListImageItem = require('layout/GridListImageItem');\r\n\r\nvar\r\n\tImg = require('../Image'),\r\n\tMarquee = require('../Marquee'),\r\n\tMarqueeSupport = Marquee.Support,\r\n\tMarqueeText = Marquee.Text,\r\n\tOverlay = require('../Overlay');\r\n\r\n/**\r\n* {@link module:moonstone/GridListImageItem~GridListImageItem} extends {@link module:layout/GridListImageItem~GridListImageItem}, adding\r\n* Moonstone-specific configuration, styling, decorators, and focus-state management.\r\n*\r\n* You may create an image grid by adding instances of this kind as components of a\r\n* {@link module:moonstone/DataGridList~DataGridList}.\r\n*\r\n* @class GridListImageItem\r\n* @extends module:layout/GridListImageItem~GridListImageItem\r\n* @mixes module:moonstone/MarqueeSupport~MarqueeSupport\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/GridListImageItem~GridListImageItem.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.GridListImageItem',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: GridListImageItem,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [MarqueeSupport, Overlay.Container],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\toverlayTarget: 'image',\r\n\r\n\t/**\r\n\t* Placeholder image used while [source]{@link module:moonstone/GridListImageItem~GridListImageItem#source} is loaded\r\n\t*\r\n\t* @see module:enyo/Image~Image#placeholder\r\n\t* @type {String}\r\n\t* @default module:enyo/Image~Image#placeholder\r\n\t* @public\r\n\t*/\r\n\tplaceholder: EnyoImage.placeholder,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcentered: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-gridlist-imageitem',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponentOverrides: {\r\n\t\tcaption: {kind: MarqueeText},\r\n\t\tsubCaption: {kind: MarqueeText},\r\n\t\timage: {kind: Img}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: '.allowHtml', to: '.$.caption.allowHtml'},\r\n\t\t{from: '.allowHtml', to: '.$.subCaption.allowHtml'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonSpotlightFocused: 'focused'\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:moonstone/Scroller~Scroller#onRequestScrollIntoView\r\n\t* @private\r\n\t*/\r\n\tfocused: function (inSender, inEvent) {\r\n\t\tif (inEvent.originator === this) {\r\n\t\t\tthis.bubble('onRequestScrollIntoView');\r\n\t\t}\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: ['caption', 'subCaption', 'accessibilityHint', 'accessibilityLabel'], method: function () {\r\n\t\t\tvar content = this.caption + ' ' + this.subCaption,\r\n\t\t\t\tprefix = this.accessibilityLabel || content || null,\r\n\t\t\t\tlabel = this.accessibilityHint && prefix && (prefix + ' ' + this.accessibilityHint) ||\r\n\t\t\t\t\t\tthis.accessibilityHint ||\r\n\t\t\t\t\t\tthis.accessibilityLabel ||\r\n\t\t\t\t\t\tnull;\r\n\r\n\t\t\t\tthis.setAriaAttribute('aria-label', label);\r\n\t\t}}\r\n\t]\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Scroller~Scroller}\r\n* kind. On platforms with touch support, it will return\r\n* {@link module:enyo/Scroller~Scroller}.\r\n* @module moonstone/Scroller\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tplatform = require('enyo/platform'),\r\n\tScroller = require('enyo/Scroller'),\r\n\tSignals = require('enyo/Signals');\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\nvar\r\n\tScrollStrategy = require('../ScrollStrategy');\r\n\r\n/**\r\n* On non-webOS touch platforms, revert to using Enyo scroller, which picks an appropriate\r\n* scroll strategy for the given platform.\r\n*\r\n* @private\r\n*/\r\nif (platform.touch && !platform.webos) {\r\n\tmodule.exports = Scroller;\r\n} else {\r\n\t/**\r\n\t* Fires when a control explicitly requests to be scrolled into view. Handled by the\r\n\t* [scroll strategy]{@link module:enyo/Scroller~Scroller#strategyKind}.\r\n\t*\r\n\t* @event module:moonstone/Scroller~Scroller#onRequestScrollIntoView\r\n\t* @type {Object}\r\n\t* @property {Boolean} scrollInPointerMode - Whether to allow scrolling in pointer mode.\r\n\t* @property {Boolean} scrollFullPage - If defined, overrides the scroller's\r\n\t*\t[scrollFullPage]{@link module:moonstone/Scroller~Scroller#scrollFullPage} property.\r\n\t* @public\r\n\t*/\r\n\r\n\t/**\r\n\t* {@link module:moonstone/Scroller~Scroller} extends {@link module:enyo/Scroller~Scroller}, adding support for 5-way focus\r\n\t* (Spotlight) and pagination buttons.\r\n\t*\r\n\t* It responds when controls explicitly request to be scrolled into view by emitting the\r\n\t* [onRequestScrollIntoView]{@link module:enyo/Scroller~Scroller#onRequestScrollIntoView} event. This\r\n\t* typically happens when a control handles an `onSpotlightFocused` event, ensuring that\r\n\t* 5-way ({@glossary Spotlight}) focused controls remain in view.\r\n\t*\r\n\t* For more information, see the documentation on\r\n\t* [Scrollers]{@linkplain $dev-guide/building-apps/layout/scrollers.html} in the\r\n\t* Enyo Developer Guide.\r\n\t*\r\n\t* @class Scroller\r\n\t* @extends module:enyo/Scroller~Scroller\r\n\t* @ui\r\n\t* @public\r\n\t*/\r\n\tmodule.exports = kind(\r\n\t\t/** @lends module:moonstone/Scroller~Scroller.prototype */ {\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tname:      'moon.Scroller',\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tkind:      Scroller,\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t* @lends module:moonstone/Scroller~Scroller.prototype\r\n\t\t*/\r\n\t\tpublished: {\r\n\r\n\t\t\t/**\r\n\t\t\t* If `true`, when scrolling to focused child controls, the scroller will\r\n\t\t\t* scroll as far as possible, until its edge meets the next item's edge.\r\n\t\t\t*\r\n\t\t\t* @type {Boolean}\r\n\t\t\t* @default false\r\n\t\t\t* @public\r\n\t\t\t*/\r\n\t\t\tscrollFullPage: false,\r\n\r\n\t\t\t/**\r\n\t\t\t* If `true`, paging controls are focusable (in 5-way mode).  Normally, this\r\n\t\t\t* is not required, since the scroller will automatically scroll to ensure\r\n\t\t\t* most focusable items are in view.  It is intended to be used when the\r\n\t\t\t* scroller contents have no spotlightable controls, such as the case of a\r\n\t\t\t* scroller with a long body of text.\r\n\t\t\t*\r\n\t\t\t* @type {Boolean}\r\n\t\t\t* @default false\r\n\t\t\t* @public\r\n\t\t\t*/\r\n\t\t\tspotlightPagingControls: false,\r\n\r\n\t\t\t/**\r\n\t\t\t* If 'true', paging controls are hidden when content fit in scroller\r\n\t\t\t* even when spotlightPagingControls is true.\r\n\t\t\t*\r\n\t\t\t* @type {Boolean}\r\n\t\t\t* @default false\r\n\t\t\t* @public\r\n\t\t\t*/\r\n\t\t\thideScrollColumnsWhenFit: false,\r\n\r\n\t\t\t/**\r\n\t\t\t* Relative parameter used to determine scroll speed.\r\n\t\t\t*\r\n\t\t\t* @type {Number}\r\n\t\t\t* @default 75\r\n\t\t\t* @public\r\n\t\t\t*/\r\n\t\t\tscrollInterval: 75,\r\n\r\n\t\t\t/**\r\n\t\t\t* The ratio of mousewheel 'delta' units to pixels scrolled. Increase this\r\n\t\t\t* value to increase the distance scrolled by the scroll wheel. Note that\r\n\t\t\t* mice/trackpads do not emit the same 'delta' units per 'notch' or flick of\r\n\t\t\t* the scroll wheel/trackpad; that can vary based on intensity and momentum.\r\n\t\t\t*\r\n\t\t\t*\r\n\t\t\t* @type {Number}\r\n\t\t\t* @default 2\r\n\t\t\t* @public\r\n\t\t\t*/\r\n\t\t\tscrollWheelMultiplier: 2,\r\n\r\n\t\t\t/**\r\n\t\t\t* The ratio of the maximum distance scrolled by each scroll wheel event to\r\n\t\t\t* the height/width of the viewport. Setting a value larger than `1` is not\r\n\t\t\t* advised, since a single scroll event could move more than one viewport's\r\n\t\t\t* worth of content (depending on the delta received), resulting in skipped\r\n\t\t\t* content.\r\n\t\t\t*\r\n\t\t\t* @type {Number}\r\n\t\t\t* @default 0.2\r\n\t\t\t* @public\r\n\t\t\t*/\r\n\t\t\tscrollWheelPageMultiplier: 0.2,\r\n\r\n\t\t\t/**\r\n\t\t\t* The ratio of the distance scrolled per tap of the paging button to the\r\n\t\t\t* height/width of the viewport. Setting a value larger than `1` is not\r\n\t\t\t* advised, since a paging button tap will move more than one viewport's\r\n\t\t\t* worth of content, resulting in skipped content.\r\n\t\t\t*\r\n\t\t\t*\r\n\t\t\t* @type {Number}\r\n\t\t\t* @default 0.8\r\n\t\t\t* @public\r\n\t\t\t*/\r\n\t\t\tpaginationPageMultiplier: 0.8,\r\n\r\n\t\t\t/**\r\n\t\t\t* The ratio of continuous-scrolling delta units to pixels scrolled. Increase\r\n\t\t\t* this value to increase the distance scrolled when the pagination buttons\r\n\t\t\t* are held.\r\n\t\t\t*\r\n\t\t\t* @type {Number}\r\n\t\t\t* @default 8\r\n\t\t\t* @public\r\n\t\t\t*/\r\n\t\t\tpaginationScrollMultiplier: 8,\r\n\r\n\t\t\t/**\r\n\t\t\t* When `true`, the scroll wheel moves spotlight focus up/down through the\r\n\t\t\t* scroller when in 5-way mode. (In pointer mode, the scroll wheel always\r\n\t\t\t* scrolls the viewport without modifying focus position.) When `false`, the\r\n\t\t\t* scroll wheel works the same in 5-way mode as in pointer mode, where the\r\n\t\t\t* wheel moves the position of the scroller viewport.\r\n\t\t\t*\r\n\t\t\t* @type {Boolean}\r\n\t\t\t* @default true\r\n\t\t\t* @public\r\n\t\t\t*/\r\n\t\t\tscrollWheelMovesFocus: true\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\thandlers: {\r\n\t\t\tonSpotlightScrollUp:'spotlightWheel',\r\n\t\t\tonSpotlightScrollDown:'spotlightWheel',\r\n\t\t\tonSpotlightContainerEnter:'enablePageUpDownKey',\r\n\t\t\tonSpotlightFocus: 'checkBounce',\r\n\t\t\tonSpotlightContainerLeave:'containerLeaveHandler',\r\n\t\t\tonenter:'enablePageUpDownKey',\r\n\t\t\tonleave:'disablePageUpDownKey',\r\n\t\t\tonmove:'move'\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Need this to prevent the web engine from adjusting the native\r\n\t\t* scrollTop / scrollLeft props behind our backs under certain\r\n\t\t* circumstances (when an element inside the scroller is\r\n\t\t* programatically focused).\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\taccessibilityPreventScroll: true,\r\n\r\n\t\t// The scrollToBoundary configuration parameters below\r\n\t\t// are considered private for now, but have been factored\r\n\t\t// this way and are sync'd with moonstone/ScrollStrategy so that\r\n\t\t// they can be changed in one place and could be overridden in case\r\n\t\t// of emergency.\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tscrollToBoundaryDelay: 100,\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tscrollToBoundaryAnimate: true,\r\n\r\n\r\n\t\t/**\r\n\t\t* If `true`, scroll events are not allowed to propagate.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tpreventScrollPropagation: false,\r\n\r\n\t\t/**\r\n\t\t* If `true`, measure the size of the scroll columns on initial render.\r\n\t\t* See {@link module:moonstone/ScrollStrategy~ScrollStrategy#_measureScrollColumns} for details.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tmeasureScrollColumns: false,\r\n\r\n\t\t/**\r\n\t\t* Default to {@link module:moonstone/ScrollStrategy~ScrollStrategy}\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tstrategyKind: ScrollStrategy,\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tspotlight: 'container',\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\thandlePageUpDownKey: false,\r\n\r\n\t\t/**\r\n\t\t* Scrolls until the specified [control]{@link module:enyo/Control~Control} is in view. If\r\n\t\t* `scrollFullPage` is set, scrolls until the edge of `control` is aligned with\r\n\t\t* the edge of the visible scroll area. Optional third parameter indicates\r\n\t\t* whether or not the scroll should be animated. If `setLastFocusedChild` is\r\n\t\t* `true`, scroller will set up `control` to be the spotted child when the\r\n\t\t* scroller is spotted.\r\n\t\t*\r\n\t\t* @param {Object} control - The [control]{@link module:enyo/Control~Control} to scroll into view.\r\n\t\t* @param {Boolean} [scrollFullPage] - If `true`, scrolls until the edge of `control`\r\n\t\t* is aligned with the edge of the visible scroll area. If `undefined`, the value in\r\n\t\t*\t[scrollFullPage]{@link module:moonstone/Scroller~Scroller#scrollFullPage} is used.\r\n\t\t* @param {Boolean} [animate=true] - If `true`, animates the scroll.\r\n\t\t* @param {Boolean} [setLastFocusedChild=false] - If `true`, scroller will set up\r\n\t\t* `control` to be the spotted child when the scroller is spotted.\r\n\t\t* @public\r\n\t\t*/\r\n\t\tscrollToControl: function (control, scrollFullPage, animate, setLastFocusedChild) {\r\n\t\t\tif (setLastFocusedChild) {\r\n\t\t\t\tthis.setLastFocusedChild(control);\r\n\t\t\t}\r\n\t\t\tthis.$.strategy.animateToControl(control, scrollFullPage, animate);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Scrolls to the specified `x` and `y` coordinates. The optional third parameter\r\n\t\t* may be set to `false` to disable animation for the scroll.\r\n\t\t*\r\n\t\t* @param {Number} x - Horizontal position in pixels\r\n\t\t* @param {Number} y - Vertical position in pixels\r\n\t\t* @param {Boolean} [animate=true] - If `true`, animates the scroll.\r\n\t\t* @public\r\n\t\t*/\r\n\t\tscrollTo: function (x, y, animate) {\r\n\t\t\tthis.$.strategy.scrollTo(x, y, animate);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tbindings: [\r\n\t\t\t{from: 'scrollInterval',\t\t\t\tto:'$.strategy.interval'},\r\n\t\t\t{from: 'scrollWheelMultiplier',\t\t\tto:'$.strategy.scrollWheelMultiplier'},\r\n\t\t\t{from: 'scrollWheelPageMultiplier',\t\tto:'$.strategy.scrollWheelPageMultiplier'},\r\n\t\t\t{from: 'paginationPageMultiplier',\t\tto:'$.strategy.paginationPageMultiplier'},\r\n\t\t\t{from: 'paginationScrollMultiplier',\tto:'$.strategy.paginationScrollMultiplier'},\r\n\t\t\t{from: 'hideScrollColumnsWhenFit',\t\tto:'$.strategy.hideScrollColumnsWhenFit'},\r\n\t\t\t{from: 'scrollToBoundaryDelay',\t\t\tto:'$.strategy.scrollToBoundaryDelay'},\r\n\t\t\t{from: 'scrollToBoundaryAnimate',\t\tto:'$.strategy.scrollToBoundaryAnimate'}\r\n\t\t],\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tcreate: function () {\r\n\t\t\tScroller.prototype.create.apply(this, arguments);\r\n\t\t\tthis.spotlightPagingControlsChanged();\r\n\t\t\tthis.scrollWheelMovesFocusChanged();\r\n\t\t\tthis.createChrome([{kind: Signals, onkeyup: 'keyup'}]);\r\n\r\n\t\t\tthis.$.strategy.measureScrollColumns = this.measureScrollColumns;\r\n\r\n\t\t\t// workaround because the bootstrapping code isn't attached to constructors that have\r\n\t\t\t// finished setup before the hook is declared\r\n\t\t\tif(Spotlight && this.spotlight === 'container') {\r\n\t\t\t\tSpotlight.Container.initContainer(this);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tsetLastFocusedChild: function(control) {\r\n\t\t\tSpotlight.Container.setLastFocusedChild(this, control);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tspotlightPagingControlsChanged: function () {\r\n\t\t\tthis.$.strategy.set('spotlightPagingControls', this.spotlightPagingControls);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tscrollWheelMovesFocusChanged: function () {\r\n\t\t\tif (!this.scrollWheelMovesFocus) {\r\n\t\t\t\tthis.setUseMouseWheel(true);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tspotlightWheel: function (inSender, inEvent) {\r\n\t\t\tif (this.scrollWheelMovesFocus) {\r\n\t\t\t\tif (!Spotlight.getPointerMode()) {\r\n\t\t\t\t\tvar curr = Spotlight.getCurrent();\r\n\t\t\t\t\tif (curr && curr.isDescendantOf(this)) {\r\n\t\t\t\t\t\tvar dir = inEvent.type == 'onSpotlightScrollUp' ? 'onSpotlightUp' : 'onSpotlightDown';\r\n\t\t\t\t\t\tthis._spotlightModal = this.spotlightModal;\r\n\t\t\t\t\t\tthis.spotlightModal = true;\t// Trap focus inside scroller while wheeling\r\n\t\t\t\t\t\tSpotlight.Util.dispatchEvent(dir, {type: dir}, curr);\r\n\t\t\t\t\t\tthis.spotlightModal = this._spotlightModal;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tgetHandlePageUpDownKey: function () {\r\n\t\t\treturn this.handlePageUpDownKey;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tenablePageUpDownKey: function () {\r\n\t\t\tthis.handlePageUpDownKey = true;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tdisablePageUpDownKey: function () {\r\n\t\t\tthis.handlePageUpDownKey = false;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tcheckBounce: function (sender, event) {\r\n\t\t\tif (event.focusType === '5-way bounce') {\r\n\t\t\t\tthis.stopJob('scrollToBoundary');\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tcontainerLeaveHandler: function (sender, event) {\r\n\t\t\t// We want to scroll to the boundary when 5-way focus leaves the scroller,\r\n\t\t\t// but we do this in a job to prevent scrolling in the case where focus\r\n\t\t\t// immediately \"bounces\" back into the scroller because there's nothing\r\n\t\t\t// spottable in the given direction\r\n\t\t\tif (event.originator === this) {\r\n\t\t\t\tthis.scrollToBoundary();\r\n\t\t\t}\r\n\r\n\t\t\tthis.disablePageUpDownKey();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* If 5-way focus is leaving the scroller, we scroll to the scroller's\r\n\t\t* boundary in the direction of the move. This logic works in\r\n\t\t* conjunction with related logic in moonstone/ScrollStrategy to allow users\r\n\t\t* to 5-way scroll all the way to the edge of a scroller, even when\r\n\t\t* the controls nearest the scroller boundary are disabled or otherwise\r\n\t\t* unfocusable.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tscrollToBoundary: function () {\r\n\t\t\tvar strategy = this.getStrategy(),\r\n\t\t\t\tb = strategy.getScrollBounds(),\r\n\t\t\t\to5WayEvent = Spotlight.getLast5WayEvent(),\r\n\t\t\t\tlastControl = Spotlight.getLastControl(),\r\n\t\t\t\ttop = strategy.getScrollTop(),\r\n\t\t\t\tleft = strategy.getScrollLeft(),\r\n\t\t\t\tanimate = this.scrollToBoundaryAnimate;\r\n\r\n\t\t\tif (o5WayEvent && (!strategy.isPageControl || !strategy.isPageControl(lastControl))) {\r\n\t\t\t\tthis.startJob('scrollToBoundary', function () {\r\n\t\t\t\t\tswitch (o5WayEvent.type) {\r\n\t\t\t\t\t\tcase 'onSpotlightUp':\r\n\t\t\t\t\t\t\tif (top > 0) strategy.scrollTo(left, 0, animate);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'onSpotlightDown':\r\n\t\t\t\t\t\t\tif (top < b.maxTop) strategy.scrollTo(left, b.maxTop, animate);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'onSpotlightLeft':\r\n\t\t\t\t\t\t\tif (left > 0) strategy.scrollTo(0, top, animate);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'onSpotlightRight':\r\n\t\t\t\t\t\t\t\tif (left < b.maxLeft) strategy.scrollTo(b.maxLeft, top, animate);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this.scrollToBoundaryDelay);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tmove: function (inSender, inEvent) {\r\n\t\t\tif (!this.getHandlePageUpDownKey()) {\r\n\t\t\t\tthis.enablePageUpDownKey();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tkeyup: function (inSender, inEvent) {\r\n\t\t\tvar KEY_POINTER_PAGE_UP = 33,\r\n\t\t\t\tKEY_POINTER_PAGE_DOWN = 34;\r\n\r\n\t\t\tif (!this.getHandlePageUpDownKey()) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar strategy = this.getStrategy(),\r\n\t\t\t\tshowVertical = strategy.showVertical(),\r\n\t\t\t\tviewportBounds = strategy.$.viewport.getAbsoluteBounds(),\r\n\t\t\t\toSpotControl = Spotlight.getCurrent(),\r\n\t\t\t\tdirection,\r\n\t\t\t\trDirection,\r\n\t\t\t\tpageKeyCtr;\r\n\r\n\t\t\tswitch (inEvent.keyCode) {\r\n\t\t\t\tcase KEY_POINTER_PAGE_UP:\r\n\t\t\t\t\tdirection = showVertical ? 'Up' : 'Left';\r\n\t\t\t\t\trDirection = showVertical ? 'Down' : 'Right';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase KEY_POINTER_PAGE_DOWN:\r\n\t\t\t\t\tdirection = showVertical ? 'Down' : 'Right';\r\n\t\t\t\t\trDirection = showVertical ? 'Up' : 'Left';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tpageKeyCtr = strategy.$['page' + direction + 'Control'];\r\n\r\n\t\t\tif (!Spotlight.getPointerMode() && oSpotControl) {\r\n\t\t\t\tvar oSpotBounds = oSpotControl.getAbsoluteBounds(),\r\n\t\t\t\t\toEndPoint = this.getEndPoint(direction, oSpotBounds, viewportBounds);\r\n\r\n\t\t\t\tvar oControl = Spotlight.\r\n\t\t\t\t\t\t\t\tNearestNeighbor.\r\n\t\t\t\t\t\t\t\tgetNearestPointerNeighbor(this, rDirection.toUpperCase(), oEndPoint.x, oEndPoint.y);\r\n\t\t\t\tif (oControl && oControl.id === oSpotControl.id) {\r\n\t\t\t\t\toEndPoint = this.getEndPoint(direction, oSpotBounds, this.getNextViewport(direction, viewportBounds));\r\n\t\t\t\t\toControl = Spotlight.\r\n\t\t\t\t\t\t\t\tNearestNeighbor.\r\n\t\t\t\t\t\t\t\tgetNearestPointerNeighbor(this, rDirection.toUpperCase(), oEndPoint.x, oEndPoint.y);\r\n\t\t\t\t}\r\n\t\t\t\tif (oControl !== oSpotControl) {\r\n\t\t\t\t\tSpotlight.spot(oControl);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpageKeyCtr.sendPaginateEvent();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (pageKeyCtr.getDisabled()) {\r\n\t\t\t\t\tstrategy.alertThumbs();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpageKeyCtr.sendPaginateEvent();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tgetEndPoint: function (direction, oSpotBounds, viewportBounds) {\r\n\t\t\tvar oPoint = {};\r\n\t\t\tswitch (direction) {\r\n\t\t\t\tcase 'Up':\r\n\t\t\t\t\toPoint.x = oSpotBounds.left + oSpotBounds.width/2;\r\n\t\t\t\t\toPoint.y = viewportBounds.top;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'Left':\r\n\t\t\t\t\toPoint.x = viewportBounds.left;\r\n\t\t\t\t\toPoint.y = oSpotBounds.top + oSpotBounds.height/2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'Down':\r\n\t\t\t\t\toPoint.x = oSpotBounds.left + oSpotBounds.width/2;\r\n\t\t\t\t\toPoint.y = viewportBounds.top + viewportBounds.height;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'Right':\r\n\t\t\t\t\toPoint.x = viewportBounds.left + viewportBounds.width;\r\n\t\t\t\t\toPoint.y = oSpotBounds.top + oSpotBounds.height/2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn oPoint;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tgetNextViewport: function (direction, viewportBounds) {\r\n\t\t\tswitch (direction) {\r\n\t\t\t\tcase 'Up':\r\n\t\t\t\t\tviewportBounds.top = viewportBounds.top - viewportBounds.height;\r\n\t\t\t\t\treturn viewportBounds;\r\n\t\t\t\tcase 'Left':\r\n\t\t\t\t\tviewportBounds.left = viewportBounds.left - viewportBounds.width;\r\n\t\t\t\t\treturn viewportBounds;\r\n\t\t\t\tcase 'Down':\r\n\t\t\t\t\tviewportBounds.top = viewportBounds.top + viewportBounds.height;\r\n\t\t\t\t\treturn viewportBounds;\r\n\t\t\t\tcase 'Right':\r\n\t\t\t\t\tviewportBounds.left = viewportBounds.left + viewportBounds.width;\r\n\t\t\t\t\treturn viewportBounds;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tpreviewDomEvent: function (inEvent) {\r\n\t\t\tif (this.scrollWheelMovesFocus) {\r\n\t\t\t\tif (inEvent.type == 'mousewheel') {\r\n\t\t\t\t\tthis.setUseMouseWheel(Spotlight.getPointerMode());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/IntegerPicker~IntegerPicker} kind.\r\n* @module moonstone/IntegerPicker\r\n*/\r\n\r\nvar\r\n\tanimation = require('enyo/animation'),\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom'),\r\n\tControl = require('enyo/Control'),\r\n\tScroller = require('enyo/Scroller');\r\n\r\nvar\r\n\tFlyweightRepeater = require('layout/FlyweightRepeater');\r\n\r\nvar\r\n\tScrollStrategy = require('../ScrollStrategy'),\r\n\tTouchScrollStrategy = ScrollStrategy.Touch;\r\n\r\nvar\r\n\t$L = require('../i18n');\r\n\r\n/**\r\n* Fires when the currently selected value changes.\r\n*\r\n* @event module:moonstone/IntegerPicker~IntegerPicker#onChange\r\n* @type {Object}\r\n* @property {Number} value - The currently selected value.\r\n* @property {String} name - The name of the picker instance.\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/IntegerPicker~IntegerPicker} is a control that displays a list of integers\r\n* ranging from [min]{@link module:moonstone/IntegerPicker~IntegerPicker#min} to [max]{@link module:moonstone/IntegerPicker~IntegerPicker#max},\r\n* soliciting a choice from the user. To initialize the picker to a particular integer,\r\n* set the [value]{@link module:moonstone/IntegerPicker~IntegerPicker#value} property to that integer:\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tIntegerPicker = require('moonstone/IntegerPicker');\r\n*\r\n* \t{kind: IntegerPicker, noneText: 'None Selected',\r\n* \t\tcontent: 'Choose a Number', min: 0, max: 25, value: 5}\r\n* ```\r\n*\r\n* The picker may be changed programmatically by modifying the `value`, `min`,\r\n* and `max` properties in the normal manner, by calling [set()]{@link module:enyo/CoreObject~Object#set}.\r\n*\r\n* @class IntegerPicker\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/IntegerPicker~IntegerPicker.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.IntegerPicker',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-scroll-picker-container',\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/IntegerPicker~IntegerPicker.prototype\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* When `true`, button is shown as disabled and does not generate tap events.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdisabled: false,\r\n\r\n\t\t/**\r\n\t\t* When `true`, picker transitions animate left/right.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tanimate: true,\r\n\r\n\t\t/**\r\n\t\t* Current value of the picker.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tvalue: 0,\r\n\r\n\t\t/**\r\n\t\t* Minimum value of the picker.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmin: 0,\r\n\r\n\t\t/**\r\n\t\t* Maximum value of the picker.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 9\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmax: 9,\r\n\r\n\t\t/**\r\n\t\t* Amount by which to increment or decrement when moving picker between\r\n\t\t* [min]{@link module:moonstone/IntegerPicker~IntegerPicker#min} and [max]{@link module:moonstone/IntegerPicker~IntegerPicker#max}.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 1\r\n\t\t* @public\r\n\t\t*/\r\n\t\tstep: 1,\r\n\r\n\t\t/**\r\n\t\t* If a number is specified, the picker value is displayed as this many\r\n\t\t* zero-filled digits.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdigits: null,\r\n\r\n\t\t/**\r\n\t\t* When `true`, incrementing beyond [max]{@link module:moonstone/IntegerPicker~IntegerPicker#max} will wrap to\r\n\t\t* [min]{@link module:moonstone/IntegerPicker~IntegerPicker#min}, and decrementing beyond `min` will wrap to\r\n\t\t* `max`.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\twrap: false,\r\n\r\n\t\t/**\r\n\t\t* The minimum width of the picker. If not set, or set to a low value, the width\r\n\t\t* of the picker will fluctuate slightly depending on the rendered width of the value.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 50\r\n\t\t* @public\r\n\t\t*/\r\n\t\tminWidth: 50\r\n\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonSpotlightUp: 'next',\r\n\t\tonSpotlightDown: 'previous',\r\n\t\tonSpotlightFocused: 'spotlightFocused',\r\n\t\tonSpotlightBlur: 'spotlightBlur',\r\n\t\tonSpotlightScrollUp: 'next',\r\n\t\tonSpotlightScrollDown: 'previous',\r\n\t\tonmousewheel: 'mousewheel'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\t/**\r\n\t\t* {@link module:moonstone/IntegerPicker~IntegerPicker#onChange}\r\n\t\t*/\r\n\t\tonChange: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: true,\r\n\r\n\t/**\r\n\t* Cache scroll bounds so we don't have to run {@link module:enyo/Scroller~Scroller#stop} every time we\r\n\t* need them.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tscrollBounds: {},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name:'nextOverlay', kind: Control, ondown: 'downNext', onholdpulse: 'next', classes: 'moon-scroll-picker-overlay-container next', components:[\r\n\t\t\t{kind: Control, classes: 'moon-scroll-picker-overlay next'},\r\n\t\t\t{kind: Control, classes: 'moon-scroll-picker-taparea'}\r\n\t\t]},\r\n\t\t// FIXME: TranslateScrollStrategy doesn't work with the current design of this component so\r\n\t\t// we're forcing TouchScrollStrategy\r\n\t\t{kind: Scroller, strategyKind: TouchScrollStrategy, thumb: false, touch: true, useMouseWheel: false, classes: 'moon-scroll-picker', components:[\r\n\t\t\t{name: 'repeater', kind: FlyweightRepeater, classes: 'moon-scroll-picker-repeater', ondragstart: 'dragstart', onSetupItem: 'setupItem', noSelect: true, components: [\r\n\t\t\t\t{name: 'item', kind: Control, classes: 'moon-scroll-picker-item'}\r\n\t\t\t]},\r\n\t\t\t{name: 'buffer', kind: Control, accessibilityDisabled: true, classes: 'moon-scroll-picker-buffer'}\r\n\t\t]},\r\n\t\t{name:'previousOverlay', kind: Control, ondown: 'downPrevious', onholdpulse: 'previous', classes: 'moon-scroll-picker-overlay-container previous', components:[\r\n\t\t\t{kind: Control, classes: 'moon-scroll-picker-overlay previous'},\r\n\t\t\t{kind: Control, classes: 'moon-scroll-picker-taparea'}\r\n\t\t]}\r\n\t],\r\n\r\n\t/**\r\n\t* Parameter that determines scroll math simulation speed.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tscrollFrame: 3,\r\n\r\n\t/**\r\n\t* Indicates direction of change from user. Necessary to support proper wrapping\r\n\t* when `range == 2`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdirection: 0,\r\n\r\n\t/**\r\n\t* Range of possible values `max - min`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\trange: 0,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tthis.rangeChanged();\r\n\t\tthis.updateOverlays();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trendered: function () {\r\n\t\tControl.prototype.rendered.apply(this, arguments);\r\n\t\tthis.width = null;\r\n\t\tthis.minWidthChanged();\r\n\t\tthis.scrollToValue();\r\n\t\tthis.$.scroller.getStrategy().setFixedTime(false);\r\n\t\tthis.$.scroller.getStrategy().setFrame(this.scrollFrame);\r\n\t},\r\n\r\n\t/**\r\n\t* Snap to current value on a reflow.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\treflow: function () {\r\n\t\tControl.prototype.reflow.apply(this, arguments);\r\n\t\tthis.scrollToValue();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetVerifiedValue: function () {\r\n\t\treturn this.value >= this.min && this.value <= this.max ? this.value : this.min;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tverifyValue: function () {\r\n\t\tvar animate = this.animate;\r\n\t\tthis.animate = false;\r\n\t\tthis.set('value', this.getVerifiedValue());\r\n\t\tthis.animate = animate;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetupItem: function (inSender, inEvent) {\r\n\t\tvar index = inEvent.index;\r\n\t\tvar content = this.labelForValue(this.indexToValue(index % this.range));\r\n\t\tthis.$.item.setContent(content);\r\n\t},\r\n\r\n\t/**\r\n\t* Formats passed-in value for display. If [digits]{@link module:moonstone/IntegerPicker~IntegerPicker#digits}\r\n\t* is **truthy**, zeros will be prepended to reach that number of digits.\r\n\t*\r\n\t* @param  {Number} value - Value to format.\r\n\t* @return {String}       - Formatted value.\r\n\t* @private\r\n\t*/\r\n\tlabelForValue: function(value) {\r\n\t\tif (this.digits) {\r\n\t\t\tvalue = (value < 0? '-' : '') + ('00000000000000000000' + Math.abs(value)).slice(-this.digits);\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetupBuffer: function() {\r\n\t\tvar bmin = ('' + this.min).length,\r\n\t\t\tbmax = Math.max(bmin, ('' + this.max).length),\r\n\t\t\tdigits = this.digits + (this.min < 0 ? 1 : 0),\r\n\t\t\tbuffer = Math.max(bmax, digits),\r\n\t\t\tcontent = '00000000000000000000'.substring(0, buffer);\r\n\t\tthis.$.buffer.setContent(content);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdigitsChanged: function () {\r\n\t\tthis.setupBuffer();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tprepareRange: function () {\r\n\t\tthis.range = this.valueToIndex(this.max) - this.valueToIndex(this.min) + 1;\r\n\t\tthis.setupBuffer();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trangeChanged: function () {\r\n\t\tthis.verifyValue();\r\n\t\tthis.prepareRange();\r\n\t},\r\n\r\n\t/**\r\n\t* Fail-safe design.\r\n\t* If out-of-boundary value is assigned, adjust boundary.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tvalueChanged: function (old) {\r\n\t\tthis.value -= (this.value-this.min)%this.step;\r\n\t\tif (this.value < this.min) {\r\n\t\t\tthis.setMin(this.value);\r\n\t\t} else if (this.value > this.max) {\r\n\t\t\tthis.setMax(this.value);\r\n\t\t}\r\n\r\n\t\tthis.scrollToValue(old);\r\n\t\tthis.updateOverlays();\r\n\t\tthis.fireChangeEvent();\r\n\t},\r\n\r\n\tstepChanged: function (old) {\r\n\t\tvar step = parseInt(this.step, 10);\r\n\t\tthis.step = isNaN(step)? 1 : step;\r\n\t\tthis.prepareRange();\r\n\t\tthis.valueChanged(this.value);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdisabledChanged: function () {\r\n\t\tthis.addRemoveClass('disabled', this.disabled);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\twrapChanged: function () {\r\n\t\tthis.updateOverlays();\r\n\t},\r\n\r\n\t/**\r\n\t* Prevent scroller dragging\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdragstart: function (inSender, inEvent) {\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tminChanged: function () {\r\n\t\tthis.rangeChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmaxChanged: function () {\r\n\t\tthis.rangeChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tprevious: function (inSender, inEvent) {\r\n\t\tif(this.disabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.direction = -1;\r\n\r\n\t\tif (this.value - this.step >= this.min) {\r\n\t\t\tthis.setValue(this.value - this.step);\r\n\t\t} else if (this.wrap) {\r\n\t\t\tthis.setValue(this.max);\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.$.previousOverlay.addClass('selected');\r\n\t\tif (inEvent.originator != this.$.upArrow) {\r\n\t\t\tthis.startJob('hideBottomOverlay', 'hideBottomOverlay', 350);\r\n\t\t}\r\n\r\n\t\tthis.direction = 0;\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnext: function (inSender, inEvent) {\r\n\t\tif(this.disabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.direction = 1;\r\n\r\n\t\tif (this.value + this.step <= this.max) {\r\n\t\t\tthis.setValue(this.value + this.step);\r\n\t\t} else if (this.wrap) {\r\n\t\t\tthis.setValue(this.min);\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.$.nextOverlay.addClass('selected');\r\n\t\tif (inEvent.originator != this.$.downArrow) {\r\n\t\t\tthis.startJob('hideTopOverlay', 'hideTopOverlay', 350);\r\n\t\t}\r\n\r\n\t\tthis.direction = 0;\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdownPrevious: function (inSender, inEvent) {\r\n\t\tthis.previous(inSender, inEvent);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdownNext: function (inSender, inEvent) {\r\n\t\tthis.next(inSender, inEvent);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateOverlays: function () {\r\n\t\tthis.$.previousOverlay.applyStyle('visibility', (this.wrap || this.value - this.step >= this.min) ? 'visible' : 'hidden');\r\n\t\tthis.$.nextOverlay.applyStyle('visibility', (this.wrap || this.value + this.step <= this.max) ? 'visible' : 'hidden');\r\n\t},\r\n\r\n\t/**\r\n\t* Renders the repeater.\r\n\t*\r\n\t* @param {Number} index - Index of row.\r\n\t* @param {Number} count - Number of rows to render.\r\n\t* @private\r\n\t*/\r\n\tupdateRepeater: function(index, count) {\r\n\t\tthis.$.repeater.set('rowOffset', index);\r\n\t\tthis.$.repeater.set('count', count || 1);\r\n\t\tthis.$.repeater.render();\r\n\t\tthis.$.scroller.remeasure();\r\n\t},\r\n\r\n\t/**\r\n\t* Scrolls to the node at `index` if it exists.\r\n\t*\r\n\t* @param  {Number} index    - Index of row.\r\n\t* @param  {Boolean} animate - If `true`, scroll is animated.\r\n\t* @private\r\n\t*/\r\n\tscrollToIndex: function(index, animate) {\r\n\t\tvar node = this.$.repeater.fetchRowNode(index);\r\n\t\tif (node) {\r\n\t\t\tif(animate) {\r\n\t\t\t\tthis.$.scroller.scrollTo(node.offsetLeft, node.offsetTop);\r\n\t\t\t} else {\r\n\t\t\t\tthis.$.scroller.setScrollTop(node.offsetTop);\r\n\t\t\t\tthis.$.scroller.setScrollLeft(node.offsetLeft);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Converts `value` to its index in the repeater.\r\n\t*\r\n\t* @param  {Number} value - Integer value.\r\n\t* @return {Number}       - Repeater index.\r\n\t* @private\r\n\t*/\r\n\tvalueToIndex: function(value) {\r\n\t\treturn Math.floor((value - this.min) / this.step);\r\n\t},\r\n\r\n\t/**\r\n\t* Converts a repeater `index` to its value.\r\n\t*\r\n\t* @param  {Number} index - Repeater index\r\n\t* @return {Number}       - Integer value\r\n\t* @private\r\n\t*/\r\n\tindexToValue: function(index) {\r\n\t\treturn index * this.step + this.min;\r\n\t},\r\n\r\n\t/**\r\n\t* Sets up the repeater to render the rows between `old` and\r\n\t* [value]{@link module:moonstone/IntegerPicker~IntegerPicker#value} and scrolls to reveal the current value. If `old`\r\n\t* is specified, the scroll will be animated. If [wrap]{@link module:moonstone/IntegerPicker~IntegerPicker#wrap} is\r\n\t* `true`, the scroll will travel the shortest distance to `value`, which may result in\r\n\t* wrapping.\r\n\t*\r\n\t* @param  {Number} [old] - Prior value from which to scroll.\r\n\t* @private\r\n\t*/\r\n\tscrollToValue: function(old) {\r\n\t\tvar newIndex = this.valueToIndex(this.value);\r\n\r\n\t\tif(this.animate && old !== undefined) {\r\n\t\t\tvar oldIndex = this.valueToIndex(old);\r\n\t\t\tvar delta = newIndex - oldIndex;\r\n\r\n\t\t\tif(this.wrap && Math.abs(delta) >= this.range/2) {\r\n\r\n\t\t\t\t// when range is 2, we need special logic so scrolling matches the user's action\r\n\t\t\t\t// (e.g. tapping the up arrow always scrolls up). If direction (set in next()\r\n\t\t\t\t// and previous()) === delta (which will always be +/- 1), the natural rendering\r\n\t\t\t\t// is correct even though we're wrapping around the boundary so don't adjust.\r\n\t\t\t\tif(!(this.range === 2 && this.direction !== delta)) {\r\n\t\t\t\t\t// if wrapping and wrapping is a shorter distance, adjust the lesser index by the\r\n\t\t\t\t\t// range so the distance is the shortest possible\r\n\t\t\t\t\tif(newIndex > oldIndex) {\r\n\t\t\t\t\t\toldIndex += this.range;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewIndex += this.range;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// rowOffset should be the lesser of the indices and count is the difference + 1\r\n\t\t\tvar index = Math.min(oldIndex, newIndex);\r\n\t\t\tvar count = Math.abs(newIndex - oldIndex) + 1;\r\n\t\t\tthis.updateRepeater(index, count);\r\n\r\n\t\t\tif (this._rAF) animation.cancelAnimationFrame(this._rAF);\r\n\t\t\tthis._rAF = animation.requestAnimationFrame(function () {\r\n\t\t\t\tthis.scrollToIndex(oldIndex, false);\r\n\t\t\t\tthis._rAF = animation.requestAnimationFrame(function () {\r\n\t\t\t\t\tthis.scrollToIndex(newIndex, true);\r\n\t\t\t\t}.bind(this));\r\n\t\t\t}.bind(this));\r\n\t\t} else {\r\n\t\t\t// if old isn't specified, setup the repeater with only this.value and jump to it\r\n\t\t\tthis.updateRepeater(newIndex);\r\n\t\t\tthis.scrollToIndex(newIndex, false);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thideTopOverlay: function () {\r\n\t\tthis.$.nextOverlay.removeClass('selected');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thideBottomOverlay: function () {\r\n\t\tthis.$.previousOverlay.removeClass('selected');\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:moonstone/IntegerPicker~IntegerPicker#onChange\r\n\t* @private\r\n\t*/\r\n\tfireChangeEvent: function () {\r\n\t\tthis.doChange({\r\n\t\t\tname: this.name,\r\n\t\t\tvalue: this.value,\r\n\t\t\tcontent: this.labelForValue(this.value)\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tresetOverlay: function () {\r\n\t\tthis.hideTopOverlay();\r\n\t\tthis.hideBottomOverlay();\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:moonstone/Scroller~Scroller#onRequestScrollIntoView\r\n\t* @private\r\n\t*/\r\n\tspotlightFocused: function () {\r\n\t\tthis.set('spotted', true);\r\n\t\tthis.bubble('onRequestScrollIntoView');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightBlur: function () {\r\n\t\tthis.set('spotted', false);\r\n\t\tthis.hideTopOverlay();\r\n\t\tthis.hideBottomOverlay();\r\n\t},\r\n\r\n\t/**\r\n\t* Cache scroll bounds in [scrollBounds]{@link module:moonstone/IntegerPicker~IntegerPicker#scrollBounds} so we\r\n\t* don't have to call {@link module:enyo/Scroller~Scroller#stop} to retrieve them later.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdateScrollBounds: function () {\r\n\t\tthis.scrollBounds = this.$.scroller.getStrategy()._getScrollBounds();\r\n\t},\r\n\r\n\t/**\r\n\t* Silently scrolls to the `inValue` y-position without animating.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsetScrollTop: function (inValue) {\r\n\t\tthis.$.scroller.setScrollTop(inValue);\r\n\t},\r\n\r\n\t/**\r\n\t* Ensures scroll position is in bounds.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tstabilize: function () {\r\n\t\tthis.$.scroller.stabilize();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmousewheel: function (inSender, inEvent) {\r\n\t\t// Make sure scrollers that container integer pickers don't scroll\r\n\t\tinEvent.preventDefault();\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tminWidthChanged: function() {\r\n\t\tthis.applyStyle('min-width', dom.unit(this.minWidth));\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tshowingChangedHandler: function () {\r\n\t\tControl.prototype.showingChangedHandler.apply(this, arguments);\r\n\r\n\t\t// Only force a scroll to the item corresponding to the current value if it is not\r\n\t\t// already displayed.\r\n\t\tif (this.showing && !this.$.repeater.fetchRowNode(this.valueToIndex(this.value))) {\r\n\t\t\tthis.scrollToValue();\r\n\t\t}\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @default 'spinbutton'\r\n\t* @type {String}\r\n\t* @see enyo/AccessibilitySupport~AccessibilitySupport#accessibilityRole\r\n\t* @public\r\n\t*/\r\n\taccessibilityRole: 'spinbutton',\r\n\r\n\t/**\r\n\t* Custom value for accessibility (ignored if `null`).\r\n\t*\r\n\t* @type {String|null}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\taccessibilityValueText: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{from: 'min', to: 'aria-valuemin'},\r\n\t\t{from: 'max', to: 'aria-valuemax'},\r\n\t\t{path: ['accessibilityValueText', 'value'], method: function () {\r\n\t\t\tthis.set('accessibilityHint', null);\r\n\t\t\tthis.ariaValue();\r\n\t\t}},\r\n\t\t{path: 'spotted',  method: function () {\r\n\t\t\t// When spotlight is focused, it reads value with hint\r\n\t\t\tif (this.spotted) {\r\n\t\t\t\tif (!this.wrap && this.value == this.min) {\r\n\t\t\t\t\tthis.set('accessibilityHint', $L('change a value with up button'));\r\n\t\t\t\t} else if (!this.wrap && this.value == this.max) {\r\n\t\t\t\t\tthis.set('accessibilityHint', $L('change a value with down button'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.set('accessibilityHint', $L('change a value with up down button'));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaValue: function () {\r\n\t\tvar text = this.accessibilityValueText || this.value;\r\n\t\tthis.setAriaAttribute('aria-valuetext', text);\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:moonstone/VideoPlayer~VideoPlayer} kind.\r\n* @module moonstone/VideoPlayer\r\n*/\r\n\r\nrequire('moonstone');\r\n\r\nvar\r\n\tdispatcher = require('enyo/dispatcher'),\r\n\tdom = require('enyo/dom'),\r\n\tgesture = require('enyo/gesture'),\r\n\tkind = require('enyo/kind'),\r\n\tutil = require('enyo/utils'),\r\n\tAnimator = require('enyo/Animator'),\r\n\tControl = require('enyo/Control'),\r\n\tEnyoHistory = require('enyo/History'),\r\n\tSignals = require('enyo/Signals'),\r\n\tVideo = require('enyo/Video');\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\nvar\r\n\tFittableColumns = require('layout/FittableColumns'),\r\n\tPanels = require('enyo/LightPanels');\r\n\r\nvar\r\n\tDurationFmt = require('enyo-ilib/DurationFmt');\r\n\r\nvar\r\n\t$L = require('../i18n'),\r\n\tIconButton = require('moonstone/IconButton'),\r\n\tHistorySupport = require('moonstone/HistorySupport'),\r\n\tSpinner = require('moonstone/Spinner'),\r\n\tVideoFullscreenToggleButton = require('../VideoFullscreenToggleButton'),\r\n\tVideoTransportSlider = require('../VideoTransportSlider');\r\n\r\n/**\r\n* Fires when [disablePlaybackControls]{@link module:moonstone/VideoPlayer~VideoPlayer#disablePlaybackControls}\r\n* is `true` and the user taps one of the [controls]{@link module:enyo/Control~Control}; may be handled to\r\n* re-enable the controls, if desired. No event-specific information is sent with this event.\r\n*\r\n* @event module:moonstone/VideoPlayer~VideoPlayer#onPlaybackControlsTapped\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Child controls may bubble this event to toggle the fullscreen state of the video player.\r\n* No additional data needs to be sent with this event.\r\n*\r\n* @event module:moonstone/VideoPlayer~VideoPlayer#onRequestToggleFullscreen\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Child controls may bubble this event to request an update to the current video position.\r\n*\r\n* @event module:moonstone/VideoPlayer~VideoPlayer#onRequestTimeChange\r\n* @type {Object}\r\n* @property {Number} value - Requested time index.\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/VideoPlayer~VideoPlayer} is an HTML5 [video]{@glossary video} player control.  It wraps\r\n* an {@link module:enyo/Video~Video} [object]{@glossary Object} to provide Moonstone-styled standard\r\n* transport [controls]{@link module:enyo/Control~Control}, optional app-specific controls, and an information\r\n* bar for displaying video information and player feedback.\r\n*\r\n* All of the standard HTML5 media [events]{@glossary event} bubbled from `enyo/Video` will\r\n* also bubble from this control.\r\n*\r\n* Client [components]{@link module:enyo/Component~Component} added to the `components` block are rendered into\r\n* the video player's transport control area, and should generally be limited to instances of\r\n* {@link module:moonstone/IconButton~IconButton}. If more than two client components are specified, they will be\r\n* rendered into an \"overflow\" screen, reached by activating a button to the right of the\r\n* controls.\r\n*\r\n* Client components addded to the [infoComponents]{@link module:moonstone/VideoPlayer~VideoPlayer#infoComponents}\r\n* block will be created as a header for the video.\r\n*\r\n* ```javascript\r\n* var VideoPlayer = require('moonstone/VideoPlayer');\r\n*\r\n* {\r\n*\t\tkind: VideoPlayer,\r\n*\t\tsrc: 'http://www.w3schools.com/html/mov_bbb.mp4',\r\n*\t\tcomponents: [\r\n*\t\t\t// Custom icons for app-specific features\r\n*\t\t\t{kind: IconButton, src: 'moonstone/src/assets/feature1.png', ontap: 'feature1'},\r\n*\t\t\t{kind: IconButton, src: 'moonstone/src/assets/feature2.png', ontap: 'feature2'},\r\n*\t\t\t{kind: IconButton, src: 'moonstone/src/assets/feature3.png', ontap: 'feature3'}\r\n*\t\t],\r\n*\t\tinfoComponents: [\r\n*\t\t\t{kind: VideoHeaderBackground, components: [\r\n*\t\t\t\t{kind: VideoInfoHeader, ... }\r\n*\t\t\t]\r\n*\t\t]\r\n* }\r\n* ```\r\n*\r\n* @class VideoPlayer\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/VideoPlayer~VideoPlayer.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.VideoPlayer',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [HistorySupport],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: true,\r\n\r\n\t// Fixme: When enyo-fit is used than the background image does not fit to video while dragging.\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-video-player enyo-unselectable',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonPlaybackControlsTapped: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/VideoPlayer~VideoPlayer.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* URL of HTML5 video file.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsrc: '',\r\n\r\n\t\t/**\r\n\t\t* Array for setting multiple sources for the same video.\r\n\t\t*\r\n\t\t* @type {String[]}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsources: null,\r\n\r\n\t\t/**\r\n\t\t* A [component]{@link module:enyo/Component~Component} definition block describing components to\r\n\t\t* be created as an information block above the video. Usually, this contains a\r\n\t\t* [moon/VideoInfoBackground]{@link module:moonstone/VideoInfoBackground~VideoInfoBackground} with a\r\n\t\t* [moon/VideoInfoHeader]{@link module:moonstone/VideoInfoHeader~VideoInfoHeader} in it.\r\n\t\t*\r\n\t\t* @type {Object[]}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tinfoComponents: null,\r\n\r\n\t\t/**\r\n\t\t* If `true`, the video player is resized after metadata is loaded, based on the\r\n\t\t* [aspectRatio]{@link module:moonstone/VideoPlayer~VideoPlayer#aspectRatio} contained in the metadata. This\r\n\t\t* applies only to [inline]{@link module:moonstone/VideoPlayer~VideoPlayer#inline} mode (i.e., when\r\n\t\t* `inline` is `true`).\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tautoResize: false,\r\n\r\n\t\t/**\r\n\t\t* Video aspect ratio, specified as `'width:height'`, or `'none'`.  When an aspect ratio\r\n\t\t* is specified at render time, the player's height or width will be updated to respect\r\n\t\t* the ratio, depending on whether [fixedHeight]{@link module:moonstone/VideoPlayer~VideoPlayer#fixedHeight} is\r\n\t\t* `true` or `false`. If [autoResize]{@link module:moonstone/VideoPlayer~VideoPlayer#autoResize} is `true`, the\r\n\t\t* `aspectRatio` will be updated based on the metadata for the current video and the\r\n\t\t* player will be resized accordingly. This applies only to\r\n\t\t* [inline]{@link module:moonstone/VideoPlayer~VideoPlayer#inline} mode.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default '16:9'\r\n\t\t* @public\r\n\t\t*/\r\n\t\taspectRatio: '16:9',\r\n\r\n\t\t/**\r\n\t\t* When `true`, the width will be adjusted at render time based on the observed height\r\n\t\t* and the aspect ratio. When `false` (the default), the height will be adjusted at\r\n\t\t* render time based on the observed width and the aspect ratio. This property is ignored\r\n\t\t* if [aspectRatio]{@link module:moonstone/VideoPlayer~VideoPlayer#aspectRatio} is `'none'` or a **falsy**\r\n\t\t* value.  In addition, this applies only to [inline]{@link module:moonstone/VideoPlayer~VideoPlayer#inline} mode.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tfixedHeight: false,\r\n\r\n\t\t/**\r\n\t\t* Amount of time (in milliseconds) after which control buttons are automatically hidden.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 7000\r\n\t\t* @public\r\n\t\t*/\r\n\t\tautoCloseTimeout: 7000,\r\n\r\n\t\t/**\r\n\t\t* Duration of the video.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tduration: 0,\r\n\r\n\t\t/**\r\n\t\t* If `true`, playback starts automatically when video is loaded.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tautoplay: false,\r\n\r\n\t\t/**\r\n\t\t* If `false`, fullscreen video control overlays (info or transport) are not shown\r\n\t\t* or hidden automatically in response to `up` or `down` events.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tautoShowOverlay: true,\r\n\r\n\t\t/**\r\n\t\t* If `true`, the overlay will be shown in response to pointer movement (in addition to\r\n\t\t* `up` and `down` events).\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tshakeAndWake: false,\r\n\r\n\t\t/**\r\n\t\t* If `false`, the top [infoComponents]{@link module:moonstone/VideoPlayer~VideoPlayer#infoComponents} are\r\n\t\t* not automatically shown or hidden in response to `up` events.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tautoShowInfo: true,\r\n\r\n\t\t/**\r\n\t\t* If `false`, the bottom slider/controls are not automatically shown or hidden in\r\n\t\t* response to `down` events.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tautoShowControls: true,\r\n\r\n\t\t/**\r\n\t\t* When `true`, the top [infoComponents]{@link module:moonstone/VideoPlayer~VideoPlayer#infoComponents} are\r\n\t\t* shown with no timeout; when `false` (the default), they are shown based on the\r\n\t\t* value of the [autoShowInfo]{@link module:moonstone/VideoPlayer~VideoPlayer#autoShowInfo} property.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tshowInfo: false,\r\n\r\n\t\t/**\r\n\t\t* When `false`, the player starts in fullscreen mode; when `true`, it starts in\r\n\t\t* inline mode. As this is meant to be initialized on startup, fire the\r\n\t\t* [onRequestToggleFullscreen]{@link module:moonstone/VideoPlayer~VideoPlayer#onRequestToggleFullscreen}\r\n\t\t* event from a child control or call\r\n\t\t* [toggleFullscreen()]{@link module:moonstone/VideoPlayer~VideoPlayer#toggleFullscreen} to dynamically\r\n\t\t* toggle between fullscreen and inline mode.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tinline: false,\r\n\r\n\t\t/**\r\n\t\t* Amount of time (in seconds) to jump in response to jump buttons. This value is ignored\r\n\t\t* when [jumpStartEnd]{@link module:moonstone/VideoPlayer~VideoPlayer#jumpStartEnd} is `true`.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 30\r\n\t\t* @public\r\n\t\t*/\r\n\t\tjumpSec: 30,\r\n\r\n\t\t/**\r\n\t\t* If `true`, the \"jump forward\" and \"jump back\" buttons jump to the start and end of the\r\n\t\t* video, respectively.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tjumpStartEnd: false,\r\n\r\n\t\t/**\r\n\t\t* When `true`, popups opened from the video player's client controls are automatically\r\n\t\t* hidden.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tautoHidePopups: true,\r\n\r\n\t\t/**\r\n\t\t* If `false`, the progress bar is removed and any additional controls are moved\r\n\t\t* downward.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tshowProgressBar: true,\r\n\r\n\t\t/**\r\n\t\t* If `false`, the transport controls are removed, but the icon button area is kept.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tshowPlaybackControls: true,\r\n\r\n\t\t/**\r\n\t\t* When `true`, playback controls are hidden when the slider is hovered over.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\thideButtonsOnSlider: false,\r\n\r\n\t\t/**\r\n\t\t* If `true`, the slider is disabled and will not be enabled when video data has\r\n\t\t* loaded.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdisableSlider: false,\r\n\r\n\t\t/**\r\n\t\t* If `false`, the \"jump forward\" and \"jump back\" buttons are hidden.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tshowJumpControls: true,\r\n\r\n\t\t/**\r\n\t\t* When `true`, the fast-forward and rewind buttons are visible.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tshowFFRewindControls: true,\r\n\r\n\t\t/**\r\n\t\t* If `true`, the slider and playback controls are disabled. If the user taps the\r\n\t\t* controls, an\r\n\t\t* [onPlaybackControlsTapped]{@link module:moonstone/VideoPlayer~VideoPlayer#onPlaybackControlsTapped}\r\n\t\t* event will be bubbled.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdisablePlaybackControls: false,\r\n\r\n\t\t/**\r\n\t\t* When `true`, playback controls are only active when the video player has a valid\r\n\t\t* source URL and no errors occur during video loading.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdisablePlaybackControlsOnUnload: true,\r\n\r\n\t\t/**\r\n\t\t* If `false`, the Play/Pause control is hidden.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tshowPlayPauseControl: true,\r\n\r\n\t\t/**\r\n\t\t* If `false`, the video element is hidden.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tshowVideo: true,\r\n\r\n\t\t/**\r\n\t\t* When `true`, a spinner is automatically shown when video is in the play state but\r\n\t\t* is still loading/buffering.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tautoShowSpinner: true,\r\n\r\n\t\t/**\r\n\t\t* Source of image file to show when video isn't available or user has not yet tapped the\r\n\t\t* play button.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tposter: '',\r\n\r\n\t\t/**\r\n\t\t* If `false`, video player won't respond to remote control.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\thandleRemoteControlKey: true,\r\n\r\n\t\t/**\r\n\t\t* Sliders will increase or decrease as much as this percentage value in either direction\r\n\t\t* when left or right key is pressed in 5-Way mode.\r\n\t\t*\r\n\t\t* @type {Number|String}\r\n\t\t* @default '5%'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tknobIncrement: '5%',\r\n\r\n\t\t/**\r\n\t\t* Base URL for icons\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\ticonPath: 'images/video-player/',\r\n\r\n\t\t/**\r\n\t\t* Name of font-based icon or image file.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tjumpBackIcon: 'skipbackward',\r\n\r\n\t\t/**\r\n\t\t* Name of font-based icon or image file.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\trewindIcon: 'backward',\r\n\r\n\t\t/**\r\n\t\t* Name of font-based icon or image file.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tplayIcon: 'play',\r\n\r\n\t\t/**\r\n\t\t* Name of font-based icon or image file.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tpauseIcon: 'pause',\r\n\r\n\t\t/**\r\n\t\t* Name of font-based icon or image file.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tfastForwardIcon: 'forward',\r\n\r\n\t\t/**\r\n\t\t* Name of font-based icon or image file.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tjumpForwardIcon: 'skipforward',\r\n\r\n\t\t/**\r\n\t\t* Name of font-based icon or image file.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tmoreControlsIcon: 'ellipsis',\r\n\r\n\t\t/**\r\n\t\t* Name of font-based icon or image file.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tlessControlsIcon: 'arrowhookleft',\r\n\r\n\t\t/**\r\n\t\t* Name of font-based icon or image file.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tinlinePlayIcon: 'play',\r\n\r\n\t\t/**\r\n\t\t* Name of font-based icon or image file.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tinlinePauseIcon: 'pause',\r\n\r\n\t\t/**\r\n\t\t* Name of font-based icon or image file.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tinlineFullscreenIcon: 'fullscreen',\r\n\r\n\t\t/**\r\n\t\t* Default hash of playback states and their associated playback rates.\r\n\t\t* playbackRateHash: {\r\n\t\t*\tfastForward: ['2', '4', '8', '16'],\r\n\t\t*\trewind: ['-2', '-4', '-8', '-16'],\r\n\t\t*\tslowForward: ['1/4', '1/2'],\r\n\t\t*\tslowRewind: ['-1/2', '-1']\r\n\t\t* }\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tplaybackRateHash: {\r\n\t\t\tfastForward: ['2', '4', '8', '16'],\r\n\t\t\trewind: ['-2', '-4', '-8', '-16'],\r\n\t\t\tslowForward: ['1/4', '1/2'],\r\n\t\t\tslowRewind: ['-1/2', '-1']\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonRequestTimeChange: 'timeChange',\r\n\t\tonRequestToggleFullscreen: 'toggleFullscreen',\r\n\t\tonSpotlightKeyUp: 'spotlightKeyUpHandler',\r\n\t\tonSpotlightKeyDown: 'spotlightKeyDownHandler',\r\n\t\tonSpotlightUp: 'spotlightUpHandler',\r\n\t\tonSpotlightDown: 'spotlightDownHandler',\r\n\t\tonSpotlightLeft: 'spotlightLeftRightFilter',\r\n\t\tonSpotlightRight: 'spotlightLeftRightFilter',\r\n\t\tonresize: 'handleResize',\r\n\t\tonholdpulse: 'onHoldPulseHandler',\r\n\t\tonrelease: 'onReleaseHandler'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\teventsToCapture: {\r\n\t\tonSpotlightFocus: 'capturedFocus'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: 'src',\t\t\t\t\t\tto:'$.video.src'},\r\n\t\t{from: 'sources',\t\t\t\t\tto:'$.video.sourceComponents'},\r\n\t\t{from: 'playbackRateHash',\t\t\tto:'$.video.playbackRateHash'},\r\n\t\t{from: 'poster',\t\t\t\t\tto:'$.video.poster'},\r\n\t\t{from: 'constrainToBgProgress',\t\tto:'$.slider.constrainToBgProgress'},\r\n\t\t{from: 'elasticEffect',\t\t\t\tto:'$.slider.elasticEffect'},\r\n\t\t{from: 'knobIncrement',\t\t\t\tto:'$.slider.knobIncrement'},\r\n\t\t{from: 'showJumpControls',\t\t\tto:'$.jumpForward.showing'},\r\n\t\t{from: 'showJumpControls',\t\t\tto:'$.jumpBack.showing'},\r\n\t\t{from: 'showFFRewindControls',\t\tto:'$.fastForward.showing'},\r\n\t\t{from: 'showFFRewindControls',\t\tto:'$.rewind.showing'},\r\n\t\t{from: 'showPlayPauseControl',\t\tto:'$.fsPlayPause.showing'},\r\n\t\t{from: 'showVideo',\t\t\t\t\tto:'$.videoContainer.showing'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tobservers: {\r\n\t\tupdateSource: ['src', 'sources']\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_isPlaying: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_canPlay: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_autoCloseTimer: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_currentTime: 0,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_panelsShowing: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{kind: Signals, onPanelsShown: 'panelsShown', onPanelsHidden: 'panelsHidden', onPanelsHandleFocused: 'panelsHandleFocused', onPanelsHandleBlurred: 'panelsHandleBlurred', onFullscreenChange: 'fullscreenChanged', onkeyup:'remoteKeyHandler', onlocalechange: 'updateMoreButton'},\r\n\t\t{name: 'videoContainer', kind: Control, classes: 'moon-video-player-container', components: [\r\n\t\t\t{name: 'video', kind: Video, classes: 'moon-video-player-video',\r\n\t\t\t\tontimeupdate: 'timeUpdate', onloadedmetadata: 'metadataLoaded', durationchange: 'durationUpdate', onloadeddata: 'dataloaded', onprogress: '_progress', onPlay: '_play', onpause: '_pause', onStart: '_start',  onended: '_stop',\r\n\t\t\t\tonFastforward: '_fastforward', onSlowforward: '_slowforward', onRewind: '_rewind', onSlowrewind: '_slowrewind',\r\n\t\t\t\tonJumpForward: '_jumpForward', onJumpBackward: '_jumpBackward', onratechange: 'playbackRateChange', ontap: 'videoTapped', oncanplay: '_setCanPlay', onwaiting: '_waiting', onerror: '_error'\r\n\t\t\t},\r\n\t\t\t{name: 'spinner', kind: Spinner, accessibilityLabel: $L('Loading'), classes: 'moon-video-player-spinner'}\r\n\t\t]},\r\n\r\n\t\t//* Fullscreen controls\r\n\t\t{name: 'fullscreenControl', kind: Control, classes: 'moon-video-player-fullscreen enyo-fit scrim', onmousemove: 'mousemove', components: [\r\n\r\n\t\t\t{name: 'videoInfoHeaderClient', kind: Control, showing: false, classes: 'moon-video-player-top'},\r\n\r\n\t\t\t{name: 'playerControl', kind: Control, classes: 'moon-video-player-bottom', showing: false, components: [\r\n\t\t\t\t{name: 'controls', kind: FittableColumns, classes: 'moon-video-player-controls-frame', ontap: 'resetAutoTimeout', components: [\r\n\r\n\t\t\t\t\t{name: 'leftPremiumPlaceHolder', kind: Control, classes: 'moon-video-player-premium-placeholder-left'},\r\n\t\t\t\t\t{classes: 'moon-video-player-controls-frame-center', fit: true, components: [\r\n\r\n\t\t\t\t\t\t{name: 'controlsContainer', kind: Panels, reverseForRtl: true, index: 0, popOnBack: false, cacheViews: false, classes: 'moon-video-player-controls-container', components: [\r\n\t\t\t\t\t\t\t{name: 'trickPlay', kind: Control, ontap:'playbackControlsTapped', components: [\r\n\t\t\t\t\t\t\t\t{name: 'playbackControls', kind: Control, rtl: false, classes: 'moon-video-player-control-buttons', components: [\r\n\t\t\t\t\t\t\t\t\t{name: 'jumpBack',\t\tkind: IconButton, small: false, backgroundOpacity: 'translucent', ontap: 'onjumpBackward', accessibilityLabel: $L('Previous')},\r\n\t\t\t\t\t\t\t\t\t{name: 'rewind',\t\tkind: IconButton, small: false, backgroundOpacity: 'translucent', ontap: 'rewind', accessibilityLabel: $L('Rewind')},\r\n\t\t\t\t\t\t\t\t\t{name: 'fsPlayPause',\tkind: IconButton, small: false, backgroundOpacity: 'translucent', ontap: 'playPause'},\r\n\t\t\t\t\t\t\t\t\t{name: 'fastForward',\tkind: IconButton, small: false, backgroundOpacity: 'translucent', ontap: 'fastForward', accessibilityLabel: $L('Fast Forward')},\r\n\t\t\t\t\t\t\t\t\t{name: 'jumpForward',\tkind: IconButton, small: false, backgroundOpacity: 'translucent', ontap: 'onjumpForward', accessibilityLabel: $L('Next')}\r\n\t\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t{name: 'client', kind: Control, rtl: false,  classes: 'moon-video-player-more-controls'}\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t]},\r\n\r\n\t\t\t\t\t{name: 'rightPremiumPlaceHolder', kind: Control, classes: 'moon-video-player-premium-placeholder-right', components: [\r\n\t\t\t\t\t\t{name: 'moreButton', kind: IconButton, small: false, backgroundOpacity: 'translucent', ontap: 'moreButtonTapped', accessibilityLabel: $L('More')}\r\n\t\t\t\t\t]}\r\n\t\t\t\t]},\r\n\r\n\t\t\t\t{name: 'sliderContainer', kind: Control, classes: 'moon-video-player-slider-frame', components: [\r\n\t\t\t\t\t{name: 'slider', kind: VideoTransportSlider, rtl: false, disabled: true, onSeekStart: 'sliderSeekStart', onSeek: 'sliderSeek', onSeekFinish: 'sliderSeekFinish',\r\n\t\t\t\t\t\tonEnterTapArea: 'onEnterSlider', onLeaveTapArea: 'onLeaveSlider', ontap:'playbackControlsTapped'\r\n\t\t\t\t\t}\r\n\t\t\t\t]}\r\n\t\t\t]}\r\n\t\t]},\r\n\t\t//* Inline controls\r\n\t\t{name: 'inlineControl', kind: Control, classes: 'moon-video-player-inline-control', components: [\r\n\t\t\t{name: 'currPosAnimator', kind: Animator, onStep: 'currPosAnimatorStep', onEnd: 'currPosAnimatorComplete'},\r\n\t\t\t{name: 'bgProgressStatus', kind: Control, classes: 'moon-video-player-inline-control-bgprogress'},\r\n\t\t\t{name: 'progressStatus', kind: Control, classes: 'moon-video-player-inline-control-progress'},\r\n\t\t\t{kind: Control, classes: 'moon-video-player-inline-control-text', components: [\r\n\t\t\t\t{name: 'currTime', kind: Control, content: '00:00 / 00:00'}\r\n\t\t\t]},\r\n\t\t\t{name: 'ilPlayPause', kind: IconButton, ontap: 'playPause', classes: 'moon-icon-playpause'},\r\n\t\t\t{name: 'ilFullscreen', kind: VideoFullscreenToggleButton, small: true}\r\n\t\t]}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tthis.durfmt = new DurationFmt({length: 'medium', style: 'clock', useNative: false});\r\n\t\tthis.updateSource();\r\n\t\tthis.createInfoControls();\r\n\t\tthis.inlineChanged();\r\n\t\tthis.showInfoChanged();\r\n\t\tthis.autoShowInfoChanged();\r\n\t\tthis.autoShowControlsChanged();\r\n\t\tthis.autoplayChanged();\r\n\t\tthis.updateMoreButton();\r\n\t\tthis.showPlaybackControlsChanged();\r\n\t\tthis.showProgressBarChanged();\r\n\t\tthis.jumpSecChanged();\r\n\t\tthis.updatePlaybackControlState();\r\n\t\tthis.retrieveIconsSrcOrFont(this.$.jumpBack, this.jumpBackIcon);\r\n\t\tthis.retrieveIconsSrcOrFont(this.$.rewind, this.rewindIcon);\r\n\t\tthis.retrieveIconsSrcOrFont(this.$.fsPlayPause, this.pauseIcon);\r\n\t\tthis.retrieveIconsSrcOrFont(this.$.fastForward, this.fastForwardIcon);\r\n\t\tthis.retrieveIconsSrcOrFont(this.$.jumpForward, this.jumpForwardIcon);\r\n\t\tthis.retrieveIconsSrcOrFont(this.$.ilFullscreen, this.inlineFullscreenIcon);\r\n\t\tthis.$.ilFullscreen.removeClass('moon-icon-exitfullscreen-font-style');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcheckIconType: function (icon) {\r\n\t\tvar imagesrcRegex=/\\.(jpg|jpeg|png|gif|svg)$/i;\r\n\t\tvar iconType=imagesrcRegex.test(icon)?'image':'iconfont';\r\n\t\treturn iconType;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdisablePlaybackControlsChanged: function () {\r\n\t\tthis.updatePlaybackControlState();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdisablePlaybackControlsOnUnloadChanged: function () {\r\n\t\tthis.updatePlaybackControlState();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdatePlaybackControlState: function () {\r\n\t\tvar disabled = this.disablePlaybackControls ||\r\n\t\t\tthis._panelsShowing ||\r\n\t\t\t(this.disablePlaybackControlsOnUnload && (this._errorCode || (!this.getSrc() && !this.getSources()) ));\r\n\t\tthis.updateSliderState();\r\n\t\tthis.$.playbackControls.addRemoveClass('disabled', disabled);\r\n\t\tthis.$.jumpBack.setDisabled(disabled);\r\n\t\tthis.$.rewind.setDisabled(disabled);\r\n\t\tthis.$.fsPlayPause.setDisabled(disabled);\r\n\t\tthis.$.fastForward.setDisabled(disabled);\r\n\t\tthis.$.jumpForward.setDisabled(disabled);\r\n\t\tthis.$.ilPlayPause.setDisabled(disabled);\r\n\t\tvar currentSpot = Spotlight.getCurrent();\r\n\t\tif (currentSpot && currentSpot.disabled) {\r\n\t\t\tif (this.isFullscreen() || !this.getInline()) {\r\n\t\t\t\tthis.spotFSBottomControls();\r\n\t\t\t} else {\r\n\t\t\t\tSpotlight.spot(this.$.ilFullscreen);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tplaybackControlsTapped: function () {\r\n\t\tif (this.disablePlaybackControls) {\r\n\t\t\tthis.bubble('onPlaybackControlsTapped');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trendered: function () {\r\n\t\tControl.prototype.rendered.apply(this, arguments);\r\n\t\t//* Change aspect ratio based on initialAspectRatio\r\n\t\tthis.aspectRatioChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowPlaybackControlsChanged: function (was) {\r\n\t\tthis.$.trickPlay.set('showing', this.showPlaybackControls);\r\n\t\tthis.$.moreButton.set('showing', this.showPlaybackControls && this.clientComponentsCount > 2);\r\n\t\tthis.toggleSpotlightForMoreControls(!this.showPlaybackControls);\r\n\t\tthis.$.client.addRemoveClass('moon-video-player-more-controls', this.showPlaybackControls);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowProgressBarChanged: function (was) {\r\n\t\tthis.$.sliderContainer.setShowing(this.showProgressBar);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateSource: function (old, value, source) {\r\n\t\tthis._canPlay = false;\r\n\t\tthis.set('_isPlaying', this.autoplay);\r\n\t\tthis._errorCode = null;\r\n\t\tthis.updatePlayPauseButtons();\r\n\t\tthis.updateSpinner();\r\n\t\tthis.updatePlaybackControlState();\r\n\t\tthis._resetTime();\r\n\r\n\t\t// since src and sources are mutually exclusive, clear the other property\r\n\t\t// when one changes\r\n\t\tif (source === 'src') {\r\n\t\t\tthis.sources = null;\r\n\t\t} else if (source === 'sources') {\r\n\t\t\tthis.src = '';\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Returns the underlying {@link module:enyo/Video~Video} control (wrapping the HTML5 video node).\r\n\t*\r\n\t* @returns {enyo/Video~Video} - An {@link module:enyo/Video~Video} control.\r\n\t* @public\r\n\t*/\r\n\tgetVideo: function () {\r\n\t\treturn this.$.video;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreateInfoControls: function () {\r\n\t\tvar owner = this.hasOwnProperty('infoComponents') ? this.getInstanceOwner() : this;\r\n\t\tthis.$.videoInfoHeaderClient.createComponents(this.infoComponents, {owner: owner});\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreateClientComponents: function (comps) {\r\n\t\tcomps = (comps) ? util.clone(comps) : [];\r\n\t\tthis.clientComponentsCount = comps.length;\r\n\t\tif (!this._buttonsSetup) {\r\n\t\t\tthis._buttonsSetup = true;\r\n\t\t\tif (!comps || comps.length === 0) {\r\n\t\t\t\t// No components - destroy more button\r\n\t\t\t\tthis.$.leftPremiumPlaceHolder.hide();\r\n\t\t\t\tthis.$.rightPremiumPlaceHolder.hide();\r\n\t\t\t} else if (comps.length <= 2) {\r\n\t\t\t\t// One or two components - destroy more button and utilize left/right premium placeholders\r\n\t\t\t\tthis.$.leftPremiumPlaceHolder.createComponent(comps.shift(), {owner: this.getInstanceOwner()});\r\n\t\t\t\tif (comps.length === 1) {\r\n\t\t\t\t\tthis.$.rightPremiumPlaceHolder.createComponent(comps.shift(), {owner: this.getInstanceOwner()});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// More than two components - use extra panel, with left premium plaeholder for first component\r\n\t\t\t\tthis.$.leftPremiumPlaceHolder.createComponent(comps.shift(), {owner: this.getInstanceOwner()});\r\n\t\t\t}\r\n\t\t\t// Create the rest of the components in the client (panels)\r\n\t\t\tthis.createComponents(comps, {owner: this.getInstanceOwner()});\r\n\t\t} else {\r\n\t\t\tControl.prototype.createClientComponents.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tplayIconChanged: function () {\r\n\t\tthis.updatePlayPauseButtons();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpauseIconChanged: function () {\r\n\t\tthis.updatePlayPauseButtons();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinlinePlayIconChanged: function () {\r\n\t\tthis.updatePlayPauseButtons();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinlinePauseIconChanged: function () {\r\n\t\tthis.updatePlayPauseButtons();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmoreControlsIconChanged: function () {\r\n\t\tthis.updateMoreButton();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tlessControlsIconChanged: function () {\r\n\t\tthis.updateMoreButton();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tautoplayChanged: function () {\r\n\t\tthis.$.video.setAutoplay(this.autoplay);\r\n\t\tthis.set('_isPlaying', this.autoplay);\r\n\t\tthis.updatePlayPauseButtons();\r\n\t\tthis.updateSpinner();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tjumpSecChanged: function () {\r\n\t\tthis.$.video.setJumpSec(this.jumpSec);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdisableSliderChanged: function () {\r\n\t\tthis.updateSliderState();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateSliderState: function () {\r\n\t\t//* this should be be called on create because default slider status should be disabled.\r\n\t\tvar disabled =\r\n\t\t\tthis.disableSlider ||\r\n\t\t\tthis.disablePlaybackControls ||\r\n\t\t\t!this._loaded ||\r\n\t\t\t(this.disablePlaybackControlsOnUnload && (this._errorCode || (!this.getSrc() && !this.getSources()) ));\r\n\t\tthis.$.slider.setDisabled(disabled);\r\n\t\t// We need an explicit call to showKnobStatus as moon.Slider's disabledChanged method\r\n\t\t// only handles hiding of the knob status. This behavior should not be changed in\r\n\t\t// disabledChanged, as the normal behavior of moon.Slider is to display the knob status\r\n\t\t// upon dragging, whereas moon.VideoPlayer is forcing the knob status to be shown when\r\n\t\t// the slider is visible.\r\n\t\tif (!disabled) {\r\n\t\t\tthis.$.slider.showKnobStatus();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tautoShowOverlayChanged: function () {\r\n\t\tthis.autoShowInfoChanged();\r\n\t\tthis.autoShowControlsChanged();\r\n\t\tif (this.autoShowOverlay) {\r\n\t\t\tthis.resetAutoTimeout();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tautoShowInfoChanged: function () {\r\n\t\tif (this.$.videoInfoHeaderClient.getShowing() && !this.autoShowInfo && !this.showInfo) {\r\n\t\t\tthis.$.videoInfoHeaderClient.hide();\r\n\t\t}\r\n\t\tif (this.autoShowInfo) {\r\n\t\t\tthis.resetAutoTimeout();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tautoShowControlsChanged: function () {\r\n\t\tif (this.$.playerControl.getShowing() && !this.autoShowControls) {\r\n\t\t\tthis.$.playerControl.hide();\r\n\t\t}\r\n\t\tif (this.autoShowControls) {\r\n\t\t\tthis.resetAutoTimeout();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowInfoChanged: function () {\r\n\t\tthis.$.videoInfoHeaderClient.setShowing(this.showInfo);\r\n\r\n\t\tif (this.showInfo) {\r\n\t\t\t// Kick off any marquees in the video info header\r\n\t\t\tthis.$.videoInfoHeaderClient.waterfallDown('onRequestStartMarquee');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinlineChanged: function () {\r\n\t\t// Force fullscreen\r\n\t\tthis.addRemoveClass('enyo-fullscreen enyo-fit', !this.inline);\r\n\t\t// Padding-bottom contains inline controls\r\n\t\tthis.addRemoveClass('moon-video-player-inline', this.inline);\r\n\t\t// show hide controls visibility\r\n\t\tthis.$.inlineControl.setShowing(this.inline);\r\n\t\tthis.$.fullscreenControl.setShowing(!this.inline);\r\n\t\tif (!this.inline) {\r\n\t\t\tthis.$.inlineControl.canGenerate = false;\r\n\t\t}\r\n\t\tthis.spotlight = !this.inline;\r\n\t},\r\n\r\n\t/**\r\n\t* Unloads the current video source, stopping all playback and buffering.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tunload: function () {\r\n\t\tthis.$.video.unload();\r\n\t\tthis._resetTime();\r\n\t\tthis._loaded = false;\r\n\t\tthis.set('_isPlaying', false);\r\n\t\tthis._canPlay = false;\r\n\t\tthis._errorCode = null;\r\n\t\tthis.src = '';\r\n\t\tthis.sources = null;\r\n\t\tthis.updatePlaybackControlState();\r\n\t\tthis.updateSpinner();\r\n\t},\r\n\tshowScrim: function (show) {\r\n\t\tthis.$.fullscreenControl.addRemoveClass('scrim', !show);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateSpotability: function () {\r\n\t\tvar spotState = this._panelsShowing ? false : (this._controlsShowing ? 'container' : true);\r\n\t\tthis.updatePlaybackControlState();\r\n\t\tthis.set('spotlight', spotState);\r\n\t\tthis.$.leftPremiumPlaceHolder.spotlightDisabled = this._panelsShowing;\r\n\t\tthis.$.rightPremiumPlaceHolder.spotlightDisabled = this._panelsShowing;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpanelsShown: function (sender, e) {\r\n\t\tif (this.isDescendantOf(e.panels)) return;\r\n\t\tthis._panelsShowing = true;\r\n\t\tthis._controlsShowing = false;\r\n\t\tthis._infoShowing = false;\r\n\t\tthis.updateSpotability();\r\n\t\tif (e.initialization) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ((this.isFullscreen() || !this.getInline()) && this.isOverlayShowing()) {\r\n\t\t\tthis.hideFSControls();\r\n\t\t\tSpotlight.unspot();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpanelsHidden: function (sender, e) {\r\n\t\tvar current;\r\n\t\tif (this.isDescendantOf(e.panels)) return;\r\n\r\n\t\tthis._panelsShowing = false;\r\n\t\tthis.updateSpotability();\r\n\r\n\t\tcurrent = Spotlight.getCurrent();\r\n\t\tif (!current || !current.isDescendantOf(this)) {\r\n\t\t\tSpotlight.spot(this);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpanelsHandleFocused: function (sender, e) {\r\n\t\tthis._infoShowing = this.$.videoInfoHeaderClient.getShowing();\r\n\t\tthis._controlsShowing = this.$.playerControl.getShowing();\r\n\t\tthis.hideFSControls(true);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpanelsHandleBlurred: function (sender, e) {\r\n\t\tif (this.isLarge() && !this.isOverlayShowing()) {\r\n\t\t\tif (this._infoShowing) {\r\n\t\t\t\tthis.showFSInfo();\r\n\t\t\t}\r\n\t\t\tif (this._controlsShowing) {\r\n\t\t\t\tutil.asyncMethod(this, 'showFSBottomControls');\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tisLarge: function () {\r\n\t\treturn this.isFullscreen() || !this.get('inline');\r\n\t},\r\n\r\n\t///// Fullscreen controls /////\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_holdPulseThreadhold: 400,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_holding: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_sentHold: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightLeftRightFilter: function (sender, e) {\r\n\t\tif (this._sentHold) return;\r\n\r\n\t\treturn this.spotlightModal && e.originator === this;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightUpHandler: function (sender, e) {\r\n\t\tif (this._sentHold) return;\r\n\r\n\t\tif (this.hasClass('spotlight-5way-mode')) this.removeClass('spotlight-5way-mode');\r\n\t\tif (this._shouldHandleUpDown) {\r\n\t\t\tvar current = Spotlight.getCurrent();\r\n\r\n\t\t\tif (current.isDescendantOf(this.$.slider)) {\r\n\t\t\t\tif (this.$.controlsContainer.get('index')) return false;\r\n\t\t\t\telse Spotlight.spot(this.$.fsPlayPause);\r\n\t\t\t}\r\n\t\t\telse if (current == this || current.isDescendantOf(this.$.controls)) {\r\n\t\t\t\t// Toggle info header on 'up' press\r\n\t\t\t\tif (!this.$.videoInfoHeaderClient.getShowing()) {\r\n\t\t\t\t\tthis.showFSInfo();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.allowBackKey) EnyoHistory.drop();\r\n\t\t\t\t\tthis.hideFSInfo();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightKeyUpHandler: function(sender, e) {\r\n\t\tthis.resetAutoTimeout();\r\n\t\tgesture.drag.endHold();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightDownHandler: function (sender, e) {\r\n\t\tif (this._sentHold) return;\r\n\r\n\t\tif (this._shouldHandleUpDown) {\r\n\t\t\tvar current = Spotlight.getCurrent();\r\n\r\n\t\t\tif (current == this) this.showFSBottomControls();\r\n\t\t\telse if (current.isDescendantOf(this.$.controls)) {\r\n\t\t\t\tthis.addClass('spotlight-5way-mode');\r\n\t\t\t\tSpotlight.spot(this.$.slider);\r\n\t\t\t}\r\n\t\t\telse if (current.isDescendantOf(this.$.slider)) {\r\n\t\t\t\tif (this.allowBackKey) EnyoHistory.drop();\r\n\t\t\t\tthis.hideFSBottomControls();\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightKeyDownHandler: function (sender, e) {\r\n\t\tif (!Spotlight.Accelerator.isAccelerating()) {\r\n\t\t\tgesture.drag.beginHold(e);\r\n\t\t}\r\n\t\tthis._shouldHandleUpDown = this.isLarge() && (e.originator === this || Spotlight.getParent(e.originator) === this);\r\n\t},\r\n\r\n\t/**\r\n\t* Returns `true` if any piece of the overlay is showing.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tisOverlayShowing: function () {\r\n\t\treturn this.$.videoInfoHeaderClient.getShowing() || this.$.playerControl.getShowing();\r\n\t},\r\n\r\n\t/**\r\n\t* Resets the timeout, or wakes the overlay.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tmousemove: function (sender, e) {\r\n\t\tif (this.isOverlayShowing()) {\r\n\t\t\tthis.resetAutoTimeout();\r\n\t\t} else if (this.shakeAndWake) {\r\n\t\t\tthis.showFSControls();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Sets `this.visible` to `true` and clears hide job.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshowFSControls: function (sender, e) {\r\n\t\tthis.showFSInfo();\r\n\t\tthis.showFSBottomControls();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thideFSControls: function (spottingHandled) {\r\n\t\tvar dropCount;\r\n\t\tif (this.isOverlayShowing()) {\r\n\t\t\tif (this.allowBackKey) {\r\n\t\t\t\tdropCount = 0;\r\n\t\t\t\tif (this.$.videoInfoHeaderClient.get('showing')) dropCount++;\r\n\t\t\t\tif (this.$.playerControl.get('showing')) dropCount++;\r\n\t\t\t\tEnyoHistory.drop(dropCount);\r\n\t\t\t}\r\n\r\n\t\t\tthis.hideFSInfo();\r\n\t\t\tthis.hideFSBottomControls();\r\n\t\t}\r\n\t\tif (!spottingHandled) {\r\n\t\t\tSpotlight.setPointerMode(false);\r\n\t\t\tSpotlight.spot(this);\r\n\t\t}\r\n\t\tthis.stopJob('autoHide');\r\n\t},\r\n\r\n\t/**\r\n\t* Sets `this.visible` to `true` and clears hide job.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshowFSBottomControls: function (sender, e) {\r\n\t\tif (this.autoShowOverlay && this.autoShowControls) {\r\n\t\t\tthis.resetAutoTimeout();\r\n\t\t\tthis.showScrim(true);\r\n\t\t\tthis.$.playerControl.setShowing(true);\r\n\t\t\tthis.$.playerControl.resize();\r\n\t\t\tif (!this.showPlaybackControls) {\r\n\t\t\t\t//* Fixed index\r\n\t\t\t\tthis.$.controlsContainer.set('index', 1);\r\n\t\t\t}\r\n\r\n\t\t\t//* Initial spot\r\n\t\t\tthis.spotFSBottomControls();\r\n\r\n\t\t\tthis.$.slider.showKnobStatus();\r\n\t\t\tif (this.$.video.isPaused()) {\r\n\t\t\t\tthis.updateFullscreenPosition();\r\n\t\t\t}\r\n\t\t\t// When controls are visible, set as container to remember last focused control\r\n\t\t\tthis.set('spotlight', 'container');\r\n\t\t\tif (this.allowBackKey) {\r\n\t\t\t\tthis.pushBackHistory();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotFSBottomControls: function () {\r\n\t\tif (this.showPlaybackControls) {\r\n\t\t\tif (this.$.controlsContainer.get('index') === 0) {\r\n\t\t\t\tif (Spotlight.spot(this.$.fsPlayPause) === false) {\r\n\t\t\t\t\tif(Spotlight.spot(this.$.fastForward) === false){\r\n\t\t\t\t\t\tif(Spotlight.spot(this.$.jumpForward) === false) {\r\n\t\t\t\t\t\t\tSpotlight.spot(Spotlight.getFirstChild(this.$.controls));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tSpotlight.spot(Spotlight.getFirstChild(this.$.controlsContainer.getActivePanel()));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar oTarget = Spotlight.getFirstChild(this.$.leftPremiumPlaceHolder);\r\n\t\t\tSpotlight.spot(oTarget);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Sets `this.visible` to `false`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\thideFSBottomControls: function () {\r\n\t\t// When controls are hidden, set as just a spotlight true component,\r\n\t\t// so that it is spottable (since it won't have any spottable children),\r\n\t\t// and then spot itself\r\n\t\tthis.set('spotlight', true);\r\n\t\t// when FSBottomControls is closed with timeout, we should recover to get mouse event\r\n\t\tif (this.hasClass('spotlight-5way-mode')) this.removeClass('spotlight-5way-mode');\r\n\t\t// Only spot the player if hiding is triggered from player control\r\n\t\tif (Spotlight.hasCurrent() && Spotlight.getParent(Spotlight.getCurrent()) === this) {\r\n\t\t\tSpotlight.spot(this);\r\n\t\t}\r\n\t\tif (this.autoHidePopups) {\r\n\t\t\t// Hide enyo/Popup-based popups (including moon/Popup)\r\n\t\t\tthis.$.playerControl.waterfall('onRequestHide');\r\n\t\t\t// Hide moon/ContextualPopups\r\n\t\t\tthis.$.playerControl.waterfall('onRequestHidePopup');\r\n\t\t}\r\n\t\tthis.showScrim(false);\r\n\t\tthis.$.playerControl.setShowing(false);\r\n\t},\r\n\r\n\t/**\r\n\t* Sets `this.visible` to `true` and clears hide job.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshowFSInfo: function () {\r\n\t\tif (this.autoShowOverlay && this.autoShowInfo) {\r\n\t\t\tthis.resetAutoTimeout();\r\n\t\t\tthis.$.videoInfoHeaderClient.setShowing(true);\r\n\t\t\tthis.$.videoInfoHeaderClient.resize();\r\n\r\n\t\t\t// Kick off any marquees in the video info header\r\n\t\t\tthis.$.videoInfoHeaderClient.waterfallDown('onRequestStartMarquee');\r\n\t\t\tif (this.allowBackKey) {\r\n\t\t\t\tthis.pushBackHistory();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Sets `this.visible` to `false`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\thideFSInfo: function () {\r\n\t\tif (!this.showInfo) {\r\n\t\t\tthis.$.videoInfoHeaderClient.setShowing(false);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tresetAutoTimeout: function () {\r\n\t\tif (this.isFullscreen() || !this.getInline()) {\r\n\t\t\tthis.startJob('autoHide', this.bindSafely('hideFSControls'), this.getAutoCloseTimeout());\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Toggles play/pause state based on `this.playing`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tplayPause: function (sender, e) {\r\n\t\tif (this._isPlaying) {\r\n\t\t\tthis.pause(sender, e);\r\n\t\t} else {\r\n\t\t\tthis.play(sender, e);\r\n\t\t}\r\n\t\tthis.resetAutoTimeout();\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tonHoldPulseHandler: function (sender, e) {\r\n\t\tthis.stopJob('autoHide');\r\n\t\tif (!this.jumpStartEnd) {\r\n\t\t\tif (e.holdTime > this._holdPulseThreadhold) {\r\n\t\t\t\tif (sender._sentHold !== true) {\r\n\t\t\t\t\tif (sender == this.$.jumpBack) {\r\n\t\t\t\t\t\tthis.jumpToStart(sender, e);\r\n\t\t\t\t\t\tsender._sentHold = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (sender == this.$.jumpForward) {\r\n\t\t\t\t\t\tthis.jumpToEnd(sender, e);\r\n\t\t\t\t\t\tsender._sentHold = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse this._sentHold = true;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (sender == this.$.jumpBack || sender == this.$.jumpForward) {\r\n\t\t\t\t\tsender._holding = true;\r\n\t\t\t\t\tsender._sentHold = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._holding = true;\r\n\t\t\t\t\tthis._sentHold = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tonReleaseHandler: function (sender, e) {\r\n\t\tif (sender == this.$.jumpBack || sender == this.$.jumpForward) {\r\n\t\t\tif (sender._sentHold && sender._sentHold === true) sender._sentHold = false;\r\n\t\t} else {\r\n\t\t\tif (this._sentHold && this._sentHold === true) this._sentHold = false;\r\n\t\t}\r\n\t\tthis.resetAutoTimeout();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tonEnterSlider: function (sender, e) {\r\n\t\tif (this.hideButtonsOnSlider) {\r\n\t\t\tthis.$.controls.setShowing(false);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tonLeaveSlider: function (sender, e) {\r\n\t\tif (this.hideButtonsOnSlider && !this.$.slider.isDragging()) {\r\n\t\t\tthis.$.controls.setShowing(true);\r\n\t\t}\r\n\t\tif (this.hasClass('spotlight-5way-mode')) this.removeClass('spotlight-5way-mode');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tonjumpBackward: function (sender, e) {\r\n\t\tif (this.jumpStartEnd) {\r\n\t\t\tthis.jumpToStart(sender, e);\r\n\t\t} else {\r\n\t\t\tif (!sender._holding || (sender._holding && sender._sentHold !== true)) {\r\n\t\t\t\tthis.jumpBackward(sender, e);\r\n\t\t\t}\r\n\t\t\tsender._holding = false;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tonjumpForward: function (sender, e) {\r\n\t\tif (this.jumpStartEnd) {\r\n\t\t\tthis.jumpToEnd(sender, e);\r\n\t\t} else {\r\n\t\t\tif (!sender._holding || (sender._holding && sender._sentHold !== true)) {\r\n\t\t\t\tthis.jumpForward(sender, e);\r\n\t\t\t}\r\n\t\t\tsender._holding = false;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsendFeedback: function (msg, params, persist, leftSrc, rightSrc) {\r\n\t\tparams = params || {};\r\n\t\tthis.$.slider.feedback(msg, params, persist, leftSrc, rightSrc);\r\n\t},\r\n\r\n\t////// Slider event handling //////\r\n\r\n\t/**\r\n\t* When seeking starts, pauses video.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsliderSeekStart: function (sender, e) {\r\n\t\tthis._isPausedBeforeDrag = this.$.video.isPaused();\r\n\t\tthis.pause();\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* When seeking completes, plays video.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsliderSeekFinish: function (sender, e) {\r\n\t\tif (e.value < this.duration - 1) {\r\n\t\t\tif (!this._isPausedBeforeDrag) {\r\n\t\t\t\tthis.play();\r\n\t\t\t} else {\r\n\t\t\t\tthis.pause();\r\n\t\t\t}\r\n\t\t\tthis._isPausedBeforeDrag = this.$.video.isPaused();\r\n\t\t}\r\n\t\tif (!this.$.slider.isInPreview()) {\r\n\t\t\tthis.$.controls.show();\r\n\t\t}\r\n\t\tthis.setCurrentTime(e.value);\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* When seeking, sets video time.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsliderSeek: function (sender, e) {\r\n\t\tthis.setCurrentTime(e.value);\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* Programatically updates slider position to match `this.currentTime`/`this.duration`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdateFullscreenPosition: function () {\r\n\t\tif (this.$.slider.isDragging()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.$.slider.setValue(this._currentTime);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcapture: function () {\r\n\t\tdispatcher.capture(this, this.eventsToCapture);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trelease: function () {\r\n\t\tdispatcher.release(this);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcapturedFocus: function (sender, event) {\r\n\t\tSpotlight.spot(this);\r\n\t\treturn true;\r\n\t},\r\n\r\n\t///// Inline controls /////\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateInlinePosition: function () {\r\n\t\tvar percentComplete = this.duration ? Math.round(this._currentTime * 1000 / this.duration) / 10 : 0;\r\n\t\tthis.$.progressStatus.applyStyle('width', percentComplete + '%');\r\n\t\tthis.$.currTime.setContent(this.formatTime(this._currentTime) + ' / ' + this.formatTime(this.duration));\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tvideoTapped: function () {\r\n\t\tif (this.getInline() && !this.isFullscreen()) {\r\n\t\t\tthis.playPause();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Toggles fullscreen state.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\ttoggleFullscreen: function () {\r\n\t\tif (this.isFullscreen()) {\r\n\t\t\tif (this.allowBackKey) EnyoHistory.drop();\r\n\t\t\tthis.cancelFullscreen();\r\n\t\t} else {\r\n\t\t\tif (this.allowBackKey) this.pushBackHistory();\r\n\t\t\tthis.requestFullscreen();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tfullscreenChanged: function (sender, e) {\r\n\t\tSpotlight.unspot();\r\n\t\tif (this.isFullscreen()) {\r\n\t\t\tthis.$.ilFullscreen.undepress();\r\n\t\t\tthis.$.ilFullscreen.removeClass('moon-icon-exitfullscreen-font-style');\r\n\t\t\tthis.spotlight = true;\r\n\t\t\tthis.spotlightModal = true;\r\n\t\t\tthis.removeClass('inline');\r\n\t\t\tthis.$.inlineControl.setShowing(false);\r\n\t\t\tthis.$.fullscreenControl.setShowing(true);\r\n\t\t\tthis.showFSControls();\r\n\t\t\tthis.$.controlsContainer.resize();\r\n\t\t\tthis.capture();\r\n\t\t} else {\r\n\t\t\tthis.release();\r\n\t\t\tthis.stopJob('autoHide');\r\n\t\t\tthis.addClass('inline');\r\n\t\t\tthis.$.inlineControl.setShowing(true);\r\n\t\t\tthis.$.fullscreenControl.setShowing(false);\r\n\t\t\tSpotlight.spot(this.$.ilFullscreen);\r\n\t\t\tthis.spotlight = false;\r\n\t\t\tthis.spotlightModal = false;\r\n\t\t}\r\n\t\tthis.updatePosition();\r\n\t},\r\n\r\n\t/**\r\n\t* Plays the video.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tplay: function () {\r\n\t\tthis.currTimeSync = true;\r\n\t\tthis.set('_isPlaying', true);\r\n\t\tthis.$.video.play();\r\n\t\tthis.updatePlayPauseButtons();\r\n\t\tthis.updateSpinner();\r\n\t},\r\n\r\n\t/**\r\n\t* Pauses the video.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tpause: function () {\r\n\t\tthis.set('_isPlaying', false);\r\n\t\tthis.$.video.pause();\r\n\t\tthis.updatePlayPauseButtons();\r\n\t\tthis.updateSpinner();\r\n\t},\r\n\r\n\t/**\r\n\t* Changes the playback speed based on the previous playback setting, by cycling through\r\n\t* the appropriate speeds.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\trewind: function () {\r\n\t\tthis.set('_isPlaying', false);\r\n\t\tthis.$.video.rewind();\r\n\t\tthis.updatePlayPauseButtons();\r\n\t\tthis.updateSpinner();\r\n\t},\r\n\r\n\t/**\r\n\t* Jumps to beginning of media [source]{@link module:moonstone/VideoPlayer~VideoPlayer#src} and sets\r\n\t* [playbackRate]{@link module:enyo/Video~Video#playbackRate} to `1`.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tjumpToStart: function () {\r\n\t\tthis.$.video.jumpToStart();\r\n\t\tthis.updatePlayPauseButtons();\r\n\t\tthis.updateSpinner();\r\n\t\tif(this._isPlaying){\r\n\t\t\tthis.$.video.play();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Jumps backward [jumpSec]{@link module:moonstone/VideoPlayer~VideoPlayer#jumpSec} seconds from the current time.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tjumpBackward: function () {\r\n\t\tthis.$.video.jumpBackward();\r\n\t\tthis.updatePlayPauseButtons();\r\n\t\tthis.updateSpinner();\r\n\t},\r\n\r\n\t/**\r\n\t* Changes the playback speed based on the previous playback setting, by cycling through\r\n\t* the appropriate speeds.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tfastForward: function () {\r\n\t\tthis.set('_isPlaying', false);\r\n\t\tthis.$.video.fastForward();\r\n\t\tthis.updatePlayPauseButtons();\r\n\t\tthis.updateSpinner();\r\n\t},\r\n\r\n\t/**\r\n\t* Jumps to end of media [source]{@link module:moonstone/VideoPlayer~VideoPlayer#src} and sets\r\n\t* [playbackRate]{@link module:enyo/Video~Video#playbackRate} to `1`.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tjumpToEnd: function () {\r\n\t\tthis.set('_isPlaying', false);\r\n\t\tif ( this.$.video.isPaused() ) {\r\n\t\t\t//* Make video able to go futher than the buffer\r\n\t\t\tthis.$.video.play();\r\n\t\t}\r\n\t\tthis.$.video.jumpToEnd();\r\n\t\tthis.updatePlayPauseButtons();\r\n\t\tthis.updateSpinner();\r\n\t},\r\n\r\n\t/**\r\n\t* Jumps forward [jumpSec]{@link module:moonstone/VideoPlayer~VideoPlayer#jumpSec} seconds from the current time.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tjumpForward: function () {\r\n\t\tthis.$.video.jumpForward();\r\n\t\tthis.updatePlayPauseButtons();\r\n\t\tthis.updateSpinner();\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the current time in the video.\r\n\t*\r\n\t* @param {Number} val - The current time to set the video to, in seconds.\r\n\t* @public\r\n\t*/\r\n\tsetCurrentTime: function (val) {\r\n\t\tthis.$.video.setCurrentTime(val);\r\n\t},\r\n\r\n\t/**\r\n\t* Responds to `onRequestTimeChange` event by setting current video time.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\ttimeChange: function (sender, e) {\r\n\t\tthis.setCurrentTime(e.value);\r\n\t},\r\n\r\n\t/**\r\n\t* Refreshes size of video player.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\thandleResize: function () {\r\n\t\tthis.aspectRatioChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* Updates the height/width based on the video's aspect ratio.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\taspectRatioChanged: function () {\r\n\t\t// Case 5: Fixed size provided by user\r\n\t\tif (!this.inline || this.aspectRatio == 'none' || !this.aspectRatio) { return; }\r\n\r\n\t\tvar videoAspectRatio = null,\r\n\t\t\twidth = this.getComputedStyleValue('width'),\r\n\t\t\theight = this.getComputedStyleValue('height'),\r\n\t\t\tratio = 1;\r\n\r\n\t\tvideoAspectRatio = this.aspectRatio.split(':');\r\n\r\n\t\t// If fixedHeight is true, update width based on aspect ratio\r\n\t\tif (this.fixedHeight) {\r\n\t\t\t// Case 2: Automatic resize based on video aspect ratio (fixed height):\r\n\t\t\t// Case 4: Fixed aspect ratio provided by user (fixed-height):\r\n\t\t\tratio = videoAspectRatio[0] / videoAspectRatio[1];\r\n\t\t\tthis.applyStyle('width', dom.unit(parseInt(height, 10) * ratio, 'rem'));\r\n\t\t// If fixedHeight is false, update height based on aspect ratio\r\n\t\t} else if (!this.fixedHeight) {\r\n\t\t\t// Case 1: Automatic resize based on video aspect ratio (fixed width):\r\n\t\t\t// Case 3: Fixed aspect ratio provided by user (fixed-width):\r\n\t\t\tratio = videoAspectRatio[1] / videoAspectRatio[0];\r\n\t\t\tthis.applyStyle('height', dom.unit(parseInt(width, 10) * ratio, 'rem'));\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdatePosition: function () {\r\n\t\tif (this.isFullscreen() || !this.getInline()) {\r\n\t\t\tthis.updateFullscreenPosition();\r\n\t\t} else {\r\n\t\t\tthis.updateInlinePosition();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Properly formats time.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tformatTime: function (val) {\r\n\t\tvar hour = Math.floor(val / (60*60));\r\n\t\tvar min = Math.floor((val / 60) % 60);\r\n\t\tvar sec = Math.floor(val % 60);\r\n\t\tvar time = {minute: min, second: sec};\r\n\t\tif (hour) {\r\n\t\t\ttime.hour = hour;\r\n\t\t}\r\n\t\treturn this.durfmt.format(time);\r\n\t},\r\n\r\n\t/**\r\n\t* Time formatting helper.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpadDigit: function (val) {\r\n\t\treturn (val) ? (String(val).length < 2) ? '0'+val : val : '00';\r\n\t},\r\n\r\n\t/**\r\n\t* Switches play/pause buttons as appropriate.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdatePlayPauseButtons: function () {\r\n\t\tif (this._isPlaying) {\r\n\t\t\tthis.retrieveIconsSrcOrFont(this.$.fsPlayPause, this.pauseIcon);\r\n\t\t} else {\r\n\t\t\tthis.retrieveIconsSrcOrFont(this.$.fsPlayPause, this.playIcon);\r\n\t\t}\r\n\t\tif (this._isPlaying) {\r\n\t\t\tthis.retrieveIconsSrcOrFont(this.$.ilPlayPause, this.inlinePauseIcon);\r\n\t\t} else {\r\n\t\t\tthis.retrieveIconsSrcOrFont(this.$.ilPlayPause, this.inlinePlayIcon);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Retrieves icons through either `setSrc()` or `setIcon()`, depending on the icon type.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tretrieveIconsSrcOrFont:function (src, icon) {\r\n\t\tvar iconType = this.checkIconType(icon);\r\n\r\n\t\tif (iconType == 'image') {\r\n\t\t\tsrc.set('icon', null);\r\n\t\t\tsrc.set('src', this.iconPath + icon);\r\n\t\t} else {\r\n\t\t\tsrc.set('src', null);\r\n\t\t\tsrc.set('icon', icon);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Turns spinner on or off, as appropriate.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdateSpinner: function () {\r\n\t\tvar spinner = this.$.spinner;\r\n\t\tif (this.autoShowSpinner && this._isPlaying && !this._canPlay && !this._errorCode) {\r\n\t\t\tspinner.start();\r\n\t\t\tthis.addClass(\"spinner-showing\");\r\n\t\t} else if (spinner.getShowing()) {\r\n\t\t\tthis.removeClass(\"spinner-showing\");\r\n\t\t\tspinner.stop();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tautoShowSpinnerChanged: function () {\r\n\t\tthis.updateSpinner();\r\n\t},\r\n\r\n\t/**\r\n\t* When `moreButton` is tapped, toggles visibility of player controls and extra\r\n\t* functionality.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tmoreButtonTapped: function (sender, e) {\r\n\t\tif (this.$.controlsContainer.isTransitioning()) return true;\r\n\r\n\t\tvar index = this.$.controlsContainer.get('index');\r\n\t\tif (index === 0) {\r\n\t\t\tthis.retrieveIconsSrcOrFont(this.$.moreButton, this.lessControlsIcon);\r\n\t\t\tthis.toggleSpotlightForMoreControls(true);\r\n\t\t\tthis.$.controlsContainer.next();\r\n\t\t} else {\r\n\t\t\tthis.retrieveIconsSrcOrFont(this.$.moreButton, this.moreControlsIcon);\r\n\t\t\tthis.toggleSpotlightForMoreControls(false);\r\n\t\t\tthis.$.controlsContainer.previous();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateMoreButton: function () {\r\n\t\tvar index = this.$.controlsContainer.get('index');\r\n\t\tif (index === 0) {\r\n\t\t\tthis.retrieveIconsSrcOrFont(this.$.moreButton, this.moreControlsIcon);\r\n\t\t} else {\r\n\t\t\tthis.retrieveIconsSrcOrFont(this.$.moreButton, this.lessControlsIcon);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttoggleSpotlightForMoreControls: function (moreControlsSpottable) {\r\n\t\tthis.$.playbackControls.spotlightDisabled = moreControlsSpottable;\r\n\t\tthis.$.client.spotlightDisabled = !moreControlsSpottable;\r\n\t},\r\n\r\n\t///////// VIDEO EVENT HANDLERS /////////\r\n\r\n\t/**\r\n\t* Updates the video time.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\ttimeUpdate: function (sender, e) {\r\n\t\t//* Update _this.duration_ and _this.currentTime_\r\n\t\tif (!e && e.target || e.currentTime === null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.duration = e.duration;\r\n\t\tthis._currentTime = e.currentTime;\r\n\r\n\t\tthis.updatePosition();\r\n\r\n\t\tthis.$.slider.timeUpdate(this._currentTime);\r\n\t},\r\n\r\n\t/**\r\n\t* Called when video successfully loads video metadata.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tmetadataLoaded: function (sender, e) {\r\n\t\t//* Update aspect ratio based on actual video aspect ratio when autoResize is true.\r\n\t\tif (this.autoResize && this.$.video) {\r\n\t\t\tthis.setAspectRatio(this.$.video.getAspectRatio());\r\n\t\t}\r\n\t\tthis.durationUpdate(sender, e);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdurationUpdate: function (sender, e) {\r\n\t\tthis.duration = this.$.video.getDuration();\r\n\t\tthis._currentTime = this.$.video.getCurrentTime();\r\n\r\n\t\tthis.$.slider.setMin(0);\r\n\t\tthis.$.slider.setMax(this.duration);\r\n\r\n\t\tthis.updatePosition();\r\n\r\n\t\tthis.$.slider.durationUpdate(this.duration);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_loaded: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdataloaded: function (sender, e) {\r\n\t\tthis._loaded = true;\r\n\t\tthis.updateSliderState();\r\n\t\tthis.durationUpdate(sender, e);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_getBufferedProgress: function (node) {\r\n\t\tvar bufferData = node.buffered,\r\n\t\t\tnumberOfBuffers = bufferData.length,\r\n\t\t\thighestBufferPoint = 0,\r\n\t\t\tduration = node.duration || 0,\r\n\t\t\tendPoint = 0,\r\n\t\t\ti\r\n\t\t;\r\n\r\n\t\tif (duration === 0 || isNaN(duration)) {\r\n\t\t\treturn {value: 0, percent: 0};\r\n\t\t}\r\n\r\n\t\t// Find furthest along buffer end point and use that (only supporting one buffer range for now)\r\n\t\tfor (i = 0; i < numberOfBuffers; i++) {\r\n\t\t\tendPoint = bufferData.end(i);\r\n\t\t\thighestBufferPoint = (endPoint > highestBufferPoint) ? endPoint : highestBufferPoint;\r\n\t\t}\r\n\t\treturn {value: highestBufferPoint, percent: highestBufferPoint/duration*100};\r\n\t},\r\n\r\n\t/**\r\n\t* We get this event while buffering is in progress.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_progress: function (sender, e) {\r\n\t\tvar buffered = this._getBufferedProgress(e.target);\r\n\t\tif (this.isFullscreen() || !this.getInline()) {\r\n\t\t\tthis.$.slider.setBgProgress(buffered.value);\r\n\t\t} else {\r\n\t\t\tthis.$.bgProgressStatus.applyStyle('width', buffered.percent + '%');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_resetTime: function () {\r\n\t\tthis._currentTime = 0;\r\n\t\tthis.duration = 0;\r\n\t\tthis.updatePosition();\r\n\t\tthis.$.slider.setBgProgress(0);\r\n\t\tthis.$.bgProgressStatus.applyStyle('width', 0);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_play: function (sender, e) {\r\n\t\tif(e.playbackRate != this.playbackRateHash.slowRewind[0] && e.playbackRate != this.playbackRateHash.slowForward[0]){\r\n\t\t\tthis.sendFeedback('Play');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_pause: function (sender, e) {\r\n\t\t// Don't send pause feedback if we are rewinding\r\n\t\tif (e.target.playbackRate < 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (e.target.currentTime === 0) {\r\n\t\t\tthis.sendFeedback('Stop', {}, true);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.sendFeedback('Pause', {}, true);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_stop: function (sender, e) {\r\n\t\tthis.pause();\r\n\t\tthis.updatePlayPauseButtons();\r\n\t\tthis.updateSpinner();\r\n\t\tthis.sendFeedback('Stop');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_fastforward: function (sender, e) {\r\n\t\tthis.sendFeedback('Fastforward', {playbackRate: e.playbackRate}, true);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_slowforward: function (sender, e) {\r\n\t\tthis.sendFeedback('Slowforward', {playbackRate: e.playbackRate}, true);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_rewind: function (sender, e) {\r\n\t\tthis.sendFeedback('Rewind', {playbackRate: e.playbackRate}, true);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_slowrewind: function (sender, e) {\r\n\t\tthis.sendFeedback('Slowrewind', {playbackRate: e.playbackRate}, true);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_jumpForward: function (sender, e) {\r\n\t\tthis.sendFeedback('JumpForward', {jumpSize: e.jumpSize}, false);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_jumpBackward: function (sender, e) {\r\n\t\tthis.sendFeedback('JumpBackward', {jumpSize: e.jumpSize}, false);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_waiting: function (sender, e) {\r\n\t\tthis._canPlay = false;\r\n\t\tthis.updateSpinner();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_setCanPlay: function (sender, e) {\r\n\t\tthis._canPlay = true;\r\n\t\tthis.updateSpinner();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_error: function (sender, e) {\r\n\t\t// Error codes in e.currentTarget.error.code\r\n\t\t// 1: MEDIA_ERR_ABORTED, 2: MEDIA_ERR_NETWORK, 3: MEDIA_ERR_DECODE,\r\n\t\t// 4: MEDIA_ERR_SRC_NOT_SUPPORTED\r\n\t\tthis._errorCode = e.currentTarget.error.code;\r\n\t\tthis._loaded = false;\r\n\t\tthis.set('_isPlaying', false);\r\n\t\tthis._canPlay = false;\r\n\t\tthis.$.currTime.setContent($L('Error'));\r\n\t\tthis._stop();\r\n\t\tthis.updateSpinner();\r\n\t\tthis.updatePlaybackControlState();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tremoteKeyHandler: function (sender, e) {\r\n\t\tif (this.handleRemoteControlKey && !this.disablePlaybackControls) {\r\n\t\t\tvar showControls = false;\r\n\t\t\tswitch (e.keySymbol) {\r\n\t\t\tcase 'play':\r\n\t\t\t\tthis.play(sender, e);\r\n\t\t\t\tshowControls = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'pause':\r\n\t\t\t\tthis.pause(sender, e);\r\n\t\t\t\tshowControls = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'rewind':\r\n\t\t\t\tif (this.showFFRewindControls) {\r\n\t\t\t\t\tthis.rewind(sender, e);\r\n\t\t\t\t\tshowControls = true;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'fastforward':\r\n\t\t\t\tif (this.showFFRewindControls) {\r\n\t\t\t\t\tthis.fastForward(sender, e);\r\n\t\t\t\t\tshowControls = true;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'stop':\r\n\t\t\t\tthis.set('_isPlaying', false);\r\n\t\t\t\tthis.jumpToStart();\r\n\t\t\t\tthis.$.slider.setValue(0);\r\n\t\t\t\tthis.sendFeedback('Stop');\r\n\t\t\t\tshowControls = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (showControls) {\r\n\t\t\t\tif(!this.$.playerControl.getShowing()) {\r\n\t\t\t\t\tthis.showFSBottomControls();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.resetAutoTimeout();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbackKeyHandler: function () {\r\n\t\tvar visibleUp = this.$.videoInfoHeaderClient.getShowing(),\r\n\t\t\tvisibleDown = this.$.playerControl.getShowing();\r\n\r\n\t\t// if videoInfoHeaderClient and playerControl are visible\r\n\t\t// it means that we pushed video player into history stack twice.\r\n\t\t// to set correct target for next back key, we should pop one instance.\r\n\t\tif (visibleUp && visibleDown) {\r\n\t\t\tEnyoHistory.drop();\r\n\t\t}\r\n\r\n\t\tif (visibleUp) this.hideFSInfo();\r\n\t\tif (visibleDown) this.hideFSBottomControls();\r\n\r\n\t\t// if both the videoInfoHeaderClient and playerControl are hidden, then the remaining action\r\n\t\t// to \"reverse\" is fullscreen mode\r\n\t\tif (!visibleUp && !visibleDown && this.isFullscreen()) {\r\n\t\t\tthis.cancelFullscreen();\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: '_isPlaying', method: function () {\r\n\t\t\tvar label = this._isPlaying ? $L('Pause') : $L('Play');\r\n\t\t\tthis.$.fsPlayPause.set('accessibilityLabel', label);\r\n\t\t\tthis.$.ilPlayPause.set('accessibilityLabel', label);\r\n\t\t}},\r\n\t\t{path: '$.controlsContainer.index', method: function () {\r\n\t\t\tvar index = this.$.controlsContainer.index,\r\n\t\t\t\tlabel = index === 0 ? $L('More') : $L('Back');\r\n\t\t\tthis.$.moreButton.set('accessibilityLabel', label);\r\n\t\t}},\r\n\t\t{path: '$.videoInfoHeaderClient.showing', method: function () {\r\n\t\t\tvar client = this.$.videoInfoHeaderClient,\r\n\t\t\t\tshowing = client.get('showing');\r\n\r\n\t\t\tclient.set('accessibilityAlert', showing);\r\n\t\t\tclient.setAriaAttribute('aria-live', showing ? 'off' : null);\r\n\t\t\tif (!showing) {\r\n\t\t\t\tclient.set('accessibilityDisabled', false);\r\n\t\t\t}\r\n\t\t}},\r\n\t\t{path: '$.playerControl.showing', method: function () {\r\n\t\t\tvar client = this.$.videoInfoHeaderClient;\r\n\t\t\tif (client.get('showing')) {\r\n\t\t\t\tclient.set('accessibilityDisabled', true);\r\n\t\t\t}\r\n\t\t}}\r\n\t]\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:moonstone/NewDataList~NewDataList} kind.\r\n* @wip\r\n* @module moonstone/NewDataList\r\n*/\r\n\r\nrequire('moonstone');\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tNewDataList = require('enyo/NewDataList');\r\n\r\nvar\r\n\tSpotlight = require('spotlight'),\r\n\tVDRSpotlightSupport = require('spotlight/VDRSpotlightSupport');\r\n\r\nvar\r\n\tScrollable = require('../Scrollable'),\r\n\tScrollControls = require('../ScrollControls');\r\n\r\n/**\r\n* A Moonstone NewDataList implementation. Currently under development.\r\n*\r\n* @class NewDataList\r\n* @extends module:enyo/NewDataList~NewDataList\r\n* @ui\r\n* @wip\r\n* @public\r\n*/\r\nmodule.exports = kind({\r\n\tname: 'moon.NewDataList',\r\n\tkind: NewDataList,\r\n\tscrollControls: [{kind: ScrollControls}],\r\n\ttouch: false,\r\n\tmixins: [Scrollable, VDRSpotlightSupport],\r\n\thandlers: {\r\n\t\tonSpotlightUp: 'guard5way',\r\n\t\tonSpotlightRight: 'guard5way',\r\n\t\tonSpotlightDown: 'guard5way',\r\n\t\tonSpotlightLeft: 'guard5way'\r\n\t},\r\n\t/**\r\n\t* Prevent accelerating 5-way focus events from trying\r\n\t* to spot elements that don't yet have DOM nodes.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tguard5way: function (sender, event) {\r\n\t\tvar e, limit, idx, d2x, row, limitRow, movingInScrollDimension;\r\n\r\n\t\te = event.type;\r\n\t\tmovingInScrollDimension =\r\n\t\t\t(this.direction === 'vertical' && (e === 'onSpotlightUp' || e === 'onSpotlightDown')) ||\r\n\t\t\t(this.direction === 'horizontal' && (e === 'onSpotlightRight' || e === 'onSpotlightLeft'));\r\n\r\n\t\t// If we're not accelerating, or not moving along\r\n\t\t// our scrollable dimension, then we don't need to guard\r\n\t\tif (!Spotlight.Accelerator.isAccelerating() || !movingInScrollDimension) return false;\r\n\r\n\t\t// Figure out the index of the last de-virtualized element\r\n\t\t// in the direction we're currently scrolling; anything\r\n\t\t// further out doesn't yet have a DOM node\r\n\t\tlimit = (e === 'onSpotlightUp' || e === (this.rtl ? 'onSpotlightRight' : 'onSpotlightLeft')) ?\r\n\t\t\tthis.first :\r\n\t\t\tthis._last;\r\n\r\n\t\t// Get the index of the currently focused element\r\n\t\tidx = event.index;\r\n\r\n\t\t// In case we're in a grid layout, we need to translate\r\n\t\t// these indices into the corresponding row / column\r\n\t\td2x = this.dim2extent;\r\n\t\trow = Math.floor(idx / d2x);\r\n\t\tlimitRow = Math.floor(limit / d2x);\r\n\r\n\t\t// If we're in the last de-virtualized row, the element we\r\n\t\t// would focus from here doesn't yet have a DOM node, so\r\n\t\t// we return true to prevent an attempt to focus. We'll wait\r\n\t\t// for the next accelerated 5-way event and try again...\r\n\t\treturn (row === limitRow);\r\n\t},\r\n\t/**\r\n\t* Scrolls to a list item (specified by index).\r\n\t*\r\n\t* In addition to the standard scrolling options, you can specify\r\n\t* `focus: true` if you want the item you're scrolling to to be\r\n\t* Spotlight focused. Currently, setting `focus: true` forces the\r\n\t* scroll behavior to be `instant`, meaning that the scroller will\r\n\t* jump to the item (with no animation).\r\n\t*\r\n\t* @see module:enyo/NewDataList~NewDataList.scrollToItem\r\n\t* @param {number} index - The (zero-based) index of the item to scroll to\r\n\t* @param {Object} opts - Scrolling options (see module:enyo/Scrollable~Scrollable.scrollTo)\r\n\t* @public\r\n\t*/\r\n\tscrollToItem: function(index, opts) {\r\n\t\tvar item;\r\n\r\n\t\tif (opts && opts.focus) {\r\n\t\t\topts.behavior = 'instant';\r\n\t\t}\r\n\r\n\t\tNewDataList.prototype.scrollToItem.apply(this, arguments);\r\n\r\n\t\tif (opts && opts.focus && !Spotlight.getPointerMode()) {\r\n\t\t\titem = this.childForIndex(index);\r\n\t\t\tif (item) Spotlight.spot(item);\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t* Called by moonstone/Scrollable.filterFocus()\r\n\t* @private\r\n\t*/\r\n\teventIsFromScrollingChild: function (event) {\r\n\t\treturn (typeof event.index === 'number');\r\n\t},\r\n\t/**\r\n\t* Called by moonstone/Scrollable.filterFocus()\r\n\t* @private\r\n\t*/\r\n\tspotFirstVisibleChild: function() {\r\n\t\tvar fv = this.getFullyVisibleItems()[0] || this.getVisibleItems()[0];\r\n\t\tif (fv) {\r\n\t\t\tSpotlight.spot(fv);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t* Called by moonstone/Scrollable.filterFocus()\r\n\t* @private\r\n\t*/\r\n\teventIsFromVisibleChild: function (event) {\r\n\t\tvar control = event.originator,\r\n\t\t\tcontrols = this.orderedChildren.slice(this.firstFullyVisibleI, this.lastFullyVisibleI + 1),\r\n\t\t\ti;\r\n\r\n\t\tfor (i = 0; i < controls.length; i++) {\r\n\t\t\tif (control.isDescendantOf(controls[i])) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:moonstone/LightPanels~LightPanels} kind.\r\n* @wip\r\n* @module moonstone/LightPanels\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tLightPanels = require('enyo/LightPanels');\r\n\r\nvar\r\n\tLightPanel = require('./LightPanel');\r\n\r\n/**\r\n* A lightweight panels implementation that has basic support for side-to-side transitions\r\n* between child components.\r\n*\r\n* @class LightPanels\r\n* @extends module:enyo/LightPanels~LightPanels\r\n* @wip\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/LightPanels~LightPanels.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.LightPanels',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: LightPanels,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-light-panels',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdefaultKind: LightPanel,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taddChild: function (control) {\r\n\t\tLightPanels.prototype.addChild.apply(this, arguments);\r\n\t\tif (control.parent === this.$.client) control.spotlightDisabled = true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetupTransitions: function (was) {\r\n\t\tthis.updateSpottability(was, this.index);\r\n\t\tLightPanels.prototype.setupTransitions.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateSpottability: function (from, to) {\r\n\t\tvar panels = this.getPanels(),\r\n\t\t\tpanelPrev = panels[from],\r\n\t\t\tpanelNext = panels[to];\r\n\r\n\t\tif (panelPrev) panelPrev.spotlightDisabled = true;\r\n\t\tif (panelNext) panelNext.spotlightDisabled = false;\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\tariaObservers: [\r\n\t\t{path: 'index', method: function () {\r\n\t\t\tvar panels = this.getPanels(),\r\n\t\t\t\tactive = panels[this.index],\r\n\t\t\t\tl = panels.length,\r\n\t\t\t\tpanel;\r\n\r\n\t\t\twhile (--l >= 0) {\r\n\t\t\t\tpanel = panels[l];\r\n\t\t\t\tif (panel instanceof LightPanel && panel.title) {\r\n\t\t\t\t\tpanel.set('accessibilityRole', panel === active ? 'alert' : 'region');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}}\r\n\t]\r\n\r\n});\r\n\r\n/**\r\n* The {@link module:moonstone/LightPanels~LightPanel} kind export.\r\n* @public\r\n*/\r\nmodule.exports.Panel = LightPanel;\r\nmodule.exports.Direction = LightPanels.Direction;\r\nmodule.exports.Orientation = LightPanels.Orientation;\r\n","/**\r\n* Contains the declaration for {@link module:moonstone/Panels~Panels} and supporting kinds.\r\n* @module moonstone/Panels\r\n*/\r\n\r\nrequire('moonstone');\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdispatcher = require('enyo/dispatcher'),\r\n\tdom = require('enyo/dom'),\r\n\tutil = require('enyo/utils'),\r\n\tControl = require('enyo/Control'),\r\n\tEnyoHistory = require('enyo/History'),\r\n\tSignals = require('enyo/Signals'),\r\n\tri = require('enyo/resolution'),\r\n\tViewPreloadSupport = require('enyo/ViewPreloadSupport');\r\n\r\nvar\r\n\tPanels = require('layout/Panels');\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\nvar\r\n\t$L = require('../i18n');\r\n\r\nvar\r\n\tApplicationCloseButton = require('../ApplicationCloseButton'),\r\n\tHistorySupport = require('../HistorySupport'),\r\n\tMoonAnimator = require('../MoonAnimator'),\r\n\tMoonArranger = require('../MoonArranger'),\r\n\tMoonOptions = require('../options'),\r\n\tPanel = require('../Panel'),\r\n\tStyleAnimator = require('../StyleAnimator');\r\n\r\n/**\r\n* {@link module:moonstone/Panels~PanelsHandle} is a helper kind for\r\n* {@link module:moonstone/Panels~Panels}. It implements a spottable handle\r\n* that the user may interact with to hide and show the `moonstone/Panels`\r\n* control.\r\n*\r\n* @class PanelsHandle\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nvar PanelsHandle = kind(\r\n\t/** @lends module:moonstone/Panels~PanelsHandle.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.PanelsHandle',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [HistorySupport],\r\n\r\n\t/*\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-panels-handle',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tontap: 'handleTap'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleTap: function () {\r\n\t\tif (!EnyoHistory.isProcessing()) {\r\n\t\t\tthis.pushBackHistory();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbackKeyHandler: function () {\r\n\t\tthis.bubble('ontap');\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* We override getAbsoluteShowing so that the handle's spottability is not dependent on the\r\n\t* showing state of its parent, the {@link module:moonstone/Panels~Panels} control.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgetAbsoluteShowing: function (ignoreBounds) {\r\n\t\tvar bounds = !ignoreBounds ? this.getBounds() : null;\r\n\r\n\t\tif (!this.generated || this.destroyed || !this.showing || (bounds &&\r\n\t\t\tbounds.height === 0 && bounds.width === 0)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n});\r\n\r\n/**\r\n* {@link module:moonstone/Panels~Breadcrumb} is a helper kind for\r\n* {@link module:moonstone/Panels~Panels}. It implements a breadcrumb that\r\n* displays the panel index.\r\n*\r\n* @class Breadcrumb\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nvar Breadcrumb = kind(\r\n\t/** @lends module:moonstone/Panels~Breadcrumb.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Breadcrumb',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/Panels~Breadcrumb.prototype\r\n\t*/\r\n\tpublished: {\r\n\t\t/*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tindex: 0\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tisOffscreen: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taccessibilityLabel: $L('go to previous'),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tontap: 'tapHandler',\r\n\t\tonSpotlightRight: 'rightHandler'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-panels-breadcrumb',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'number', kind: Control, classes: 'moon-panels-breadcrumb-header'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: 'index', to: '$.number.content', transform: 'formatNumber'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tformatNumber: function (n) {\r\n\t\tvar i=n+1;\r\n\t\treturn '< ' + ((i < 10) ? '0' : '') + i;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttapHandler: function (sender, event) {\r\n\t\t// decorate\r\n\t\tevent.breadcrumbTap = true;\r\n\t\tevent.index = this.index;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trightHandler: function(sender, event) {\r\n\t\tvar panels = this.owner;\r\n\t\tif (this.index+1 ==\tpanels.index) {\r\n\t\t\tSpotlight.spot(panels.getActive());\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateSpotability: function () {\r\n\t\tthis.spotlightDisabled = this.isOffscreen;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateBreadcrumb: function (info) {\r\n\t\tthis.set('isOffscreen', info.isOffscreen);\r\n\t\tthis.updateSpotability();\r\n\t}\r\n});\r\n\r\n\r\n/**\r\n* {@link module:moonstone/Panels~Panels} extends {@link module:layout/Panels~Panels},\r\n* adding support for 5-way focus (Spotlight) and pre-configured Moonstone panels\r\n* design patterns. By default, controls added to a Panels container are instances\r\n* of {@link module:moonstone/Panel~Panel}.\r\n*\r\n* `moonstone/Panels` introduces the concept of patterns for panel display.\r\n* Set [pattern]{@link module:moonstone/Panels~Panels#pattern} to `'activity'`\r\n* or `'alwaysViewing'` to use one of two patterns designed for apps on Smart TV systems.\r\n*\r\n* @class Panels\r\n* @extends module:layout/Panels~Panels\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/Panels~Panels.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Panels',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind : Panels,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins : [HistorySupport, ViewPreloadSupport],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses : 'moon-panels enyo-fit',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightDecorate : false,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/Panels~Panels.prototype\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* A convenience property for configuring {@link module:moonstone/Panels~Panels} according to a\r\n\t\t* particular design pattern.  Valid values are `'none'` (default), `'activity'`,\r\n\t\t* and `'alwaysviewing'`. Note that this property may only be set at creation\r\n\t\t* time, and should not be changed at runtime.\r\n\t\t*\r\n\t\t* The `'alwaysviewing'` pattern uses the {@link module:moonstone/BreadcrumbArranger~BreadcrumbArranger} with\r\n\t\t* semi-transparent panels (depending on the color theme) over the right half\r\n\t\t* of the screen, allowing multiple breadcrumbs to accumulate on the left\r\n\t\t* half of the screen.\r\n\t\t*\r\n\t\t* The `'activity'` pattern  uses the `BreadcrumbArranger` with opaque\r\n\t\t* panels over the full screen and only one breadcrumb showing onscreen.\r\n\t\t*\r\n\t\t* The `'none'` pattern should be used when selecting other arrangers, such as\r\n\t\t* {@link module:layout/CarouselArranger~CarouselArranger} or {@link module:layout/CardArranger~CardArranger}.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'none'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpattern: 'none',\r\n\r\n\t\t/**\r\n\t\t* When [useHandle]{@link module:moonstone/Panels~Panels#useHandle} is used, it is automatically\r\n\t\t* hidden after this amount of time (in milliseconds).\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 4000\r\n\t\t* @public\r\n\t\t*/\r\n\t\tautoHideTimeout: 4000,\r\n\r\n\t\t/**\r\n\t\t* When `true`, a handle is created to allow the user to control the showing\r\n\t\t* state of the panels using animation. When `false`, no handle is created and\r\n\t\t* panels may only be hidden/shown programmatically with no animation.\r\n\t\t* When `'auto'` (the default), `useHandle` is set to `true` if the\r\n\t\t* [pattern]{@link module:moonstone/Panels~Panels#pattern} is `'alwaysviewing'` and to `false` if\r\n\t\t* the `pattern` is `'activity'`. Note that this property may only be set at\r\n\t\t* creation time, and should not be changed at runtime. This property\r\n\t\t* only has an effect when using the `'activity'` or `'alwaysviewing'` pattern.\r\n\t\t*\r\n\t\t* @type {String|Boolean}\r\n\t\t* @default 'auto'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tuseHandle: 'auto',\r\n\r\n\t\t/**\r\n\t\t* Dynamically controls whether the handle is showing.\r\n\t\t* When `true` (the default), the handle is shown and panels may be shown by\r\n\t\t* activating the handle and hidden by re-activating the handle or by tapping\r\n\t\t* outside the panel area. When `false`, the handle is hidden and panels may\r\n\t\t* only be shown or hidden programmatically using the\r\n\t\t* [showing]{@link module:enyo/Control~Control#showing} property or the\r\n\t\t* [show()]{@link module:enyo/Control~Control#show}/[hide()]{@link module:enyo/Control~Control#hide} API.\r\n\t\t* This property only has an effect when [useHandle]{@link module:moonstone/Panels~Panels#useHandle}\r\n\t\t* is `true` (or `'auto'`, resulting in `true`).\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\thandleShowing: true,\r\n\r\n\t\t/**\r\n\t\t* When `true`, panels are automatically popped when the user moves back.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpopOnBack: false,\r\n\r\n\t\t/**\r\n\t\t* When `true`, an ApplicationCloseButton is added to ActivityPanels arranger's Panel Headers.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\thasCloseButton: true,\r\n\r\n\t\t/**\r\n\t\t* When `true`, navigating the panel-stack (forward and backward) by 5-way key is disabled.\r\n\t\t* This feature may be helpful to prevent accidental navigation in \"wizard\" interface\r\n\t\t* scenarios where the user must take explicit action to advance or regress.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpreventKeyNavigation: false,\r\n\r\n\t\t/**\r\n\t\t* When `true`, focus can move from panel to breadcrumb when press left key.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @deprecated This property will be removed in the future.\r\n\t\t* @public\r\n\t\t*/\r\n\t\tleftKeyToBreadcrumb: true,\r\n\r\n\t\t/**\r\n\t\t* When `true`, existing views are cached for reuse; otherwise, they are destroyed.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcacheViews: false\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnarrowFit: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tfractions: {panel: 1, breadcrumb: 1},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tontap:\t\t\t\t\t\t'tapped',\r\n\t\tonSpotlightUp:\t\t\t\t'spotlightUp',\r\n\t\tonSpotlightDown:\t\t\t'spotlightDown',\r\n\t\tonSpotlightRight:\t\t\t'spotlightRight',\r\n\t\tonSpotlightLeft:\t\t\t'spotlightLeft',\r\n\t\tonSpotlightFocus:\t\t\t'spotlightFocus',\r\n\t\tonSpotlightContainerLeave:\t'onSpotlightPanelLeave',\r\n\t\tonSpotlightContainerEnter:\t'onSpotlightPanelEnter',\r\n\t\tonCustomizeCloseButton:\t\t'handleCustomizeCloseButton'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tapplicationTools: [\r\n\t\t{name: 'appClose', kind: ApplicationCloseButton, onSpotlightUp: 'spotlightFromCloseButton', onSpotlightDown: 'spotlightFromCloseButton', onSpotlightRight: 'spotlightFromCloseButton', onSpotlightLeft: 'spotlightFromCloseButton'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleTools: [\r\n\t\t{name: 'backgroundScrim', kind: Control, classes: 'moon-panels-background-scrim'},\r\n\t\t{name: 'clientWrapper', kind: Control, classes: 'enyo-fill moon-panels-client-wrapper', components: [\r\n\t\t\t{name: 'scrim', kind: Control, classes: 'moon-panels-panel-scrim'},\r\n\t\t\t{name: 'breadcrumbs', kind: Control, classes: 'moon-panels-breadcrumbs'},\r\n\t\t\t{name: 'panelsViewport', kind: Control, classes: 'moon-panels-viewport', components: [\r\n\t\t\t\t{name: 'client', kind: Control, tag: null}\r\n\t\t\t]}\r\n\t\t]},\r\n\t\t{name: 'showHideHandle', kind: PanelsHandle, classes: 'hidden', canGenerate: false, ontap: 'handleTap', onSpotlightLeft: 'handleSpotLeft', onSpotlightRight: 'handleSpotRight', onSpotlightFocused: 'handleFocused', onSpotlightBlur: 'handleBlur', tabIndex: -1},\r\n\t\t{name: 'showHideAnimator', kind: StyleAnimator, onComplete: 'showHideAnimationComplete'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tanimatorTools: [\r\n\t\t{name: 'animator', kind: MoonAnimator, onStep: 'step', useBezier: true, onEnd: 'animationEnded', configs: {\r\n\t\t\tpanel: {\r\n\t\t\t\tforward: { startValue: 0, endValue: 1, delay: 0, duration: 230, bezier: [0.69,0.01,0.97,0.59]},\r\n\t\t\t\tbackward: { startValue: 0, endValue: 1, delay: 0, duration: 300, bezier: [0.06,0.53,0.38,0.99] }\r\n\t\t\t},\r\n\t\t\tbreadcrumb: {\r\n\t\t\t\tforward: { startValue: 0, endValue: 1, delay: 230, duration: 70, bezier: [0.46,0.28,0.76,0.57] },\r\n\t\t\t\tbackward: { startValue: 0, endValue: 1, delay: 150, duration: 150, bezier: [0.08,0.51,0.24,0.99] }\r\n\t\t\t}\r\n\t\t}}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdefaultKind: Panel,\r\n\r\n\t/**\r\n\t* When `false`, dragging is disabled.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdraggable: false,\r\n\r\n\t/**\r\n\t* Default to using `BreadcrumbArranger`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tarrangerKind: MoonArranger,\r\n\r\n\t/**\r\n\t* Index of panel set in the middle of transition.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tqueuedIndex: null,\r\n\r\n\t/**\r\n\t* Flag for blocking consecutive push/pop/replace panel actions to protect\r\n\t* create/render/destroy time.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tisModifyingPanels: false,\r\n\r\n\t/**\r\n\t* Flag to indicate if the Panels are currently transitioning to a new index.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\ttransitioning: false,\r\n\r\n\t/**\r\n\t* Width of breadcrumb.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tbreadcrumbWidth: 96,\r\n\r\n\t/**\r\n\t* Checks the state of panel transitions.\r\n\t*\r\n\t* @return {Boolean} `true` if a transition between panels is currently in progress;\r\n\t* otherwise, `false`.\r\n\t* @public\r\n\t*/\r\n\tinTransition: function () {\r\n\t\treturn this.transitioning;\r\n\t},\r\n\r\n\t/**\r\n\t* Returns list of breadcrumb objects\r\n\t*\r\n\t* @return {Array} List of breadcrumbs.\r\n\t* @public\r\n\t*/\r\n\tgetBreadcrumbs: function () {\r\n\t\treturn this.$.breadcrumbs ? this.$.breadcrumbs.children : [];\r\n\t},\r\n\r\n\t/**\r\n\t* Returns reference to breadcrumb at the specified index.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tgetBreadcrumbForIndex: function (index) {\r\n\t\tvar breadcrumbs = this.getBreadcrumbs();\r\n\t\treturn breadcrumbs[(index + breadcrumbs.length) % breadcrumbs.length];\r\n\t},\r\n\r\n\t/**\r\n\t* Returns maximum number of breadcrumbs that can be fit in the breadcrumb area.\r\n\t*\r\n\t* @return {Number} Number of breadcrumbs.\r\n\t* @public\r\n\t*/\r\n\tgetBreadcrumbMax: function () {\r\n\t\tif (this.pattern == 'activity') return 1;\r\n\t\t// Always viewing pattern is using half screen to show breadcrumbs\r\n\t\treturn Math.round(window.innerWidth / 2 / ri.scale(this.breadcrumbWidth));\r\n\t},\r\n\r\n\t/**\r\n\t* Returns range of breadcrumb index.\r\n\t*\r\n\t* @return {Object} Object contains start and end value as a hash. '{start: start, end: end}'\r\n\t* @public\r\n\t*/\r\n\tgetBreadcrumbRange: function () {\r\n\t\t/** To support fly weight pattern, we use a concept of a window.\r\n\t\t*\tIf we are seeing maximum 1 breadcrumb on screen (case of activity pattern),\r\n\t\t*\twe arrange 2 breadcrumbs at a time (current and previous) to show animation.\r\n\t\t*\tIf we move forward from index 2 to 3 (active is 3), the window can be [2, 3].\r\n\t\t*/\r\n\t\tvar end = this.index,\r\n\t\t\tstart = end - this.getBreadcrumbs().length;\r\n\r\n\t\t// If we move backward from index 4 to 3 (active is 3), the window can be [3, 4].\r\n\t\tif (this.fromIndex > this.toIndex) {\r\n\t\t\tstart = start+1;\r\n\t\t\tend = end+1;\r\n\t\t}\r\n\t\treturn {start: start, end: end};\r\n\t},\r\n\r\n\t/**\r\n\t* We just recalculate transition position on pushPanel, because reflow is high cost operation.\r\n\t* @private\r\n\t*/\r\n\trecalcLayout: function () {\r\n\t\tif (this.layout && this.layout.calcTransitionPositions) {\r\n\t\t\tthis.arrangements = [];\r\n\t\t\tthis.layout.calcTransitionPositions();\r\n\t\t} else {\r\n\t\t\tthis.reflow();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Determines the id of the given view.\r\n\t*\r\n\t* @param {Object} view - The view whose id we will determine.\r\n\t* @return {String} The id of the given view.\r\n\t* @public\r\n\t*/\r\n\tgetViewId: function (view) {\r\n\t\treturn view.id;\r\n\t},\r\n\r\n\t/**\r\n\t* Retrieves an array of either cached panels, if found, or creates a new array of panels\r\n\t*\r\n\t* @param {Object[]} info - The declarative {@glossary kind} definitions.\r\n\t* @param {Object} moreInfo - Additional properties to be applied (defaults).\r\n\t* @return {Array} List of found or created controls\r\n\t* @private\r\n\t*/\r\n\tcreatePanels: function (info, moreInfo) {\r\n\t\tvar newPanels = [],\r\n\t\t\tnewPanel, idx;\r\n\r\n\t\tfor (idx = 0; idx < info.length; idx++) {\r\n\t\t\tnewPanel = this.createPanel(info[idx], moreInfo);\r\n\t\t\tnewPanels.push(newPanel);\r\n\t\t}\r\n\r\n\t\treturn newPanels;\r\n\t},\r\n\r\n\t/**\r\n\t* Retrieves a cached panel or, if not found, creates a new panel\r\n\t*\r\n\t* @param {Object} info - The declarative {@glossary kind} definition.\r\n\t* @param {Object} moreInfo - Additional properties to be applied (defaults).\r\n\t* @return {Object} - Found or created control\r\n\t* @private\r\n\t*/\r\n\tcreatePanel: function (info, moreInfo) {\r\n\t\tvar panel,\r\n\t\t\tpanelId = this.getViewId(info);\r\n\r\n\t\tif (this.cacheViews && panelId) {\r\n\t\t\tpanel = this.restoreView(panelId);\r\n\t\t}\r\n\r\n\t\tpanel = panel || this.createComponent(info, moreInfo);\r\n\t\treturn panel;\r\n\t},\r\n\r\n\t/**\r\n\t* Creates a panel on top of the stack and increments index to select that component.\r\n\t*\r\n\t* @param {Object} info - The declarative {@glossary kind} definition.\r\n\t* @param {Object} moreInfo - Additional properties to be applied (defaults).\r\n\t* @return {Object} The instance of the panel that was created on top of the stack.\r\n\t* @public\r\n\t*/\r\n\tpushPanel: function (info, moreInfo) { // added\r\n\t\tvar startingPanelCount, lastIndex, panel;\r\n\r\n\t\tif (this.transitioning || this.isModifyingPanels) return null;\r\n\r\n\t\tthis.isModifyingPanels = true;\r\n\r\n\t\tstartingPanelCount = this.getPanels().length;\r\n\t\tlastIndex = startingPanelCount - 1;\r\n\t\tpanel = this.createPanel(info, moreInfo);\r\n\r\n\t\tpanel.render();\r\n\t\tthis.addBreadcrumb(true);\r\n\t\tthis.recalcLayout();\r\n\t\tpanel.resize();\r\n\t\tthis.setIndex(lastIndex+1);\r\n\r\n\t\t// when we push the first panel, we need to explicitly let our observers know about this as\r\n\t\t// there would not be a change in actual index value\r\n\t\tif (startingPanelCount === 0) {\r\n\t\t\t// Accessibility - when we push the first panel, we need to set alert role for reading title.\r\n\t\t\tif (MoonOptions.accessibility) {\r\n\t\t\t\tthis.setAlertRole();\r\n\t\t\t}\r\n\t\t\tthis.notifyObservers('index');\r\n\t\t}\r\n\r\n\t\tthis.isModifyingPanels = false;\r\n\r\n\t\treturn panel;\r\n\t},\r\n\r\n\t/**\r\n\t* Options for the [Panels.pushPanels()]{@link module:moonstone/Panels~Panels.pushPanels} method.\r\n\t*\r\n\t* @typedef {Object} module:moonstone/Panels~Panels.pushPanels~options\r\n\t* @property {Number} targetIndex - The panel index number to immediately switch to. Leaving\r\n\t*\tthis blank or not setting it will perform the default action, which transitions to the\r\n\t*\tfirst of the new panels. Setting this to a negative and other 'out of bounds' values\r\n\t*\twork in conjunction with the `wrap: true` property. Negative values count backward from\r\n\t*\tthe end, while indices greater than the total Panels' panel length wrap around and start\r\n\t*\tcounting again from the beginning.\r\n\t* @property {Boolean} transition - Whether to transition or jump directly to the next panel.\r\n\t* @public\r\n\t*/\r\n\r\n\t/**\r\n\t* Creates multiple panels on top of the stack and updates index to select the last one\r\n\t* created. Supports an optional `options` object as the third parameter.\r\n\t*\r\n\t* @param {Object[]} info - The declarative {@glossary kind} definitions.\r\n\t* @param {Object} commonInfo - Additional properties to be applied (defaults).\r\n\t* @param {Object} options - Additional options for pushPanels.\r\n\t* @return {null|Object[]} Array of the panels that were created on top of the stack, or\r\n\t*\t`null` if panels could not be created.\r\n\t* @public\r\n\t*/\r\n\tpushPanels: function (info, commonInfo, options) { // added\r\n\t\tvar startingPanelCount, lastIndex, panels, panel;\r\n\r\n\t\tif (this.transitioning || this.isModifyingPanels) return null;\r\n\r\n\t\tthis.isModifyingPanels = true;\r\n\r\n\t\tif (!options) options = {};\r\n\r\n\t\tstartingPanelCount = this.getPanels().length;\r\n\t\tlastIndex = startingPanelCount;\r\n\t\tpanels = this.createPanels(info, commonInfo);\r\n\r\n\t\tfor (panel = 0; panel < panels.length; ++panel) {\r\n\t\t\tpanels[panel].render();\r\n\t\t}\r\n\t\tthis.addBreadcrumb(true);\r\n\t\tthis.recalcLayout();\r\n\t\tif (options.targetIndex || options.targetIndex === 0) {\r\n\t\t\tlastIndex = options.targetIndex;\r\n\t\t}\r\n\t\tlastIndex = this.clamp(lastIndex);\r\n\t\tfor (panel = 0; panel < panels.length; ++panel) {\r\n\t\t\tpanels[panel].resize();\r\n\t\t}\r\n\t\t// If transition was explicitly set to false, since null or undefined indicate 'never set' or unset\r\n\t\tif (options.transition === false) {\r\n\t\t\tthis.setIndexDirect(lastIndex);\r\n\t\t} else {\r\n\t\t\tthis.setIndex(lastIndex);\r\n\t\t}\r\n\r\n\t\t// when we push the first panel, we need to explicitly let our observers know about this as\r\n\t\t// there would not be a change in actual index value\r\n\t\tif (startingPanelCount === 0) {\r\n\t\t\t// Accessibility - when we push the first panel, we need to set alert role for reading title.\r\n\t\t\tif (MoonOptions.accessibility) {\r\n\t\t\t\tthis.setAlertRole();\r\n\t\t\t}\r\n\t\t\tthis.notifyObservers('index');\r\n\t\t}\r\n\r\n\t\tthis.isModifyingPanels = false;\r\n\r\n\t\treturn panels;\r\n\t},\r\n\r\n\t/**\r\n\t* Destroys panels whose index is greater than or equal to a specified value.\r\n\t*\r\n\t* @param {Number} index - Index at which to start removing panels.\r\n\t* @param {Number} [direction] - The direction in which we are changing indices. A negative\r\n\t*\tvalue signifies that we are moving backwards, and want to remove panels whose indices are\r\n\t*\tgreater than the current index. Conversely, a positive value signifies that we are moving\r\n\t*\tforwards, and panels whose indices are less than the current index should be removed. To\r\n\t*\tmaintain backwards-compatibility with the existing API, this parameter is optional and, if\r\n\t*\tnot specified, will default to the popOnBack behavior.\r\n\t* @public\r\n\t*/\r\n\tpopPanels: function (index, direction) {\r\n\t\tif (this.transitioning || this.isModifyingPanels) return;\r\n\r\n\t\tvar panels = this.getPanels(),\r\n\t\t\ti;\r\n\r\n\t\tthis.isModifyingPanels = true;\r\n\r\n\t\tif (direction > 0) {\r\n\t\t\tfor (i = 0; i <= index; ++i) {\r\n\t\t\t\tthis.removePanel(panels[i], true);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tindex = index || panels.length - 1;\r\n\r\n\t\t\tfor (i = panels.length - 1; i >= index; i--) {\r\n\t\t\t\tthis.removePanel(panels[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.removeBreadcrumb();\r\n\t\tthis.recalcLayout();\r\n\t\tthis.isModifyingPanels = false;\r\n\t},\r\n\r\n\t/**\r\n\t* Removes an individual panel.\r\n\t*\r\n\t* @param {Object} panel - The panel to remove.\r\n\t* @param {Boolean} [preserve] - If {@link module:moonstone/Panels~Panels#cacheViews} is `true`,\r\n\t*\tthis value is used to determine whether or not to preserve the current panel's position in\r\n\t*\tthe component hierarchy and on the screen, when caching.\r\n\t* @private\r\n\t*/\r\n\tremovePanel: function (panel, preserve) {\r\n\t\tif (panel) {\r\n\t\t\tif (this.cacheViews) {\r\n\t\t\t\tthis.cacheView(panel, preserve);\r\n\t\t\t} else {\r\n\t\t\t\tpanel.destroy();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Destroys specified panel and creates new panel in-place without transition effect.\r\n\t*\r\n\t* @param {Number} index - Index of panel to destroy.\r\n\t* @param {Object} info - The declarative {@glossary kind} definition.\r\n\t* @param {Object} moreInfo - Additional properties to be applied (defaults).\r\n\t* @public\r\n\t*/\r\n\treplacePanel: function (index, info, moreInfo) {\r\n\t\tif (this.transitioning || this.isModifyingPanels) {return;}\r\n\t\tthis.isModifyingPanels = true;\r\n\t\tvar oPanel = null;\r\n\r\n\t\tif (this.getPanels().length > index) {\r\n\t\t\tthis.getPanels()[index].destroy();\r\n\t\t\tif (this.getPanels().length > index) {\r\n\t\t\t\tmoreInfo = util.mixin({addBefore: this.getPanels()[index]}, moreInfo);\r\n\t\t\t}\r\n\t\t}\r\n\t\toPanel = this.createPanel(info, moreInfo);\r\n\t\toPanel.render();\r\n\t\tthis.resize();\r\n\t\tthis.isModifyingPanels = false;\r\n\t},\r\n\r\n\t/**\r\n\t* Finds and returns the panel index of the passed-in control. Returns `-1` if\r\n\t* panel is not found.\r\n\t*\r\n\t* @param {Object} oControl - A control to look for.\r\n\t* @return {Number} Panel index of control, or `-1` if panel is not found.\r\n\t* @public\r\n\t*/\r\n\tgetPanelIndex: function (oControl) {\r\n\t\tvar oPanel = null;\r\n\r\n\t\twhile (oControl && oControl.parent) {\r\n\t\t\t// Parent of a panel can be a client or a panels.\r\n\t\t\tif (oControl.parent === this.$.client || oControl.parent === this) {\r\n\t\t\t\toPanel = oControl;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\toControl = oControl.parent;\r\n\t\t}\r\n\r\n\t\tif (oPanel) {\r\n\t\t\tfor (var n=0; n<this.getPanels().length; n++) {\r\n\t\t\t\tif (this.getPanels()[n] == oPanel) {\r\n\t\t\t\t\treturn n;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t},\r\n\r\n\t/**\r\n\t* Returns `true` if the passed-in control is a child panel of this Panels instance.\r\n\t*\r\n\t* @param {Object} control - A panel control.\r\n\t* @return {Boolean} `true` if the specified control is a child panel of this Panels\r\n\t* instance.\r\n\t* @public\r\n\t*/\r\n\tisPanel: function (control) {\r\n\t\tfor (var n=0; n<this.getPanels().length; n++) {\r\n\t\t\tif (this.getPanels()[n] == control) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trefresh: function () {\r\n\t\tif (this.isMoonAnimatorUsed) {\r\n\t\t\tfor(var k in this.$.animator.configs) {\r\n\t\t\t\tthis.fractions[k] = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tPanels.prototype.refresh.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstep: function (sender) {\r\n\t\tif (this.isMoonAnimatorUsed) {\r\n\t\t\tfor(var k in this.$.animator.configs) {\r\n\t\t\t\tthis.fractions[k] = sender.values[k];\r\n\t\t\t}\r\n\t\t}\r\n\t\tPanels.prototype.step.apply(this, arguments);\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstepTransition: function () {\r\n\t\tif (!this.hasNode()) return;\r\n\r\n\t\tif (this.isMoonAnimatorUsed) {\r\n\t\t\tthis.arrangement = this.arrangement ? this.arrangement : {};\r\n\t\t\tfor(var k in this.$.animator.configs) {\r\n\t\t\t\tthis.arrangement[k] = this.interpolatesArrangement(this.fractions[k]);\r\n\t\t\t}\r\n\t\t\tif (this.layout && this.arrangement.panel && this.arrangement.breadcrumb) {\r\n\t\t\t\tthis.layout.flowArrangement();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tPanels.prototype.stepTransition.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Interpolates between arrangements as needed.\r\n\t*\r\n\t* @param {Number} [fraction] - A value between 0 to 1.\r\n\t* @private\r\n\t*/\r\n\tinterpolatesArrangement: function (fraction) {\r\n\t\t// select correct transition points and normalize fraction.\r\n\t\tvar t$ = this.transitionPoints;\r\n\t\tvar r = (fraction || 0) * (t$.length-1);\r\n\t\tvar i = Math.floor(r);\r\n\t\tr = r - i;\r\n\t\tvar s = t$[i], f = t$[i+1];\r\n\t\t// get arrangements and lerp between them\r\n\t\tvar s0 = this.fetchArrangement(s);\r\n\t\tvar s1 = this.fetchArrangement(f);\r\n\t\treturn s0 && s1 ? Panels.lerp(s0, s1, r) : (s0 || s1);\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tPanels.prototype.create.apply(this, arguments);\r\n\t\tthis.set('animate', this.animate && MoonOptions.accelerate, true);\r\n\r\n\t\t// we need to ensure our handler has the opportunity to modify the flow during\r\n\t\t// initialization\r\n\t\tthis.showingChanged();\r\n\t\t// make other panel to spotlightDisabled without the initialPanel;\r\n\t\tthis.notifyPanels('initPanel');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitComponents: function () {\r\n\t\tthis.applyPattern();\r\n\t\tPanels.prototype.initComponents.apply(this, arguments);\r\n\t\tthis.isMoonAnimatorUsed = (this.$.animator instanceof MoonAnimator);\r\n\t\tthis.addBreadcrumb();\r\n\t\tthis.initializeShowHideHandle();\r\n\t\tthis.handleShowingChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trendered: function () {\r\n\t\tPanels.prototype.rendered.apply(this, arguments);\r\n\r\n\t\tthis.notifyBreadcrumbs('updateBreadcrumb');\r\n\r\n\t\t// Direct hide if not showing and using handle\r\n\t\tif (this.useHandle === true) {\r\n\t\t\tif (this.showing) {\r\n\t\t\t\tthis._directShow();\r\n\t\t\t} else {\r\n\t\t\t\tthis._directHide();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttapped: function (oSender, oEvent) {\r\n\t\tif (oEvent.originator === this.$.showHideHandle || this.pattern === 'none' ||\r\n\t\t\tthis.transitioning === true || this.isModifyingPanels === true) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// If tapped on breadcrambs area (which is located in the left side of panel)\r\n\t\tif (oEvent.originator === this.$.breadcrumbs) {\r\n\t\t\tif (this.showing && (this.useHandle === true) && this.handleShowing) {\r\n\t\t\t\tthis.hide();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// If tapped on breadcrumb, go to that panel\r\n\t\t\tif (oEvent.breadcrumbTap && oEvent.index !== this.getIndex()) {\r\n\t\t\t\tthis.setIndex(oEvent.index);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* This takes action when the CustomizeCloseButton event is received. It accepts several event\r\n\t* properties, and in their absence resets each to its original value.\r\n\t*\r\n\t* Values:\r\n\t*   x - (Number|String), positive or negative measurement to offset the X from its natural position.\r\n\t*       This value is automatically inverted in RtL mode.\r\n\t*   y - (Number|String), positive or negative measurement to offset the X from its natural position.\r\n\t*   properties {Object} An object containing key/value pairs to be `set` on the close button.\r\n\t*   For example, this can be used to set the `showing` property of the close button. If present\r\n\t*   and an object, the `styles` member will be iterated through and each style will be applied\r\n\t*   individually and those styles with a `null` value will be removed.\r\n\t*\r\n\t* Ex:\r\n\t*    this.doCustomizeCloseButton({parameters: {showing: false});\r\n\t*\r\n\t* @private\r\n\t*/\r\n\thandleCustomizeCloseButton: function (sender, ev) {\r\n\t\tif (this.$.appClose) {\r\n\t\t\tthis.$.appClose.handleCustomizeCloseButton.apply(this.$.appClose, arguments);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Given a direction and starting control, walks up the lineage chain until a suitable control to\r\n\t* spot has been found.\r\n\t*\r\n\t* @param {String} dir - The direction of movement.\r\n\t* @param {Object} control - The starting control.\r\n\t* @returns {Object} The target that should be spotted.\r\n\t* @private\r\n\t*/\r\n\tgetSpotlightTarget: function (dir, control) {\r\n\t\tvar ref = control,\r\n\t\t\ttarget,\r\n\t\t\tparent,\r\n\t\t\text;\r\n\r\n\t\t// Look at all of the NearestNeighbors up the lineage chain, until we find a good one.\r\n\t\twhile (!target) {\r\n\t\t\tif (!ref || ref instanceof Panel) break;\r\n\t\t\tparent = Spotlight.getParent(ref);\r\n\t\t\t// Add app close button as a child of Panel\r\n\t\t\tif (this.hasCloseButton && parent instanceof Panel) {\r\n\t\t\t\text = {extraCandidates: this.$.appClose};\r\n\t\t\t}\r\n\t\t\ttarget = Spotlight.NearestNeighbor.getNearestNeighbor(dir, ref, ext);\r\n\t\t\tref = parent;\r\n\t\t\text = null;\r\n\t\t}\r\n\r\n\t\treturn target;\r\n\t},\r\n\r\n\t/**\r\n\t* Considers whether or not the application close button should be spotted, and spots\r\n\t* accordingly, based on the given movement direction and originating control.\r\n\t*\r\n\t* @param {String} dir - The direction of movement.\r\n\t* @param {Object} orig - The originating control.\r\n\t* @returns {Boolean} If `true`, the application close button has been spotted; otherwise,\r\n\t*\t`false` is returned.\r\n\t* @private\r\n\t*/\r\n\tconsiderSpottingCloseButton: function (dir, orig) {\r\n\t\tvar target;\r\n\r\n\t\ttarget = this.getSpotlightTarget(dir, orig);\r\n\r\n\t\tif (target && target.parent instanceof ApplicationCloseButton) {\r\n\t\t\tSpotlight.spot(target);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightUp: function (sender, ev) {\r\n\t\treturn this.considerSpottingCloseButton('UP', ev.originator);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightDown: function (sender, ev) {\r\n\t\treturn this.considerSpottingCloseButton('DOWN', ev.originator);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightLeft: function (sender, ev) {\r\n\t\tif (!this.preventKeyNavigation && !this.leftKeyToBreadcrumb && this.toIndex !== null) {\r\n\t\t\tthis.queuedIndex = this.toIndex - 1;\r\n\t\t\t//queuedIndex could have out boundary value. It will be managed in setIndex()\r\n\t\t}\r\n\t\tvar orig = ev.originator,\r\n\t\t\tidx = this.getPanelIndex(orig);\r\n\r\n\t\tif (this.considerSpottingCloseButton('LEFT', orig)) {\r\n\t\t\treturn true;\r\n\t\t} else if (orig instanceof Panel) {\r\n\t\t\tif (idx === 0) {\r\n\t\t\t\tif (!this.preventKeyNavigation && this.showing && (this.useHandle === true)\r\n\t\t\t\t\t\t&& this.handleShowing) {\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t} else if (!this.leftKeyToBreadcrumb) {\r\n\t\t\t\tif (!this.preventKeyNavigation) {\r\n\t\t\t\t\tthis.previous();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tSpotlight.spot(Spotlight.getLastControl());\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t} else if (sender instanceof ApplicationCloseButton && this.$.breadcrumbs) {\r\n\t\t\t\tSpotlight.spot(this.$.breadcrumbs);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightRight: function (sender, ev) {\r\n\t\tif (!this.preventKeyNavigation && this.toIndex !== null) {\r\n\t\t\tthis.queuedIndex = this.toIndex + 1;\r\n\t\t\t//queuedIndex could have out boundary value. It will be managed in setIndex()\r\n\t\t}\r\n\t\tvar orig = ev.originator,\r\n\t\t\tidx = this.getPanelIndex(orig),\r\n\t\t\tnext = this.getPanels()[idx + 1];\r\n\r\n\t\tif (this.considerSpottingCloseButton('RIGHT', orig)) {\r\n\t\t\treturn true;\r\n\t\t} else if (next && orig instanceof Panel) {\r\n\t\t\tif (this.useHandle === true && this.handleShowing && idx == this.index) {\r\n\t\t\t\tSpotlight.spot(this.$.showHideHandle);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!this.preventKeyNavigation) {\r\n\t\t\t\t\tthis.next();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightFromCloseButton: function (sender, ev) {\r\n\t\tvar p = this.getActive(),\r\n\t\t\tidx = this.getPanelIndex(p),\r\n\t\t\tdirection = ev.type.substring(11).toUpperCase(),\t\t// Derive direction from type\r\n\t\t\ttarget = Spotlight.NearestNeighbor.getNearestNeighbor(direction, ev.originator, {root: p});\r\n\r\n\t\tif (target) {\r\n\t\t\tSpotlight.spot(target);\r\n\t\t\treturn true;\r\n\t\t} else if (direction == 'RIGHT') {\r\n\t\t\tif (this.useHandle === true && this.handleShowing && idx == this.index) {\r\n\t\t\t\tSpotlight.spot(this.$.showHideHandle);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t} else if (direction == 'LEFT') {\r\n\t\t\tthis.spotlightLeft(sender, {originator: p});\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightFocus: function (oSender, oEvent) {\r\n\t\tvar orig = oEvent.originator;\r\n\t\tvar idx = this.getPanelIndex(orig);\r\n\t\tif (orig.owner === this.$.appClose) {\r\n\t\t\tSpotlight.Container.setLastFocusedChild(this.getActive(), orig);\r\n\t\t}\r\n\t\tif (this.index !== idx && idx !== -1) {\r\n\t\t\tthis.setIndex(idx);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Responds to tap on show/hide handle.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\thandleTap: function () {\r\n\t\tthis.setShowing(!this.showing);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleSpotLeft: function () {\r\n\t\tif (this.showing) {\r\n\t\t\tSpotlight.spot(this.getActive());\r\n\t\t} else {\r\n\t\t\tSpotlight.unspot();\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleSpotRight: function (sender, event) {\r\n\t\tif (this.showing) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleBlur: function (sender, event) {\r\n\t\tif (this.isHandleFocused) {\r\n\t\t\tthis.set('isHandleFocused', false);\r\n\t\t\tif (!Spotlight.getPointerMode()) {\r\n\t\t\t\tif (!this.showing) {\r\n\t\t\t\t\tthis.sendPanelsHiddenSignal();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.resetHandleAutoHide();\r\n\t\tif (!this.showing) {\r\n\t\t\tSignals.send('onPanelsHandleBlurred');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsendPanelsHiddenSignal: function () {\r\n\t\tSignals.send('onPanelsHidden', {panels: this});\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tresetHandleAutoHide: function (sender, event) {\r\n\t\tthis.startJob('autoHide', 'stashHandle', this.getAutoHideTimeout());\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstopHandleAutoHide: function (sender, event) {\r\n\t\tthis.stopJob('autoHide');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstashHandle: function () {\r\n\t\tthis.$.showHideHandle.addRemoveClass('stashed', !this.showing);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tunstashHandle: function () {\r\n\t\tthis.stopHandleAutoHide();\r\n\t\tthis.$.showHideHandle.removeClass('stashed');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleFocused: function () {\r\n\t\tthis.unstashHandle();\r\n\t\tthis.startJob('autoHide', 'handleSpotLeft', this.getAutoHideTimeout());\r\n\t\tthis.set('isHandleFocused', true);\r\n\t\tSignals.send('onPanelsHandleFocused');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleShowingChanged: function () {\r\n\t\t//* show handle only when useHandle is true\r\n\t\tif (this.useHandle !== true) { return; }\r\n\t\tthis.$.showHideHandle.addRemoveClass('hidden', !this.handleShowing);\r\n\t\tthis.$.showHideHandle.spotlight = this.handleShowing;\r\n\t},\r\n\r\n\t/**\r\n\t* Called when focus enters one of the panels. If currently hiding and\r\n\t* `this.useHandle` is `true`, shows handle.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tonSpotlightPanelEnter: function () {\r\n\t\tif (!this.showing && (this.useHandle === true) && this.handleShowing ) {\r\n\t\t\tSpotlight.spot(this.$.showHideHandle);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the index of the active panel, possibly transitioning the panel into view.\r\n\t*\r\n\t* @param {number} index - Index of the panel to make active.\r\n\t* @public\r\n\t*/\r\n\tsetIndex: function (index) {\r\n\t\tvar willAnimate = this.shouldAnimate();\r\n\r\n\t\t// Normally this.index cannot be smaller than 0 and larger than panels.length\r\n\t\t// However, if panels uses handle and there is sequential key input during transition\r\n\t\t// then index could have -1. It means that panels will be hidden.\r\n\t\tif (this.toIndex === null || this.useHandle === false) {\r\n\t\t\tindex = this.clamp(index);\r\n\t\t}\r\n\r\n\t\tif (index === this.index || this.toIndex != null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar panels, toPanel;\r\n\r\n\t\t// Clear before start\r\n\t\tthis.queuedIndex = null;\r\n\t\tthis._willMove = null;\r\n\r\n\t\t// Set indexes before notify panels\r\n\t\tthis.fromIndex = this.index;\r\n\t\tthis.toIndex = index;\r\n\r\n\t\t// Turn on the close-x so it's ready for the next panel; if hasCloseButton is true\r\n\t\t// and remove spottability of close button during transitions.\r\n\t\tif (this.$.appClose) {\r\n\t\t\tif (this.hasNode()) this.$.appClose.customizeCloseButton({'spotlight': false});\r\n\t\t\tthis.$.appClose.set('showing', this.hasCloseButton);\r\n\t\t}\r\n\t\tthis.notifyPanels('initPanel');\r\n\t\tthis.notifyBreadcrumbs('updateBreadcrumb');\r\n\r\n\t\t// Ensure any VKB is closed when transitioning panels\r\n\t\tthis.blurActiveElementIfHiding(index);\r\n\r\n\t\tif (this.cacheViews) {\r\n\t\t\tpanels = this.getPanels();\r\n\t\t\ttoPanel = panels[this.toIndex];\r\n\r\n\t\t\tif (!toPanel.generated) {\r\n\t\t\t\tif (this.toIndex < this.fromIndex) toPanel.addBefore = panels[this.fromIndex];\r\n\t\t\t\ttoPanel.render();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// If panels will move for this index change, kickoff animation. Otherwise skip it.\r\n\t\tif (willAnimate) {\r\n\t\t\tSpotlight.mute(this);\r\n\t\t\tthis.startTransition();\r\n\t\t\tthis.addClass('transitioning');\r\n\t\t}\r\n\r\n\t\tthis._setIndex(this.toIndex);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tblurActiveElementIfHiding: function (index) {\r\n\t\tvar activeElement = document.activeElement,\r\n\t\t\tactiveComponent = activeElement ? dispatcher.$[activeElement.id] : null,\r\n\t\t\tpanels = this.getPanels(),\r\n\t\t\tpanel,\r\n\t\t\tpanelInfo;\r\n\t\tif (activeComponent) {\r\n\t\t\tfor (var i = 0; i < panels.length; i++) {\r\n\t\t\t\tpanel = panels[i];\r\n\t\t\t\tif (activeComponent.isDescendantOf(panel)) {\r\n\t\t\t\t\tpanelInfo = this.getTransitionInfo(i, index);\r\n\t\t\t\t\tif (panelInfo.isOffscreen) {\r\n\t\t\t\t\t\tdocument.activeElement.blur();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Returns `true` if the panels should animate in the transition from `fromIndex` to\r\n\t* `toIndex`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshouldAnimate: function () {\r\n\t\tif (this._willMove === null) {\r\n\t\t\t/*jshint -W093 */\r\n\t\t\treturn (this._willMove = this.animate && this.shouldArrange() && this.getAbsoluteShowing());\r\n\t\t\t/*jshint +W093 */\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn this._willMove;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Returns `true` if any panels will move in the transition from `fromIndex` to `toIndex`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshouldArrange: function () {\r\n\t\treturn this.layout.shouldArrange ? this.layout.shouldArrange(this.fromIndex, this.toIndex) : true;\r\n\t},\r\n\r\n\t/**\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_setIndex: function (index) {\r\n\t\tvar prev = this.get('index');\r\n\t\tthis.index = this.clamp(index);\r\n\t\t// Accessibility - Before reading the focused item, it must have a alert role for reading the title,\r\n\t\t// so setAlertRole() must be called before notifyObservers('index', prev, index).\r\n\t\tif (MoonOptions.accessibility) {\r\n\t\t\tthis.setAlertRole();\r\n\t\t}\r\n\t\tthis.notifyObservers('index', prev, index);\r\n\t},\r\n\r\n\t/**\r\n\t* Called when the arranger animation completes.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tanimationEnded: function () {\r\n\t\tif (this.animate) {\r\n\t\t\tthis.removeClass('transitioning');\r\n\t\t\tthis.completed();\r\n\t\t} else {\r\n\t\t\tPanels.prototype.animationEnded.apply(this, arguments);\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetTransitionInfo: function (inPanelIndex) {\r\n\t\tvar to = (this.toIndex || this.toIndex === 0) ? this.toIndex : this.index,\r\n\t\t\tinfo = {};\r\n\t\tinfo.isOffscreen = (inPanelIndex != to);\r\n\t\tinfo.from = this.fromIndex;\r\n\t\tinfo.to = this.toIndex;\r\n\t\tinfo.index = inPanelIndex;\r\n\t\tinfo.animate = this.animate;\r\n\t\treturn info;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetBreadcrumbPositionInfo: function (bounds, containerBounds) {\r\n\t\tvar right = bounds ? bounds.right : null,\r\n\t\t\tleft = bounds ? bounds.left : null,\r\n\t\t\tpanelEdge = containerBounds ? containerBounds.right : null;\r\n\r\n\t\treturn {isOffscreen: (right == null || left == null || panelEdge == null || right <= 0 || left >= panelEdge)};\r\n\t},\r\n\r\n\t/**\r\n\t* Set index to breadcrumb to display number\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tassignBreadcrumbIndex: function() {\r\n\t\tvar range = this.getBreadcrumbRange(),\r\n\t\t\tcontrol, i;\r\n\r\n\t\tif (this.pattern != 'none') {\r\n\t\t\tfor (i=range.start; i<range.end; i++) {\r\n\t\t\t\tcontrol = this.getBreadcrumbForIndex(i);\r\n\t\t\t\tcontrol.set('index', i);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taddBreadcrumb: function (forceRender) {\r\n\t\tif (this.pattern == 'none' || !this.$.breadcrumbs) return;\r\n\r\n\t\t// If we have 1 panel then we don't need breadcrumb.\r\n\t\t// If we have more then 1 panel then we need panel - 1 number of breadcrumbs.\r\n\t\t// But, if we can only see 1 breadcrumb on screen like activity pattern\r\n\t\t// then we need 2 breadcrumbs to show animation.\r\n\t\tvar len = Math.max(2, Math.min(this.getPanels().length-1, this.getBreadcrumbMax()+1)),\r\n\t\t\tdefs = [],\r\n\t\t\tprevLen = this.getBreadcrumbs().length,\r\n\t\t\tbreadcrumbs, i;\r\n\r\n\t\tfor(i=0; i<len-prevLen; i++) {\r\n\t\t\tdefs[i] = {kind: Breadcrumb};\r\n\t\t}\r\n\t\tthis.$.breadcrumbs.createComponents(defs, {owner: this});\r\n\t\tif (forceRender) {\r\n\t\t\tbreadcrumbs = this.getBreadcrumbs();\r\n\t\t\tfor (i=prevLen; i<len; i++) {\r\n\t\t\t\tbreadcrumbs[i].render();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tremoveBreadcrumb: function () {\r\n\t\tif (this.pattern == 'none' || !this.$.breadcrumbs) return;\r\n\r\n\t\t// If we have 1 panel then we don't need breadcrumb.\r\n\t\t// If we have more then 1 panel then we need panel - 1 number of breadcrumbs.\r\n\t\t// But, if we can only see 1 breadcrumb on screen like activity pattern\r\n\t\t// then we need 2 breadcrumbs to show animation.\r\n\t\tvar len = Math.max(2, Math.min(this.getPanels().length-1, this.getBreadcrumbMax()+1));\r\n\r\n\t\t// If we have more than the number of necessary breadcrumb then destroy.\r\n\t\twhile (this.getBreadcrumbs().length > len) {\r\n\t\t\tthis.getBreadcrumbs()[this.getBreadcrumbs().length-1].destroy();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Assign direction property on animator to select proper timing function.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgetDirection: function() {\r\n\t\treturn  (this.fromIndex == this.toIndex) ? 'none' :\r\n\t\t\t\t(this.fromIndex < this.toIndex) ? 'forward' : 'backward';\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tadjustFirstPanelBeforeTransition: function() {\r\n\t\tvar idx = this.index,\r\n\t\t\tfrom = this.fromIndex,\r\n\t\t\ttrans = this.transitioning;\r\n\t\tif (this.pattern == 'activity') {\r\n\t\t\t// Show breadcrumbs if we're landing on any panel besides the first\r\n\t\t\tthis.$.breadcrumbs.set('showing', idx > 0);\r\n\t\t\t// Adjust viewport to show full-width panel if we're landing on OR transitioning from the first panel\r\n\t\t\tthis.addRemoveClass('first', idx === 0 || (trans && from === 0));\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tadjustFirstPanelAfterTransition: function() {\r\n\t\t// Keep viewport adjusted for full-width panel only if we've landed on the first panel\r\n\t\tif (this.pattern == 'activity' && this.index !== 0) {\r\n\t\t\tthis.removeClass('first');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* When index changes, make sure to update the breadcrumbed panel's `spotlight` property\r\n\t* (to avoid {@glossary Spotlight} issues).\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tindexChanged: function (was) {\r\n\t\tvar current, delta, deltaAbs, idx;\r\n\r\n\t\tthis.adjustFirstPanelBeforeTransition();\r\n\r\n\t\tif (this.getPanels().length > 0) {\r\n\t\t\tthis.assignBreadcrumbIndex();\r\n\r\n\t\t\t// Set animation direction to use proper timing function before start animation\r\n\t\t\t// This direction is only consumed by MoonAnimator.\r\n\t\t\tthis.$.animator.direction = this.getDirection();\r\n\r\n\t\t\t// Push or drop history, based on the direction of the index change\r\n\t\t\tif (this.allowBackKey) {\r\n\t\t\t\twas = was || 0;\r\n\t\t\t\tdelta = this.index - was;\r\n\t\t\t\tdeltaAbs = Math.abs(delta);\r\n\r\n\t\t\t\tif (delta > 0) {\r\n\t\t\t\t\tfor (idx = 0; idx < deltaAbs; idx++) {\r\n\t\t\t\t\t\tthis.pushBackHistory(idx + was);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcurrent = EnyoHistory.peek();\r\n\r\n\t\t\t\t\t// ensure we have history to drop - if the first history entry's index corresponds\r\n\t\t\t\t\t// to the index prior to our current index, we assume the other entries exist\r\n\t\t\t\t\tif (current && current.index + 1 == was) {\r\n\t\t\t\t\t\tEnyoHistory.drop(deltaAbs);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tPanels.prototype.indexChanged.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnotifyPanels: function (method) {\r\n\t\tvar panels = this.getPanels(),\r\n\t\t\tpanel, info, i;\r\n\t\tfor (i = 0; (panel = panels[i]); i++) {\r\n\t\t\tinfo = this.getTransitionInfo(i);\r\n\t\t\tif (panel[method]) {\r\n\t\t\t\tpanel[method](info);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnotifyBreadcrumbs: function (method) {\r\n\t\tif (this.pattern == 'none' || !this.$.breadcrumbs) return;\r\n\r\n\t\tvar range = this.getBreadcrumbRange(),\r\n\t\t\tcontainerBounds = this.$.breadcrumbs.getAbsoluteBounds(),\r\n\t\t\tcontrol, bounds, info, i;\r\n\t\tfor (i=range.start; i<range.end; i++) {\r\n\t\t\tcontrol = this.getBreadcrumbForIndex(i);\r\n\t\t\tbounds = control.getAbsoluteBounds();\r\n\t\t\tinfo = this.getBreadcrumbPositionInfo(bounds, containerBounds);\r\n\t\t\tif (control[method]) {\r\n\t\t\t\tcontrol[method](info);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tprocessPanelsToRemove: function(fromIndex, toIndex) {\r\n\t\tvar direction = toIndex < fromIndex ? -1 : 1,\r\n\t\t\tremoveFrom;\r\n\r\n\t\t// Remove panels that are no longer on screen\r\n\t\tif (this.cacheViews || (direction < 0 && this.popOnBack)) {\r\n\t\t\tremoveFrom = toIndex - direction;\r\n\t\t\tthis.popPanels(removeFrom, direction);\r\n\t\t}\r\n\t},\r\n\r\n\tprocessQueuedKey: function() {\r\n\t\t// queuedIndex becomes -1 when left key input is occurred\r\n\t\t// during transition from index 1 to 0.\r\n\t\t// We can hide panels if we use handle.\r\n\t\tif (this.queuedIndex === -1 && this.useHandle) {\r\n\t\t\tthis.hide();\r\n\t\t} else if (this.queuedIndex !== null) {\r\n\t\t\tthis.setIndex(this.queuedIndex);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tfinishTransition: function () {\r\n\t\tvar fromIndex = this.fromIndex,\r\n\t\t\ttoIndex = this.toIndex;\r\n\r\n\t\tthis.adjustFirstPanelAfterTransition();\r\n\t\tthis.notifyPanels('transitionFinished');\r\n\t\tthis.notifyBreadcrumbs('updateBreadcrumb');\r\n\t\tPanels.prototype.finishTransition.apply(this, arguments);\r\n\t\tthis.processPanelsToRemove(fromIndex, toIndex);\r\n\t\tthis.processQueuedKey();\r\n\t\tSpotlight.unmute(this);\r\n\t\tSpotlight.spot(this.getActive());\r\n\t\tthis.$.appClose && this.$.appClose.customizeCloseButton({'spotlight': true});  // Restore spotlightability of close button.\r\n\t},\r\n\r\n\t/**\r\n\t* Override the default `getShowing()` behavior to avoid setting `this.showing` based on the\r\n\t* CSS `display` property.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgetShowing: function () {\r\n\t\treturn this.showing;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowingChanged: function (inOldValue) {\r\n\t\t// Accessibility - Before reading the focused item, it must have a alert role for reading the title,\r\n\t\t// so setAlertRole() must be called before Spotlight.spot\r\n\t\tif (MoonOptions.accessibility) {\r\n\t\t\tthis.setAlertRole();\r\n\t\t}\r\n\t\tif (this.$.backgroundScrim) {\r\n\t\t\tthis.$.backgroundScrim.addRemoveClass('visible', this.showing);\r\n\t\t}\r\n\t\tif (this.useHandle === true) {\r\n\t\t\tif (this.showing) {\r\n\t\t\t\tthis.unstashHandle();\r\n\t\t\t\tthis._show();\r\n\t\t\t\tSpotlight.spot(this.getActive());\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// in this case, our display flag will have been set to none so we need to clear\r\n\t\t\t\t// that even though the showing flag will remain false\r\n\t\t\t\tthis.applyStyle('display', null);\r\n\t\t\t\tthis.resetHandleAutoHide();\r\n\t\t\t\tthis._hide();\r\n\t\t\t}\r\n\t\t\tthis.sendShowingChangedEvent(inOldValue);\r\n\r\n\t\t\tif (this.$.appClose) this.$.appClose.set('showing', (this.showing && this.hasCloseButton));\r\n\t\t}\r\n\t\telse {\r\n\t\t\tPanels.prototype.showingChanged.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tapplyPattern: function () {\r\n\t\tif (this.pattern != 'alwaysviewing') {\r\n\t\t\tthis.createChrome(this.applicationTools);\r\n\t\t\tthis.hasCloseButtonChanged();\r\n\t\t}\r\n\t\tswitch (this.pattern) {\r\n\t\tcase 'alwaysviewing':\r\n\t\tcase 'activity':\r\n\t\t\tthis.addClass(this.pattern);\r\n\t\t\tthis.useHandle = (this.useHandle === 'auto') ? (this.pattern == 'activity' ? false : true) : this.useHandle;\r\n\t\t\tthis.createChrome(this.handleTools);\r\n\t\t\tthis.tools = this.animatorTools;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tthis.useHandle = false;\r\n\t\t\tthis.createChrome([{name: 'client', kind: Control, tag: null}]);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitializeShowHideHandle: function () {\r\n\t\tif (this.useHandle === true) {\r\n\t\t\tthis.$.showHideHandle.canGenerate = true;\r\n\t\t\tthis.$.showHideHandle.spotlight = true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Shows panels with transition from right.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_show: function () {\r\n\t\tvar init = false;\r\n\t\tif (!this.hasNode()) {\r\n\t\t\tinit = true;\r\n\t\t} else {\r\n\t\t\tthis.$.showHideHandle.addClass('right');\r\n\t\t\tthis.applyShowAnimation();\r\n\t\t}\r\n\t\tSignals.send('onPanelsShown', {initialization: init, panels: this});\r\n\t},\r\n\r\n\t/**\r\n\t* Hides panels with transition to right.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_hide: function () {\r\n\t\tif (!this.hasNode()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.$.showHideHandle.removeClass('right');\r\n\t\tthis.applyHideAnimation();\r\n\t\tthis.sendPanelsHiddenSignal();\r\n\t},\r\n\r\n\t/**\r\n\t* Sets show state without animation.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_directShow: function () {\r\n\t\tthis.$.showHideHandle.addClass('right');\r\n\t\tif (this.handleShowing) {\r\n\t\t\tthis.$.showHideHandle.removeClass('hidden');\r\n\t\t}\r\n\t\tthis.applyShowAnimation(true);\r\n\t},\r\n\r\n\t/**\r\n\t* Sets hide state without animation.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_directHide: function () {\r\n\t\tthis.$.showHideHandle.addClass('hidden');\r\n\t\tthis.$.showHideHandle.removeClass('right');\r\n\t\tthis.applyHideAnimation(true);\r\n\t\tthis.hideAnimationComplete();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tapplyShowAnimation: function (direct) {\r\n\t\tthis.$.clientWrapper.applyStyle('transition', direct ? null : 'transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1)');\r\n\t\tthis.$.clientWrapper.applyStyle('-webkit-transition', direct ? null : '-webkit-transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1)');\r\n\t\tdom.transform(this.$.clientWrapper, {translateX: 0});\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tapplyHideAnimation: function (direct) {\r\n\t\tthis.$.clientWrapper.applyStyle('transition', direct ? null : 'transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1)');\r\n\t\tthis.$.clientWrapper.applyStyle('-webkit-transition', direct ? null : '-webkit-transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1)');\r\n\t\tdom.transform(this.$.clientWrapper, {translateX: '100%'});\r\n\t},\r\n\r\n\t/**\r\n\t* Hide/show animation complete.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshowHideAnimationComplete: function (sender, event) {\r\n\t\tswitch (event.animation.name) {\r\n\t\tcase 'show':\r\n\t\t\tthis.showAnimationComplete();\r\n\t\t\treturn true;\r\n\t\tcase 'hide':\r\n\t\t\tthis.hideAnimationComplete();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowAnimationComplete: function () {\r\n\t\tif (this.handleShowing) {\r\n\t\t\tthis.$.showHideHandle.removeClass('hidden');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thideAnimationComplete: function () {\r\n\t\tif (this.handleShowing) {\r\n\t\t\tthis.$.showHideHandle.removeClass('hidden');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tanimateChanged: function () {\r\n\t\tthis.addRemoveClass('moon-composite', this.animate);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbackKeyHandler: function (entry) {\r\n\t\tvar index = entry.index;\r\n\r\n\t\tif (this.transitioning) this.queuedIndex = index;\r\n\t\telse this.setIndex(index);\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thasCloseButtonChanged: function () {\r\n\t\tif (!this.$.appClose) return;\r\n\t\tthis.$.appClose.set('showing', (this.showing && this.hasCloseButton));\r\n\t\tthis.addRemoveClass('has-close-button', this.hasCloseButton);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpushBackHistory: function (index) {\r\n\t\tEnyoHistory.push({\r\n\t\t\tcontext: this,\r\n\t\t\thandler: this.backKeyHandler,\r\n\t\t\tindex: index\r\n\t\t});\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t// If panels is hidden and panelsHandle is spotlight blured, also make panelsHandle's dom blur.\r\n\t\t{path: 'isHandleFocused', method: function () {\r\n\t\t\tif (this.$.showHideHandle && this.$.showHideHandle.hasNode() && !this.isHandleFocused) {\r\n\t\t\t\tthis.$.showHideHandle.hasNode().blur();\r\n\t\t\t}\r\n\t\t}}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetAlertRole: function () {\r\n\t\tvar panels = this.getPanels(),\r\n\t\t\tactive = this.getActive(),\r\n\t\t\tl = panels.length,\r\n\t\t\tpanel;\r\n\r\n\t\tif (this.$.showHideHandle) {\r\n\t\t\tif (active && active.title) {\r\n\t\t\t\tthis.$.showHideHandle.set('accessibilityLabel', (this.showing ? $L('Close') : $L('Open')) + ' ' + active.title);\r\n\t\t\t} else {\r\n\t\t\t\tthis.$.showHideHandle.set('accessibilityLabel', this.showing ? $L('Close') : $L('Open'));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\twhile (--l >= 0) {\r\n\t\t\tpanel = panels[l];\r\n\t\t\tif (panel instanceof Panel && panel.title) {\r\n\t\t\t\tpanel.set('accessibilityRole', (panel === active) && this.get('showing') ? 'alert' : 'region');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/ExpandableListItem~ExpandableListItem} kind.\r\n* @module moonstone/ExpandableListItem\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tComponent = require('enyo/Component'),\r\n\tControl = require('enyo/Control'),\r\n\tEnyoHistory = require('enyo/History'),\r\n\tGroup = require('enyo/Group');\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\nvar\r\n\tHistorySupport = require('../HistorySupport'),\r\n\tItem = require('../Item');\r\n\r\nvar\r\n\tExpandableListItemHeader = require('./ExpandableListItemHeader'),\r\n\tExpandableListItemDrawer = require('./ExpandableListItemDrawer');\r\n\r\n/**\r\n* {@link module:moonstone/ExpandableListItem~ExpandableListItem}, which extends {@link module:moonstone/Item~Item}, displays a header\r\n* while also allowing additional content to be stored in an {@link module:enyo/Drawer~Drawer}. When\r\n* the header is selected, the drawer opens below. To close the drawer, tap on the\r\n* header text or navigate (via 5-way) back to the top of the drawer.\r\n*\r\n* The control's child components may be of any kind; by default, they are\r\n* instances of `moonstone/Item`.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tExpandableListItem = require('moonstone/ExpandableListItem');\r\n*\r\n* \t{kind: ExpandableListItem, content: 'A Countries', components: [\r\n* \t\t{content: 'Algeria'},\r\n* \t\t{content: 'Argentina'},\r\n* \t\t{content: 'Australia'}\r\n* \t]},\r\n* \t{kind: ExpandableListItem, content: 'B Countries', components: [\r\n* \t\t{content: 'Belgium'},\r\n* \t\t{content: 'Bolivia'},\r\n* \t\t{content: 'Brazil'}\r\n* \t]}\r\n* ```\r\n*\r\n* When multiple ExpandableListItems are used in a group, only one may be open at\r\n* a given time.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tGroup = require('enyo/Group'),\r\n* \t\tExpandableListItem = require('moonstone/ExpandableListItem');\r\n*\r\n* \t{kind: Group, highlander: true, components: [\r\n* \t\t{kind: ExpandableListItem,  open: true,\r\n* \t\t\tcontent: 'This is a grouped ExpandableListItem', components: [\r\n* \t\t\t\t{content: 'Item One'},\r\n* \t\t\t\t{content: 'Item Two'}\r\n* \t\t]\r\n* \t},\r\n* \t{kind: ExpandableListItem,\r\n* \t\tcontent: 'This is another grouped ExpandableListItem', components: [\r\n* \t\t\t{content: 'Item Three'},\r\n* \t\t\t{content: 'Item Four'}\r\n* \t\t]\r\n* \t},\r\n* \t{kind: ExpandableListItem,\r\n* \t\tcontent: 'This is yet another grouped ExpandableListItem', components: [\r\n* \t\t\t{content: 'Item Five'},\r\n* \t\t\t{content: 'Item Six'}\r\n* \t\t]\r\n* \t}\r\n* ```\r\n*\r\n* @class ExpandableListItem\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/ExpandableListItem~ExpandableListItem.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ExpandableListItem',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [HistorySupport],\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/ExpandableListItem~ExpandableListItem.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* If `true`, the drawer automatically closes when the user navigates to the top of the\r\n\t\t* control; if `false`, the user must select/tap the header to close the drawer.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tautoCollapse: false,\r\n\r\n\t\t/**\r\n\t\t* If `true`, the drawer is expanded, showing this item's contents. Use this property\r\n\t\t* (rather than [active]{@link module:moonstone/ExpandableListItem~ExpandableListItem#active}) to set the item's\r\n\t\t* initial state.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\topen: false,\r\n\r\n\t\t/**\r\n\t\t* Boolean that reflects the value of the [open]{@link module:moonstone/ExpandableListItem~ExpandableListItem#open}\r\n\t\t* property; it is used to support the {@link module:enyo/Group~Group} API for grouping a set of\r\n\t\t* ExpandableListItems in which only one is expanded at a time. Note that the `open`\r\n\t\t* property (not the `active` property) controls the initial state of the picker.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tactive: false,\r\n\r\n\t\t/**\r\n\t\t* If `true`, the user is prevented from moving {@glossary Spotlight} past the bottom\r\n\t\t* of the drawer (when open) using 5-way controls.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tlockBottom: false,\r\n\r\n\t\t/**\r\n\t\t* If `true`, item is shown as disabled and does not generate tap events.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdisabled: false\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-expandable-list-item',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: 'container',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdefaultKind: Item,\r\n\r\n\t/**\r\n\t* This is used to track whether or not we have pushed a history entry for ourselves.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\thasHistoryEntry: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonSpotlightContainerEnter: 'addHistoryEntry',\r\n\t\tonSpotlightContainerLeave: 'removeHistoryEntry'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdrawerComponents: [\r\n\t\t{name: 'client', kind: Group, tag: null}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'header', kind: ExpandableListItemHeader, ontap: 'headerTapped'},\r\n\t\t{name: 'drawer', kind: ExpandableListItemDrawer, resizeContainer: false, classes: 'moon-expandable-list-item-client', defaultSpotlightUp: 'header', onSpotlightUp: 'drawerSpotUp', onSpotlightDown: 'drawerSpotDown', onDrawerAnimationEnd: 'drawerAnimationEnd'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: 'active', to: 'open'},\r\n\t\t{from: 'allowHtml', to: '$.header.allowHtml'},\r\n\t\t{from: 'disabled', to: '$.header.disabled'},\r\n\t\t{from: 'content', to: '$.header.label'},\r\n\t\t{from: 'currentValueShowing', to: '$.header.textShowing'},\r\n\t\t{from: 'currentValueText', to: '$.header.text'},\r\n\r\n\t\t// Accessibility\r\n\t\t{from: 'accessibilityHint', to: '$.header.accessibilityHint'},\r\n\t\t{from: 'accessibilityLabel', to: '$.header.accessibilityLabel'},\r\n\t\t{from: 'accessibilityDisabled', to: '$.header.accessibilityDisabled'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomputed: {\r\n\t\t'currentValueShowing': ['open', 'currentValueText'],\r\n\t\t'currentValueText': ['value']\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tthis.openChanged();\r\n\t\tthis.disabledChanged();\r\n\t\tthis.notifyObservers('value');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitComponents: function () {\r\n\t\tvar override = {drawer: {components: this.drawerComponents}};\r\n\t\tthis.kindComponents = Component.overrideComponents(this.kindComponents, override);\r\n\t\tControl.prototype.initComponents.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* Facade for drawer.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\topenChanged: function () {\r\n\t\tvar open = this.open;\r\n\t\tthis.bubble('onActivate', {allowHighlanderDeactivate: true});\r\n\t\tthis.addRemoveClass('open', open);\r\n\t\tthis.$.drawer.set('open', open);\r\n\t\tthis.$.drawer.spotlightDisabled = !open;\r\n\t\tthis.set('active', open);\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:enyo/GroupItem~GroupItem#onActivate\r\n\t* @private\r\n\t*/\r\n\tactiveChanged: function () {\r\n\t\tthis.bubble('onActivate', {allowHighlanderDeactivate:true});\r\n\t\tthis.set('open', this.active);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdisabledChanged: function () {\r\n\t\tvar disabled = this.disabled;\r\n\r\n\t\tthis.addRemoveClass('disabled', disabled);\r\n\t\tif (disabled) {\r\n\t\t\tthis.set('active', false);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Returns `true` if the current value control should be displayed.\r\n\t*\r\n\t* Note: ExpandableListItem doesn't support currentValue but its subkinds do\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcurrentValueShowing: function () {\r\n\t\tvar text = this.get('currentValueText');\r\n\t\t// If drawer is open or value is blank, don't bother to show the value.\r\n\t\treturn (!this.open && (text || text === 0));\r\n\t},\r\n\r\n\t/**\r\n\t* Returns the text to be displayed within the current value control\r\n\t*\r\n\t* Note: ExpandableListItem doesn't support currentValue but its subkinds do\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcurrentValueText: function () {\r\n\t\treturn '';\r\n\t},\r\n\r\n\t/**\r\n\t* If closed, opens drawer and highlights first spottable child.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\texpandContract: function () {\r\n\t\tif (this.open) {\r\n\t\t\tthis.closeDrawerAndHighlightHeader();\r\n\t\t} else {\r\n\t\t\tthis.toggleActive();\r\n\t\t\tif (!Spotlight.getPointerMode() && !Spotlight.isFrozen()) {\r\n\t\t\t\tvar first = Spotlight.getFirstChild(this.$.drawer);\r\n\t\t\t\tSpotlight.spot(first);\r\n\t\t\t}\r\n\t\t\t// As we could have entered the expandable when it was closed, we need to explicitly add\r\n\t\t\t// the history entry when it is opened.\r\n\t\t\tthis.addHistoryEntry();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttoggleActive: function () {\r\n\t\tthis.set('active', !this.open);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcloseDrawerAndHighlightHeader: function () {\r\n\t\tvar current = Spotlight.getPointerMode() ? Spotlight.getLastControl() : Spotlight.getCurrent();\r\n\r\n\t\tthis.removeHistoryEntry();\r\n\r\n\t\t// If the spotlight is elsewhere, we don't want to hijack it (e.g. after the delay in\r\n\t\t// ExpandablePicker)\r\n\t\tif (!current || current.isDescendantOf(this)) {\r\n\t\t\tSpotlight.spot(this.$.header);\r\n\t\t}\r\n\t\tthis.set('active', false);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdrawerSpotUp: function (sender, ev) {\r\n\t\tif (this.autoCollapse && ev.originator == this.$.drawer) {\r\n\t\t\tthis.closeDrawerAndHighlightHeader();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdrawerSpotDown: function (sender, ev) {\r\n\t\tif (this.lockBottom && ev.originator == this.$.drawer && ev._originator) {\r\n\t\t\t// Spotlight containers redispatch 5-way events with the original event originator\r\n\t\t\t// saved as _originator which we'll use to respot if lockBottom === true\r\n\t\t\tSpotlight.spot(ev._originator, {direction: 'DOWN'});\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @protected\r\n\t*/\r\n\taddHistoryEntry: function () {\r\n\t\tif (this.allowBackKey && !this.hasHistoryEntry && this.open) {\r\n\t\t\tthis.pushBackHistory();\r\n\t\t\tthis.hasHistoryEntry = true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @protected\r\n\t*/\r\n\tremoveHistoryEntry: function () {\r\n\t\tif (this.allowBackKey && this.hasHistoryEntry) {\r\n\t\t\tEnyoHistory.drop();\r\n\t\t\tthis.hasHistoryEntry = false;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\theaderTapped: function (sender, ev) {\r\n\t\tthis.expandContract();\r\n\t},\r\n\r\n\t/**\r\n\t* When an expandable is in a group, we only want the opening control to scroll into view so that\r\n\t* event only fires when the drawer is open. Otherwise, we just request the scroller update its\r\n\t* bounds so that an expandable at the bottom of a scroller does not leave extra whitespace when\r\n\t* it closes.\r\n\t*\r\n\t* @fires module:moonstone/Scroller~Scroller#onRequestScrollIntoView\r\n\t* @fires module:moonstone/Scroller~Scroller#onRequestSetupBounds\r\n\t* @private\r\n\t*/\r\n\tdrawerAnimationEnd: function () {\r\n\t\tif (this.$.drawer.open) {\r\n\t\t\tthis.bubble('onRequestScrollIntoView', {scrollInPointerMode: true});\r\n\t\t} else {\r\n\t\t\tthis.bubble('onRequestSetupBounds');\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbackKeyHandler: function () {\r\n\t\tvar current = Spotlight.getCurrent();\r\n\r\n\t\tthis.hasHistoryEntry = false;\r\n\r\n\t\t// In the case where Spotlight focus is not on one of the items in the expandable, but there\r\n\t\t// was still an entry history from this control, we must be in a situation where the pointer\r\n\t\t// has moved away from the control and we have yet to spot another item. We should then\r\n\t\t// effectively \"pass on\" the back action by calling the \"pop\" method of History.\r\n\t\tif (current && current.isDescendantOf(this)) {\r\n\t\t\tthis.closeDrawerAndHighlightHeader();\r\n\t\t} else {\r\n\t\t\tEnyoHistory.pop();\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* ExpandableListItem has not spotlight, its child (this.$.header) is spottable item,\r\n\t* so we remove unneccessary aria-related attributes.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: ['accessibilityLabel', 'accessibilityHint'], method: function () {\r\n\t\t\tthis.setAriaAttribute('aria-label', null);\r\n\t\t}}\r\n\t]\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/RadioItemGroup~RadioItemGroup} kind.\r\n* @module moonstone/RadioItemGroup\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tGroup = require('enyo/Group');\r\n\r\nvar\r\n\tRadioItem = require('../RadioItem');\r\n\r\n/**\r\n* {@link module:moonstone/RadioItemGroup~RadioItemGroup} is a container in which\r\n* a group of {@link module:moonstone/RadioItem~RadioItem} objects are laid out\r\n* horizontally. Within a group, only one item may be active at a time; tapping\r\n* on an item will deactivate any previously-tapped item.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tRadioItemGroup = require('moonstone/RadioItemGroup');\r\n*\r\n* \t{kind: RadioItemGroup, onActivate: 'buttonActivated', components: [\r\n* \t\t{content: 'Lions', selected: true},\r\n* \t\t{content: 'Tigers'},\r\n* \t\t{content: 'Bears'}\r\n* \t]}\r\n* ```\r\n*\r\n* @class RadioItemGroup\r\n* @extends module:enyo/Group~Group\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/RadioItemGroup~RadioItemGroup.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.RadioItemGroup',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Group,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-radio-item-group',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdefaultKind: RadioItem\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/DataList~DataList} kind.\r\n* @module moonstone/DataList\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutil = require('enyo/utils'),\r\n\tDataList = require('enyo/DataList');\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\nvar\r\n\tScroller = require('../Scroller');\r\n\r\n/**\r\n* {@link module:moonstone/DataList~DataListSpotlightSupport} is a {@glossary mixin} that provides\r\n* {@glossary Spotlight} handling code for use by {@link module:moonstone/DataList~DataList} and\r\n* {@link module:moonstone/DataGridList~DataGridList}. Since both of these [kinds]{@glossary kind} inherit\r\n* from their respective Enyo counterparts, this mixin provides the common add-on\r\n* code needed for proper spotlight handling.\r\n*\r\n* @mixin\r\n* @private\r\n*/\r\nvar DataListSpotlightSupport = {\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/DataList~DataListSpotlightSupport.prototype\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* The index of the item to focus at render time, or `-1` for no focused item.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default -1\r\n\t\t* @public\r\n\t\t*/\r\n\t\tinitialFocusIndex: -1,\r\n\r\n\t\t/**\r\n\t\t* Restores scroll position and focus when the DataList is re-rendered.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\trestoreStateOnRender: false\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonSpotlightUp    : '_spotlightPrev',\r\n\t\tonSpotlightLeft  : '_spotlightPrev',\r\n\t\tonSpotlightDown  : '_spotlightNext',\r\n\t\tonSpotlightRight : '_spotlightNext',\r\n\t\tonSpotlightBlur  : '_spotlightBlur'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tfocusOnIndex: function (inIndex, inSubChild) {\r\n\t\tvar c = this.collection,\r\n\t\t\tchild,\r\n\t\t\tsubChild;\r\n\t\tif (c && c.length && this.hasRendered) {  // Give focus if list is rendered\r\n\t\t\tinIndex = inIndex < 0 ? 0 : (inIndex >= c.length ? c.length - 1 : inIndex);\r\n\t\t\tchild = this.childForIndex(inIndex);\r\n\t\t\tif (!child) {\r\n\t\t\t\tthis.scrollToIndex(inIndex);\r\n\t\t\t\tchild = this.childForIndex(inIndex);\r\n\t\t\t}\r\n\t\t\tsubChild = inSubChild ? Spotlight.getChildren(child)[inSubChild] : child;\r\n\t\t\tSpotlight.spot(subChild) || Spotlight.spot(this);\r\n\t\t} else {\r\n\t\t\tthis._indexToFocus = inIndex;\r\n\t\t\tthis._subChildToFocus = inSubChild;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetFocusedIndex: function () {\r\n\t\tvar focusedChild = this.getFocusedChild();\r\n\t\treturn focusedChild ? this.getIndexFromChild(focusedChild) : -1;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetFocusedChild: function () {\r\n\t\tvar current = Spotlight.getCurrent();\r\n\t\treturn (current && current.isDescendantOf(this.$.active)) ? current : null;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_indexToFocus: -1,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_maxVisibleIndex: -1,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_subChildToFocus: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trender: function () {\r\n\t\t// Need to do this here because enyo/DataList (our superkind) forcibly tears down our\r\n\t\t// scroller, thereby altering the normal teardown sequence and preventing our main mechanism\r\n\t\t// for saving scroll state (in teardownChildren()) from working in the case where we are\r\n\t\t// explicitly re-rendered via a call to our own render() method. We also guard against\r\n\t\t// attempting to remember scroll state if our metrics have not yet been initialized.\r\n\t\tif (this.restoreStateOnRender && this.hasReset) {\r\n\t\t\tthis.rememberScrollState();\r\n\t\t}\r\n\t\tDataList.prototype.render.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdidRender: function () {\r\n\t\tvar current;\r\n\t\t// Lists are set to spotlight:true by default, which allows them to receive focus before\r\n\t\t// children are rendered; once rendred, it becomes spotlight:false, and the code below\r\n\t\t// ensures spotlight is transferred inside the list once rendering is complete\r\n\t\tthis.spotlight = false;\r\n\t\t// If there is a queued index to focus (or an initialFocusIndex), focus that item now that\r\n\t\t// the list is rendered\r\n\t\tthis._indexToFocus = (this._indexToFocus > -1) ? this._indexToFocus : this.initialFocusIndex;\r\n\t\tif (this._indexToFocus > -1 || this._maxVisibleIndex > -1) {\r\n\t\t\tthis.restoreState();\r\n\t\t} else {\r\n\t\t\t// Otherwise, check if the list was focused and if so, transfer focus to the first\r\n\t\t\t// spottable child inside\r\n\t\t\tcurrent = Spotlight.getCurrent();\r\n\t\t\tif (current && current.isDescendantOf(this)) {\r\n\t\t\t\tSpotlight.spot(Spotlight.getFirstChild(this.$.active));\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t* @method\r\n\t*/\r\n\tdidScroll: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\t// When scrolling in pointer mode, we unspot the last focused child, to prevent it from\r\n\t\t\t// looping as new pages come up\r\n\t\t\tvar spot;\r\n\t\t\tif (Spotlight.getPointerMode() &&\r\n\t\t\t\t((spot = Spotlight.getCurrent()) && (spot === this || spot.isDescendantOf(this.$.active)))) {\r\n\t\t\t\tSpotlight.unspot();\r\n\t\t\t\tthis._unspotSinceSpot = true;\r\n\t\t\t}\r\n\t\t\treturn sup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_spotlightNext: function (inSender, inEvent) {\r\n\t\treturn this._spotlightSelect(inEvent, 1);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_spotlightPrev: function (inSender, inEvent) {\r\n\t\treturn this._spotlightSelect(inEvent, -1);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_spotlightBlur: function (sender, event) {\r\n\t\tif (this.restoreStateOnRender && !event.next) {\r\n\t\t\tthis.rememberFocus();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Spots the next/previous control. Handles the case where this control may not be\r\n\t* generated yet; otherwise, the default behavior occurs and is handled by Spotlight.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_spotlightSelect: function (inEvent, inDirection) {\r\n\t\tvar pages = this.delegate.pagesByPosition(this),\r\n\t\t\tspottableControl;\r\n\r\n\t\t// If there are no spottable items generated in the current pages, generate the subsequent page(s)\r\n\t\t// based on the current direction\r\n\t\tif (!this.getNextSpottableChild(inDirection)) {\r\n\t\t\t// Find the next spottable control in the appropriate direction\r\n\t\t\tif (inDirection === 1) {\r\n\t\t\t\tspottableControl = this.findSpottableControl(inDirection, pages.firstPage, pages.lastPage.index + 1);\r\n\t\t\t} else if (inDirection === -1) {\r\n\t\t\t\tspottableControl = this.findSpottableControl(inDirection, pages.lastPage, pages.firstPage.index - 1);\r\n\t\t\t}\r\n\r\n\t\t\tif (spottableControl) {\r\n\t\t\t\t// Explicitly handle spotting of the control we found\r\n\t\t\t\tSpotlight.spot(spottableControl);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t} else if (this.needToAdjustPages) {\r\n\t\t\t// Sometimes after models added, page adjustment might be required.\r\n\t\t\tvar pagesForIndex = this.delegate.pageForIndex(this, inEvent.index),\r\n\t\t\t\tpageCount = this.delegate.pageCount(this),\r\n\t\t\t\tlastPageIndex = pages.lastPage.index;\r\n\r\n\t\t\t// If current selected index is lastPage and there is no page\r\n\t\t\t// then lower bound of scrollThreshold is undefined because it is useless\r\n\t\t\t// However after models are added then more pages could be generated\r\n\t\t\t// We need to check whether current list's position passes scrollThreshold or not.\r\n\t\t\tif (pagesForIndex === lastPageIndex && pageCount -1 !== lastPageIndex) {\r\n\t\t\t\tthis.didScroll(this, {scrollBounds: {left: null, top: null, xDir: 1, yDir: 1}});\r\n\t\t\t\tthis.needToAdjustPages = false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Finds the next/previous spottable control, the page to generate the next\r\n\t* page worth of controls in, and the index of the next page to generate.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tfindSpottableControl: function (inDirection, inPage, inPageIndex) {\r\n\t\tif ((inPageIndex > this.delegate.pageCount(this) - 1) || inPageIndex < 0) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tthis.delegate.generatePage(this, inPage, inPageIndex);\r\n\t\tthis.delegate.adjustPagePositions(this);\r\n\t\tthis.delegate.adjustBuffer(this);\r\n\r\n\t\tvar pages = this.delegate.pagesByPosition(this),\r\n\t\t\tcontrol = this.getNextSpottableChild(inDirection);\r\n\r\n\t\tif (!control) {\r\n\t\t\tif (inDirection === 1) {\r\n\t\t\t\treturn this.findSpottableControl(inDirection, inPage === pages.firstPage ? pages.lastPage : pages.firstPage, inPageIndex + 1);\r\n\t\t\t} else if (inDirection === -1) {\r\n\t\t\t\treturn this.findSpottableControl(inDirection, inPage === pages.firstPage ? pages.lastPage : pages.firstPage, inPageIndex - 1);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn control;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpreviewDomEvent: function (inEvent) {\r\n\t\t// When spotlight is being applied back to the list after being unspotted, check that the child being\r\n\t\t// focused is visible and if not, spot the first visible child that is\r\n\t\tif ((inEvent.type == 'onSpotlightFocus') && this._unspotSinceSpot) {\r\n\t\t\tif (Spotlight.getPointerMode()) {\r\n\t\t\t\tthis._unspotSinceSpot = false;\r\n\t\t\t} else {\r\n\t\t\t\tvar target = inEvent.originator;\r\n\t\t\t\tif (target != this) {\r\n\t\t\t\t\t// Calculate the target bounds, relative to the scrollBounds\r\n\t\t\t\t\tvar tb = target.getBounds();\r\n\t\t\t\t\tvar p = target.isDescendantOf(this.$.page1) ? this.$.page1 : this.$.page2;\r\n\t\t\t\t\tvar pb = p.getBounds();\r\n\t\t\t\t\t// Need to add page offset to target bounds\r\n\t\t\t\t\ttb.top += pb.top;\r\n\t\t\t\t\ttb.left += pb.left;\r\n\t\t\t\t\tvar sb = this.$.scroller.getScrollBounds();\r\n\t\t\t\t\t// Check if target is inside the current scrollBounds\r\n\t\t\t\t\tif ((tb.top < sb.top) ||\r\n\t\t\t\t\t\t(tb.left < sb.left) ||\r\n\t\t\t\t\t\t((tb.top + tb.height) > (sb.top + sb.clientHeight)) ||\r\n\t\t\t\t\t\t((tb.left + tb.width) > (sb.left + sb.clientWidth))) {\r\n\t\t\t\t\t\t// Not in view, so find and spot the first visible child\r\n\t\t\t\t\t\tvar vc = this.getFirstVisibleChild(sb);\r\n\t\t\t\t\t\tif (vc) {\r\n\t\t\t\t\t\t\tthis._unspotSinceSpot = false;\r\n\t\t\t\t\t\t\tSpotlight.spot(vc);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._unspotSinceSpot = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetFirstVisibleChild: function (inScrollBounds) {\r\n\t\t// Loop through the pages in top-down order\r\n\t\tvar pages = (this.$.page1.index < this.$.page2.index) ?\r\n\t\t\t[this.$.page1, this.$.page2] :\r\n\t\t\t[this.$.page2, this.$.page1],\r\n\t\t\tpageIdx,\r\n\t\t\tpage,\r\n\t\t\tpb,\r\n\t\t\ti,\r\n\t\t\tc,\r\n\t\t\tcb;\r\n\r\n\t\tfor (pageIdx = 0; pageIdx < pages.length; pageIdx++) {\r\n\t\t\tpage = pages[pageIdx];\r\n\t\t\tpb = page.getBounds();\r\n\t\t\t// Loop through children in each page top-down\r\n\t\t\tfor (i=0; i<page.children.length; i++) {\r\n\t\t\t\tc = page.children[i];\r\n\t\t\t\tcb = c.getBounds();\r\n\t\t\t\t// Need to add page offset to target bounds\r\n\t\t\t\tcb.top += pb.top;\r\n\t\t\t\tcb.left += pb.left;\r\n\t\t\t\t// Return the first spottable child whose top/left are inside the viewport\r\n\t\t\t\tif ((cb.top >= inScrollBounds.top) && ((this.rtl ? (inScrollBounds.width - (cb.left + cb.width)) : cb.left) >= inScrollBounds.left)) {\r\n\t\t\t\t\tif (Spotlight.isSpottable(c)) {\r\n\t\t\t\t\t\treturn c;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tc = Spotlight.getFirstChild(c);\r\n\t\t\t\t\tif (c) {\r\n\t\t\t\t\t\treturn c;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t},\r\n\r\n\t/**\r\n\t* Retrieves the next/previous spottable child from the generated controls,\r\n\t* starting from the given index.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgetNextSpottableChild: function (inDirection, inFocusedIndex) {\r\n\t\tvar i,\r\n\t\t\tpage,\r\n\t\t\tpageIndex,\r\n\t\t\tcontrol,\r\n\t\t\tcontrolIndex,\r\n\t\t\tfocusedIndex = this.getFocusedIndex(),\r\n\t\t\tpages = (inDirection === 1 && this.$.page1.index < this.$.page2.index || inDirection === -1 && this.$.page1.index > this.$.page2.index)\r\n\t\t\t\t? [this.$.page1, this.$.page2] : [this.$.page2, this.$.page1];\r\n\r\n\t\t// Explore the controls in the current pages\r\n\t\tfor (pageIndex = 0; pageIndex < pages.length; pageIndex++) {\r\n\t\t\tpage = pages[pageIndex];\r\n\t\t\tif (inDirection === 1) {\r\n\t\t\t\t// Loop through children in each page top-down\r\n\t\t\t\tfor (i = 0; i < page.children.length; i++) {\r\n\t\t\t\t\tcontrol = page.children[i];\r\n\t\t\t\t\tcontrolIndex = this.getIndexFromChild(control);\r\n\t\t\t\t\t// If we have already passed our current item or no item is selected, we can return the next spottable control\r\n\t\t\t\t\tif (controlIndex > focusedIndex || focusedIndex < 0) {\r\n\t\t\t\t\t\tif (Spotlight.isSpottable(control, false)) {\r\n\t\t\t\t\t\t\treturn control;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcontrol = Spotlight.getFirstChild(control);\r\n\t\t\t\t\t\tif (control) {\r\n\t\t\t\t\t\t\treturn control;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (inDirection === -1) {\r\n\t\t\t\t// Loop through children in each page bottom-up\r\n\t\t\t\tfor (i = page.children.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tcontrol = page.children[i];\r\n\t\t\t\t\tcontrolIndex = this.getIndexFromChild(control);\r\n\t\t\t\t\t// If we have already passed our current item or no item is selected, we can return the next spottable control\r\n\t\t\t\t\tif (controlIndex < focusedIndex || focusedIndex < 0) {\r\n\t\t\t\t\t\tif (Spotlight.isSpottable(control, false)) {\r\n\t\t\t\t\t\t\treturn control;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcontrol = Spotlight.getFirstChild(control);\r\n\t\t\t\t\t\tif (control) {\r\n\t\t\t\t\t\t\treturn control;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetItemFromChild: function (oControl) {\r\n\t\twhile (oControl) {\r\n\t\t\tif (oControl.index !== undefined) {\r\n\t\t\t\treturn oControl;\r\n\t\t\t}\r\n\t\t\toControl = oControl.parent;\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetIndexFromChild: function (oControl) {\r\n\t\tvar item = this.getItemFromChild(oControl);\r\n\t\treturn item ? item.index : -1;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tunspotAndRememberFocus: function () {\r\n\t\tif (this.rememberFocus()) {\r\n\t\t\tSpotlight.unspot();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trememberFocus: function () {\r\n\t\tvar current = this.getFocusedChild(),\r\n\t\t\tfocusedItem;\r\n\t\tif (current) {\r\n\t\t\tfocusedItem = this.getItemFromChild(current);\r\n\t\t\tthis._indexToFocus = focusedItem.index;\r\n\t\t\tthis._subChildToFocus = focusedItem === current ? null : Spotlight.getChildren(focusedItem).indexOf(current);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclearState: function () {\r\n\t\tthis._indexToFocus = -1;\r\n\t\tthis._maxVisibleIndex = -1;\r\n\t\tthis._subChildToFocus = null;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trestoreState: function () {\r\n\t\tvar index = this._indexToFocus,\r\n\t\t\tmaxVisibleIndex = this._maxVisibleIndex,\r\n\t\t\tsubChild = this._subChildToFocus,\r\n\t\t\tc = this.collection,\r\n\t\t\tcallback;\r\n\t\tif (c && c.length && (index > -1 || maxVisibleIndex > -1)) {\r\n\t\t\t// If there's a valid maxVisibleIndex, we've saved a scroll position so we need to\r\n\t\t\t// restore it and then update spotlight.\r\n\t\t\tif (maxVisibleIndex > -1) {\r\n\t\t\t\tcallback = (index > -1) ?\r\n\t\t\t\t\tthis.bindSafely(this.focusOnIndex, index, subChild) :\r\n\t\t\t\t\t// This ugly hack is required because scrolling to a control\r\n\t\t\t\t\t// in Moonstone by default sets that control to be the last focused\r\n\t\t\t\t\t// child (even if we don't actually focus it). In this case, we\r\n\t\t\t\t\t// don't want that, so we need to clean up after ourselves.\r\n\t\t\t\t\tutil.bind(Spotlight.Container, 'setLastFocusedChild', this.$.scroller, null);\r\n\r\n\t\t\t\tthis.scrollToIndex(maxVisibleIndex, callback);\r\n\t\t\t}\r\n\t\t\t// If we aren't restoring scroll position, we just need to update spotlight\r\n\t\t\telse {\r\n\t\t\t\tthis.focusOnIndex(index, subChild);\r\n\t\t\t}\r\n\t\t\tthis.clearState();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trememberScrollState: function () {\r\n\t\tvar maxVisibleIndex = this.getVisibleControlRange().end;\r\n\r\n\t\tif (!isNaN(maxVisibleIndex)) {\r\n\t\t\tthis._maxVisibleIndex = maxVisibleIndex;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Implement the `beforeTeardown()` lifecycle method so that we\r\n\t* can remember which controls were on screen and restore them\r\n\t* upon re-rendering\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tbeforeTeardown: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tif (this.restoreStateOnRender) {\r\n\t\t\t\tthis.rememberScrollState();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.clearState();\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdidResize: kind.inherit(function (sup) {\r\n\t\treturn function (sender, event) {\r\n\t\t\tthis.unspotAndRememberFocus();\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.restoreState();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tmodelsAdded: kind.inherit(function (sup) {\r\n\t\treturn function (c, e, props) {\r\n\t\t\tthis.unspotAndRememberFocus();\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.restoreState();\r\n\t\t\t// For specific case, page adjusting is required after models added\r\n\t\t\tthis.needToAdjustPages = true;\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tmodelsRemoved: kind.inherit(function (sup) {\r\n\t\treturn function (c, e, props) {\r\n\t\t\tthis.unspotAndRememberFocus();\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.restoreState();\r\n\t\t};\r\n\t})\r\n};\r\n\r\n/**\r\n* {@link module:moonstone/DataList~DataList} is an {@link module:enyo/DataList~DataList} with Moonstone styling\r\n* applied.  It uses {@link module:moonstone/Scroller~Scroller} as its default scroller.\r\n*\r\n* @class DataList\r\n* @extends module:enyo/DataList~DataList\r\n* @mixes module:moonstone/DataList~DataListSpotlightSupport\r\n* @ui\r\n* @public\r\n*/\r\nvar MoonDataList = module.exports = kind(\r\n\t/** @lends module:moonstone/DataList~DataList.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.DataList',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: DataList,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [DataListSpotlightSupport],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnoDefer: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tallowTransitions: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tscrollerOptions: { kind: Scroller, horizontal: 'hidden' }\r\n});\r\n\r\n/**\r\n* Spotlight support\r\n*/\r\nMoonDataList.SpotlightSupport = DataListSpotlightSupport;\r\n\r\n/**\r\n* Overload the delegate strategy to incorporate measurements for our scrollers\r\n* when they are visible.\r\n*\r\n* @private\r\n*/\r\nMoonDataList.delegates.vertical   = util.clone(DataList.delegates.vertical);\r\nMoonDataList.delegates.horizontal = util.clone(DataList.delegates.horizontal);\r\nvar exts = {\r\n\t/**\r\n\t* Overriding refresh() to stop scroller and stop scrolling.\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\trefresh: kind.inherit(function (sup) {\r\n\t\treturn function (list) {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tlist.$.scroller.stop();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Overriding reset() to prevent unnecessary generation of initial set of pages.\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\treset: kind.inherit(function (sup) {\r\n\t\treturn function (list) {\r\n\t\t\tvar index = list._indexToFocus = (list._indexToFocus > -1) ? list._indexToFocus : list.initialFocusIndex,\r\n\t\t\t\tmaxVisibleIndex = list._maxVisibleIndex,\r\n\t\t\t\tp;\r\n\r\n\t\t\t// generate specific page that corresponds to desired index\r\n\t\t\tif (maxVisibleIndex > -1 || index > -1) {\r\n\t\t\t\tlist.metrics.pages = {};\r\n\t\t\t\tp = this.pageForIndex(list, maxVisibleIndex == -1 ? index : maxVisibleIndex);\r\n\t\t\t\tthis.resetToPosition(list, this.pagePosition(list, p));\r\n\t\t\t} else {\r\n\t\t\t\tsup.apply(this, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\tOverriding scrollToControl() to specify Moonstone-specific scroller options.\r\n\t* No need to call the super method, so we don't wrap in enyo.inherit().\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tscrollToControl: function(list, control) {\r\n\t\tlist.$.scroller.scrollToControl(control, false, false, true);\r\n\t},\r\n\r\n\t/**\r\n\t* Overriding scrollTo() to specify Moonstone-specific scroller options.\r\n\t* No need to call the super method, so we don't wrap in enyo.inherit().\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tscrollTo: function(list, x, y) {\r\n\t\tlist.$.scroller.scrollTo(x, y, false);\r\n\t}\r\n};\r\nkind.extendMethods(MoonDataList.delegates.vertical, exts, true);\r\nkind.extendMethods(MoonDataList.delegates.horizontal, exts, true);\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/SimpleIntegerPicker~SimpleIntegerPicker} kind.\r\n* @module moonstone/SimpleIntegerPicker\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom');\r\n\r\nvar\r\n\tIntegerPicker = require('../IntegerPicker');\r\n\r\nvar\r\n\t$L = require('../i18n');\r\n\r\n/**\r\n* Fires when the currently selected item changes.\r\n*\r\n* @event module:moonstone/SimpleIntegerPicker~SimpleIntegerPicker#onChange\r\n* @type {Object}\r\n* @property {Number} value - The value of the currently selected item.\r\n* @property {String} content - The content of the currently selected item.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires in response to Return keypress while the picker has focus in\r\n* {@glossary Spotlight} 5-way mode.\r\n*\r\n* @event module:moonstone/SimpleIntegerPicker~SimpleIntegerPicker#onSelect\r\n* @type {Object}\r\n* @property {Number} value - The value of the currently selected item.\r\n* @property {String} content - The content of the currently selected item.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when the picker is rebuilt, allowing other controls the opportunity to reflow\r\n* the picker as necessary (e.g., a child of a {@link module:moonstone/ExpandableIntegerPicker~ExpandableIntegerPicker} may\r\n* need to be reflowed when the picker is opened, as it may not be currently visible).\r\n* No event-specific data is sent with this event.\r\n*\r\n* @event module:moonstone/SimpleIntegerPicker~SimpleIntegerPicker#onRebuilt\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/SimpleIntegerPicker~SimpleIntegerPicker} is a [control]{@link module:enyo/Control~Control} that prompts the\r\n* user to make a selection from a range of integer-based options.\r\n*\r\n* The picker may be changed programmatically by calling\r\n* [previous()]{@link module:moonstone/IntegerPicker~IntegerPicker#previous} or\r\n* [next()]{@link module:moonstone/IntegerPicker~IntegerPicker#next}, or by modifying the published property\r\n* [value]{@link module:moonstone/IntegerPicker~IntegerPicker#value}.\r\n*\r\n* @class SimpleIntegerPicker\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/SimpleIntegerPicker~SimpleIntegerPicker.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.SimpleIntegerPicker',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: IntegerPicker,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-simple-integer-picker',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonSelect: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonSpotlightUp: null,\r\n\t\tonSpotlightDown: null,\r\n\t\tonSpotlightRight: 'next',\r\n\t\tonSpotlightLeft: 'previous',\r\n\t\tonSpotlightSelect: 'fireSelectEvent'\r\n\t},\r\n\r\n\t/**\r\n\t* @lends module:moonstone/SimpleIntegerPicker~SimpleIntegerPicker.prototype\r\n\t* @private\r\n\t* @lends module:moonstone/SimpleIntegerPicker~SimpleIntegerPicker.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Unit label to be appended to the value for display.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'sec'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tunit: 'sec'\r\n\t},\r\n\r\n\t/**\r\n\t* Number of pixels added to the width of each picker item as padding. Note that this\r\n\t* is not a CSS padding value.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default 60\r\n\t* @public\r\n\t*/\r\n\titemPadding: 60,\r\n\r\n\t/**\r\n\t* Appends unit to content, forming label for display.\r\n\t*\r\n\t* @see module:moonstone/IntegerPicker~IntegerPicker.labelForValue\r\n\t* @private\r\n\t* @method\r\n\t*/\r\n\tlabelForValue: function (value) {\r\n\t\tvar content = IntegerPicker.prototype.labelForValue.apply(this, arguments);\r\n\t\treturn this.unit? content + ' ' + this.unit : content;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tunitChanged: function(){\r\n\t\tthis.valueChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* Calculates width of the picker when the first item is rendered.\r\n\t*\r\n\t* @see module:moonstone/IntegerPicker~IntegerPicker.updateRepeater\r\n\t* @private\r\n\t* @method\r\n\t*/\r\n\tupdateRepeater: function () {\r\n\t\tIntegerPicker.prototype.updateRepeater.apply(this, arguments);\r\n\r\n\t\tif(!this.width) {\r\n\t\t\tvar ib;\r\n\t\t\tthis.$.repeater.performOnRow(this.$.repeater.rowOffset, function() {\r\n\t\t\t\t// have to reset to natural width before getting bounds\r\n\t\t\t\tthis.$.item.setStyle('width: auto');\r\n\t\t\t\tib = this.$.item.getBounds();\r\n\t\t\t}, this);\r\n\r\n\t\t\tthis.width = ib.width + this.itemPadding;\r\n\t\t\tthis.applyStyle('width', dom.unit(this.width, 'rem'));\r\n\t\t\tthis.$.item.setStyle('width: ' + dom.unit(this.width, 'rem'));\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:moonstone/SimpleIntegerPicker~SimpleIntegerPicker#onSelect\r\n\t* @private\r\n\t*/\r\n\tfireSelectEvent: function () {\r\n\t\tif (this.hasNode()) {\r\n\t\t\tthis.doSelect({\r\n\t\t\t\tcontent: this.labelForValue(this.value),\r\n\t\t\t\tvalue: this.value\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Forces recalculation of the width of the picker.\r\n\t*\r\n\t* @see module:enyo/UiComponent~UiComponent.reflow\r\n\t* @private\r\n\t* @method\r\n\t*/\r\n\treflow: function () {\r\n\t\tthis.width = 0;\r\n\t\tIntegerPicker.prototype.reflow.apply(this, arguments);\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: 'unit',  method: function () {\r\n\t\t\tthis.set('accessibilityHint', null);\r\n\t\t\tthis.ariaValue();\r\n\t\t}},\r\n\t\t{path: 'spotted',  method: function () {\r\n\t\t\t// When spotlight is focused, it reads value with hint\r\n\t\t\tif (this.spotted) {\r\n\t\t\t\tif (!this.wrap && this.value == this.min) {\r\n\t\t\t\t\tthis.set('accessibilityHint', $L('change a value with right button'));\r\n\t\t\t\t} else if (!this.wrap && this.value == this.max) {\r\n\t\t\t\t\tthis.set('accessibilityHint', $L('change a value with left button'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.set('accessibilityHint', $L('change a value with left right button'));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaValue: function () {\r\n\t\tvar text = this.accessibilityValueText || \r\n\t\t\t\t\t(this.unit ? this.value + ' ' + this.unit : this.value);\r\n\t\tthis.setAriaAttribute('aria-valuetext', text);\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/Accordion~Accordion} kind.\r\n* @module moonstone/Accordion\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tExpandableListItem = require('./ExpandableListItem');\r\n\r\n/**\r\n* [Please note that `moonstone/Accordion` has been deprecated because of its\r\n* similarity to `moonstone/ExpandableListItem`.]\r\n*\r\n* {@link module:moonstone/Accordion~Accordion} is a {@link module:moonstone/ExpandableListItem~ExpandableListItem} with an arrow button\r\n* to the right of the header and additional margin space to the left of the item list.\r\n*\r\n* To open or close the drawer, tap on the header text or navigate (via 5-way)\r\n* back to the top of the drawer.\r\n*\r\n* The control's child components may be of any kind; by default, they are\r\n* instances of {@link module:moonstone/Item~Item}.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tAccordion = require('moonstone/Accordion');\r\n*\r\n* \t{kind: Accordion, content: 'This is an accordion', components: [\r\n* \t\t{content: 'Item One'},\r\n* \t\t{content: 'Item Two'}\r\n* \t]},\r\n* \t{kind: Accordion, content: 'This is another accordion', components: [\r\n* \t\t{content: 'Item Three'},\r\n* \t\t{content: 'Item Four'}\r\n* \t]}\r\n* ```\r\n*\r\n* When multiple Accordions are used in a group, only one may be open at a given time.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tGroup = require('enyo/Group'),\r\n* \t\tAccordion = require('moonstone/Accordion');\r\n*\r\n* \t{kind: Group, highlander: true, components: [\r\n* \t\t{kind: Accordion, open: true, content: 'This is a grouped accordion', components: [\r\n* \t\t\t{content: 'Item One'},\r\n* \t\t\t{content: 'Item Two'}\r\n* \t\t]},\r\n* \t\t{kind: Accordion, content: 'This is another grouped accordion', components: [\r\n* \t\t\t{content: 'Item Three'},\r\n* \t\t\t{content: 'Item Four'}\r\n* \t\t]},\r\n* \t\t{kind: Accordion, content: 'This is yet another grouped accordion', components: [\r\n* \t\t\t{content: 'Item Five'},\r\n* \t\t\t{content: 'Item Six'}\r\n* \t\t]}\r\n* \t]}\r\n* ```\r\n*\r\n* @class Accordion\r\n* @extends module:moonstone/ExpandableListItem~ExpandableListItem\r\n* @ui\r\n* @public\r\n* @deprecated Identical to {@link module:moonstone/ExpandableListItem~ExpandableListItem}\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/Accordion~Accordion.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.Accordion',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: ExpandableListItem,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-accordion'\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/DateTimePickerBase~DateTimePickerBase} kind.\r\n* @module moonstone/DateTimePickerBase\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tControl = require('enyo/Control'),\r\n\tSignals = require('enyo/Signals');\r\n\r\nvar\r\n\tilib = require('enyo-ilib'),\r\n\tdateFactory = require('enyo-ilib/DateFactory'),\r\n\tDateFmt = require('enyo-ilib/DateFmt'),\r\n\tLocale = require('enyo-ilib/Locale');\r\n\r\nvar\r\n\tExpandableListItem = require('../ExpandableListItem');\r\n\r\n/**\r\n* Fires when the picker's value changes.\r\n*\r\n* @event module:moonstone/DateTimePickerBase~DateTimePickerBase#onChange\r\n* @type {Object}\r\n* @property {String} name - The name of this control.\r\n* @property {Date} value - A standard JavaScript {@glossary Date} object representing\r\n* the picker's current value.\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/DateTimePickerBase~DateTimePickerBase} is a base kind implementing\r\n* fuctionality shared by {@link module:moonstone/DatePicker~DatePicker} and\r\n* {@link module:moonstone/TimePicker~TimePicker}. It is not intended to be used directly.\r\n*\r\n* @class DateTimePickerBase\r\n* @extends module:moonstone/ExpandableListItem~ExpandableListItem\r\n* @ui\r\n* @protected\r\n*/\r\n\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/DateTimePickerBase~DateTimePickerBase.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.DateTimePickerBase',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: ExpandableListItem,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdefaultKind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-date-picker',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\r\n\t\t/**\r\n\t\t* {@link module:moonstone/DateTimePickerBase~DateTimePickerBase#onChange}\r\n\t\t*/\r\n\t\tonChange: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/DateTimePickerBase~DateTimePickerBase.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Text to be displayed as the current value if no item is currently selected.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tnoneText: '',\r\n\r\n\t\t/**\r\n\t\t* This property will be __private__ in the future and is deprecated as a __public__\r\n\t\t* property. It is used internally and _should not be used otherwise_.\r\n\t\t*\r\n\t\t* This is an [iLib]{@glossary ilib} Locale instance. Setting this directly may have\r\n\t\t* unexpected results. This class will automatically respond to application locale\r\n\t\t* changes that use the {@link module:enyo/i18n#updateLocale} method.\r\n\t\t*\r\n\t\t* @deprecated\r\n\t\t* @type {Locale}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tlocale: null,\r\n\r\n\t\t/**\r\n\t\t* The value of the picker, expressed as a standard JavaScript {@glossary Date}\r\n\t\t* object.\r\n\t\t*\r\n\t\t* @type {Date}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tvalue: null,\r\n\r\n\t\t/**\r\n\t\t* If `true`, the picker will use a 12-hour clock (this value is ignored when\r\n\t\t* `iLib` is loaded, since the meridiem will be set by the current locale).\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmeridiemEnable: false\r\n\t},\r\n\r\n\t/**\r\n\t* Set in subkind.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tiLibFormatType: null,\r\n\r\n\t/**\r\n\t* Set in subkind.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdefaultOrdering: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdrawerComponents: [\r\n\t\t{name: 'client', kind: Control, classes: 'moon-date-time-picker-client', onSpotlightLeft:'closePicker', onSpotlightSelect: 'closePicker'},\r\n\t\t{kind: Signals, onlocalechange: 'handleLocaleChangeEvent'}\r\n\t],\r\n\r\n\tcomputed: {\r\n\t\t'currentValueText': ['value', 'noneText']\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitComponents: function () {\r\n\t\tExpandableListItem.prototype.initComponents.apply(this, arguments);\r\n\t\tthis.initDefaults();\r\n\t\tthis.$.drawer.addClass('indented');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitILib: function () {\r\n\t\tthis.locale = new Locale();\r\n\t\tvar fmtParams = {\r\n\t\t\ttype: this.iLibFormatType,\r\n\t\t\tuseNative: false,\r\n\t\t\ttimezone: 'local',\r\n\t\t\tlength: 'full',\r\n\t\t\tdate: 'dmwy'\r\n\t\t};\r\n\r\n\t\tfmtParams.locale = this.locale;\r\n\t\tthis.iLibLocale = ilib.getLocale();\r\n\t\tthis._tf = new DateFmt(fmtParams);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitDefaults: function () {\r\n\t\tthis.initILib();\r\n\t\tthis.setupPickers(this._tf.getTemplate());\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetupPickers: function (ordering) {\r\n\t\t// implement in subkind\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tformatValue: function () {\r\n\t\t// implement in subkind\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:moonstone/DateTimePickerBase~DateTimePickerBase#onChange\r\n\t* @private\r\n\t*/\r\n\tvalueChanged: function (inOld) {\r\n\t\tthis.syncingPickers = true;\r\n\t\tthis.setChildPickers(inOld);\r\n\t\tthis.syncingPickers = false;\r\n\t\tif (this.generated) this.doChange({name:this.name, value:this.value});\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetChildPickers: function (inOld) {\r\n\t\t// implement in subkind\r\n\t},\r\n\r\n\t/**\r\n\t* If no item is selected, sets [noneText]{@link module:moonstone/DateTimePickerBase~DateTimePickerBase#noneText}\r\n\t* as current value.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcurrentValueText: function () {\r\n\t\treturn this.value ? this.formatValue() : this.noneText;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcurrentValueShowing: function () {\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* When [open]{@link module:moonstone/ExpandableListItem~ExpandableListItem#open} changes, shows/hides the current value.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\topenChanged: function () {\r\n\t\tExpandableListItem.prototype.openChanged.apply(this, arguments);\r\n\t\tvar pickers = this.pickers,\r\n\t\t\ti, p;\r\n\t\tif (pickers && this.open) {\r\n\t\t\tfor (i = 0; i < pickers.length; i++) {\r\n\t\t\t\tp = pickers[i];\r\n\t\t\t\tif (p.getClientControls().length > 0) {\r\n\t\t\t\t\tp = p.getClientControls()[0];\r\n\t\t\t\t}\r\n\t\t\t\tp.reflow();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\texpandContract: function () {\r\n\t\tif (!this.open) {\r\n\t\t\t// if currently closed and handling the back key, keep track of the initial value in\r\n\t\t\t// case we need to restore this value\r\n\t\t\tif (this.allowBackKey) this._initialValue = this.value && new Date(this.value.getTime());\r\n\r\n\t\t\t// if currently closed and without a value, set it to now before opening\r\n\t\t\tif (!this.value) this.set('value', new Date());\r\n\t\t}\r\n\t\tExpandableListItem.prototype.expandContract.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclosePicker: function (inSender, inEvent) {\r\n\t\t/**\r\n\t\t* If select/enter is pressed on any date picker item or the left key is pressed on the\r\n\t\t* first item, close the drawer\r\n\t\t*/\r\n\t\tif (inEvent.type == 'onSpotlightSelect' ||\r\n\t\t\tthis.$.client.children[0].id == inEvent.originator.id) {\r\n\t\t\tthis.expandContract();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleLocaleChangeEvent: function () {\r\n\t\t// We've received a localechange event from the system, which means either the system\r\n\t\t// locale or the timezone may have changed.\r\n\t\tif (ilib.getLocale() !== this.iLibLocale) {\r\n\t\t\t// We're using iLib locale, and it has changed, so we'll rebuild the child pickers\r\n\t\t\t// entirely\r\n\t\t\tthis.refresh();\r\n\t\t} else {\r\n\t\t\t// We don't care about the iLib locale or it hasn't changed, but timezone might have\r\n\t\t\t// changed, so we'll just update the child pickers\r\n\t\t\tthis.setChildPickers();\r\n\t\t}\r\n\t\tthis.notify('currentValueText');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trefresh: function () {\r\n\t\tthis.destroyClientControls();\r\n\t\tthis.pickers = null;\r\n\t\tdelete this._tf;\r\n\t\tif (this.value) {\r\n\t\t\tthis.localeValue = dateFactory({unixtime: this.value.getTime(), timezone: 'local'});\r\n\t\t}\r\n\t\tthis.set('open', false);\r\n\t\tthis.initDefaults();\r\n\t\tthis.render();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbackKeyHandler: function () {\r\n\t\tif (this.open) this.set('value', this._initialValue);\r\n\t\tExpandableListItem.prototype.backKeyHandler.apply(this, arguments);\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/ExpandablePicker~ExpandablePicker} kind.\r\n* @module moonstone/ExpandablePicker\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tComponent = require('enyo/Component'),\r\n\tGroup = require('enyo/Group');\r\n\r\nvar\r\n\tBodyText = require('../BodyText'),\r\n\tCheckboxItem = require('../CheckboxItem'),\r\n\tExpandableListItem = require('../ExpandableListItem');\r\n\r\n/**\r\n* Fires when the currently selected item changes.\r\n*\r\n* @event module:moonstone/ExpandablePicker~ExpandablePicker#onChange\r\n* @type {Object}\r\n* @property {Object|Object[]} selected - A reference to the currently selected item,\r\n*\tor (if [multipleSelection]{@link module:moonstone/ExpandablePicker~ExpandablePicker#multipleSelection} is `true`),\r\n*\tan array of selected items.\r\n* @property {String} content - The content of the currently selected item, or (if\r\n*\t[multipleSelection]{@link module:moonstone/ExpandablePicker~ExpandablePicker#multipleSelection} is `true`), a comma\r\n*\t(plus space) separated list of the selected items' content.\r\n* @property {Number} index - The index of the currently selected item, or (if\r\n*\t[multipleSelection]{@link module:moonstone/ExpandablePicker~ExpandablePicker#multipleSelection} is `true`), an array\r\n* of the index values of the selected items.\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/ExpandablePicker~ExpandablePicker}, which extends\r\n* {@link module:moonstone/ExpandableListItem~ExpandableListItem}, is a drop-down\r\n* picker menu that solicits a choice from the user. The picker's child\r\n* components, which are instances of {@link module:moonstone/CheckboxItem~CheckboxItem}\r\n* by default, provide the options for the picker.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tExpandablePicker = require('moonstone/ExpandablePicker');\r\n*\r\n* \t{kind: ExpandablePicker, noneText: 'None Selected', content: 'Choose City',\r\n* \t\tcomponents: [\r\n* \t\t\t{content: 'San Francisco'},\r\n* \t\t\t{content: 'Boston'},\r\n* \t\t\t{content: 'Tokyo'}\r\n* \t\t]\r\n* \t}\r\n* ```\r\n*\r\n* The currently selected item is available in the picker's\r\n* [selected]{@link module:moonstone/ExpandablePicker~ExpandablePicker#selected} property and may be accessed in\r\n* the normal manner, by calling `get('selected')` and `set('selected', <value>)`.\r\n* Similarly, the index of the current selection is available in\r\n* [selectedIndex]{@link module:moonstone/ExpandablePicker~ExpandablePicker#selectedIndex}. When the\r\n* [multipleSelection]{@link module:moonstone/ExpandablePicker~ExpandablePicker#multipleSelection} property is set\r\n* to `true`, `selected` contains an array of selected items, and `selectedIndex`\r\n* contains an array of the selected items' index values.\r\n*\r\n* The [onChange]{@link module:moonstone/ExpandablePicker~ExpandablePicker#onChange} event is fired when the\r\n* selected item changes.\r\n*\r\n* The picker's options may be modified programmatically in the standard manner, by\r\n* calling `createComponent().render()` or `destroy()`.\r\n*\r\n* ```javascript\r\n* \t// Add new items to picker\r\n* \tthis.$.expandablePicker.createComponent({'New York'}).render();\r\n* \tthis.$.expandablePicker.createComponent({'London'}).render();\r\n*\r\n* \t// Remove currently selected item from picker\r\n* \tthis.$.expandablePicker.getSelected().destroy();\r\n* ```\r\n*\r\n* When the picker is minimized, the content of the currently selected item is\r\n* displayed as subtext below the picker label. If multiple selection is enabled,\r\n* the content of all selected items will be displayed as a comma-separated list.\r\n*\r\n* @class ExpandablePicker\r\n* @extends module:moonstone/ExpandableListItem~ExpandableListItem\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/ExpandablePicker~ExpandablePicker.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ExpandablePicker',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: ExpandableListItem,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-expandable-picker',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\t/**\r\n\t\t* {@link module:moonstone/ExpandablePicker~ExpandablePicker#onChange}\r\n\t\t*/\r\n\t\tonChange: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/ExpandablePicker~ExpandablePicker.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Reference to currently selected item, if any, or (when\r\n\t\t* [multipleSelection]{@link module:moonstone/ExpandablePicker~ExpandablePicker#multipleSelection} is `true`),\r\n\t\t* an array of selected items.\r\n\t\t*\r\n\t\t* @type {Object | Object[]}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tselected: null,\r\n\r\n\t\t/**\r\n\t\t* Index of the currently selected item, or `-1` if nothing is selected. If\r\n\t\t* [multipleSelection]{@link module:moonstone/ExpandablePicker~ExpandablePicker#multipleSelection} is `true`,\r\n\t\t* this will be array of the selected items' index values, or an empty array if\r\n\t\t* nothing is selected.\r\n\t\t*\r\n\t\t* @type {Number | Number[]}\r\n\t\t* @default -1\r\n\t\t* @public\r\n\t\t*/\r\n\t\tselectedIndex: -1,\r\n\r\n\t\t/**\r\n\t\t* Text to be displayed as the current value if no item is currently selected.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tnoneText: '',\r\n\r\n\t\t/**\r\n\t\t* Text to be displayed when the drawer is opened.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\thelpText: null,\r\n\r\n\t\t/**\r\n\t\t* If `true`, picker auto-collapses when an item is selected.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tautoCollapseOnSelect: true,\r\n\r\n\t\t/**\r\n\t\t* If `true`, multiple selection is allowed.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmultipleSelection: false\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tautoCollapse: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tlockBottom: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdefaultKind: CheckboxItem,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tselectAndCloseDelayMS: 600,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdrawerComponents: [\r\n\t\t{name: 'client', tag: null, kind: Group, onActivate: 'activated', highlander: true},\r\n\t\t{name: 'helpText', kind: BodyText, canGenerate: false, classes: 'moon-expandable-picker-help-text'}\r\n\t],\r\n\r\n\tbindings: [\r\n\t\t{from: 'selected.content', to: 'selectedText'},\r\n\r\n\t\t// Accessibility\r\n\t\t{from: 'selected.accessibilityLabel', to: '$.header._accessibilityText'}\r\n\t],\r\n\r\n\tcomputed: {\r\n\t\t'currentValueText': ['selected', 'noneText', 'selectedText']\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function() {\r\n\t\tif (this.multipleSelection) {\r\n\t\t\tthis.selected = (this.selected) ? this.selected : [];\r\n\t\t\tthis.selectedIndex = (this.selectedIndex != -1) ? this.selectedIndex : [];\r\n\t\t}\r\n\t\t// super initialization\r\n\t\tExpandableListItem.prototype.create.apply(this, arguments);\r\n\r\n\t\tthis.selectedIndexChanged();\r\n\t\tthis.helpTextChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitComponents: function() {\r\n\t\tvar override = {client: {highlander: !this.multipleSelection}};\r\n\t\tthis.drawerComponents = Component.overrideComponents(this.drawerComponents, override);\r\n\t\tExpandableListItem.prototype.initComponents.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t*  'multiSelectCurrentValue()' can be overridden by subkinds, such as moon.DayPicker\r\n\t*\r\n\t* @protected\r\n\t*/\r\n\tmultiSelectCurrentValue: function () {\r\n\t\tif (!this.multipleSelection) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar controls = this.getCheckboxControls();\r\n\t\tvar str = '';\r\n\t\tthis.selectedIndex.sort();\r\n\t\tfor (var i=0; i < this.selectedIndex.length; i++) {\r\n\t\t\tif (!str) {\r\n\t\t\t\tstr = controls[this.selectedIndex[i]].getContent();\r\n\t\t\t} else {\r\n\t\t\t\tstr = str + ', ' + controls[this.selectedIndex[i]].getContent();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!str) {\r\n\t\t\tstr = this.getNoneText();\r\n\t\t}\r\n\t\treturn str;\r\n\t},\r\n\r\n\t/**\r\n\t* When the [selected]{@link module:moonstone/ExpandablePicker~ExpandablePicker#selected} control changes,\r\n\t* updates [checked]{@link module:moonstone/CheckboxItem~CheckboxItem#checked} values appropriately and\r\n\t* fires an [onChange]{@link module:moonstone/ExpandablePicker~ExpandablePicker#onChange} event.\r\n\t*\r\n\t* @fires module:moonstone/ExpandablePicker~ExpandablePicker#onChange\r\n\t* @private\r\n\t*/\r\n\tselectedChanged: function (inOldValue) {\r\n\t\tvar selected = this.getSelected(),\r\n\t\tcontrols = this.getCheckboxControls(),\r\n\t\tindex = -1,\r\n\t\ti; //declaring i here to fix travis error\r\n\r\n\t\tif (this.multipleSelection) {\r\n\t\t\tthis.rebuildSelectedIndices(selected, controls);\r\n\t\t\tif(this.hasNode()) {\r\n\t\t\t\tthis.fireChangeEvent();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (i=0;i<controls.length;i++) {\r\n\t\t\t\tif(controls[i] === selected) {\r\n\t\t\t\t\tcontrols[i].setChecked(true);\r\n\t\t\t\t\tindex = i;\r\n\t\t\t\t} else if (controls[i].checked) {\r\n\t\t\t\t\tcontrols[i].silence();\r\n\t\t\t\t\tcontrols[i].setChecked(false);\r\n\t\t\t\t\tcontrols[i].unsilence();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (index > -1 && selected !== inOldValue) {\r\n\t\t\t\tthis.setSelectedIndex(index);\r\n\t\t\t\tif(this.hasNode()) {\r\n\t\t\t\t\tthis.fireChangeEvent();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* When the {@link module:moonstone/ExpandablePicker~ExpandablePicker#selectedIndex} changes, calls\r\n\t* `setChecked()` on the appropriate control.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tselectedIndexChanged: function () {\r\n\t\tvar controls = this.getCheckboxControls(),\r\n\t\t\tindex = this.getSelectedIndex(),\r\n\t\t\tchecked;\r\n\r\n\t\tif (this.multipleSelection) {\r\n\t\t\tfor (var i = 0; i < controls.length; i++) {\r\n\t\t\t\tchecked = index.indexOf(i) >= 0;\r\n\t\t\t\tcontrols[i].setChecked(checked);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.set('selected', index >= 0 ? controls[index] : null);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* If there is no selected item, uses [noneText]{link @moon.ExpandablePicker#noneText}\r\n\t* as current value.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcurrentValueText: function () {\r\n\t\tvar multi = this.multipleSelection,\r\n\t\t\tsel = this.get('selected'),\r\n\t\t\tselIdx = this.get('selectedIndex');\r\n\r\n\t\tif (multi && sel.length && selIdx.length) {\r\n\t\t\treturn this.multiSelectCurrentValue();\r\n\t\t}\r\n\t\telse if (!multi && sel && selIdx !== -1) {\r\n\t\t\treturn sel.get('content');\r\n\t\t}\r\n\t\treturn this.noneText;\r\n\t},\r\n\r\n\t/**\r\n\t* When drawer is opened/closed, shows/hides `this.$.helpText`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\thelpTextChanged: function () {\r\n\t\tif (this.helpText !== null && !this.$.helpText.canGenerate) {\r\n\t\t\tthis.generateHelpText();\r\n\t\t}\r\n\t\tthis.$.helpText.setContent(this.helpText);\r\n\t\tthis.$.helpText.setShowing(!!this.helpText);\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: function () {\r\n\t\t// When the expandablePicker itself is going away, take note so we don't try and do\r\n\t\t// single-picker option remove logic such as setting some properties to default\r\n\t\t// value when each picker option is destroyed\r\n\t\tthis.destroying = true;\r\n\t\tExpandableListItem.prototype.destroy.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\trebuildSelectedIndices: function(selected, controls) {\r\n\t\tthis.selectedIndex = [];\r\n\t\tselected = selected || this.getSelected();\r\n\t\tcontrols = controls || this.getCheckboxControls();\r\n\r\n\t\tfor (var i = 0; i < controls.length; i++) {\r\n\t\t\tif (selected.indexOf(controls[i]) >= 0) {\r\n\t\t\t\tcontrols[i].setChecked(true);\r\n\t\t\t\tthis.selectedIndex.push(i);\r\n\t\t\t} else {\r\n\t\t\t\tcontrols[i].silence();\r\n\t\t\t\tcontrols[i].setChecked(false);\r\n\t\t\t\tcontrols[i].unsilence();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tremoveControl: function (inControl) {\r\n\t\tvar selectedChanged = false;\r\n\t\t// Skip extra work during panel destruction.\r\n\t\tif (!this.destroying) {\r\n\t\t\t// set currentValue, selected and selectedIndex to defaults value\r\n\t\t\tif (this.multipleSelection) {\r\n\t\t\t\tfor (var i = 0; i < this.selected.length; i++) {\r\n\t\t\t\t\tif (this.selected[i] === inControl) {\r\n\t\t\t\t\t\tthis.selected.splice(i, 1);\r\n\t\t\t\t\t\tselectedChanged = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (selectedChanged) {\r\n\t\t\t\t\tthis.notifyObservers('selected');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (this.selected === inControl) {\r\n\t\t\t\t\tthis.setSelected(null);\r\n\t\t\t\t\tthis.setSelectedIndex(-1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tExpandableListItem.prototype.removeControl.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgenerateHelpText: function () {\r\n\t\tthis.$.helpText.canGenerate = true;\r\n\t\tthis.$.helpText.render();\r\n\t},\r\n\r\n\t/**\r\n\t* When an item is chosen, marks it as checked and closes the picker.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tactivated: function (inSender, inEvent) {\r\n\t\tvar toggledControl = inEvent && inEvent.toggledControl, index;\r\n\r\n\t\tif (!toggledControl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tindex = this.getCheckboxControls().indexOf(toggledControl);\r\n\r\n\t\tif (this.multipleSelection) {\r\n\t\t\tif (index >= 0) {\r\n\t\t\t\t// if toggledControl is checked but it is out of this.selected, them push it\r\n\t\t\t\tif (inEvent.checked && (this.selected.indexOf(toggledControl) == -1)) {\r\n\t\t\t\t\tthis.selected.push(toggledControl);\r\n\t\t\t\t\tthis.notifyObservers('selected');\r\n\t\t\t\t}\r\n\t\t\t\t// if toggledControl is not checked but it is in this.selected, them pull it out\r\n\t\t\t\tif (!inEvent.checked && (this.selected.indexOf(toggledControl) >= 0)) {\r\n\t\t\t\t\tthis.selected.splice(this.selected.indexOf(toggledControl), 1);\r\n\t\t\t\t\tthis.notifyObservers('selected');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (inEvent.checked && index >= 0) {\r\n\t\t\t\tthis.setSelected(toggledControl);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.getAutoCollapseOnSelect() && this.$.drawer.hasRendered && this.getOpen()) {\r\n\t\t\t// this is needed due to the select and close delay, during which other history entries\r\n\t\t\t// could have been pushed - we drop the entry immediately to prevent dropping the wrong\r\n\t\t\t// entry later\r\n\t\t\tthis.removeHistoryEntry();\r\n\r\n\t\t\tthis.startJob('selectAndClose', 'expandContract', this.selectAndCloseDelayMS);\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\topenChanged: function () {\r\n\t\tExpandableListItem.prototype.openChanged.apply(this, arguments);\r\n\t\t// cancel the job so the drawer isn't opened/closed inadvertently\r\n\t\tthis.stopJob('selectAndClose');\r\n\t},\r\n\r\n\t/**\r\n\t* Returns the picker items. Override point for child kinds altering the source of the items.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgetCheckboxControls: function () {\r\n\t\treturn this.getClientControls();\r\n\t},\r\n\r\n\t/**\r\n\t* Fires an `onChange` event.\r\n\t*\r\n\t* @fires module:moonstone/ExpandablePicker~ExpandablePicker#onChange\r\n\t* @private\r\n\t*/\r\n\tfireChangeEvent: function () {\r\n\t\tvar contentStr = (this.multipleSelection) ? this.multiSelectCurrentValue() : this.getSelected().getContent();\r\n\t\tthis.doChange({\r\n\t\t\tselected: this.getSelected(),\r\n\t\t\tcontent: contentStr,\r\n\t\t\tindex: this.getSelectedIndex()\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmultipleSelectionChanged: function (inOldValue) {\r\n\t\tif (this.multipleSelection) {\r\n\t\t\tif (this.selected) {\r\n\t\t\t\tthis.selected = [this.selected];\r\n\t\t\t} else {\r\n\t\t\t\tthis.selected = [];\r\n\t\t\t}\r\n\t\t\tthis.selectedIndex = [];\r\n\t\t} else {\r\n\t\t\tthis.selected = (this.selected.length) ? this.selected[0] : null;\r\n\t\t\tthis.selectedIndex = -1;\r\n\t\t}\r\n\t\tthis.$.client.setHighlander(!this.multipleSelection);\r\n\t\tthis.notifyObservers('selected');\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: 'multipleSelection', method: function () {\r\n\t\t\tthis.$.header.setAriaAttribute('aria-multiselectable', this.multipleSelection);\r\n\t\t}}\r\n\t]\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/ExpandableInput~ExpandableInput} kind.\r\n* @module moonstone/ExpandableInput\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\nvar\r\n\t$L = require('../i18n'),\r\n\tExpandableListItem = require('../ExpandableListItem'),\r\n\tInput = require('../Input'),\r\n\tInputDecorator = require('../InputDecorator');\r\n\r\n/**\r\n* Fires when the current text changes. This passes through {@link module:enyo/Input~Input#onChange}.\r\n*\r\n* @event module:moonstone/ExpandableInput~ExpandableInput#onChange\r\n* @type {Object}\r\n* @property {String} value - The value of the input.\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/ExpandableInput~ExpandableInput}, which extends {@link module:moonstone/ExpandableListItem~ExpandableListItem}, is a\r\n* drop-down input that prompts the user to enter text.\r\n*\r\n* @class ExpandableInput\r\n* @extends module:moonstone/ExpandableListItem~ExpandableListItem\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/ExpandableInput~ExpandableInput.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ExpandableInput',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: ExpandableListItem,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-expandable-input',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\r\n\t\t/** {@link module:moonstone/ExpandableInput~ExpandableInput#onChange} */\r\n\t\tonChange: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/ExpandableInput~ExpandableInput.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Text to be displayed as the current value if no item is currently selected.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tnoneText: '',\r\n\r\n\t\t/**\r\n\t\t* Text to be displayed in the input if no text has been entered.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tplaceholder: '',\r\n\r\n\t\t/**\r\n\t\t* Type of [input]{@link module:enyo/Input~Input}; if not specified, it's treated as `'text'`.\r\n\t\t* This may be anything specified for the `type` attribute in the HTML\r\n\t\t* specification, including `'url'`, `'email'`, `'search'`, or `'number'`.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttype: '',\r\n\r\n\t\t/**\r\n\t\t* Initial value of the input.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tvalue: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tautoCollapse: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tlockBottom: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdrawerComponents: [\r\n\t\t{name: 'inputDecorator', kind: InputDecorator, onSpotlightBlur: 'inputSpotBlurred', onSpotlightFocus: 'inputFocus', onSpotlightDown: 'inputSpotDown', onkeyup: 'inputKeyUp', defaultSpotlightUp: 'drawer', components: [\r\n\t\t\t{name: 'clientInput', kind: Input, onchange: 'doChange', dismissOnEnter: true}\r\n\t\t]}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: 'value', to: '$.clientInput.value', oneWay: false},\r\n\t\t{from: 'placeholder', to: '$.clientInput.placeholder'},\r\n\t\t{from: 'type', to: '$.clientInput.type'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomputed: {\r\n\t\t'currentValueShowing': ['open', 'currentValueText', 'type'],\r\n\t\t'currentValueText': ['value', 'noneText']\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tExpandableListItem.prototype.create.apply(this, arguments);\r\n\t\t// attach an ondown handler to unfreeze Spotlight\r\n\t\tthis.$.header.ondown = 'headerDown';\r\n\t},\r\n\r\n\t/**\r\n\t* Computed property\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcurrentValueShowing: function () {\r\n\t\treturn !this.open && this.currentValueText() !== '' && this.type != 'password';\r\n\t},\r\n\r\n\t/**\r\n\t* Assigns an attribute to a {@link module:moonstone/Input~Input}\r\n\t* @param {String} name - Attribute name to assign/remove.\r\n\t* @param {(String|Number|null)} value - The value to assign to `name`\r\n\t* @public\r\n\t*/\r\n\tsetInputAttribute: function (name, value) {\r\n\t\tthis.$.clientInput.setAttribute(name, value);\r\n\t},\r\n\r\n\t/**\r\n\t* Computed property\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcurrentValueText: function () {\r\n\t\treturn (this.value === '') ? this.noneText : this.value;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\topenChanged: function () {\r\n\t\tExpandableListItem.prototype.openChanged.apply(this, arguments);\r\n\t\tif (this.open) {\r\n\t\t\t// keep track of initial value in case we need to restore it later\r\n\t\t\tif (this.allowBackKey) this._initialValue = this.value;\r\n\r\n\t\t\tSpotlight.unspot();\r\n\t\t\tthis.focusInput();\r\n\t\t} else {\r\n\t\t\tthis.$.clientInput.blur();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Focuses the {@link module:moonstone/Input~Input} when the input decorator receives focus.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tinputFocus: function (inSender, inEvent) {\r\n\t\tvar direction = inEvent && inEvent.dir;\r\n\t\tif (this.open && direction) {\r\n\t\t\tthis.focusInput();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Value should be submitted if user clicks outside control. We check for\r\n\t* `onSpotlightFocus` and `mouseover` to avoid contracting the input on an event\r\n\t* fired from itself.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tinputSpotBlurred: function (inSender, inEvent) {\r\n\t\tvar eventType;\r\n\t\tif (this.open && Spotlight.getPointerMode()) {\r\n\t\t\teventType = Spotlight.getLastEvent().type;\r\n\t\t\tif (eventType !== 'onSpotlightFocus' && eventType !== 'mouseover') {\r\n\t\t\t\tthis.closeDrawerAndHighlightHeader();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinputKeyUp: function (sender, event) {\r\n\t\tif (event.keyCode == 13) {\r\n\t\t\tthis.closeDrawerAndHighlightHeader();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\theaderDown: function () {\r\n\t\tSpotlight.unfreeze();\r\n\t},\r\n\r\n\t/**\r\n\t* Focuses the input field.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tfocusInput: function () {\r\n\t\tthis.$.clientInput.focus();\r\n\t},\r\n\r\n\t/**\r\n\t* If [lockBottom]{@link module:moonstone/ExpandableInput~ExpandableInput#lockBottom} is `true`, don't allow user\r\n\t* to navigate down from the input field; if `false`, close the drawer and return\r\n\t* `true` to keep {@glossary Spotlight} on header.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tinputSpotDown: function (inSender, inEvent) {\r\n\t\tif (this.lockBottom) {\r\n\t\t\tthis.focusInput();\r\n\t\t} else {\r\n\t\t\tthis.closeDrawerAndHighlightHeader();\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbackKeyHandler: function () {\r\n\t\tif (this.open) this.set('value', this._initialValue);\r\n\t\tExpandableListItem.prototype.backKeyHandler.apply(this, arguments);\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @default $L('edit box')\r\n\t* @type {String}\r\n\t* @see enyo/AccessibilitySupport~AccessibilitySupport#accessibilityHint\r\n\t* @public\r\n\t*/\r\n\taccessibilityHint: $L('edit box'),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: ['type', 'value'], method: function () {\r\n\t\t\tif ( this.$.header && this.type == 'password' && this.value) {\r\n\t\t\t\tvar character = (this.value.length > 1) ? $L('characters') : $L('character');\r\n\t\t\t\tthis.$.header._accessibilityText = this.value.length + ' ' + character;\r\n\t\t\t}\r\n\t\t}}\r\n\t]\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/DataGridList~DataGridList} kind.\r\n* @module moonstone/DataGridList\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom'),\r\n\tutil = require('enyo/utils'),\r\n\tri = require('enyo/resolution'),\r\n\tDataGridList = require('enyo/DataGridList');\r\n\r\nvar\r\n\tSpotlight = require('spotlight');\r\n\r\nvar\r\n\tDataList = require('../DataList'),\r\n\tDataListSpotlightSupport = DataList.SpotlightSupport,\r\n\tScroller = require('../Scroller'),\r\n\tScrollStrategy = require('../ScrollStrategy');\r\n\r\n/**\r\n* {@link module:moonstone/DataGridList~DataGridList} is an {@link module:enyo/DataGridList~DataGridList} with Moonstone visual\r\n* styling applied.\r\n*\r\n* @class DataGridList\r\n* @extends module:enyo/DataGridList~DataGridList\r\n* @mixes module:moonstone/DataListSpotlightSupport~DataListSpotlightSupport\r\n* @ui\r\n* @public\r\n*/\r\nvar MoonDataGridList = module.exports = kind(\r\n\t/** @lends module:moonstone/DataGridList~DataGridList.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.DataGridList',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: DataGridList,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [DataListSpotlightSupport],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnoDefer: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tallowTransitions: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlight: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tscrollerOptions: { kind: Scroller, vertical:'scroll', horizontal: 'hidden' },\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonSpotlightFocus   : 'handleSpotlightFocus',\r\n\t\tonSpotlightBlur    : 'handleSpotlightBlur',\r\n\t\tonSpotlightFocused : 'handleSpotlightFocused'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitContainer: function() {\r\n\t\t// Our delegate relies on scroll column metrics, so we\r\n\t\t// need to ask the scroller to measure the columns for us\r\n\t\tthis.scrollerOptions.measureScrollColumns = true;\r\n\t\tDataGridList.prototype.initContainer.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\t// scale px values for current resolution\r\n\t\t\tthis.spacing = ri.scale(this.spacing);\t// TODO: Spacing should only be even whole numbers!\r\n\t\t\tthis.minWidth = ri.scale(this.minWidth);\r\n\t\t\tthis.minHeight = ri.scale(this.minHeight);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleSpotlightFocus: function (inSender, inEvent) {\r\n\t\tvar c = inEvent.originator;\r\n\t\tvar isClientControl = this.getClientControls().indexOf(c) >= 0;\r\n\t\tif(isClientControl) {\r\n\t\t\tvar zIndex = parseInt(dom.getComputedStyleValue(c.hasNode(), 'z-index'), 10) || 0;\r\n\t\t\tc.applyStyle('z-index', zIndex + 1);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleSpotlightBlur: function (inSender, inEvent) {\r\n\t\tvar c = inEvent.originator;\r\n\t\tvar isClientControl = this.getClientControls().indexOf(c) >= 0;\r\n\t\tif(isClientControl) {\r\n\t\t\tsetTimeout(this.bindSafely(function () {\r\n\t\t\t\tc.applyStyle('z-index', null);\r\n\t\t\t}), 0);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleSpotlightFocused: function (inSender, inEvent) {\r\n\t\tif (!Spotlight.getPointerMode()) {\r\n\t\t\tif (inEvent.index < this.indexBoundFirstRow) {\r\n\t\t\t\tthis.$.scroller.scrollToTop();\r\n\t\t\t} else if (inEvent.index > this.indexBoundLastRow) {\r\n\t\t\t\tthis.$.scroller.scrollToBottom();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\n/**\r\n* Overload the delegate strategy to incorporate measurements for our scrollers\r\n* when they are visible.\r\n*\r\n* @private\r\n*/\r\nvar p = MoonDataGridList.delegates.verticalGrid = util.clone(DataGridList.delegates.verticalGrid);\r\nkind.extendMethods(p, {\r\n\t/**\r\n\t* Overriding refresh() to stop scroller and stop scrolling.\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\trefresh: kind.inherit(function (sup) {\r\n\t\treturn function (list) {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tlist.$.scroller.stop();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Overriding scrollToControl() to specify Moonstone-specific scroller options.\r\n\t* No need to call the super method, so we don't wrap in enyo.inherit().\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tscrollToControl: function(list, control) {\r\n\t\tlist.$.scroller.scrollToControl(control, false, false, true);\r\n\t},\r\n\r\n\t/**\r\n\t* Overriding scrollTo() to specify Moonstone-specific scroller options.\r\n\t* No need to call the super method, so we don't wrap in enyo.inherit().\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tscrollTo: function(list, x, y) {\r\n\t\tlist.$.scroller.scrollTo(x, y, false);\r\n\t},\r\n\r\n\t/**\r\n\t* moon.ScrollStrategy dynamically shows / hides scroll controls\r\n\t* depending on whether there's enough content to scroll. It also\r\n\t* \"steals\" space from the scrollable content area to make room\r\n\t* for the controls. This means we need to calculate whether scroll\r\n\t* controls will be required before generating list pages so that we\r\n\t* can adjust our metrics accordingly.\r\n\t*\r\n\t* We do this by overriding the width() method, so that we can\r\n\t* subtract the width of the scroll column in cases where we\r\n\t* calculate that we'll need to scroll.\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\twidth: kind.inherit(function (sup) {\r\n\t\treturn function (list) {\r\n\t\t\tvar w = sup.apply(this, arguments),\r\n\t\t\t\ts = list.$.scroller,\r\n\t\t\t\tv = s.getVertical(),\r\n\t\t\t\ta, b, r, h;\r\n\t\t\tif (s.spotlightPagingControls) {\r\n\t\t\t\ta = true;\r\n\t\t\t}\r\n\t\t\telse if (v === 'auto') {\r\n\t\t\t\tb = s.getScrollBounds();\r\n\t\t\t\tthis.calculateMetrics(list, w);\r\n\t\t\t\tr = Math.ceil(list.collection.length / list.columns);\r\n\t\t\t\th = r * this.childSize(list);\r\n\t\t\t\ta = (h > b.clientHeight);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ta = (v === 'scroll');\r\n\t\t\t}\r\n\t\t\tif (a) {\r\n\t\t\t\tw = w - ScrollStrategy.vScrollColumnSize;\r\n\t\t\t\tthis.calculateMetrics(list, w);\r\n\t\t\t}\r\n\t\t\treturn w;\r\n\t\t};\r\n\t})\r\n}, true);\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/ExpandableIntegerPicker~ExpandableIntegerPicker} kind.\r\n* @module moonstone/ExpandableIntegerPicker\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tExpandableListItem = require('../ExpandableListItem'),\r\n\tSimpleIntegerPicker = require('../SimpleIntegerPicker');\r\n\r\n/**\r\n* Fires when the currently selected item changes.\r\n*\r\n* @event module:moonstone/ExpandableIntegerPicker~ExpandableIntegerPicker#onChange\r\n* @type {Object}\r\n* @property {Number} value - The value of the currently selected item.\r\n* @property {String} content -  The content of the currently selected item.\r\n*\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:moonstone/ExpandableIntegerPicker~ExpandableIntegerPicker}, which extends {@link module:moonstone/ExpandableListItem~ExpandableListItem},\r\n* is a drop-down picker menu that prompts the user to make a selection from a range of\r\n* integer-based options.\r\n*\r\n* The value of the currently selected item is available in the picker's\r\n* [value]{@link module:moonstone/ExpandableIntegerPicker~ExpandableIntegerPicker#value} property.\r\n*\r\n* When the picker is minimized, the content of the currently selected item is\r\n* displayed as subtext below the picker label.\r\n*\r\n* @class ExpandableIntegerPicker\r\n* @extends module:moonstone/ExpandableListItem~ExpandableListItem\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/ExpandableIntegerPicker~ExpandableIntegerPicker.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ExpandableIntegerPicker',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: ExpandableListItem,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-expandable-integer-picker',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\r\n\t\t/**\r\n\t\t* {@link module:moonstone/ExpandableIntegerPicker~ExpandableIntegerPicker#onChange}\r\n\t\t*/\r\n\t\tonChange: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/ExpandableIntegerPicker~ExpandableIntegerPicker.prototype\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* Initial value of the picker.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tvalue: 0,\r\n\r\n\t\t/**\r\n\t\t* Minimum value of the picker.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmin: 0,\r\n\r\n\t\t/**\r\n\t\t* Maximum value of the picker.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 9\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmax: 9,\r\n\r\n\t\t/**\r\n\t\t* Amount by which to increment/decrement.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 1\r\n\t\t* @public\r\n\t\t*/\r\n\t\tstep: 1,\r\n\r\n\t\t/**\r\n\t\t* Unit/label to be appended to the end of the number.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'sec'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tunit: 'sec'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tlockBottom: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tautoCollapse: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\trequestScrollIntoView: 'requestScrollIntoView'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdrawerComponents: [\r\n\t\t{name: 'picker', kind: SimpleIntegerPicker, deferInitialization: true, onSelect: 'closeDrawerAndHighlightHeader', onChange: 'pickerValueChanged'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbindings: [\r\n\t\t{from: '.min', to: '.$.picker.min', oneWay: false},\r\n\t\t{from: '.max', to: '.$.picker.max', oneWay: false},\r\n\t\t{from: '.step', to: '.$.picker.step'},\r\n\t\t{from: '.unit', to: '.$.picker.unit'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tExpandableListItem.prototype.create.apply(this, arguments);\r\n\t\tthis.requestPickerReflow();\r\n\t\tthis.valueChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trequestPickerReflow: function () {\r\n\t\tthis._needsPickerReflow = true;\r\n\t},\r\n\r\n\t/**\r\n\t* Intentionally using an observer instead of a binding since the order of applying `value`,\r\n\t* `min`, and `max` is important. Bindings are processed after `create()` so calling this\r\n\t* in `create()` guarantees it runs first.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tvalueChanged: function () {\r\n\t\tthis.$.picker.set('value', this.value);\r\n\t},\r\n\r\n\t/**\r\n\t* @see module:moonstone/ExpandableListItem~ExpandableListItem#currentValueShowing\r\n\t* @private\r\n\t*/\r\n\tcurrentValueShowing: function () {\r\n\t\treturn !this.open;\r\n\t},\r\n\r\n\t/**\r\n\t* @see module:moonstone/ExpandableListItem~ExpandableListItem#currentValueText\r\n\t* @private\r\n\t*/\r\n\tcurrentValueText: function () {\r\n\t\treturn this.unit? this.value + ' ' + this.unit : this.value;\r\n\t},\r\n\r\n\t/**\r\n\t* Change handler\r\n\t*\r\n\t* @private\r\n\t*/\r\n\topenChanged: function () {\r\n\t\tExpandableListItem.prototype.openChanged.apply(this, arguments);\r\n\t\tif (this.open && this._needsPickerReflow) {\r\n\t\t\tthis.$.picker.reflow();\r\n\t\t\tthis._needsPickerReflow = false;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Catch onChange events from the picker and update the value as it may have been clamped\r\n\t* by the picker's `step` property. Firing its own event so `content` can be fixed because\r\n\t* it may not have synced to SimpleIntegerPicker before this fires (e.g. the first time).\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpickerValueChanged: function (sender, event) {\r\n\t\tvar content = this.unit? event.value + ' ' + this.unit : event.value;\r\n\t\tthis.set('value', event.value);\r\n\r\n\t\tthis.doChange({\r\n\t\t\tvalue: this.value,\r\n\t\t\tcontent: content\r\n\t\t});\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tspotlightDown: function (inSender, inEvent) {\r\n\t\tif (this.getLockBottom() && (inEvent.originator === this.$.picker) && this.getOpen()) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/DatePicker~DatePicker} kind.\r\n* @module moonstone/DatePicker\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tdateFactory = require('enyo-ilib/DateFactory');\r\n\r\nvar\r\n\tDateTimePickerBase = require('../DateTimePickerBase'),\r\n\t$L = require('../i18n'),\r\n\tIntegerPicker = require('../IntegerPicker');\r\n\r\n/**\r\n* {@link module:moonstone/DatePicker~DatePicker} is a control used to allow the selection of (or simply\r\n* display) a day, month, and year.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tDatePicker = require('moonstone/DatePicker');\r\n*\r\n* \t{kind: DatePicker, noneText: 'Pick a Date', content: 'Date',\r\n* \t\tonChange: 'changed'}\r\n* ```\r\n*\r\n* Set the [value]{@link module:moonstone/DatePicker~DatePicker#value} property to a standard JavaScript\r\n* {@glossary Date} object to initialize the picker, or to change it programmatically\r\n* at runtime.\r\n*\r\n* @class DatePicker\r\n* @extends module:moonstone/DateTimePickerBase~DateTimePickerBase\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/DatePicker~DatePicker.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.DatePicker',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: DateTimePickerBase,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/DatePicker~DatePicker.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Optional minimum year value. Must be specified using the Gregorian\r\n\t\t* calendar, regardless of the calendar type used by the specified locale.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 1900\r\n\t\t* @public\r\n\t\t*/\r\n\t\tminYear: 1900,\r\n\r\n\t\t/**\r\n\t\t* Optional maximum year value. Must be specified using the Gregorian\r\n\t\t* calendar, regardless of the calendar type used by the specified locale.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 2099\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmaxYear: 2099,\r\n\r\n\t\t/**\r\n\t\t* Optional label for day.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'day'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdayText: $L('day'),\t\t\t// i18n 'DAY' label in moon.DatePicker widget\r\n\r\n\t\t/**\r\n\t\t* Optional label for month.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'month'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmonthText: $L('month'),\t\t// i18n 'MONTH' label in moon.DatePicker widget\r\n\r\n\t\t/**\r\n\t\t* Optional label for year.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'year'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tyearText: $L('year')\t\t\t// i18n 'YEAR' label in Moon.DatePicker widget\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tiLibFormatType: 'date',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdefaultOrdering: 'Mdy',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitILib: function () {\r\n\t\tDateTimePickerBase.prototype.initILib.apply(this, arguments);\r\n\t\tif (this.value) {\r\n\t\t\tthis.localeValue = dateFactory({unixtime: this.value.getTime(), timezone: 'local'});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * When [iLib]{@glossary ilib} is supported, calculates the minimum year in the\r\n\t * current calendar. Otherwise, returns the value of the published property\r\n\t * [minYear]{@link module:moonstone/DatePicker~DatePicker#minYear}.\r\n\t *\r\n\t * @private\r\n\t */\r\n\tgetMinYear: function() {\r\n\t\tvar greg = dateFactory({\r\n\t\t\ttype: 'gregorian',\r\n\t\t\tyear: this.minYear,\r\n\t\t\tmonth: 1,\r\n\t\t\tday: 1,\r\n\t\t\ttimezone: 'local'\r\n\t\t});\r\n\t\tvar localCalendarDate = dateFactory({\r\n\t\t\tjulianday: greg.getJulianDay(),\r\n\t\t\ttimezone: 'local'\r\n\t\t});\r\n\t\treturn localCalendarDate.getYears();\r\n\t},\r\n\r\n\t/**\r\n\t * When [iLib]{@glossary ilib} is supported, calculates the maximum year in the\r\n\t * current calendar. Otherwise, returns the value of the published property\r\n\t * [maxYear]{@link module:moonstone/DatePicker~DatePicker#maxYear}.\r\n\t *\r\n\t * @private\r\n\t */\r\n\tgetMaxYear: function() {\r\n\t\tvar greg = dateFactory({\r\n\t\t\ttype: 'gregorian',\r\n\t\t\tyear: this.maxYear,\r\n\t\t\tmonth: 1,\r\n\t\t\tday: 1,\r\n\t\t\ttimezone: 'local'\r\n\t\t});\r\n\t\tvar localCalendarDate = dateFactory({\r\n\t\t\tjulianday: greg.getJulianDay(),\r\n\t\t\ttimezone: 'local'\r\n\t\t});\r\n\t\treturn localCalendarDate.getYears();\r\n\t},\r\n\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetupPickers: function (ordering) {\r\n\t\tvar pickers = [];\r\n\t\tvar orderingArr = ordering.split('');\r\n\t\tvar doneArr = [];\r\n\t\tvar o, f, l, digits, values;\r\n\t\tfor(f = 0, l = orderingArr.length; f < l; f++) {\r\n\t\t\to = orderingArr[f];\r\n\t\t\tif (doneArr.indexOf(o) < 0) {\r\n\t\t\t\tdoneArr.push(o);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvalues = this.calcPickerValues();\r\n\t\tthis.silence();\r\n\r\n\t\tfor(f = 0, l = doneArr.length; f < l; f++) {\r\n\t\t\to = doneArr[f];\r\n\r\n\t\t\tswitch (o) {\r\n\t\t\tcase 'd':\r\n\t\t\t\tdigits = (ordering.indexOf('dd') > -1) ? 2 : null;\r\n\t\t\t\tpickers.push(this.createComponent(\r\n\t\t\t\t\t{classes: 'moon-date-time-picker-wrap', components:[\r\n\t\t\t\t\t\t{kind: IntegerPicker, name:'day', classes:'moon-date-picker-field', wrap:true, digits:digits, min:1,\r\n\t\t\t\t\t\tmax: values.maxDays, value: values.date, onChange: 'pickerChanged'},\r\n\t\t\t\t\t\t{name: 'dayLabel', content: this.dayText, classes: 'moon-date-time-picker-label moon-divider-text'}\r\n\t\t\t\t\t]}\r\n\t\t\t\t));\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'M':\r\n\t\t\t\tdigits = (ordering.indexOf('MM') > -1) ? 2 : null;\r\n\t\t\t\tpickers.push(this.createComponent(\r\n\t\t\t\t\t{classes: 'moon-date-time-picker-wrap', components:[\r\n\t\t\t\t\t\t{kind: IntegerPicker, name:'month', classes:'moon-date-picker-field', wrap:true, min:1, max:values.maxMonths, value:values.month, onChange: 'pickerChanged'},\r\n\t\t\t\t\t\t{name: 'monthLabel', content: this.monthText, classes: 'moon-date-time-picker-label moon-divider-text'}\r\n\t\t\t\t\t]}\r\n\t\t\t\t));\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'y':\r\n\t\t\t\tpickers.push(this.createComponent(\r\n\t\t\t\t\t{classes: 'moon-date-time-picker-wrap year', components:[\r\n\t\t\t\t\t\t{kind: IntegerPicker, name:'year', classes:'moon-date-picker-field year', value:values.fullYear, min:this.getMinYear(), max:this.getMaxYear(), onChange: 'pickerChanged'},\r\n\t\t\t\t\t\t{name: 'yearLabel', content: this.yearText, classes: 'moon-date-time-picker-label moon-divider-text'}\r\n\t\t\t\t\t]}\r\n\t\t\t\t));\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.unsilence();\r\n\t\tthis.pickers = pickers;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tformatValue: function () {\r\n\t\tif (!this.value) {\r\n\t\t\treturn (this.noneText);\r\n\t\t}\r\n\t\treturn this._tf.format(this.value);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpickerChanged: function (inSender, inEvent) {\r\n\t\tif(this.syncingPickers) return true;\r\n\r\n\t\tvar day = this.$.day.getValue(),\r\n\t\t\tmonth = this.$.month.getValue(),\r\n\t\t\tyear = this.$.year.getValue(),\r\n\t\t\tmaxDays,\r\n\t\t\tvalue = this.localeValue || this.value;\r\n\t\tvar valueHours = value ? value.getHours() : 0;\r\n\t\tvar valueMinutes = value ? value.getMinutes() : 0;\r\n\t\tvar valueSeconds = value ? value.getSeconds() : 0;\r\n\t\tvar valueMilliseconds = value ? value.getMilliseconds() : 0;\r\n\r\n\t\tmaxDays = this.monthLength(year, month);\r\n\t\tthis.localeValue = dateFactory({\r\n\t\t\tday: (day <= maxDays) ? day : maxDays,\r\n\t\t\tmonth: month,\r\n\t\t\tyear: year,\r\n\t\t\thour: valueHours,\r\n\t\t\tminute: valueMinutes,\r\n\t\t\tsecond: valueSeconds,\r\n\t\t\tmillisecond: valueMilliseconds,\r\n\t\t\ttimezone: 'local'\r\n\t\t});\r\n\t\tthis.setValue(this.localeValue.getJSDate());\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetChildPickers: function (inOld) {\r\n\t\tif (this.value) {\r\n\t\t\tthis.localeValue = dateFactory({unixtime: this.value.getTime(), timezone: 'local'});\r\n\t\t} else {\r\n\t\t\tthis.localeValue = null;\r\n\t\t}\r\n\r\n\t\tif (this.localeValue || this.value) {\r\n\t\t\tvar values = this.calcPickerValues();\r\n\r\n\t\t\tthis.$.year.set('value', values.fullYear);\r\n\t\t\tthis.$.month.set('value', values.month);\r\n\t\t\tthis.$.day.set('value', values.date);\r\n\t\t\tthis.$.month.set('max', values.maxMonths);\r\n\t\t\tthis.$.day.set('max', values.maxDays);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcPickerValues: function () {\r\n\t\tvar values = {\r\n\t\t\tmaxMonths: 12,\r\n\t\t\tmaxDays: 31\r\n\t\t};\r\n\r\n\t\tif (this.localeValue) {\r\n\t\t\tvalues.fullYear = this.localeValue.getYears();\r\n\t\t\tvalues.month = this.localeValue.getMonths();\r\n\t\t\tvalues.date = this.localeValue.getDays();\r\n\t\t\tif (values.fullYear) {\r\n\t\t\t\tvalues.maxMonths = this._tf.cal.getNumMonths(values.fullYear);\r\n\t\t\t\tvalues.maxDays = this.monthLength(values.fullYear, values.month);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn values;\r\n\t},\r\n\r\n\t/**\r\n\t* Returns number of days in a particular month/year.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tmonthLength: function (inYear, inMonth) {\r\n\t\treturn this._tf.cal.getMonLength(inMonth, inYear);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tyearTextChanged: function (inOldvalue, inNewValue) {\r\n\t\tthis.$.yearLabel.setContent(inNewValue);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmonthTextChanged: function (inOldvalue, inNewValue) {\r\n\t\tthis.$.monthLabel.setContent(inNewValue);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdayTextChanged: function (inOldvalue, inNewValue) {\r\n\t\tthis.$.dayLabel.setContent(inNewValue);\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: ['dayText', 'monthText', 'yearText'], method: function () {\r\n\t\t\tthis.$.day.set('accessibilityLabel', this.dayText);\r\n\t\t\tthis.$.month.set('accessibilityLabel', this.monthText);\r\n\t\t\tthis.$.year.set('accessibilityLabel', this.yearText);\r\n\t\t}}\r\n\t]\r\n});\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/TimePicker~TimePicker} kind.\r\n* @module moonstone/TimePicker\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tControl = require('enyo/Control');\r\n\r\nvar\r\n\tdateFactory = require('enyo-ilib/DateFactory'),\r\n\tDateFmt = require('enyo-ilib/DateFmt'),\r\n\tLocaleInfo = require('enyo-ilib/LocaleInfo');\r\n\r\nvar\r\n\tDateTimePickerBase = require('../DateTimePickerBase'),\r\n\t$L = require('../i18n'),\r\n\tIntegerPicker = require('../IntegerPicker');\r\n\r\n/**\r\n* {@link module:moonstone/TimePicker~MeridiemPicker} is a helper kind used by {@link module:moonstone/TimePicker~TimePicker}.\r\n* It is not intended for use in other contexts.\r\n*\r\n* @class MeridiemPicker\r\n* @extends module:moonstone/IntegerPicker~IntegerPicker\r\n* @ui\r\n* @protected\r\n*/\r\nvar MeridiemPicker = kind(\r\n\t/** @lends module:moonstone/TimePicker~MeridiemPicker.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.MeridiemPicker',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: IntegerPicker,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-date-picker-month',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmin: 0,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmax: 1,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\twrap: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tlocale: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/TimePicker~MeridiemPicker.prototype\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* The meridiem names and time ranges to use if\r\n\t\t* [meridiemEnable]{@link module:moonstone/TimePicker~TimePicker#meridiemEnable}\r\n\t\t* is `true`.\r\n\t\t*\r\n\t\t* @type {Object[]}\r\n\t\t* @default [{name: 'AM', start: '00:00', end: '11:59'}, {name: 'PM', start: '12:00', end: '23:59'}]\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmeridiems: [{name: 'AM', start: '00:00', end: '11:59'}, {name: 'PM', start: '12:00', end: '23:59'}]\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitILib: function () {\r\n\t\t// Get localized meridiem values\r\n\t\tvar fmtParams = {\r\n\t\t\ttemplate: 'a',\r\n\t\t\tuseNative: false,\r\n\t\t\ttimezone: 'local'\r\n\t\t};\r\n\r\n\t\tif (this.locale) fmtParams.locale = this.locale;\r\n\r\n\t\tvar merFormatter = new DateFmt(fmtParams);\r\n\t\tthis.meridiems = merFormatter.getMeridiemsRange(fmtParams);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tthis.initILib();\r\n\t\tthis.max = this.meridiems.length - 1;\r\n\t\tIntegerPicker.prototype.create.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* Set meridiem value based on given hour and minute\r\n\t*\r\n\t* @param  {Number} hour - hour between 0 to 23\r\n\t* @param  {Number} minute - minute between 0 to 59\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tsetValueByTime: function (hour, minute) {\r\n\t\tvar meridiems = this.meridiems,\r\n\t\t\tstart, end, time;\r\n\t\tfor (var i = 0; i < meridiems.length; i++) {\r\n\t\t\tstart = parseInt(meridiems[i].start.substring(0,2) + meridiems[i].start.substring(3,5), 10);\r\n\t\t\tend = parseInt(meridiems[i].end.substring(0,2) + meridiems[i].end.substring(3,5), 10);\r\n\t\t\ttime = hour * 100 + minute;\r\n\r\n\t\t\tif ( start <= time && time <= end) this.set('value', i);\r\n\t\t}\r\n\t\tthis.offset = hour - parseInt(meridiems[this.value].start, 10);\r\n\t},\r\n\r\n\t/**\r\n\t* Get meridiem based on given value\r\n\t*\r\n\t* @param  {Number} value - value between min to max\r\n\t* @return {Object} meridiem - element of meridiems\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tgetMeridiemByValue: function (value) {\r\n\t\tif (value < this.min || value > this.max) return null;\r\n\t\treturn this.meridiems[value];\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tvalueChanged: function () {\r\n\t\tIntegerPicker.prototype.valueChanged.apply(this, arguments);\r\n\t\tthis.updateOverlays();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetupItem: function (inSender, inEvent) {\r\n\t\tvar index = inEvent.index % this.range || 0;\r\n\t\tthis.$.item.setContent(this.meridiems[index].name);\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\tariaValue: function () {\r\n\t\tthis.setAriaAttribute('aria-valuetext', this.meridiems[this.value].name);\r\n\t}\r\n});\r\n\r\n/**\r\n* {@link module:moonstone/TimePicker~HourMinutePickerBase} is a helper kind used by {@link module:moonstone/TimePicker~TimePicker}.\r\n*  It is not intended for use in other contexts.\r\n*\r\n* @class HourMinutePickerBase\r\n* @extends module:moonstone/IntegerPicker~IntegerPicker\r\n* @ui\r\n* @protected\r\n*/\r\nvar HourMinutePickerBase = kind(\r\n\t/** @lends module:moonstone/TimePicker~HourMinutePickerBase.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.HourMinutePickerBase',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: IntegerPicker,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'moon-date-picker-field',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tformatter: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\twrap: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tIntegerPicker.prototype.create.apply(this, arguments);\r\n\t\t// Create ilib Date object used for formatting hours\r\n\t\tthis.date = dateFactory();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetupItem: function (inSender, inEvent) {\r\n\t\tvar value = this.format(inEvent.index % this.range || 0);\r\n\t\tthis.$.item.setContent(value);\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\tariaValue: function () {\r\n\t\tif (this.date && this.range) {\r\n\t\t\tvar value = this.format(this.value % this.range);\r\n\t\t\tif (this.getAttribute('aria-valuenow') != value) {\r\n\t\t\t\tthis.setAriaAttribute('aria-valuenow', value);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\n/**\r\n* {@link module:moonstone/TimePicker~MinutePicker} is a helper kind used by {@link module:moonstone/TimePicker~TimePicker}.\r\n*  It is not intended for use in other contexts.\r\n*\r\n* @class MinutePicker\r\n* @extends module:moonstone/TimePicker~HourMinutePickerBase\r\n* @ui\r\n* @protected\r\n*/\r\nvar MinutePicker = kind(\r\n\t/** @lends module:moonstone/TimePicker~MinutePicker.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.MinutePicker',\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: HourMinutePickerBase,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmin: 0,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmax: 59,\r\n\r\n\t/**\r\n\t * Formats the minute at `index` for the current locale\r\n\t *\r\n\t * @param  {Number} index - Minute between 0 and 59\r\n\t * @return {String}       - Formatted minute\r\n\t * @private\r\n\t */\r\n\tformat: function (index) {\r\n\t\tthis.date.minute = index;\r\n\t\treturn this.formatter.format(this.date);\r\n\t}\r\n});\r\n\r\n/**\r\n* {@link module:moonstone/TimePicker~HourPicker} is a helper kind used by {@link module:moonstone/TimePicker~TimePicker}. It is\r\n*  not intended for use in other contexts.\r\n*\r\n* @class HourPicker\r\n* @extends module:moonstone/TimePicker~HourMinutePickerBase\r\n* @ui\r\n* @protected\r\n*/\r\nvar HourPicker = kind(\r\n\t/** @lends module:moonstone/TimePicker~HourPicker.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.HourPicker',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: HourMinutePickerBase,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmin: 0,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmax: 23,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tvalueChanged: function (old) {\r\n\t\tthis.offset = this.value - old;\r\n\t\tIntegerPicker.prototype.valueChanged.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t * Formats the hour at `index` for the current locale\r\n\t *\r\n\t * @param  {Number} index - Hour between 0 and 24\r\n\t * @return {String}       - Formatted hour\r\n\t * @private\r\n\t */\r\n\tformat: function (index) {\r\n\t\tthis.date.hour = index;\r\n\t\treturn this.formatter.format(this.date);\r\n\t},\r\n\r\n\t/**\r\n\t * If the formatted new and old values are the same, skip animating by not passing\r\n\t * the old value to `IntegerPicker.scrollToValue`.\r\n\t *\r\n\t * If the hour is changed by more than 12 but the locale is using 12 hour formatting, this\r\n\t * will not prevent a big scroll through all intermediate values (e.g. from 3pm to 2am) even\r\n\t * though it only has to scroll 1 index. This can be seen most easily by selecting a time\r\n\t * between 2 and 3 pm on day when DST springs forward and then changing the meridiem to AM.\r\n\t *\r\n\t * @see module:moonstone/IntegerPicker~IntegerPicker.scrollToValue\r\n\t * @private\r\n\t */\r\n\tscrollToValue: function (old) {\r\n\t\t// try to avoid the format calls if the old and current values\r\n\t\t// don't mod to the same value\r\n\t\tvar maybeSame = old !== undefined && old%12 === this.value%12;\r\n\t\tif (maybeSame && this.format(old) === this.format(this.value)) {\r\n\t\t\tHourMinutePickerBase.prototype.scrollToValue.call(this);\r\n\t\t} else {\r\n\t\t\tHourMinutePickerBase.prototype.scrollToValue.apply(this, arguments);\r\n\t\t}\r\n\t}\r\n});\r\n/**\r\n* {@link module:moonstone/TimePicker~TimePicker} is a\r\n* [control]{@link module:enyo/Control~Control} used to allow the selection of\r\n* (or to simply display) a time expressed in hours and minutes, with an optional\r\n* meridiem indicator ('am' or 'pm').\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tTimePicker = require('moonstone/TimePicker');\r\n*\r\n* \t{kind: TimePicker, content: 'Time', meridiemEnable: true,\r\n* \t\tonChange: 'changed'}\r\n* ```\r\n*\r\n* Set the [value]{@link module:moonstone/TimePicker~TimePicker#value} property to a standard JavaScript\r\n* {@glossary Date} object to initialize the picker, or to change it programmatically at\r\n* runtime.\r\n*\r\n* @class TimePicker\r\n* @extends module:moonstone/DateTimePickerBase~DateTimePickerBase\r\n* @ui\r\n* @public\r\n*/\r\nvar TimePicker = module.exports = kind(\r\n\t/** @lends module:moonstone/TimePicker~TimePicker.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.TimePicker',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: DateTimePickerBase,\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/TimePicker~TimePicker.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* When `true`, the picker will use a 12-hour clock. (When [iLib]{@glossary ilib} is loaded,\r\n\t\t* this value will be ignored and the current locale's rules will determine whether a\r\n\t\t* 12-hour or 24-hour clock is used.)\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmeridiemEnable: false,\r\n\r\n\t\t/**\r\n\t\t* Optional label for hour.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'moonstone/i18n.$L('hour')'\r\n\t\t* @public\r\n\t\t*/\r\n\t\thourText: $L('hour'),\t\t\t// i18n 'HOUR' label in moonstone/TimePicker widget\r\n\r\n\t\t/**\r\n\t\t* Optional label for minute.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'moonstone/i18n.$L('minute')'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tminuteText: $L('minute'),\t\t// i18n 'MINUTE' label in moonstone/TimePicker widget\r\n\r\n\t\t/**\r\n\t\t* Optional label for meridiem.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'moonstone/i18n.$L('meridiem')'\r\n\t\t* @public\r\n\t\t*/\r\n\r\n\t\tmeridiemText: $L('meridiem'),\t// i18n 'MERIDIEM' label in moonstone/TimePicker widget\r\n\t\t/**\r\n\t\t* When `true`, midnight (and noon, if `meridiemEnable: true`) will be represented as `0`\r\n\t\t* instead of `24` (and `12`). (When [iLib]{@glossary ilib} is loaded, this value will be\r\n\t\t* ignored and the current locale's rules will determine whether `0` is used.)\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\thoursStartAtZero: false,\r\n\r\n\t\t/**\r\n\t\t* When `true`, hours will be zero-padded. (When [iLib]{@glosary ilib} is loaded, this\r\n\t\t* value will be ignored and the current locale's rules will determine whether\r\n\t\t* zero-padding is used.)\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\thoursZeroPadded: false,\r\n\r\n\t\t/**\r\n\t\t* When `true`, bottom text will be displayed\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tshowPickerLabels: true\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tobservers: {\r\n\t\trefresh: ['hoursStartAtZero', 'meridiemEnable', 'hoursZeroPadded']\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tiLibFormatType  : 'time',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdefaultOrdering : 'hma',\r\n\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitILib: function () {\r\n\t\tDateTimePickerBase.prototype.initILib.apply(this, arguments);\r\n\r\n\t\t// Set picker format 12 vs 24 hour clock\r\n\t\tvar li = new LocaleInfo(this.locale || undefined);\r\n\t\tvar clockPref = li.getClock();\r\n\t\tthis.meridiemEnable = (clockPref == '12');\r\n\r\n\t\tvar fmtParams = {\r\n\t\t\ttype: 'time',\r\n\t\t\ttime: 'h',\r\n\t\t\tclock: clockPref !== 'locale' ? clockPref : undefined,\r\n\t\t\tuseNative: false,\r\n\t\t\ttimezone: 'local'\r\n\t\t};\r\n\t\tif (this.locale) fmtParams.locale = this.locale;\r\n\t\tthis.hourFormatter = new DateFmt(fmtParams);\r\n\r\n\t\tfmtParams.time = 'm';\r\n\t\tthis.minuteFormatter = new DateFmt(fmtParams);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetupPickers: function (ordering) {\r\n\t\tvar pickers = [];\r\n\t\tvar orderingArr = ordering.toLowerCase().split('');\r\n\t\tvar doneArr = [];\r\n\t\tvar o, f, l, values;\r\n\t\tfor(f = 0, l = orderingArr.length; f < l; f++) {\r\n\t\t\to = orderingArr[f];\r\n\t\t\tif (doneArr.indexOf(o) < 0) doneArr.push(o);\r\n\t\t}\r\n\r\n\t\tvalues = this.calcPickerValues();\r\n\t\tthis.silence();\r\n\r\n\t\tfor(f = 0, l = doneArr.length; f < l; f++) {\r\n\t\t\to = doneArr[f];\r\n\r\n\t\t\tswitch (o){\r\n\t\t\tcase 'h':\r\n\t\t\tcase 'k':\r\n\t\t\t\tpickers.push(this.wrapComponent(\r\n\t\t\t\t\t{name: 'timeWrapper', kind: Control, classes: 'moon-time-picker-wrap'},\r\n\t\t\t\t\t{kind: Control, classes: 'moon-date-time-picker-wrap', components:[\r\n\t\t\t\t\t\t{name: 'hour', kind: HourPicker, formatter: this.hourFormatter || this, value: values.hour, onChange: 'hourPickerChanged'},\r\n\t\t\t\t\t\t{name: 'hourLabel', kind: Control, content: this.hourText, classes: 'moon-date-time-picker-label moon-divider-text', renderOnShow: true}\r\n\t\t\t\t\t]},\r\n\t\t\t\t\tthis\r\n\t\t\t\t));\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'm':\r\n\t\t\t\tpickers.push(this.wrapComponent(\r\n\t\t\t\t\t{name: 'timeWrapper', kind: Control, classes: 'moon-time-picker-wrap'},\r\n\t\t\t\t\t{kind: Control, classes: 'moon-date-time-picker-wrap', components:[\r\n\t\t\t\t\t\t{name: 'minute', kind: MinutePicker, formatter: this.minuteFormatter || this, value: values.minute, onChange: 'minutePickerChanged'},\r\n\t\t\t\t\t\t{name: 'minuteLabel', kind: Control, content: this.minuteText, classes: 'moon-date-time-picker-label moon-divider-text', renderOnShow: true}\r\n\t\t\t\t\t]},\r\n\t\t\t\t\tthis\r\n\t\t\t\t));\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'a':\r\n\t\t\t\tif (this.meridiemEnable === true) {\r\n\t\t\t\t\tpickers.push(this.createComponent(\r\n\t\t\t\t\t\t{kind: Control, classes: 'moon-date-time-picker-wrap', components:[\r\n\t\t\t\t\t\t\t{name: 'meridiem', kind: MeridiemPicker, classes: 'moon-date-picker-field', locale: this.locale, onChange: 'meridiemPickerChanged'},\r\n\t\t\t\t\t\t\t{name: 'meridiemLabel', kind: Control, content: this.meridiemText, classes: 'moon-date-time-picker-label moon-divider-text', renderOnShow: true}\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t));\r\n\t\t\t\t\tthis.$.meridiem.setValueByTime(values.hour, values.minute);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tthis.showPickerLabelsChanged();\r\n\t\tthis.unsilence();\r\n\t\tthis.pickers = pickers;\r\n\t\tDateTimePickerBase.prototype.setupPickers.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\twrapComponent: function (wrapperProps, compProps, owner) {\r\n\t\tvar wrapper = this.$[wrapperProps.name];\r\n\t\tif (!wrapper) wrapper = this.createComponent(wrapperProps);\r\n\t\treturn wrapper.createComponent(compProps, {owner: owner});\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tformatValue: function () {\r\n\t\tif (!this.value) return (this.noneText);\r\n\t\treturn this._tf.format(dateFactory({unixtime: this.value.getTime(), timezone:'Etc/UTC'}));\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tformatHour: function (hour) {\r\n\t\tif (this.meridiemEnable) {\r\n\t\t\tif (hour > 12) hour -= 12;\r\n\t\t\tif (this.hoursStartAtZero) {\r\n\t\t\t\tif (hour == 12) hour = 0;\r\n\t\t\t} else hour = hour || 12;\r\n\t\t} else {\r\n\t\t\tif (!this.hoursStartAtZero) hour = hour || 24;\r\n\t\t}\r\n\t\tif (this.hoursZeroPadded) hour = ('0' + hour).slice(-2);\r\n\r\n\t\treturn hour;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tformatMinute: function (minute) {\r\n\t\treturn minute;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thourPickerChanged: function (sender, event) {\r\n\t\tif (this.syncingPickers) return true;\r\n\r\n\t\tvar hour = this.value.getHours() + (event.originator.offset);\r\n\r\n\t\tif (this.value) this.updateValue(hour);\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tminutePickerChanged: function (sender, event) {\r\n\t\tif (this.syncingPickers) return true;\r\n\r\n\t\tvar minutes = event.value;\r\n\r\n\t\tif (this.value) {\r\n\t\t\tthis.value.setMinutes(minutes);\r\n\t\t\tthis.set('value', this.value, {force: true});\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmeridiemPickerChanged: function (sender, event) {\r\n\t\tif (this.syncingPickers) return true;\r\n\r\n\t\tvar meridiemPicker = event.originator,\r\n\t\t\tmeridiems = meridiemPicker.get('meridiems'),\r\n\t\t\tmeridiem = meridiemPicker.getMeridiemByValue(event.value),\r\n\t\t\tstart = meridiem.start.split(':'),\r\n\t\t\tstartHour = parseInt(start[0], 10),\r\n\t\t\toffset = meridiemPicker.offset,\r\n\t\t\tnewHour = startHour + offset;\r\n\r\n\t\tif (meridiems.length == 2) this.updateValue(newHour);\r\n\t\telse {\r\n\t\t\tvar end = meridiem.end.split(':'),\r\n\t\t\t\tendHour = parseInt(end[0], 10),\r\n\t\t\t\tstartMinute = parseInt(start[1], 10),\r\n\t\t\t\tendMinute = parseInt(end[1], 10),\r\n\t\t\t\toldMinute = this.$.minute.get('value'),\r\n\t\t\t\tnewMinute;\r\n\r\n\t\t\tif (startHour * 100 + startMinute > newHour * 100 + oldMinute) {\r\n\t\t\t\tnewHour = startHour;\r\n\t\t\t\tnewMinute = startMinute;\r\n\t\t\t} else if (endHour * 100 + endMinute < newHour * 100 + oldMinute) {\r\n\t\t\t\tnewHour = endHour;\r\n\t\t\t\tnewMinute = endMinute;\r\n\t\t\t}\r\n\t\t\toffset = newHour - this.$.hour.get('value');\r\n\t\t\tthis.updateValue(this.value.getHours() + offset, newMinute);\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateValue: function (newHour, newMinute) {\r\n\t\tvar valueTime = this.value.getTime(),\r\n\t\t\tvalue = new Date(valueTime);\r\n\r\n\t\tif (newHour != null) value.setHours(newHour);\r\n\t\tif (newMinute != null) value.setMinutes(newMinute);\r\n\r\n\t\t// in the rare case that the value didn't change because it was snapped back to the\r\n\t\t// same value due to DST rules, push it back another hour.\r\n\t\tif (valueTime == value.getTime()) {\r\n\t\t\tvalue = new Date(valueTime - 3600000);\r\n\t\t}\r\n\r\n\t\tthis.set('value', value, {force: true});\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetChildPickers: function (inOld) {\r\n\t\tif (this.value) {\r\n\t\t\tvar values = this.calcPickerValues();\r\n\t\t\tthis.$.hour.set('value', values.hour);\r\n\t\t\tthis.$.minute.set('value',values.minute);\r\n\t\t\tif (this.meridiemEnable) this.$.meridiem.setValueByTime(values.hour, values.minute);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcPickerValues: function () {\r\n\t\tvar values = {},\r\n\t\t\tvalue = this.localeValue || this.value;\r\n\r\n\t\tif (value) {\r\n\t\t\tvalues.hour = value.getHours();\r\n\t\t\tvalues.minute = value.getMinutes();\r\n\t\t} else values.hour = values.minute = 0;\r\n\r\n\t\treturn values;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tvalueChanged: function (old) {\r\n\t\tif (this.value) this.localeValue = dateFactory({unixtime: this.value.getTime(), timezone: 'local'});\r\n\t\telse this.localeValue = null;\r\n\r\n\t\tDateTimePickerBase.prototype.valueChanged.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thourTextChanged: function (inOldvalue, inNewValue) {\r\n\t\tthis.$.hourLabel.set('content', inNewValue);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tminuteTextChanged: function (inOldvalue, inNewValue) {\r\n\t\tthis.$.minuteLabel.set('content', inNewValue);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmeridiemTextChanged: function (inOldvalue, inNewValue) {\r\n\t\tthis.$.meridiemLabel.set('content', inNewValue);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowPickerLabelsChanged: function (inOldvalue, inNewValue) {\r\n\t\tthis.$.hourLabel.set('showing', this.showPickerLabels);\r\n\t\tthis.$.minuteLabel.set('showing', this.showPickerLabels);\r\n\t\tif (this.meridiemEnable) this.$.meridiemLabel.set('showing', this.showPickerLabels);\r\n \t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{path: ['hourText', 'minuteText', 'meridiemText'], method: function () {\r\n\t\t\tthis.$.hour.set('accessibilityLabel', this.hourText);\r\n\t\t\tthis.$.minute.set('accessibilityLabel', this.minuteText);\r\n\t\t\tif (this.$.meridiem && this.meridiemText != $L('meridiem')) {\r\n\t\t\t\tthis.$.meridiem.set('accessibilityLabel', this.meridiemText);\r\n\t\t\t}\r\n\t\t}}\r\n\t]\r\n});\r\n\r\nTimePicker.HourPicker = HourPicker;\r\nTimePicker.MinutePicker = MinutePicker;\r\nTimePicker.MeridiemPicker = MeridiemPicker;\r\n","require('moonstone');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:moonstone/ExpandableDataPicker~ExpandableDataPicker} kind.\r\n* @module moonstone/ExpandableDataPicker\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tDataRepeater = require('enyo/DataRepeater');\r\n\r\nvar\r\n\tExpandablePicker = require('../ExpandablePicker');\r\n\r\n/**\r\n* {@link module:moonstone/ExpandableDataPicker~ExpandableDataPicker}, which\r\n* extends {@link module:moonstone/ExpandablePicker~ExpandablePicker}, is\r\n* a data-driven drop-down picker menu that solicits a choice from the user. The picker's child\r\n* components, which are instances of {@link module:moonstone/CheckboxItem~CheckboxItem} by default, provide\r\n* the options for the picker. The child controls are generated from the picker's\r\n* [collection]{@link module:moonstone/ExpandableDataPicker~ExpandableDataPicker#collection}.\r\n* \r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tExpandableDataPicker = require('moonstone/ExpandableDataPicker');\r\n*\r\n*\t {name: 'picker', kind: ExpandableDataPicker, content: 'Data Picker', components: [\r\n* \t\t{bindings: [\r\n* \t\t\t{from: '.model.label', to: '.content'}\r\n* \t\t]}\r\n* \t]}\r\n* ```\r\n*\r\n* @class ExpandableDataPicker\r\n* @extends module:moonstone/ExpandablePicker~ExpandablePicker\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/ExpandableDataPicker~ExpandableDataPicker.prototype */ {\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.ExpandableDataPicker',\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: ExpandablePicker,\r\n\t\r\n\t/**\r\n\t* @lends module:moonstone/ExpandableDataPicker~ExpandableDataPicker.prototype\r\n\t* @private\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* Collection of models to render as picker items\r\n\t\t*\r\n\t\t* @type {module:enyo/Collection~Collection}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcollection: null\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcollectionChanged: function () {\r\n\t\tthis.$.list.set('collection', this.collection);\r\n\t\tif (this.collection && !this.$.list.hasNode()) this.$.list.refresh();\r\n\t},\r\n\t\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tExpandablePicker.prototype.create.apply(this, arguments);\r\n\t\tthis.collectionChanged();\r\n\t},\r\n\t\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tinitComponents: function () {\r\n\t\tvar comps = this.components || this.kindComponents;\r\n\t\tthis.components = null;\r\n\r\n\t\tExpandablePicker.prototype.initComponents.apply(this, arguments);\r\n\r\n\t\tvar list = this.getListComponent(comps);\r\n\t\tthis.createComponent(list);\r\n\t},\r\n\t\r\n\t/**\r\n\t* Creates the configuration for the {@link module:enyo/DataRepeater~DataRepeater} that will generate the picker\r\n\t* items\r\n\t*\r\n\t* @param {Object[]} comps \t- Component configurations that will be each picker item\r\n\t* @return {Object} \t\t\t- List component configuration\r\n\t* @protected\r\n\t*/\r\n\tgetListComponent: function (comps) {\r\n\t\tvar list = {\r\n\t\t\tname: 'list',\r\n\t\t\tkind: DataRepeater,\r\n\t\t\tcomponents: comps,\r\n\t\t\towner: this\r\n\t\t};\r\n\r\n\t\t// could use defaultProps on the repeater but they'll also get added to the repeater's\r\n\t\t// container which may not be desirable\r\n\t\tif(comps.length === 1 && !comps[0].kind) {\r\n\t\t\tcomps[0].kind = this.defaultKind;\r\n\t\t}\r\n\r\n\t\treturn list;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetCheckboxControls: function () {\r\n\t\treturn this.$.list.getClientControls();\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:moonstone/DayPicker~DayPicker} kind.\r\n* @module moonstone/DayPicker\r\n*/\r\n\r\nrequire('moonstone');\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tSignals = require('enyo/Signals');\r\n\r\nvar\r\n\tilib = require('enyo-ilib'),\r\n\tDateFmt = require('enyo-ilib/DateFmt'),\r\n\tLocaleInfo = require('enyo-ilib/LocaleInfo');\r\n\r\nvar\r\n\tExpandablePicker = require('../ExpandablePicker'),\r\n\t$L = require('../i18n');\r\n\r\n/**\r\n* {@link module:moonstone/DayPicker~DayPicker}, which extends\r\n* {@link module:moonstone/ExpandablePicker~ExpandablePicker}, is a drop-down\r\n* picker menu allowing the user to choose day(s) of the week.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tDayPicker = require('moonstone/DayPicker');\r\n*\r\n* \t{kind: DayPicker}\r\n* ```\r\n*\r\n* When the picker is minimized, the currently selected day is displayed as\r\n* subtext below the picker label. The subtext will be updated automatically if\r\n* a new value is selected.  The content of the subtext strings may be customized\r\n* by the user.\r\n*\r\n* ```javascript\r\n* \t{kind: DayPicker, everyWeekdayText: 'Weekdays', everyWeekendText: 'Weekends',\r\n* \t\teveryDayText:'Daily'}\r\n* ```\r\n*\r\n* @class DayPicker\r\n* @extends module:moonstone/ExpandablePicker~ExpandablePicker\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:moonstone/DayPicker~DayPicker.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'moon.DayPicker',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: ExpandablePicker,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tautoCollapseOnSelect: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmultipleSelection: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontent: $L('Select days'),\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:moonstone/DayPicker~DayPicker.prototype\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Text to be displayed when all of the days are selected.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'Every Day'\r\n\t\t* @public\r\n\t\t*/\r\n\t\teveryDayText: $L('Every Day'),\r\n\r\n\t\t/**\r\n\t\t* Text to be displayed when all of the weekdays are selected.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'Every Weekday'\r\n\t\t* @public\r\n\t\t*/\r\n\t\teveryWeekdayText: $L('Every Weekday'),\r\n\r\n\t\t/**\r\n\t\t* Text to be displayed when all of the weekend days are selected.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'Every Weekend'\r\n\t\t* @public\r\n\t\t*/\r\n\t\teveryWeekendText: $L('Every Weekend'),\r\n\r\n\t\t/**\r\n\t\t* Text to be displayed if no item is currently selected.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'Nothing selected'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tnoneText: $L('Nothing selected')\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tfirstDayOfWeek: 0,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tweekEndStart: 6,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tweekEndEnd: 0,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttools: [\r\n\t\t{kind: Signals, onlocalechange: 'handleLocaleChangeEvent'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdaysComponents: [\r\n\t\t{content: 'Sunday'},\r\n\t\t{content: 'Monday'},\r\n\t\t{content: 'Tuesday'},\r\n\t\t{content: 'Wednesday'},\r\n\t\t{content: 'Thursday'},\r\n\t\t{content: 'Friday'},\r\n\t\t{content: 'Saturday'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdays: ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\t// super initialization\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.createChrome(this.tools);\r\n\t\t\tthis.initILib();\r\n\t\t\tthis.createComponents(this.daysComponents);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitILib: function () {\r\n\t\tvar i, index;\r\n\t\tif (typeof ilib !== 'undefined') {\r\n\t\t\tvar df = new DateFmt({length: 'full'});\r\n\t\t\tvar sdf = new DateFmt({length: 'long'});\r\n\t\t\tvar li = new LocaleInfo(ilib.getLocale());\r\n\t\t\tvar daysOfWeek = df.getDaysOfWeek();\r\n\t\t\tvar days = sdf.getDaysOfWeek();\r\n\r\n\t\t\tthis.firstDayOfWeek = li.getFirstDayOfWeek();\r\n\t\t\tthis.weekEndStart = li.getWeekEndStart ? li.getWeekEndStart() : this.weekEndStart;\r\n\t\t\tthis.weekEndEnd = li.getWeekEndEnd ? li.getWeekEndEnd() : this.getWeekEndEnd;\r\n\r\n\t\t\t// adjust order of days\r\n\t\t\tthis.daysComponents = [];\r\n\t\t\tthis.days = [];\r\n\t\t\tfor (i = 0; i < 7; i++) {\r\n\t\t\t\tindex = (i + this.firstDayOfWeek) % 7;\r\n\t\t\t\tthis.daysComponents[i] = {content: daysOfWeek[index]};\r\n\t\t\t\tthis.days[i] = days[index];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleLocaleChangeEvent: function () {\r\n\t\tthis.destroyClientControls();\r\n\t\tthis.initILib();\r\n\t\tthis.createComponents(this.daysComponents);\r\n\t\tthis.render();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmultiSelectCurrentValue: function () {\r\n\t\tvar str = this.getRepresentativeString();\r\n\t\tif (str) {\r\n\t\t\treturn str;\r\n\t\t}\r\n\r\n\t\tfor (var i=0; i < this.selectedIndex.length; i++) {\r\n\t\t\tif (!str) {\r\n\t\t\t\tstr = this.days[this.selectedIndex[i]];\r\n\t\t\t} else {\r\n\t\t\t\tstr = str + ', ' + this.days[this.selectedIndex[i]];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn str || this.getNoneText();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetRepresentativeString: function () {\r\n\t\tvar bWeekEndStart = false,\r\n\t\t\tbWeekEndEnd = false,\r\n\t\t\tlength = this.selectedIndex.length,\r\n\t\t\tweekendLength = this.weekEndStart === this.weekEndEnd ? 1 : 2,\r\n\t\t\tindex, i;\r\n\r\n\t\tif (length == 7) return this.everyDayText;\r\n\r\n\t\tfor (i = 0; i < 7; i++) {\r\n\t\t\t// convert the control index to day index\r\n\t\t\tindex = (this.selectedIndex[i] + this.firstDayOfWeek) % 7;\r\n\t\t\tbWeekEndStart = bWeekEndStart || this.weekEndStart == index;\r\n\t\t\tbWeekEndEnd = bWeekEndEnd || this.weekEndEnd == index;\r\n\t\t}\r\n\r\n\t\tif (bWeekEndStart && bWeekEndEnd && length == weekendLength) {\r\n\t\t\treturn this.everyWeekendText;\r\n\t\t} else if (!bWeekEndStart && !bWeekEndEnd && length == 7 - weekendLength) {\r\n\t\t\treturn this.everyWeekdayText;\r\n\t\t}\r\n\t}\r\n});\r\n"]}