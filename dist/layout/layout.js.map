{"version":3,"sources":["..\\..\\lib\\layout\\index.js","..\\..\\lib\\layout\\src\\easing.js","..\\..\\lib\\layout\\src\\List\\methods.js","..\\..\\lib\\layout\\src\\ContextualLayout\\ContextualLayout.js","..\\..\\lib\\layout\\src\\Arranger\\Arranger.js","..\\..\\lib\\layout\\src\\CardArranger.js","..\\..\\lib\\layout\\src\\CarouselArranger.js","..\\..\\lib\\layout\\src\\DockRightArranger.js","..\\..\\lib\\layout\\src\\GridArranger.js","..\\..\\lib\\layout\\src\\LeftRightArranger.js","..\\..\\lib\\layout\\src\\SpiralArranger.js","..\\..\\lib\\layout\\src\\CardSlideInArranger.js","..\\..\\lib\\layout\\src\\CollapsingArranger.js","..\\..\\lib\\layout\\src\\TopBottomArranger.js","..\\..\\lib\\layout\\src\\Panels\\Panels.js","..\\..\\lib\\layout\\src\\FittableLayout\\FittableLayout.js","..\\..\\lib\\layout\\src\\FlyweightRepeater.js","..\\..\\lib\\layout\\src\\ImageViewPin\\ImageViewPin.js","..\\..\\lib\\layout\\src\\PulldownList\\Puller.js","..\\..\\lib\\layout\\src\\Slideable.js","..\\..\\lib\\layout\\src\\FittableColumns.js","..\\..\\lib\\layout\\src\\FittableRows.js","..\\..\\lib\\layout\\src\\FittableHeaderLayout.js","..\\..\\lib\\layout\\src\\Node\\Node.js","..\\..\\lib\\layout\\src\\PanZoomView.js","..\\..\\lib\\layout\\src\\List\\List.js","..\\..\\lib\\layout\\src\\ImageView.js","..\\..\\lib\\layout\\src\\AroundList.js","..\\..\\lib\\layout\\src\\PulldownList\\PulldownList.js","..\\..\\lib\\layout\\src\\ImageCarousel.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACliEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7gBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACv6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5rBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7mBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5jBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"generated.js","sourceRoot":"","sourcesContent":["module.exports = {\r\n\tversion: '2.7.0'\r\n};\r\n","var\r\n    animation = require('enyo/animation'),\r\n    utils = require('enyo/utils');\r\n\r\n/**\r\n* Provides static methods for easing calculations.\r\n*\r\n* @module layout/easing\r\n* @ui\r\n* @public\r\n* @todo verify this combines with enyo.easing definition\r\n* @todo verify all these methods need to be documented\r\n*/\r\n\r\nvar easing = module.exports = utils.mixin(animation.easing, /** @lends module:layout/easing */ {\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeInQuad: function (n, t, b, c, d) {\r\n        return c*(t /= d)*t + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeOutQuad: function (n, t, b, c, d) {\r\n        return -c *(t /= d)*(t-2) + b;\r\n    },\r\n\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeInOutQuad: function (n, t, b, c, d) {\r\n        if ((t /= d/2) < 1) { return c/2*t*t + b; }\r\n        return -c/2 * ((--t)*(t-2) - 1) + b;\r\n    },\r\n\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeInCubic: function (n, t, b, c, d) {\r\n        return c*(t /= d)*t*t + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeOutCubic: function (n, t, b, c, d) {\r\n        return c*((t=t/d-1)*t*t + 1) + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeInOutCubic: function (n, t, b, c, d) {\r\n        if ((t /= d/2) < 1) { return c/2*t*t*t + b; }\r\n        return c/2*((t-=2)*t*t + 2) + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeInQuart: function (n, t, b, c, d) {\r\n        return c*(t /= d)*t*t*t + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeOutQuart: function (n, t, b, c, d) {\r\n        return -c * ((t=t/d-1)*t*t*t - 1) + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeInOutQuart: function (n, t, b, c, d) {\r\n        if ((t /= d/2) < 1) { return c/2*t*t*t*t + b; }\r\n        return -c/2 * ((t-=2)*t*t*t - 2) + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeInQuint: function (n, t, b, c, d) {\r\n        return c*(t /= d)*t*t*t*t + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeOutQuint: function (n, t, b, c, d) {\r\n        return c*((t=t/d-1)*t*t*t*t + 1) + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeInOutQuint: function (n, t, b, c, d) {\r\n        if ((t /= d/2) < 1) { return c/2*t*t*t*t*t + b; }\r\n        return c/2*((t-=2)*t*t*t*t + 2) + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeInSine: function (n, t, b, c, d) {\r\n        return -c * Math.cos(t/d * (Math.PI/2)) + c + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeOutSine: function (n, t, b, c, d) {\r\n        return c * Math.sin(t/d * (Math.PI/2)) + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeInOutSine: function (n, t, b, c, d) {\r\n        return -c/2 * (Math.cos(Math.PI*t/d) - 1) + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeInExpo: function (n, t, b, c, d) {\r\n        return (t===0) ? b : c * Math.pow(2, 10 * (t/d - 1)) + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeOutExpo: function (n, t, b, c, d) {\r\n        return (t===d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeInOutExpo: function (n, t, b, c, d) {\r\n        if (t===0) { return b; }\r\n        if (t===d) { return b+c; }\r\n        if ((t /= d/2) < 1) { return c/2 * Math.pow(2, 10 * (t - 1)) + b; }\r\n        return c/2 * (-Math.pow(2, -10 * --t) + 2) + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeInCirc: function (n, t, b, c, d) {\r\n        return -c * (Math.sqrt(1 - (t /= d)*t) - 1) + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeOutCirc: function (n, t, b, c, d) {\r\n        return c * Math.sqrt(1 - (t=t/d-1)*t) + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeInOutCirc: function (n, t, b, c, d) {\r\n        if ((t /= d/2) < 1) { return -c/2 * (Math.sqrt(1 - t*t) - 1) + b; }\r\n        return c/2 * (Math.sqrt(1 - (t-=2)*t) + 1) + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeInElastic: function (n, t, b, c, d) {\r\n        var s = 1.70158;\r\n        var a = c;\r\n        var p = 0;\r\n        if (t===0) { return b; }\r\n        if ((t /= d)==1) { return b+c; }\r\n        if (!p) { p=d*0.3; }\r\n        if (a < Math.abs(c)) { a=c; s=p/4; }\r\n        else { s = p/(2*Math.PI) * Math.asin (c/a); }\r\n        return -(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeOutElastic: function (n, t, b, c, d) {\r\n        var s = 1.70158;\r\n        var a = c;\r\n        var p = 0;\r\n        if (t===0) { return b; }\r\n        if ((t /= d)==1) { return b+c; }\r\n        if (!p) { p=d*0.3; }\r\n        if (a < Math.abs(c)) { a=c; s=p/4; }\r\n        else { s = p/(2*Math.PI) * Math.asin (c/a); }\r\n        return a*Math.pow(2,-10*t) * Math.sin( (t*d-s)*(2*Math.PI)/p ) + c + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeInOutElastic: function (n, t, b, c, d) {\r\n        var s = 1.70158;\r\n        var a = c;\r\n        var p = 0;\r\n        if (t===0) { return b; }\r\n        if ((t /= d/2)===2) { return b+c; }\r\n        if (!p) { p=d*(0.3*1.5); }\r\n        if (a < Math.abs(c)) { a=c; s=p/4; }\r\n        else { s = p/(2*Math.PI) * Math.asin (c/a); }\r\n        if (t < 1) { return -0.5*(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b; }\r\n        return a*Math.pow(2,-10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )*0.5 + c + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeInBack: function (n, t, b, c, d) {\r\n        var s = 1.70158;\r\n        return c*(t /= d)*t*((s+1)*t - s) + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeOutBack: function (n, t, b, c, d) {\r\n        var s = 1.70158;\r\n        return c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeInOutBack: function (n, t, b, c, d) {\r\n        var s = 1.70158;\r\n        if ((t /= d/2) < 1) { return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b; }\r\n        return c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeInBounce: function (n, t, b, c, d) {\r\n        return c - easing.easeOutBounce (n, d-t, 0, c, d) + b;\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeOutBounce: function (n, t, b, c, d) {\r\n        if ((t /= d) < (1/2.75)) {\r\n            return c*(7.5625*t*t) + b;\r\n        } else if (t < (2/2.75)) {\r\n            return c*(7.5625*(t-=(1.5/2.75))*t + 0.75) + b;\r\n        } else if (t < (2.5/2.75)) {\r\n            return c*(7.5625*(t-=(2.25/2.75))*t + 0.9375) + b;\r\n        } else {\r\n            return c*(7.5625*(t-=(2.625/2.75))*t + 0.984375) + b;\r\n        }\r\n    },\r\n\r\n    /**\r\n    * @type {Number}\r\n    * @public\r\n    */\r\n    easeInOutBounce: function (n, t, b, c, d) {\r\n        if (t < d/2) { return easing.easeInBounce (n, t*2, 0, c, d) * 0.5 + b; }\r\n        return easing.easeOutBounce (n, t*2-d, 0, c, d) * 0.5 + c * 0.5 + b;\r\n    }\r\n});\r\n\r\n/*\r\n\r\nTERMS OF USE - EASING EQUATIONS\r\n\r\nOpen source under the BSD License.\r\n\r\nCopyright © 2001 Robert Penner\r\nAll rights reserved.\r\n\r\nRedistribution and use in source and binary forms, with or without modification,\r\nare permitted provided that the following conditions are met:\r\n\r\nRedistributions of source code must retain the above copyright notice, this list\r\nof conditions and the following disclaimer.\r\n\r\nRedistributions in binary form must reproduce the above copyright notice, this list\r\nof conditions and the following disclaimer in the documentation and/or other materials\r\nprovided with the distribution.\r\n\r\nNeither the name of the author nor the names of contributors may be used to endorse\r\nor promote products derived from this software without specific prior written permission.\r\n\r\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY\r\nEXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\r\nOF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT\r\nSHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT\r\nOF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)\r\nHOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR\r\nTORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\r\nEVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n\r\n*/\r\n","var\r\n\tanimation = require('enyo/animation'),\r\n\tdom = require('enyo/dom'),\r\n\tkind = require('enyo/kind'),\r\n\tlogger = require('enyo/logger'),\r\n\tplatform = require('enyo/platform'),\r\n\tutils = require('enyo/utils');\r\n\r\n/**\r\n* layout/List was too large for the parser so we have to split it up. For now, we're arbitrarily\r\n* splitting the methods into another file. A more appropriate refactoring is required.\r\n* @module layout/List\r\n* @private\r\n*/\r\n\r\nmodule.exports = /** @lends module:layout/List~List.prototype */ {\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\timportProps: kind.inherit(function (sup) {\r\n\t\treturn function (props) {\r\n\t\t\t// force touch on desktop when we have reorderable items to work around\r\n\t\t\t// problems with native scroller\r\n\t\t\tif (props && props.reorderable) {\r\n\t\t\t\tthis.touch = true;\r\n\t\t\t}\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tthis.pageSizes = [];\r\n\t\t\tthis.orientV = this.orient == 'v';\r\n\t\t\tthis.vertical = this.orientV ? 'default' : 'hidden';\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.$.generator.orient = this.orient;\r\n\t\t\tthis.getStrategy().translateOptimized = true;\r\n\t\t\tthis.$.port.addRemoveClass('horizontal',!this.orientV);\r\n\t\t\tthis.$.port.addRemoveClass('vertical',this.orientV);\r\n\t\t\tthis.$.page0.addRemoveClass('vertical',this.orientV);\r\n\t\t\tthis.$.page1.addRemoveClass('vertical',this.orientV);\r\n\t\t\tthis.bottomUpChanged();  // Initializes pageBound also\r\n\t\t\tthis.noSelectChanged();\r\n\t\t\tthis.multiSelectChanged();\r\n\t\t\tthis.toggleSelectedChanged();\r\n\t\t\t// setup generator to default to 'full-list' values\r\n\t\t\tthis.$.generator.setRowOffset(0);\r\n\t\t\tthis.$.generator.setCount(this.count);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tinitComponents: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tthis.createReorderTools();\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.createSwipeableComponents();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreateReorderTools: function () {\r\n\t\tthis.createComponent({\r\n\t\t\tname: 'reorderContainer',\r\n\t\t\tclasses: 'enyo-list-reorder-container',\r\n\t\t\tondown: 'sendToStrategy',\r\n\t\t\tondrag: 'sendToStrategy',\r\n\t\t\tondragstart: 'sendToStrategy',\r\n\t\t\tondragfinish: 'sendToStrategy',\r\n\t\t\tonflick: 'sendToStrategy'\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t* Adjusts the parent control so [listTools]{@link module:layout/List~List#listTools} are\r\n\t* created inside the strategy. This is necessary for strategies like\r\n\t* {@link module:enyo/TouchScrollStrategy~TouchScrollStrategy}, which wrap their contents with\r\n\t* additional DOM nodes.\r\n\t*\r\n\t* @see {@link module:enyo/Scroller~Scroller#createStrategy}\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreateStrategy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tthis.controlParentName = 'strategy';\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.createChrome(this.listTools);\r\n\t\t\tthis.controlParentName = 'client';\r\n\t\t\tthis.discoverControlParent();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreateSwipeableComponents: function () {\r\n\t\tfor (var i=0;i<this.swipeableComponents.length;i++) {\r\n\t\t\tthis.$.swipeableComponents.createComponent(this.swipeableComponents[i], {owner: this.owner});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\trendered: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.$.generator.node = this.$.port.hasNode();\r\n\t\t\tthis.$.generator.generated = true;\r\n\t\t\tthis.reset();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\thandleResize: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.refresh();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbottomUpChanged: function () {\r\n\t\tthis.$.generator.bottomUp = this.bottomUp;\r\n\t\tthis.$.page0.applyStyle(this.pageBound, null);\r\n\t\tthis.$.page1.applyStyle(this.pageBound, null);\r\n\r\n\t\tif (this.orientV) {\r\n\t\t\tthis.pageBound = this.bottomUp ? 'bottom' : 'top';\r\n\t\t} else {\r\n\t\t\tif (this.rtl) {\r\n\t\t\t\tthis.pageBound = this.bottomUp ? 'left' : 'right';\r\n\t\t\t} else {\r\n\t\t\t\tthis.pageBound = this.bottomUp ? 'right' : 'left';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this.orientV && this.bottomUp){\r\n\t\t\tthis.$.page0.applyStyle('left', 'auto');\r\n\t\t\tthis.$.page1.applyStyle('left', 'auto');\r\n\t\t}\r\n\r\n\t\tif (this.hasNode()) {\r\n\t\t\tthis.reset();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnoSelectChanged: function () {\r\n\t\tthis.$.generator.setNoSelect(this.noSelect);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmultiSelectChanged: function () {\r\n\t\tthis.$.generator.setMultiSelect(this.multiSelect);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttoggleSelectedChanged: function () {\r\n\t\tthis.$.generator.setToggleSelected(this.toggleSelected);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcountChanged: function () {\r\n\t\tif (this.hasNode()) {\r\n\t\t\tthis.updateMetrics();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Re-dispatches events from the reorder tools to the scroll strategy.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsendToStrategy: function (sender, event) {\r\n\t\tthis.$.strategy.dispatchEvent('on' + event.type, event, sender);\r\n\t},\r\n\r\n\t/**\r\n\t* Calculates page metrics (size, number of pages) and resizes the port.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdateMetrics: function () {\r\n\t\tthis.defaultPageSize = this.rowsPerPage * (this.rowSize || 100);\r\n\t\tthis.pageCount = Math.ceil(this.count / this.rowsPerPage);\r\n\t\tthis.portSize = 0;\r\n\t\tfor (var i=0; i < this.pageCount; i++) {\r\n\t\t\tthis.portSize += this.getPageSize(i);\r\n\t\t}\r\n\t\tthis.adjustPortSize();\r\n\t},\r\n\r\n\t/**\r\n\t* Handles hold pulse events. Used to delay before running hold logic.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tholdpulse: function (sender, event) {\r\n\t\t// don't activate if we're not supporting reordering or if we've already\r\n\t\t// activated the reorder logic\r\n\t\tif (!this.getReorderable() || this.isReordering()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// first pulse event that exceeds our minimum hold time activates\r\n\t\tif (event.holdTime >= this.reorderHoldTimeMS) {\r\n\t\t\t// determine if we should handle the hold event\r\n\t\t\tif (this.shouldStartReordering(sender, event)) {\r\n\t\t\t\tthis.startReordering(event);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Handles DragStart events.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdragstart: function (sender, event) {\r\n\t\t// stop dragstart from propagating if we're in reorder mode\r\n\t\tif (this.isReordering()) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (this.isSwipeable()) {\r\n\t\t\treturn this.swipeDragStart(sender, event);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Determines whether we should handle the drag event.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdrag: function (sender, event) {\r\n\t\tif (this.shouldDoReorderDrag(event)) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.reorderDrag(event);\r\n\t\t\treturn true;\r\n\t\t} else if (this.isSwipeable()) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.swipeDrag(sender, event);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Handles DragFinish events.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdragfinish: function (sender, event) {\r\n\t\tif (this.isReordering()) {\r\n\t\t\tthis.finishReordering(sender, event);\r\n\t\t} else if (this.isSwipeable()) {\r\n\t\t\tthis.swipeDragFinish(sender, event);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Handles up events.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tup: function (sender, event) {\r\n\t\tif (this.isReordering()) {\r\n\t\t\tthis.finishReordering(sender, event);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Calculates the record indices for `pageNumber` and generates the markup\r\n\t* for that page.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgeneratePage: function (pageNumber, target) {\r\n\t\tthis.page = pageNumber;\r\n\t\tvar r = this.rowsPerPage * this.page;\r\n\t\tthis.$.generator.setRowOffset(r);\r\n\t\tvar rpp = Math.min(this.count - r, this.rowsPerPage);\r\n\t\tthis.$.generator.setCount(rpp);\r\n\t\tvar html = this.$.generator.generateChildHtml();\r\n\t\ttarget.setContent(html);\r\n\t\t// prevent reordering row from being draw twice\r\n\t\tif (this.getReorderable() && this.draggingRowIndex > -1) {\r\n\t\t\tthis.hideReorderingRow();\r\n\t\t}\r\n\t\tvar bounds = target.getBounds();\r\n\t\tvar pageSize = this.orientV ? bounds.height : bounds.width;\r\n\t\t// if rowSize is not set, use the height or width from the first generated page\r\n\t\tif (!this.rowSize && pageSize > 0) {\r\n\t\t\tthis.rowSize = Math.floor(pageSize / rpp);\r\n\t\t\tthis.updateMetrics();\r\n\t\t}\r\n\t\t// update known page sizes\r\n\t\tif (!this.fixedSize) {\r\n\t\t\tvar s0 = this.getPageSize(pageNumber);\r\n\t\t\tif (s0 != pageSize && pageSize > 0) {\r\n\t\t\t\tthis.pageSizes[pageNumber] = pageSize;\r\n\t\t\t\tthis.portSize += pageSize - s0;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Maps a row index number to the page number where it would be found.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpageForRow: function (index) {\r\n\t\treturn Math.floor(index / this.rowsPerPage);\r\n\t},\r\n\r\n\t/**\r\n\t * Updates the list pages to show the correct rows for the requested `top` position.\r\n\t *\r\n\t * @param  {Number} top - Position in pixels from the top.\r\n\t * @private\r\n\t */\r\n\tupdate: function (top) {\r\n\t\tvar updated = false;\r\n\t\t// get page info for position\r\n\t\tvar pi = this.positionToPageInfo(top);\r\n\t\t// zone line position\r\n\t\tvar pos = pi.pos + this.scrollerSize/2;\r\n\t\t// leap-frog zone position\r\n\t\tvar k = Math.floor(pos/Math.max(pi.size, this.scrollerSize) + 1/2) + pi.no;\r\n\t\t// which page number for page0 (even number pages)?\r\n\t\tvar p = (k % 2 === 0) ? k : k-1;\r\n\t\tif (this.p0 != p && this.isPageInRange(p)) {\r\n\t\t\tthis.removedInitialPage = this.removedInitialPage || (this.draggingRowPage == this.p0);\r\n\t\t\tthis.generatePage(p, this.$.page0);\r\n\t\t\tthis.positionPage(p, this.$.page0);\r\n\t\t\tthis.p0 = p;\r\n\t\t\tupdated = true;\r\n\t\t\tthis.p0RowBounds = this.getPageRowSizes(this.$.page0);\r\n\t\t}\r\n\t\t// which page number for page1 (odd number pages)?\r\n\t\tp = (k % 2 === 0) ? Math.max(1, k-1) : k;\r\n\t\t// position data page 1\r\n\t\tif (this.p1 != p && this.isPageInRange(p)) {\r\n\t\t\tthis.removedInitialPage = this.removedInitialPage || (this.draggingRowPage == this.p1);\r\n\t\t\tthis.generatePage(p, this.$.page1);\r\n\t\t\tthis.positionPage(p, this.$.page1);\r\n\t\t\tthis.p1 = p;\r\n\t\t\tupdated = true;\r\n\t\t\tthis.p1RowBounds = this.getPageRowSizes(this.$.page1);\r\n\t\t}\r\n\t\tif (updated) {\r\n\t\t\t// reset generator back to 'full-list' values\r\n\t\t\tthis.$.generator.setRowOffset(0);\r\n\t\t\tthis.$.generator.setCount(this.count);\r\n\t\t\tif (!this.fixedSize) {\r\n\t\t\t\tthis.adjustBottomPage();\r\n\t\t\t\tthis.adjustPortSize();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Calculates the height and width of each row for a page.\r\n\t*\r\n\t* @param {module:enyo/Control~Control} page - Page control.\r\n\t* @private\r\n\t*/\r\n\tgetPageRowSizes: function (page) {\r\n\t\tvar rows = {};\r\n\t\tvar allDivs = page.hasNode().querySelectorAll('div[data-enyo-index]');\r\n\t\tfor (var i=0, index, bounds; i < allDivs.length; i++) {\r\n\t\t\tindex = allDivs[i].getAttribute('data-enyo-index');\r\n\t\t\tif (index !== null) {\r\n\t\t\t\tbounds = dom.getBounds(allDivs[i]);\r\n\t\t\t\trows[parseInt(index, 10)] = {height: bounds.height, width: bounds.width};\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn rows;\r\n\t},\r\n\r\n\t/**\r\n\t* Updates row bounds when rows are re-rendered.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdateRowBounds: function (index) {\r\n\t\tif (this.p0RowBounds[index]) {\r\n\t\t\tthis.updateRowBoundsAtIndex(index, this.p0RowBounds, this.$.page0);\r\n\t\t} else if (this.p1RowBounds[index]) {\r\n\t\t\tthis.updateRowBoundsAtIndex(index, this.p1RowBounds, this.$.page1);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateRowBoundsAtIndex: function (index, rows, page) {\r\n\t\tvar rowDiv = page.hasNode().querySelector('div[data-enyo-index=\"' + index + '\"]');\r\n\t\tvar bounds = dom.getBounds(rowDiv);\r\n\t\trows[index].height = bounds.height;\r\n\t\trows[index].width = bounds.width;\r\n\t},\r\n\r\n\t/**\r\n\t* Updates the list for the given `position`.\r\n\t*\r\n\t* @param {Number} position - Position in pixels.\r\n\t* @private\r\n\t*/\r\n\tupdateForPosition: function (position) {\r\n\t\tthis.update(this.calcPos(position));\r\n\t},\r\n\r\n\t/**\r\n\t* Adjusts the position if the list is [bottomUp]{@link module:layout/List~List#bottomUp}.\r\n\t*\r\n\t* @param {Number} position - Position in pixels.\r\n\t* @private\r\n\t*/\r\n\tcalcPos: function (position) {\r\n\t\treturn (this.bottomUp ? (this.portSize - this.scrollerSize - position) : position);\r\n\t},\r\n\r\n\t/**\r\n\t* Determines which page is on the bottom and positions it appropriately.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tadjustBottomPage: function () {\r\n\t\tvar bp = this.p0 >= this.p1 ? this.$.page0 : this.$.page1;\r\n\t\tthis.positionPage(bp.pageNo, bp);\r\n\t},\r\n\r\n\t/**\r\n\t* Updates the size of the port to be the greater of the size of the scroller or\r\n\t* the `portSize`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tadjustPortSize: function () {\r\n\t\tthis.scrollerSize = this.orientV ? this.getBounds().height : this.getBounds().width;\r\n\t\tvar s = Math.max(this.scrollerSize, this.portSize);\r\n\t\tthis.$.port.applyStyle((this.orientV ? 'height' : 'width'), s + 'px');\r\n\t\tif (!this.orientV) {\r\n\t\t\tthis.$.port.applyStyle('height', this.getBounds().height + 'px');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpositionPage: function (pageNumber, target) {\r\n\t\ttarget.pageNo = pageNumber;\r\n\t\tvar p = this.pageToPosition(pageNumber);\r\n\t\ttarget.applyStyle(this.pageBound, p + 'px');\r\n\t},\r\n\r\n\t/**\r\n\t* Calculates the position of `page`.\r\n\t*\r\n\t* @param {Number} page - Page number.\r\n\t* @private\r\n\t*/\r\n\tpageToPosition: function (page) {\r\n\t\tvar p = 0;\r\n\t\twhile (page > 0) {\r\n\t\t\tpage--;\r\n\t\t\tp += this.getPageSize(page);\r\n\t\t}\r\n\t\treturn p;\r\n\t},\r\n\r\n\t/**\r\n\t * Retrieves the metrics for a page covering `position`.\r\n\t *\r\n\t * @param  {Number} position - Position in pixels.\r\n\t * @return {module:layout/List~List~PageInfo}\r\n\t * @private\r\n\t */\r\n\tpositionToPageInfo: function (position) {\r\n\t\tvar page = -1;\r\n\t\tvar p = this.calcPos(position);\r\n\t\tvar s = this.defaultPageSize;\r\n\t\twhile (p >= 0) {\r\n\t\t\tpage++;\r\n\t\t\ts = this.getPageSize(page);\r\n\t\t\tp -= s;\r\n\t\t}\r\n\t\tpage = Math.max(page, 0);\r\n\t\treturn {\r\n\t\t\tno: page,\r\n\t\t\tsize: s,\r\n\t\t\tpos: p + s,\r\n\t\t\tstartRow: (page * this.rowsPerPage),\r\n\t\t\tendRow: Math.min((page + 1) * this.rowsPerPage - 1, this.count - 1)\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t* Determines if `page` is a valid page number.\r\n\t*\r\n\t* @param {Number} page - Page number.\r\n\t* @private\r\n\t*/\r\n\tisPageInRange: function (page) {\r\n\t\treturn page == Math.max(0, Math.min(this.pageCount-1, page));\r\n\t},\r\n\r\n\t/**\r\n\t* Calculates the size of a page. The size is estimated if the page has not\r\n\t* yet been rendered.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgetPageSize: function (pageNumber) {\r\n\t\tvar size = this.pageSizes[pageNumber];\r\n\t\t// estimate the size based on how many rows are in this page\r\n\t\tif (!size) {\r\n\t\t\tvar firstRow = this.rowsPerPage * pageNumber;\r\n\t\t\tvar numRows = Math.min(this.count - firstRow, this.rowsPerPage);\r\n\t\t\tsize = this.defaultPageSize * (numRows / this.rowsPerPage);\r\n\t\t}\r\n\t\t// can never return size of 0, as that would lead to infinite loops\r\n\t\treturn Math.max(1, size);\r\n\t},\r\n\r\n\t/**\r\n\t* Resets pages and removes all rendered rows.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tinvalidatePages: function () {\r\n\t\tthis.p0 = this.p1 = null;\r\n\t\tthis.p0RowBounds = {};\r\n\t\tthis.p1RowBounds = {};\r\n\t\t// clear the html in our render targets\r\n\t\tthis.$.page0.setContent('');\r\n\t\tthis.$.page1.setContent('');\r\n\t},\r\n\r\n\t/**\r\n\t* Resets page and row sizes.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tinvalidateMetrics: function () {\r\n\t\tthis.pageSizes = [];\r\n\t\tthis.rowSize = 0;\r\n\t\tthis.updateMetrics();\r\n\t},\r\n\r\n\t/**\r\n\t* When the list is scrolled, ensures that the correct rows are rendered and\r\n\t* that the reordering controls are positioned correctly.\r\n\t*\r\n\t* @see {@link module:enyo/Scroller~Scroller#scroll}\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tscroll: kind.inherit(function (sup) {\r\n\t\treturn function (sender, event) {\r\n\t\t\tvar r = sup.apply(this, arguments);\r\n\t\t\tvar pos = this.orientV ? this.getScrollTop() : this.getScrollLeft();\r\n\t\t\tif (this.lastPos === pos) {\r\n\t\t\t\treturn r;\r\n\t\t\t}\r\n\t\t\tthis.lastPos = pos;\r\n\t\t\tthis.update(pos);\r\n\t\t\tif (this.pinnedReorderMode) {\r\n\t\t\t\tthis.reorderScroll(sender, event);\r\n\t\t\t}\r\n\t\t\treturn r;\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Updates the list rows when the scroll top is set explicitly.\r\n\t*\r\n\t* @see {@link module:enyo/Scroller~Scroller#setScrollTop}\r\n\t* @method\r\n\t* @public\r\n\t*/\r\n\tsetScrollTop: kind.inherit(function (sup) {\r\n\t\treturn function (scrollTop) {\r\n\t\t\tthis.update(scrollTop);\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.twiddle();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetScrollPosition: function () {\r\n\t\treturn this.calcPos(this[(this.orientV ? 'getScrollTop' : 'getScrollLeft')]());\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetScrollPosition: function (position) {\r\n\t\tthis[(this.orientV ? 'setScrollTop' : 'setScrollLeft')](this.calcPos(position));\r\n\t},\r\n\r\n\t/**\r\n\t* Scrolls the list so that the last item is visible.\r\n\t*\r\n\t* @method\r\n\t* @public\r\n\t*/\r\n\tscrollToBottom: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tthis.update(this.getScrollBounds().maxTop);\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Scrolls to the specified row.\r\n\t*\r\n\t* @param {Number} row - The index of the row to scroll to.\r\n\t* @public\r\n\t*/\r\n\tscrollToRow: function (row) {\r\n\t\tvar page = this.pageForRow(row);\r\n\t\tvar h = this.pageToPosition(page);\r\n\t\t// update the page\r\n\t\tthis.updateForPosition(h);\r\n\t\t// call pageToPosition again and this time should return the right pos since the page info is populated\r\n\t\th = this.pageToPosition(page);\r\n\t\tthis.setScrollPosition(h);\r\n\t\tif (page == this.p0 || page == this.p1) {\r\n\t\t\tvar rowNode = this.$.generator.fetchRowNode(row);\r\n\t\t\tif (rowNode) {\r\n\t\t\t\t// calc row offset\r\n\t\t\t\tvar offset = (this.orientV ? rowNode.offsetTop : rowNode.offsetLeft);\r\n\t\t\t\tif (this.bottomUp) {\r\n\t\t\t\t\toffset = this.getPageSize(page) - (this.orientV ? rowNode.offsetHeight : rowNode.offsetWidth) - offset;\r\n\t\t\t\t}\r\n\t\t\t\tvar p = this.getScrollPosition() + offset;\r\n\t\t\t\tthis.setScrollPosition(p);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Scrolls to the beginning of the list.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tscrollToStart: function () {\r\n\t\tthis[this.bottomUp ? (this.orientV ? 'scrollToBottom' : 'scrollToRight') : 'scrollToTop']();\r\n\t},\r\n\r\n\t/**\r\n\t* Scrolls to the end of the list.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tscrollToEnd: function () {\r\n\t\tthis[this.bottomUp ? (this.orientV ? 'scrollToTop' : 'scrollToLeft') : (this.orientV ? 'scrollToBottom' : 'scrollToRight')]();\r\n\t},\r\n\r\n\t/**\r\n\t* Re-renders the list at the current position.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\trefresh: function () {\r\n\t\tthis.invalidatePages();\r\n\t\tthis.update(this[(this.orientV ? 'getScrollTop' : 'getScrollLeft')]());\r\n\t\tthis.stabilize();\r\n\r\n\t\t//FIXME: Necessary evil for Android 4.0.4 refresh bug\r\n\t\tif (platform.android === 4) {\r\n\t\t\tthis.twiddle();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Re-renders the list from the beginning.  This is used when changing the\r\n\t* data model for the list.  This also clears the selection state.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\treset: function () {\r\n\t\tthis.getSelection().clear();\r\n\t\tthis.invalidateMetrics();\r\n\t\tthis.invalidatePages();\r\n\t\tthis.stabilize();\r\n\t\tthis.scrollToStart();\r\n\t},\r\n\r\n\t/**\r\n\t* Returns the {@link module:enyo/Selection~Selection} component that\r\n\t* manages the selection state for this list.\r\n\t*\r\n\t* @return {module:enyo/Selection~Selection} - The component that manages selection state for this list.\r\n\t* @public\r\n\t*/\r\n\tgetSelection: function () {\r\n\t\treturn this.$.generator.getSelection();\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the selection state for the given row index.\r\n\t*\r\n\t* Modifying selection will not automatically re-render the row, so call\r\n\t* [renderRow()]{@link module:layout/List~List#renderRow} or [refresh()]{@link module:layout/List~List#refresh}\r\n\t* to update the view.\r\n\t*\r\n\t* @param {Number} index - The index of the row whose selection state is to be set.\r\n\t* @param {*} [data]     - Data value stored in the selection object.\r\n\t* @public\r\n\t*/\r\n\tselect: function (index, data) {\r\n\t\treturn this.getSelection().select(index, data);\r\n\t},\r\n\r\n\t/**\r\n\t* Clears the selection state for the given row index.\r\n\t*\r\n\t* Modifying selection will not automatically re-render the row, so call\r\n\t* [renderRow()]{@link module:layout/List~List#renderRow} or [refresh()]{@link module:layout/List~List#refresh}\r\n\t* to update the view.\r\n\t*\r\n\t* @param {Number} index - The index of the row whose selection state is to be cleared.\r\n\t* @public\r\n\t*/\r\n\tdeselect: function (index) {\r\n\t\treturn this.getSelection().deselect(index);\r\n\t},\r\n\r\n\t/**\r\n\t* Gets the selection state for the given row index.\r\n\t*\r\n\t* @param {Number} index - The index of the row whose selection state is\r\n\t* to be retrieved.\r\n\t* @return {Boolean} `true` if the given row is currently selected; otherwise, `false`.\r\n\t* @public\r\n\t*/\r\n\tisSelected: function (index) {\r\n\t\treturn this.$.generator.isSelected(index);\r\n\t},\r\n\r\n\t/**\r\n\t* Re-renders the specified row. Call this method after making\r\n\t* modifications to a row, to force it to render.\r\n\t*\r\n\t* @param {Number} index - The index of the row to be re-rendered.\r\n\t* @public\r\n    */\r\n    renderRow: function (index) {\r\n\t\tthis.$.generator.renderRow(index);\r\n    },\r\n\r\n\t/**\r\n \t* Handler for `onRenderRow` events. Updates row bounds when rows are re-rendered.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\trowRendered: function (sender, event) {\r\n\t\tthis.updateRowBounds(event.rowIndex);\r\n\t},\r\n\r\n\t/**\r\n\t* Prepares a row to become interactive.\r\n\t*\r\n\t* @param {Number} index - The index of the row to be prepared.\r\n\t* @public\r\n\t*/\r\n\tprepareRow: function (index) {\r\n\t\tthis.$.generator.prepareRow(index);\r\n\t},\r\n\r\n\t/**\r\n\t* Restores the row to being non-interactive.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tlockRow: function () {\r\n\t\tthis.$.generator.lockRow();\r\n\t},\r\n\r\n\t/**\r\n\t* Performs a set of tasks by running the function `func` on a row (which\r\n\t* must be interactive at the time the tasks are performed). Locks the\trow\r\n\t* when done.\r\n\t*\r\n\t* @param {Number} index   - The index of the row to be acted upon.\r\n\t* @param {function} func  - The function to perform.\r\n\t* @param {Object} context - The context to which the function is bound.\r\n\t* @public\r\n\t*/\r\n\tperformOnRow: function (index, func, context) {\r\n\t\tthis.$.generator.performOnRow(index, func, context);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tanimateFinish: function (sender) {\r\n\t\tthis.twiddle();\r\n\t\treturn true;\r\n\t},\r\n\t/**\r\n\t* FIXME: Android 4.04 has issues with nested composited elements; for example, a\r\n\t* SwipeableItem, can incorrectly generate taps on its content when it has slid off the\r\n\t* screen; we address this BUG here by forcing the Scroller to 'twiddle' which corrects the\r\n\t* bug by provoking a dom update.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\ttwiddle: function () {\r\n\t\tvar s = this.getStrategy();\r\n\t\tutils.call(s, 'twiddle');\r\n\t},\r\n\r\n\t/**\r\n\t* Returns page0 or page1 control depending on pageNumber odd/even status\r\n\t*\r\n\t* @param {Number} pageNumber  - Index of page.\r\n\t* @param {Boolean} checkRange - Whether to force checking `pageNumber` against\r\n\t* currently active pages.\r\n\t* @return {module:enyo/Control~Control}      - Page control for `pageNumber`.\r\n\t* @private\r\n\t*/\r\n\tpageForPageNumber: function (pageNumber, checkRange) {\r\n\t\tif (pageNumber % 2 === 0) {\r\n\t\t\treturn (!checkRange || (pageNumber === this.p0)) ? this.$.page0 : null;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn (!checkRange || (pageNumber === this.p1)) ? this.$.page1 : null;\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\t/**\r\n\t\t---- Reorder functionality ------------\r\n\t*/\r\n\r\n\t/**\r\n\t* Determines whether the hold event should be handled as a reorder hold.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshouldStartReordering: function (sender, event) {\r\n\t\tif (!this.getReorderable() ||\r\n\t\t\tevent.rowIndex == null ||\r\n\t\t\tevent.rowIndex < 0 ||\r\n\t\t\tthis.pinnedReorderMode ||\r\n\t\t\tevent.index == null ||\r\n\t\t\tevent.index < 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* Processes hold event and prepares for reordering.\r\n\t*\r\n\t* @fires module:layout/List~List#onSetupReorderComponents\r\n\t* @private\r\n\t*/\r\n\tstartReordering: function (event) {\r\n\t\t// disable drag to scroll on strategy\r\n\t\tthis.$.strategy.listReordering = true;\r\n\r\n\t\tthis.buildReorderContainer();\r\n\t\tthis.doSetupReorderComponents({index: event.index});\r\n\t\tthis.styleReorderContainer(event);\r\n\r\n\t\tthis.draggingRowIndex = this.placeholderRowIndex = event.rowIndex;\r\n\t\tthis.draggingRowPage = this.pageForRow(this.draggingRowIndex);\r\n\t\tthis.removeDraggingRowNode = event.dispatchTarget.retainNode(event.target);\r\n\t\tthis.removedInitialPage = false;\r\n\t\tthis.itemMoved = false;\r\n\t\tthis.initialPageNumber = this.currentPageNumber = this.pageForRow(event.rowIndex);\r\n\t\tthis.prevScrollTop = this.getScrollTop();\r\n\r\n\t\t// fill row being reordered with placeholder\r\n\t\tthis.replaceNodeWithPlaceholder(event.rowIndex);\r\n\t},\r\n\r\n\t/**\r\n\t* Fills reorder container with draggable reorder components defined by the\r\n\t* application.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tbuildReorderContainer: function () {\r\n\t\tthis.$.reorderContainer.destroyClientControls();\r\n\t\tfor (var i=0;i<this.reorderComponents.length;i++) {\r\n\t\t\tthis.$.reorderContainer.createComponent(this.reorderComponents[i], {owner:this.owner});\r\n\t\t}\r\n\t\tthis.$.reorderContainer.render();\r\n\t},\r\n\r\n\t/**\r\n\t* Prepares floating reorder container.\r\n\t*\r\n\t* @param {Object} e - Event object.\r\n\t* @private\r\n\t*/\r\n\tstyleReorderContainer: function (e) {\r\n\t\tthis.setItemPosition(this.$.reorderContainer, e.rowIndex);\r\n\t\tthis.setItemBounds(this.$.reorderContainer, e.rowIndex);\r\n\t\tthis.$.reorderContainer.setShowing(true);\r\n\t\tif (this.centerReorderContainer) {\r\n\t\t\tthis.centerReorderContainerOnPointer(e);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Copies the innerHTML of `node` into a new component inside of\r\n\t* `reorderContainer`.\r\n\t*\r\n\t* @param {Node} node - The source node.\r\n\t* @private\r\n\t*/\r\n\tappendNodeToReorderContainer: function (node) {\r\n\t\tthis.$.reorderContainer.createComponent({allowHtml: true, content: node.innerHTML}).render();\r\n\t},\r\n\r\n\t/**\r\n\t* Centers the floating reorder container on the user's pointer.\r\n\t*\r\n\t* @param {Object} e - Event object.\r\n\t* @private\r\n\t*/\r\n\tcenterReorderContainerOnPointer: function (e) {\r\n\t\tvar containerPosition = dom.calcNodePosition(this.hasNode());\r\n\t\tvar bounds = this.$.reorderContainer.getBounds();\r\n\t\tvar x = e.pageX - containerPosition.left - parseInt(bounds.width, 10)/2;\r\n\t\tvar y = e.pageY - containerPosition.top + this.getScrollTop() - parseInt(bounds.height, 10)/2;\r\n\t\tif (this.getStrategyKind() != 'ScrollStrategy') {\r\n\t\t\tx -= this.getScrollLeft();\r\n\t\t\ty -= this.getScrollTop();\r\n\t\t}\r\n\t\tthis.positionReorderContainer(x, y);\r\n\t},\r\n\r\n\t/**\r\n\t* Moves the reorder container to the specified `x` and `y` coordinates.\r\n\t* Animates and kicks off timer to turn off animation.\r\n\t*\r\n\t* @param {Number} x - The `left` position.\r\n\t* @param {Number} y - The `top` position.\r\n\t* @private\r\n\t*/\r\n\tpositionReorderContainer: function (x,y) {\r\n\t\tthis.$.reorderContainer.addClass('enyo-animatedTopAndLeft');\r\n\t\tthis.$.reorderContainer.addStyles('left:'+x+'px;top:'+y+'px;');\r\n\t\tthis.setPositionReorderContainerTimeout();\r\n\t},\r\n\r\n\t/**\r\n\t* Sets a timeout to remove animation class from reorder container.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsetPositionReorderContainerTimeout: function () {\r\n\t\tthis.clearPositionReorderContainerTimeout();\r\n\t\tthis.positionReorderContainerTimeout = setTimeout(this.bindSafely(\r\n\t\t\tfunction () {\r\n\t\t\t\tthis.$.reorderContainer.removeClass('enyo-animatedTopAndLeft');\r\n\t\t\t\tthis.clearPositionReorderContainerTimeout();\r\n\t\t\t}), 100);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclearPositionReorderContainerTimeout: function () {\r\n\t\tif (this.positionReorderContainerTimeout) {\r\n\t\t\tclearTimeout(this.positionReorderContainerTimeout);\r\n\t\t\tthis.positionReorderContainerTimeout = null;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Determines whether we should handle the drag event.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshouldDoReorderDrag: function () {\r\n\t\tif (!this.getReorderable() || this.draggingRowIndex < 0 || this.pinnedReorderMode) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* Handles the drag event as a reorder drag.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\treorderDrag: function (event) {\r\n\t\t// position reorder node under mouse/pointer\r\n\t\tthis.positionReorderNode(event);\r\n\r\n\t\t// determine if we need to auto-scroll the list\r\n\t\tthis.checkForAutoScroll(event);\r\n\r\n\t\t// if the current index the user is dragging over has changed, move the placeholder\r\n\t\tthis.updatePlaceholderPosition(event.pageY);\r\n\t},\r\n\r\n\t/**\r\n\t* Determines the row index at `pageY` (if it exists) and moves the placeholder\r\n\t* to that index.\r\n\t*\r\n\t* @param {Number} pageY - Position from top in pixels.\r\n\t* @private\r\n\t*/\r\n\tupdatePlaceholderPosition: function (pageY) {\r\n\t\tvar index = this.getRowIndexFromCoordinate(pageY);\r\n\t\tif (index !== -1) {\r\n\t\t\t// cursor moved over a new row, so determine direction of movement\r\n\t\t\tif (index >= this.placeholderRowIndex) {\r\n\t\t\t\tthis.movePlaceholderToIndex(Math.min(this.count, index + 1));\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.movePlaceholderToIndex(index);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Positions the reorder node based on the `dx` and `dy` of the drag event.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpositionReorderNode: function (e) {\r\n\t\tvar reorderNodeBounds = this.$.reorderContainer.getBounds();\r\n\t\tvar left = reorderNodeBounds.left + e.ddx;\r\n\t\tvar top = reorderNodeBounds.top + e.ddy;\r\n\t\ttop = (this.getStrategyKind() == 'ScrollStrategy') ? top + (this.getScrollTop() - this.prevScrollTop) : top;\r\n\t\tthis.$.reorderContainer.addStyles('top: '+top+'px ; left: '+left+'px');\r\n\t\tthis.prevScrollTop = this.getScrollTop();\r\n\t},\r\n\r\n\t/**\r\n\t* Checks whether the list should scroll when dragging and, if so, starts the\r\n\t* scroll timeout timer. Auto-scrolling happens when the user drags an item\r\n\t* within the top/bottom boundary percentage defined in\r\n\t* [dragToScrollThreshold]{@link module:layout/List~List#dragToScrollThreshold}.\r\n\t*\r\n\t* @param {Object} event - Drag event.\r\n\t* @private\r\n\t*/\r\n\tcheckForAutoScroll: function (event) {\r\n\t\tvar position = dom.calcNodePosition(this.hasNode());\r\n\t\tvar bounds = this.getBounds();\r\n\t\tvar perc;\r\n\t\tthis.autoscrollPageY = event.pageY;\r\n\t\tif (event.pageY - position.top < bounds.height * this.dragToScrollThreshold) {\r\n\t\t\tperc = 100*(1 - ((event.pageY - position.top) / (bounds.height * this.dragToScrollThreshold)));\r\n\t\t\tthis.scrollDistance = -1*perc;\r\n\t\t} else if (event.pageY - position.top > bounds.height * (1 - this.dragToScrollThreshold)) {\r\n\t\t\tperc = 100*((event.pageY - position.top - bounds.height*(1 - this.dragToScrollThreshold)) / (bounds.height - (bounds.height * (1 - this.dragToScrollThreshold))));\r\n\t\t\tthis.scrollDistance = 1*perc;\r\n\t\t} else {\r\n\t\t\tthis.scrollDistance = 0;\r\n\t\t}\r\n\t\t// stop scrolling if distance is zero (i.e., user isn't scrolling to the edges of\r\n\t\t// the list); otherwise, start it if not already started\r\n\t\tif (this.scrollDistance === 0) {\r\n\t\t\tthis.stopAutoScrolling();\r\n\t\t} else {\r\n\t\t\tif (!this.autoScrollTimeout) {\r\n\t\t\t\tthis.startAutoScrolling();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Stops auto-scrolling.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tstopAutoScrolling: function () {\r\n\t\tif (this.autoScrollTimeout) {\r\n\t\t\tclearTimeout(this.autoScrollTimeout);\r\n\t\t\tthis.autoScrollTimeout = null;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Starts auto-scrolling.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tstartAutoScrolling: function () {\r\n\t\tthis.autoScrollTimeout = setInterval(this.bindSafely(this.autoScroll), this.autoScrollTimeoutMS);\r\n\t},\r\n\r\n\t/**\r\n\t* Scrolls the list by the distance specified in\r\n\t* [scrollDistance]{@link module:layout/List~List#scrollDistance}.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tautoScroll: function () {\r\n\t\tif (this.scrollDistance === 0) {\r\n\t\t\tthis.stopAutoScrolling();\r\n\t\t} else {\r\n\t\t\tif (!this.autoScrollTimeout) {\r\n\t\t\t\tthis.startAutoScrolling();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setScrollPosition(this.getScrollPosition() + this.scrollDistance);\r\n\t\tthis.positionReorderNode({ddx: 0, ddy: 0});\r\n\r\n\t\t// if the current index the user is dragging over has changed, move the placeholder\r\n\t\tthis.updatePlaceholderPosition(this.autoscrollPageY);\r\n\t},\r\n\r\n\t/**\r\n\t* Moves the placeholder (i.e., the gap between rows) to the row currently\r\n\t* under the user's pointer. This provides a visual cue, showing the user\r\n\t* where the item being dragged will go if it is dropped.\r\n\t*\r\n\t* @param {Number} index - The row index.\r\n\t*/\r\n\tmovePlaceholderToIndex: function (index) {\r\n\t\tvar node, nodeParent;\r\n\t\tif (index < 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse if (index >= this.count) {\r\n\t\t\tnode = null;\r\n\t\t\tnodeParent = this.pageForPageNumber(this.pageForRow(this.count - 1)).hasNode();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tnode = this.$.generator.fetchRowNode(index);\r\n\t\t\tnodeParent = node.parentNode;\r\n\t\t}\r\n\t\t// figure next page for placeholder\r\n\t\tvar nextPageNumber = this.pageForRow(index);\r\n\r\n\t\t// don't add pages beyond the original page count\r\n\t\tif (nextPageNumber >= this.pageCount) {\r\n\t\t\tnextPageNumber = this.currentPageNumber;\r\n\t\t}\r\n\r\n\t\t// move the placeholder to just after our 'index' node\r\n\t\tnodeParent.insertBefore(\r\n\t\t\tthis.placeholderNode,\r\n\t\t\tnode);\r\n\r\n\t\tif (this.currentPageNumber !== nextPageNumber) {\r\n\t\t\t// if moving to different page, recalculate page sizes and reposition pages\r\n\t\t\tthis.updatePageSize(this.currentPageNumber);\r\n\t\t\tthis.updatePageSize(nextPageNumber);\r\n\t\t\tthis.updatePagePositions(nextPageNumber);\r\n\t\t}\r\n\r\n\t\t// save updated state\r\n\t\tthis.placeholderRowIndex = index;\r\n\t\tthis.currentPageNumber = nextPageNumber;\r\n\r\n\t\t// remember that we moved an item (to prevent pinning at the wrong time)\r\n\t\tthis.itemMoved = true;\r\n\t},\r\n\r\n\t/**\r\n\t* Turns off reordering. If the user didn't drag the item being reordered\r\n\t* outside of its original position, enters pinned reorder mode.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tfinishReordering: function (sender, event) {\r\n\t\tif (!this.isReordering() || this.pinnedReorderMode || this.completeReorderTimeout) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.stopAutoScrolling();\r\n\t\t// enable drag-scrolling on strategy\r\n\t\tthis.$.strategy.listReordering = false;\r\n\t\t// animate reorder container to proper position and then complete\r\n\t\t// reordering actions\r\n\t\tthis.moveReorderedContainerToDroppedPosition(event);\r\n\t\tthis.completeReorderTimeout = setTimeout(\r\n\t\t\tthis.bindSafely(this.completeFinishReordering, event), 100);\r\n\r\n\t\tevent.preventDefault();\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmoveReorderedContainerToDroppedPosition: function () {\r\n\t\tvar offset = this.getRelativeOffset(this.placeholderNode, this.hasNode());\r\n\t\tvar top = (this.getStrategyKind() == 'ScrollStrategy') ? offset.top : offset.top - this.getScrollTop();\r\n\t\tvar left = offset.left - this.getScrollLeft();\r\n\t\tthis.positionReorderContainer(left, top);\r\n\t},\r\n\r\n\t/**\r\n\t* After the reordered item has been animated to its position, completes\r\n\t* the reordering logic.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcompleteFinishReordering: function (event) {\r\n\t\tthis.completeReorderTimeout = null;\r\n\t\t// adjust placeholderRowIndex to now be the final resting place\r\n\t\tif (this.placeholderRowIndex > this.draggingRowIndex) {\r\n\t\t\tthis.placeholderRowIndex = Math.max(0, this.placeholderRowIndex - 1);\r\n\t\t}\r\n\t\t// if the user dropped the item in the same location where it was picked up, and they\r\n\t\t// didn't move any other items in the process, pin the item and go into pinned reorder mode\r\n\t\tif (this.draggingRowIndex == this.placeholderRowIndex &&\r\n\t\t\tthis.pinnedReorderComponents.length && !this.pinnedReorderMode && !this.itemMoved) {\r\n\t\t\tthis.beginPinnedReorder(event);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.removeDraggingRowNode();\r\n\t\tthis.removePlaceholderNode();\r\n\t\tthis.emptyAndHideReorderContainer();\r\n\t\t// clear this early to prevent scroller code from using disappeared placeholder\r\n\t\tthis.pinnedReorderMode = false;\r\n\t\tthis.reorderRows(event);\r\n\t\tthis.draggingRowIndex = this.placeholderRowIndex = -1;\r\n\t\tthis.refresh();\r\n\t},\r\n\r\n\t/**\r\n\t* Enters pinned reorder mode.\r\n\t*\r\n\t* @fires module:layout/List~List#onSetupPinnedReorderComponents\r\n\t* @private\r\n\t*/\r\n\tbeginPinnedReorder: function (event) {\r\n\t\tthis.buildPinnedReorderContainer();\r\n\t\tthis.doSetupPinnedReorderComponents(utils.mixin(event, {index: this.draggingRowIndex}));\r\n\t\tthis.pinnedReorderMode = true;\r\n\t\tthis.initialPinPosition = event.pageY;\r\n\t},\r\n\r\n\t/**\r\n\t* Clears contents of reorder container, then hides.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\temptyAndHideReorderContainer: function () {\r\n\t\tthis.$.reorderContainer.destroyComponents();\r\n\t\tthis.$.reorderContainer.setShowing(false);\r\n\t},\r\n\r\n\t/**\r\n\t* Fills reorder container with pinned controls.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tbuildPinnedReorderContainer: function () {\r\n\t\tthis.$.reorderContainer.destroyClientControls();\r\n\t\tfor (var i=0;i<this.pinnedReorderComponents.length;i++) {\r\n\t\t\tthis.$.reorderContainer.createComponent(this.pinnedReorderComponents[i], {owner:this.owner});\r\n\t\t}\r\n\t\tthis.$.reorderContainer.render();\r\n\t},\r\n\r\n\t/**\r\n\t* Swaps the rows that were reordered, and sends up reorder event.\r\n\t*\r\n\t* @fires module:layout/List~List#onReorder\r\n\t* @private\r\n\t*/\r\n\treorderRows: function (event) {\r\n\t\t// send reorder event\r\n\t\tthis.doReorder(this.makeReorderEvent(event));\r\n\t\t// update display\r\n\t\tthis.positionReorderedNode();\r\n\t\t// fix indices for reordered rows\r\n\t\tthis.updateListIndices();\r\n\t},\r\n\r\n\t/**\r\n\t* Adds `reorderTo` and `reorderFrom` properties to the reorder event.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tmakeReorderEvent: function (event) {\r\n\t\tevent.reorderFrom = this.draggingRowIndex;\r\n\t\tevent.reorderTo = this.placeholderRowIndex;\r\n\t\treturn event;\r\n\t},\r\n\r\n\t/**\r\n\t* Moves the node being reordered to its new position and shows it.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpositionReorderedNode: function () {\r\n\t\t// only do this if the page with the initial item is still rendered\r\n\t\tif (!this.removedInitialPage) {\r\n\t\t\tvar insertNode = this.$.generator.fetchRowNode(this.placeholderRowIndex);\r\n\t\t\tif (insertNode) {\r\n\t\t\t\tinsertNode.parentNode.insertBefore(this.hiddenNode, insertNode);\r\n\t\t\t\tthis.showNode(this.hiddenNode);\r\n\t\t\t}\r\n\t\t\tthis.hiddenNode = null;\r\n\t\t\tif (this.currentPageNumber != this.initialPageNumber) {\r\n\t\t\t\tvar mover, movee;\r\n\t\t\t\tvar currentPage = this.pageForPageNumber(this.currentPageNumber);\r\n\t\t\t\tvar otherPage = this.pageForPageNumber(this.currentPageNumber + 1);\r\n\t\t\t\t// if moved down, move current page's firstChild to the end of previous page\r\n\t\t\t\tif (this.initialPageNumber < this.currentPageNumber) {\r\n\t\t\t\t\tmover = currentPage.hasNode().firstChild;\r\n\t\t\t\t\totherPage.hasNode().appendChild(mover);\r\n\t\t\t\t// if moved up, move current page's lastChild before previous page's firstChild\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmover = currentPage.hasNode().lastChild;\r\n\t\t\t\t\tmovee = otherPage.hasNode().firstChild;\r\n\t\t\t\t\totherPage.hasNode().insertBefore(mover, movee);\r\n\t\t\t\t}\r\n\t\t\t\tthis.correctPageSizes();\r\n\t\t\t\tthis.updatePagePositions(this.initialPageNumber);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Updates indices of list items as needed to preserve reordering.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdateListIndices: function () {\r\n\t\t// don't do update if we've moved further than one page, refresh instead\r\n\t\tif (this.shouldDoRefresh()) {\r\n\t\t\tthis.refresh();\r\n\t\t\tthis.correctPageSizes();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar from = Math.min(this.draggingRowIndex, this.placeholderRowIndex);\r\n\t\tvar to = Math.max(this.draggingRowIndex, this.placeholderRowIndex);\r\n\t\tvar direction = (this.draggingRowIndex - this.placeholderRowIndex > 0) ? 1 : -1;\r\n\t\tvar node, i, newIndex, currentIndex;\r\n\r\n\t\tif (direction === 1) {\r\n\t\t\tnode = this.$.generator.fetchRowNode(this.draggingRowIndex);\r\n\t\t\tif (node) {\r\n\t\t\t\tnode.setAttribute('data-enyo-index', 'reordered');\r\n\t\t\t}\r\n\t\t\tfor (i=(to-1),newIndex=to;i>=from;i--) {\r\n\t\t\t\tnode = this.$.generator.fetchRowNode(i);\r\n\t\t\t\tif (!node) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tcurrentIndex = parseInt(node.getAttribute('data-enyo-index'), 10);\r\n\t\t\t\tnewIndex = currentIndex + 1;\r\n\t\t\t\tnode.setAttribute('data-enyo-index', newIndex);\r\n\t\t\t}\r\n\t\t\tnode = this.hasNode().querySelector('[data-enyo-index=\"reordered\"]');\r\n\t\t\tnode.setAttribute('data-enyo-index', this.placeholderRowIndex);\r\n\r\n\t\t} else {\r\n\t\t\tnode = this.$.generator.fetchRowNode(this.draggingRowIndex);\r\n\t\t\tif (node) {\r\n\t\t\t\tnode.setAttribute('data-enyo-index', this.placeholderRowIndex);\r\n\t\t\t}\r\n\t\t\tfor (i=(from+1), newIndex=from;i<=to;i++) {\r\n\t\t\t\tnode = this.$.generator.fetchRowNode(i);\r\n\t\t\t\tif (!node) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tcurrentIndex = parseInt(node.getAttribute('data-enyo-index'), 10);\r\n\t\t\t\tnewIndex = currentIndex - 1;\r\n\t\t\t\tnode.setAttribute('data-enyo-index', newIndex);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Determines whether an item was reordered far enough that it warrants a refresh.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshouldDoRefresh: function () {\r\n\t\treturn (Math.abs(this.initialPageNumber - this.currentPageNumber) > 1);\r\n\t},\r\n\r\n\t/**\r\n\t* Gets node height, width, top, and left values.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgetNodeStyle: function (index) {\r\n\t\tvar node = this.$.generator.fetchRowNode(index);\r\n\t\tif (!node) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar offset = this.getRelativeOffset(node, this.hasNode());\r\n\t\tvar dimensions = dom.getBounds(node);\r\n\t\treturn {h: dimensions.height, w: dimensions.width, left: offset.left, top: offset.top};\r\n\t},\r\n\r\n\t/**\r\n\t* Gets offset relative to a positioned ancestor node.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgetRelativeOffset: function (n, p) {\r\n\t\tvar ro = {top: 0, left: 0};\r\n\t\tif (n !== p && n.parentNode) {\r\n\t\t\tdo {\r\n\t\t\t\tro.top += n.offsetTop || 0;\r\n\t\t\t\tro.left += n.offsetLeft || 0;\r\n\t\t\t\tn = n.offsetParent;\r\n\t\t\t} while (n && n !== p);\r\n\t\t}\r\n\t\treturn ro;\r\n\t},\r\n\r\n\t/**\r\n\t* Hides the DOM node for the row at `index` and inserts the placeholder node before it.\r\n\t*\r\n\t* @param {Number} index - The index of the row whose DOM node will be hidden.\r\n\t* @private\r\n\t*/\r\n\treplaceNodeWithPlaceholder: function (index) {\r\n\t\tvar node = this.$.generator.fetchRowNode(index);\r\n\t\tif (!node) {\r\n\t\t\tlogger.log('No node - ' + index);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// create and style placeholder node\r\n\t\tthis.placeholderNode = this.createPlaceholderNode(node);\r\n\t\t// hide existing node\r\n\t\tthis.hiddenNode = this.hideNode(node);\r\n\t\t// insert placeholder node where original node was\r\n\t\tvar currentPage = this.pageForPageNumber(this.currentPageNumber);\r\n\t\tcurrentPage.hasNode().insertBefore(this.placeholderNode, this.hiddenNode);\r\n\t},\r\n\r\n\t/**\r\n\t* Creates and returns a placeholder node with dimensions matching those of\r\n\t* the passed-in node.\r\n\t*\r\n\t* @param {Node} node - Node on which to base the placeholder dimensions.\r\n\t* @private\r\n\t*/\r\n\tcreatePlaceholderNode: function (node) {\r\n\t\tvar placeholderNode = this.$.placeholder.hasNode().cloneNode(true);\r\n\t\tvar nodeDimensions = dom.getBounds(node);\r\n\t\tplaceholderNode.style.height = nodeDimensions.height + 'px';\r\n\t\tplaceholderNode.style.width = nodeDimensions.width + 'px';\r\n\t\treturn placeholderNode;\r\n\t},\r\n\r\n\t/**\r\n\t* Removes the placeholder node from the DOM.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tremovePlaceholderNode: function () {\r\n\t\tthis.removeNode(this.placeholderNode);\r\n\t\tthis.placeholderNode = null;\r\n\t},\r\n\r\n\t/**\r\n\t* Removes the passed-in node from the DOM.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tremoveNode: function (node) {\r\n\t\tif (!node || !node.parentNode) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tnode.parentNode.removeChild(node);\r\n\t},\r\n\r\n\t/**\r\n\t* Updates `this.pageSizes` to support the placeholder node's jumping\r\n\t* from one page to the next.\r\n\t*\r\n\t* @param {Number} pageNumber\r\n\t* @private\r\n\t*/\r\n\tupdatePageSize: function (pageNumber) {\r\n\t\tif (pageNumber < 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar pageControl = this.pageForPageNumber(pageNumber, true);\r\n\t\tif (pageControl) {\r\n\t\t\tvar s0 = this.pageSizes[pageNumber];\r\n\t\t\t// FIXME: use height/width depending on orientation\r\n\t\t\tvar pageSize = Math.max(1, pageControl.getBounds().height);\r\n\t\t\tthis.pageSizes[pageNumber] = pageSize;\r\n\t\t\tthis.portSize += pageSize - s0;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Repositions [currentPageNumber]{@link module:layout/List~List#currentPageNumber} and\r\n\t* `nextPageNumber` pages to support the placeholder node's jumping from one\r\n\t* page to the next.\r\n\t*\r\n\t* @param {Number} nextPageNumber [description]\r\n\t* @private\r\n\t*/\r\n\tupdatePagePositions: function (nextPageNumber) {\r\n\t\tthis.positionPage(this.currentPageNumber, this.pageForPageNumber(this.currentPageNumber));\r\n\t\tthis.positionPage(nextPageNumber, this.pageForPageNumber(nextPageNumber));\r\n\t},\r\n\r\n\t/**\r\n\t* Corrects page sizes array after reorder is complete.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcorrectPageSizes: function () {\r\n\t\tvar initPageNumber = this.initialPageNumber%2;\r\n\t\tthis.updatePageSize(this.currentPageNumber, this.$['page'+this.currentPage]);\r\n\t\tif (initPageNumber != this.currentPageNumber) {\r\n\t\t\tthis.updatePageSize(this.initialPageNumber, this.$['page'+initPageNumber]);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Hides a DOM node.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\thideNode: function (node) {\r\n\t\tnode.style.display = 'none';\r\n\t\treturn node;\r\n\t},\r\n\r\n\t/**\r\n\t* Shows a DOM node.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshowNode: function (node) {\r\n\t\tnode.style.display = 'block';\r\n\t\treturn node;\r\n\t},\r\n\r\n\t/**\r\n\t* Called by client code to finalize a pinned mode reordering, e.g., when the \"Drop\"\r\n\t* button is pressed on the pinned placeholder row.\r\n\t*\r\n\t* @todo Seems incorrect to have an event on the signature for a public API\r\n\t* @param {Object} event - A mouse/touch event.\r\n\t* @public\r\n\t*/\r\n\tdropPinnedRow: function (event) {\r\n\t\t// animate reorder container to proper position and then complete reording actions\r\n\t\tthis.moveReorderedContainerToDroppedPosition(event);\r\n\t\tthis.completeReorderTimeout = setTimeout(\r\n\t\t\tthis.bindSafely(this.completeFinishReordering, event), 100);\r\n\t\treturn;\r\n\t},\r\n\r\n\t/**\r\n\t* Called by client code to cancel a pinned mode reordering.\r\n\t*\r\n\t* @todo Seems incorrect to have an event on the signature for a public API\r\n\t* @param {Object} event - A mouse/touch event.\r\n\t* @public\r\n\t*/\r\n\tcancelPinnedMode: function (event) {\r\n\t\t// make it look like we're dropping in original location\r\n\t\tthis.placeholderRowIndex = this.draggingRowIndex;\r\n\t\tthis.dropPinnedRow(event);\r\n\t},\r\n\r\n\t/**\r\n\t* Returns the row index that is under the given `y`-position on the page.  If the\r\n\t* position is off the end of the list, `this.count` is returned. If the position\r\n\t* is before the start of the list, `-1` is returned.\r\n\t*\r\n\t* @param {Number} y - `y` position in pixels in relation to the page.\r\n\t* @return {Number}  - The index of the row at the specified position.\r\n\t* @private\r\n\t*/\r\n\tgetRowIndexFromCoordinate: function (y) {\r\n\t\t// FIXME: this code only works with vertical lists\r\n\t\tvar cursorPosition = this.getScrollTop() + y - dom.calcNodePosition(this.hasNode()).top;\r\n\t\t// happens if we try to drag past top of list\r\n\t\tif (cursorPosition < 0) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tvar pageInfo = this.positionToPageInfo(cursorPosition);\r\n\t\tvar rows = (pageInfo.no == this.p0) ? this.p0RowBounds : this.p1RowBounds;\r\n\t\t// might have only rendered one page, so catch that here\r\n\t\tif (!rows) {\r\n\t\t\treturn this.count;\r\n\t\t}\r\n\t\tvar posOnPage = pageInfo.pos;\r\n\t\tvar placeholderHeight = this.placeholderNode ? dom.getBounds(this.placeholderNode).height : 0;\r\n\t\tvar totalHeight = 0;\r\n\t\tfor (var i=pageInfo.startRow; i <= pageInfo.endRow; ++i) {\r\n\t\t\t// do extra check for row that has placeholder as we'll return -1 here for no match\r\n\t\t\tif (i === this.placeholderRowIndex) {\r\n\t\t\t\t// for placeholder\r\n\t\t\t\ttotalHeight += placeholderHeight;\r\n\t\t\t\tif (totalHeight >= posOnPage) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// originally dragged row is hidden, so don't count it\r\n\t\t\tif (i !== this.draggingRowIndex) {\r\n\t\t\t\ttotalHeight += rows[i].height;\r\n\t\t\t\tif (totalHeight >= posOnPage) {\r\n\t\t\t\t\treturn i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn i;\r\n\t},\r\n\r\n\t/**\r\n\t* Gets the position of a node (identified via index) on the page.\r\n\t*\r\n\t* @return {Object} The position of the row node.\r\n\t* @private\r\n\t*/\r\n\tgetIndexPosition: function (index) {\r\n\t\treturn dom.calcNodePosition(this.$.generator.fetchRowNode(index));\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the specified control's position to match that of the list row at `index`.\r\n\t*\r\n\t* @param {module:enyo/Control~Control} item - The control to reposition.\r\n\t* @param {Number} index      - The index of the row whose position is to be matched.\r\n\t* @private\r\n\t*/\r\n\tsetItemPosition: function (item, index) {\r\n\t\tvar clonedNodeStyle = this.getNodeStyle(index);\r\n\t\tvar top = (this.getStrategyKind() == 'ScrollStrategy') ? clonedNodeStyle.top : clonedNodeStyle.top - this.getScrollTop();\r\n\t\tvar styleStr = 'top:'+top+'px; left:'+clonedNodeStyle.left+'px;';\r\n\t\titem.addStyles(styleStr);\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the specified control's width and height to match those of the list row at `index`.\r\n\t*\r\n\t* @param {module:enyo/Control~Control} item - The control to reposition.\r\n\t* @param {Number} index      - The index of the row whose width and height are to be matched.\r\n\t* @private\r\n\t*/\r\n\tsetItemBounds: function (item, index) {\r\n\t\tvar clonedNodeStyle = this.getNodeStyle(index);\r\n\t\tvar styleStr = 'width:'+clonedNodeStyle.w+'px; height:'+clonedNodeStyle.h+'px;';\r\n\t\titem.addStyles(styleStr);\r\n\t},\r\n\r\n\t/**\r\n\t* When in pinned reorder mode, repositions the pinned placeholder when the\r\n\t* user has scrolled far enough.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\treorderScroll: function (sender, e) {\r\n\t\t// if we are using the standard scroll strategy, we have to move the pinned row with the scrolling\r\n\t\tif (this.getStrategyKind() == 'ScrollStrategy') {\r\n\t\t\tthis.$.reorderContainer.addStyles('top:'+(this.initialPinPosition+this.getScrollTop()-this.rowSize)+'px;');\r\n\t\t}\r\n\t\t// y coordinate on screen of the pinned item doesn't change as we scroll things\r\n\t\tthis.updatePlaceholderPosition(this.initialPinPosition);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thideReorderingRow: function () {\r\n\t\tvar hiddenNode = this.hasNode().querySelector('[data-enyo-index=\"' + this.draggingRowIndex + '\"]');\r\n\t\t// hide existing node\r\n\t\tif (hiddenNode) {\r\n\t\t\tthis.hiddenNode = this.hideNode(hiddenNode);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tisReordering: function () {\r\n\t\treturn (this.draggingRowIndex > -1);\r\n\t},\r\n\r\n\t/**\r\n\t\t---- Swipeable functionality ------------\r\n\t*/\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tisSwiping: function () {\r\n\t\t// we're swiping when the index is set and we're not in the middle of completing or backing out a swipe\r\n\t\treturn (this.swipeIndex != null && !this.swipeComplete && this.swipeDirection != null);\r\n\t},\r\n\r\n\t/**\r\n\t* When a drag starts, gets the direction of the drag as well as the index\r\n\t* of the item being dragged, and resets any pertinent values. Then kicks\r\n\t* off the swipe sequence.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tswipeDragStart: function (sender, event) {\r\n\t\t// if we're not on a row or the swipe is vertical or if we're in the middle of reordering, just say no\r\n\t\tif (event.index == null || event.vertical) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// if we are waiting to complete a swipe, complete it\r\n\t\tif (this.completeSwipeTimeout) {\r\n\t\t\tthis.completeSwipe(event);\r\n\t\t}\r\n\r\n\t\t// reset swipe complete flag\r\n\t\tthis.swipeComplete = false;\r\n\r\n\t\tif (this.swipeIndex != event.index) {\r\n\t\t\tthis.clearSwipeables();\r\n\t\t\tthis.swipeIndex = event.index;\r\n\t\t}\r\n\t\tthis.swipeDirection = event.xDirection;\r\n\r\n\t\t// start swipe sequence only if we are not currently showing a persistent item\r\n\t\tif (!this.persistentItemVisible) {\r\n\t\t\tthis.startSwipe(event);\r\n\t\t}\r\n\r\n\t\t// reset dragged distance (for dragfinish)\r\n\t\tthis.draggedXDistance = 0;\r\n\t\tthis.draggedYDistance = 0;\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* When a drag is in progress, updates the position of the swipeable\r\n\t* container based on the `ddx` of the event.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tswipeDrag: function (sender, event) {\r\n\t\t// if a persistent swipeableItem is still showing, handle it separately\r\n\t\tif (this.persistentItemVisible) {\r\n\t\t\tthis.dragPersistentItem(event);\r\n\t\t\treturn this.preventDragPropagation;\r\n\t\t}\r\n\t\t// early exit if there's no matching dragStart to set item\r\n\t\tif (!this.isSwiping()) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// apply new position\r\n\t\tthis.dragSwipeableComponents(this.calcNewDragPosition(event.ddx));\r\n\t\t// save dragged distance (for dragfinish)\r\n\t\tthis.draggedXDistance = event.dx;\r\n\t\tthis.draggedYDistance = event.dy;\r\n\t\t// save last meaningful (non-zero) and new direction (for swipeDragFinish)\r\n\t\tif (event.xDirection != this.lastSwipeDirection && event.xDirection) {\r\n\t\t\tthis.lastSwipeDirection = event.xDirection;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/*\r\n\t* When the current drag completes, decides whether to complete the swipe\r\n\t* based on how far the user pulled the swipeable container.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tswipeDragFinish: function (sender, event) {\r\n\t\t// if a persistent swipeableItem is still showing, complete drag away or bounce\r\n\t\tif (this.persistentItemVisible) {\r\n\t\t\tthis.dragFinishPersistentItem(event);\r\n\t\t// early exit if there's no matching dragStart to set item\r\n\t\t} else if (!this.isSwiping()) {\r\n\t\t\treturn false;\r\n\t\t// otherwise if user dragged more than 20% of the width, complete the swipe. if not, back out.\r\n\t\t} else {\r\n\t\t\tvar percentageDragged = this.calcPercentageDragged(this.draggedXDistance);\r\n\t\t\tif ((percentageDragged > this.percentageDraggedThreshold) && (this.lastSwipeDirection === this.swipeDirection)) {\r\n\t\t\t\tthis.swipe(this.fastSwipeSpeedMS);\r\n\t\t\t} else {\r\n\t\t\t\tthis.backOutSwipe(event);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.preventDragPropagation;\r\n\t},\r\n\r\n\t/**\r\n\t* Reorder takes precedence over swipes, and not having it turned on or swipeable controls\r\n\t* defined also disables this.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tisSwipeable: function () {\r\n\t\treturn this.enableSwipe && this.$.swipeableComponents.controls.length !== 0 &&\r\n\t\t\t!this.isReordering() && !this.pinnedReorderMode;\r\n\t},\r\n\r\n\t/**\r\n\t* Positions the swipeable components block at the current row.\r\n\t*\r\n\t* @param {Number} index      - The row index.\r\n\t* @param {Number} xDirection - Value of `xDirection` from drag event (`1` = right,\r\n\t* `-1` = left).\r\n\t* @private\r\n\t*/\r\n\tpositionSwipeableContainer: function (index, xDirection) {\r\n\t\tvar node = this.$.generator.fetchRowNode(index);\r\n\t\tif (!node) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar offset = this.getRelativeOffset(node, this.hasNode());\r\n\t\tvar dimensions = dom.getBounds(node);\r\n\t\tvar x = (xDirection == 1) ? -1*dimensions.width : dimensions.width;\r\n\t\tthis.$.swipeableComponents.addStyles('top: '+offset.top+'px; left: '+x+'px; height: '+dimensions.height+'px; width: '+dimensions.width+'px;');\r\n\t},\r\n\r\n\t/**\r\n\t* Calculates new position for the swipeable container based on the user's\r\n\t* drag action. Don't allow the container to drag beyond either edge.\r\n\t*\r\n\t* @param {Number} dx - Amount of change in `x` position.\r\n\t* @return {Number}\r\n\t* @private\r\n\t*/\r\n\tcalcNewDragPosition: function (dx) {\r\n\t\tvar parentBounds = this.$.swipeableComponents.getBounds();\r\n\t\tvar xPos = parentBounds.left;\r\n\t\tvar dimensions = this.$.swipeableComponents.getBounds();\r\n\t\tvar xlimit = (this.swipeDirection == 1) ? 0 : -1*dimensions.width;\r\n\t\tvar x = (this.swipeDirection == 1)\r\n\t\t\t? (xPos + dx > xlimit)\r\n\t\t\t\t? xlimit\r\n\t\t\t\t: xPos + dx\r\n\t\t\t: (xPos + dx < xlimit)\r\n\t\t\t\t? xlimit\r\n\t\t\t\t: xPos + dx;\r\n\t\treturn x;\r\n\t},\r\n\r\n\t/**\r\n\t* Positions the swipeable components.\r\n\t*\r\n\t* @param {Number} x - New `left` position.\r\n\t* @private\r\n\t*/\r\n\tdragSwipeableComponents: function (x) {\r\n\t\tthis.$.swipeableComponents.applyStyle('left',x+'px');\r\n\t},\r\n\r\n\t/**\r\n\t* Begins swiping sequence by positioning the swipeable container and\r\n\t* bubbling the `setupSwipeItem` event.\r\n\t*\r\n\t* @param {Object} e - Event\r\n\t* @fires module:layout/List~List#onSetupSwipeItem\r\n\t* @private\r\n\t*/\r\n\tstartSwipe: function (e) {\r\n\t\t// modify event index to always have this swipeItem value\r\n\t\te.index = this.swipeIndex;\r\n\t\tthis.positionSwipeableContainer(this.swipeIndex, e.xDirection);\r\n\t\tthis.$.swipeableComponents.setShowing(true);\r\n\t\tthis.setPersistentItemOrigin(e.xDirection);\r\n\t\tthis.doSetupSwipeItem(e);\r\n\t},\r\n\r\n\t/**\r\n\t* If a persistent swipeableItem is still showing, drags it away or bounces it.\r\n\t*\r\n\t* @param {Object} e - Event\r\n\t* @private\r\n\t*/\r\n\tdragPersistentItem: function (e) {\r\n\t\tvar xPos = 0;\r\n\t\tvar x = (this.persistentItemOrigin == 'right')\r\n\t\t\t? Math.max(xPos, (xPos + e.dx))\r\n\t\t\t: Math.min(xPos, (xPos + e.dx));\r\n\t\tthis.$.swipeableComponents.applyStyle('left',x+'px');\r\n\t},\r\n\r\n\t/**\r\n\t* If a persistent swipeableItem is still showing, completes drag away or bounce.\r\n\t*\r\n\t* @param {Object} e - Event\r\n\t* @private\r\n\t*/\r\n\tdragFinishPersistentItem: function (e) {\r\n\t\tvar completeSwipe = (this.calcPercentageDragged(e.dx) > 0.2);\r\n\t\tvar dir = (e.dx > 0) ? 'right' : (e.dx < 0) ? 'left' : null;\r\n\t\tif (this.persistentItemOrigin == dir) {\r\n\t\t\tif (completeSwipe) {\r\n\t\t\t\tthis.slideAwayItem();\r\n\t\t\t} else {\r\n\t\t\t\tthis.bounceItem(e);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.bounceItem(e);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetPersistentItemOrigin: function (xDirection) {\r\n\t\tthis.persistentItemOrigin = xDirection == 1 ? 'left' : 'right';\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcPercentageDragged: function (dx) {\r\n\t\treturn Math.abs(dx/this.$.swipeableComponents.getBounds().width);\r\n\t},\r\n\r\n\t/**\r\n\t* Completes a swipe animation in the specified number of milliseconds.\r\n\t*\r\n\t* @param {Number} speed - Time in milliseconds.\r\n\t* @private\r\n\t*/\r\n\tswipe: function (speed) {\r\n\t\tthis.swipeComplete = true;\r\n\t\tthis.animateSwipe(0, speed);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbackOutSwipe: function () {\r\n\t\tvar dimensions = this.$.swipeableComponents.getBounds();\r\n\t\tvar x = (this.swipeDirection == 1) ? -1*dimensions.width : dimensions.width;\r\n\t\tthis.animateSwipe(x, this.fastSwipeSpeedMS);\r\n\t\tthis.swipeDirection = null;\r\n\t},\r\n\r\n\t/**\r\n\t* Returns persisted swipeable components to being visible if not dragged back\r\n\t* beyond threshold.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tbounceItem: function () {\r\n\t\tvar bounds = this.$.swipeableComponents.getBounds();\r\n\t\tif (bounds.left != bounds.width) {\r\n\t\t\tthis.animateSwipe(0, this.normalSwipeSpeedMS);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Animates the swipeable components away starting from their current position.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tslideAwayItem: function () {\r\n\t\tvar $item = this.$.swipeableComponents;\r\n\t\tvar parentWidth = $item.getBounds().width;\r\n\t\tvar xPos = (this.persistentItemOrigin == 'left') ? -1*parentWidth : parentWidth;\r\n\t\tthis.animateSwipe(xPos, this.normalSwipeSpeedMS);\r\n\t\tthis.persistentItemVisible = false;\r\n\t\tthis.setPersistSwipeableItem(false);\r\n\t},\r\n\r\n\t/**\r\n\t* Hides the swipeable components.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tclearSwipeables: function () {\r\n\t\tthis.$.swipeableComponents.setShowing(false);\r\n\t\tthis.persistentItemVisible = false;\r\n\t\tthis.setPersistSwipeableItem(false);\r\n\t},\r\n\r\n\t/**\r\n\t* Completes swipe and hides active swipeable item.\r\n\t*\r\n\t* @fires module:layout/List~List#onSwipeComplete\r\n\t* @private\r\n\t*/\r\n\tcompleteSwipe: function () {\r\n\t\tif (this.completeSwipeTimeout) {\r\n\t\t\tclearTimeout(this.completeSwipeTimeout);\r\n\t\t\tthis.completeSwipeTimeout = null;\r\n\t\t}\r\n\t\t// if this wasn't a persistent item, hide it upon completion and send swipe complete event\r\n\t\tif (!this.getPersistSwipeableItem()) {\r\n\t\t\tthis.$.swipeableComponents.setShowing(false);\r\n\t\t\t// if the swipe was completed, update the current row and bubble swipeComplete event\r\n\t\t\tif (this.swipeComplete) {\r\n\t\t\t\tthis.doSwipeComplete({index: this.swipeIndex, xDirection: this.swipeDirection});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// persistent item will only be visible if the swipe was completed\r\n\t\t\tif (this.swipeComplete) {\r\n\t\t\t\tthis.persistentItemVisible = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.swipeIndex = null;\r\n\t\tthis.swipeDirection = null;\r\n\t},\r\n\r\n\t/**\r\n\t* Animates a swipe starting from the current position to the specified new\r\n\t* position `(targetX)` over the specified length of time `(totalTimeMS)`.\r\n\t*\r\n\t* @param {Number} targetX     - The target `left` position.\r\n\t* @param {Number} totalTimeMS - Time in milliseconds.\r\n\t* @private\r\n\t*/\r\n\tanimateSwipe: function (targetX, totalTimeMS) {\r\n\t\tvar t0 = utils.now();\r\n\t\tvar $item = this.$.swipeableComponents;\r\n\t\tvar origX = parseInt($item.getBounds().left, 10);\r\n\t\tvar xDelta = targetX - origX;\r\n\r\n\t\tthis.stopAnimateSwipe();\r\n\r\n\t\tvar fn = this.bindSafely(function () {\r\n\t\t\tvar t = utils.now() - t0;\r\n\t\t\tvar percTimeElapsed = t/totalTimeMS;\r\n\t\t\tvar currentX = origX + (xDelta)*Math.min(percTimeElapsed,1);\r\n\r\n\t\t\t// set new left\r\n\t\t\t$item.applyStyle('left', currentX+'px');\r\n\r\n\t\t\t// schedule next frame\r\n\t\t\tthis.job = animation.requestAnimationFrame(fn);\r\n\r\n\t\t\t// potentially override animation TODO\r\n\r\n\t\t\t// go until we've hit our total time\r\n\t\t\tif (t/totalTimeMS >= 1) {\r\n\t\t\t\tthis.stopAnimateSwipe();\r\n\t\t\t\tthis.completeSwipeTimeout = setTimeout(this.bindSafely(function () {\r\n\t\t\t\t\tthis.completeSwipe();\r\n\t\t\t\t}), this.completeSwipeDelayMS);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.job = animation.requestAnimationFrame(fn);\r\n\t},\r\n\r\n\t/**\r\n\t* Cancels the active swipe animation.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tstopAnimateSwipe: function () {\r\n\t\tif (this.job) {\r\n\t\t\tthis.job = animation.cancelAnimationFrame(this.job);\r\n\t\t}\r\n\t}\r\n};\r\n","/**\r\n* Contains the declaration for the {@link module:layout/ContextualLayout~ContextualLayout} kind.\r\n* @module layout/ContextualLayout\r\n*/\r\n\r\nvar\r\n    kind = require('enyo/kind'),\r\n    Layout = require('enyo/Layout');\r\n\r\n/**\r\n* {@link module:layout/ContextualLayout~ContextualLayout} provides the base\r\n* positioning logic for a contextual layout strategy. This layout strategy is\r\n* intended for use with a popup in a decorator/activator scenario, in which the\r\n* popup is positioned relative to the activator, e.g.:\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tContextualPopup = require('onyx/ContextualPopup'),\r\n* \t\tContextualPopupDecorator = require('onyx/ContextualPopupDecorator');\r\n*\r\n* \t{kind: ContextualPopupDecorator, components: [\r\n* \t\t{content: 'Show Popup'},\r\n* \t\t{kind: ContextualPopup,\r\n* \t\t\ttitle: 'Sample Popup',\r\n* \t\t\tactionButtons: [\r\n* \t\t\t\t{content: 'Button 1', classes: 'onyx-button-warning'},\r\n* \t\t\t\t{content: 'Button 2'}\r\n* \t\t\t],\r\n* \t\t\tcomponents: [\r\n* \t\t\t\t{content: 'Sample component in popup'}\r\n* \t\t\t]\r\n* \t\t}\r\n* \t]}\r\n* ```\r\n*\r\n* The decorator contains the popup and activator, with the activator being the\r\n* first child component (i.e., the \"Show Popup\" button). The contextual layout\r\n* strategy is applied because, in the definition of `onyx/ContextualPopup`,\r\n* its `layoutKind` property is set to `onyx/ContextualLayout`.\r\n*\r\n* Note that a popup using ContextualLayout as its `layoutKind` is expected to\r\n* declare several specific properties:\r\n*\r\n* - `vertFlushMargin` - The vertical flush layout margin, i.e., how close the\r\n* popup's edge may come to the vertical screen edge (in pixels) before\r\n* being laid out \"flush\" style.\r\n* - `horizFlushMargin` - The horizontal flush layout margin, i.e., how close\r\n* the popup's edge may come to the horizontal screen edge (in pixels)\r\n* before being laid out \"flush\" style.\r\n* - `widePopup` - A popup wider than this value (in pixels) is considered wide\r\n* for layout calculation purposes.\r\n* - `longPopup` - A popup longer than this value (in pixels) is considered long\r\n* for layout calculation purposes.\r\n* - `horizBuffer` - Horizontal flush popups are not allowed within this buffer\r\n* area (in pixels) on the left or right screen edge.\r\n* - `activatorOffset` - The popup activator's offset on the page (in pixels);\r\n* this should be calculated whenever the popup is to be shown.\r\n*\r\n* @class ContextualLayout\r\n* @extends module:enyo/Layout~Layout\r\n* @public\r\n*/\r\n\r\nmodule.exports = kind(\r\n    /** @lends module:layout/ContextualLayout~ContextualLayout.prototype */ {\r\n\r\n    /**\r\n    * @private\r\n    */\r\n    name: 'enyo.ContextualLayout',\r\n\r\n    /**\r\n\t* @private\r\n\t*/\r\n    kind: Layout,\r\n\r\n    /**\r\n    * Adjusts the popup's position, as well as the nub location and direction.\r\n    *\r\n    * @public\r\n    */\r\n    adjustPosition: function () {\r\n        if (this.container.showing && this.container.hasNode()) {\r\n            /****ContextualPopup positioning rules:\r\n                1. Activator Location:\r\n                    a. If activator is located in a corner then position using a flush style.\r\n                        i.  Attempt vertical first.\r\n                        ii. Horizontal if vertical doesn't fit.\r\n                    b. If not in a corner then check if the activator is located in one of the 4 \"edges\" of the view & position the\r\n                        following way if so:\r\n                        i.   Activator is in top edge, position popup below it.\r\n                        ii.  Activator is in bottom edge, position popup above it.\r\n                        iii. Activator is in left edge, position popup to the right of it.\r\n                        iv.  Activator is in right edge, position popup to the left of it.\r\n\r\n                2. Screen Size - the pop-up should generally extend in the direction where there’s room for it.\r\n                    Note: no specific logic below for this rule since it is built into the positioning functions, ie we attempt to never\r\n                    position a popup where there isn't enough room for it.\r\n\r\n                3. Popup Size:\r\n                    i.  If popup content is wide, use top or bottom positioning.\r\n                    ii. If popup content is long, use horizontal positioning.\r\n\r\n                4. Favor top or bottom:\r\n                    If all the above rules have been followed and location can still vary then favor top or bottom positioning.\r\n\r\n                5. If top or bottom will work, favor bottom.\r\n                    Note: no specific logic below for this rule since it is built into the vertical position functions, ie we attempt to\r\n                    use a bottom position for the popup as much possible. Additionally within the vetical position function we center the\r\n                    popup if the activator is at the vertical center of the view.\r\n            ****/\r\n            this.resetPositioning();\r\n            var innerWidth = this.getViewWidth();\r\n            var innerHeight = this.getViewHeight();\r\n\r\n            //These are the view \"flush boundaries\"\r\n            var topFlushPt = this.container.vertFlushMargin;\r\n            var bottomFlushPt = innerHeight - this.container.vertFlushMargin;\r\n            var leftFlushPt = this.container.horizFlushMargin;\r\n            var rightFlushPt = innerWidth - this.container.horizFlushMargin;\r\n\r\n            //Rule 1 - Activator Location based positioning\r\n            //if the activator is in the top or bottom edges of the view, check if the popup needs flush positioning\r\n            if ((this.offset.top + this.offset.height) < topFlushPt || this.offset.top > bottomFlushPt) {\r\n                //check/try vertical flush positioning\t(rule 1.a.i)\r\n                if (this.applyVerticalFlushPositioning(leftFlushPt, rightFlushPt)) {\r\n                    return;\r\n                }\r\n\r\n                //if vertical doesn't fit then check/try horizontal flush (rule 1.a.ii)\r\n                if (this.applyHorizontalFlushPositioning(leftFlushPt, rightFlushPt)) {\r\n                    return;\r\n                }\r\n\r\n                //if flush positioning didn't work then try just positioning vertically (rule 1.b.i & rule 1.b.ii)\r\n                if (this.applyVerticalPositioning()){\r\n                    return;\r\n                }\r\n            //otherwise check if the activator is in the left or right edges of the view & if so try horizontal positioning\r\n            } else if ((this.offset.left + this.offset.width) < leftFlushPt || this.offset.left > rightFlushPt) {\r\n                //if flush positioning didn't work then try just positioning horizontally (rule 1.b.iii & rule 1.b.iv)\r\n                if (this.applyHorizontalPositioning()){\r\n                    return;\r\n                }\r\n            }\r\n\r\n            //Rule 2 - no specific logic below for this rule since it is inheritent to the positioning functions, ie we attempt to never\r\n            //position a popup where there isn't enough room for it.\r\n\r\n            //Rule 3 - Popup Size based positioning\r\n            var clientRect = this.getBoundingRect(this.container.node);\r\n\r\n            //if the popup is wide then use vertical positioning\r\n            if (clientRect.width > this.container.widePopup) {\r\n                if (this.applyVerticalPositioning()){\r\n                    return;\r\n                }\r\n            }\r\n            //if the popup is long then use horizontal positioning\r\n            else if (clientRect.height > this.container.longPopup) {\r\n                if (this.applyHorizontalPositioning()){\r\n                    return;\r\n                }\r\n            }\r\n\r\n            //Rule 4 - Favor top or bottom positioning\r\n            if (this.applyVerticalPositioning()) {\r\n                return;\r\n            }\r\n            //but if thats not possible try horizontal\r\n            else if (this.applyHorizontalPositioning()){\r\n                return;\r\n            }\r\n\r\n            //Rule 5 - no specific logic below for this rule since it is built into the vertical position functions, ie we attempt to\r\n            //         use a bottom position for the popup as much possible.\r\n        }\r\n    },\r\n    //\r\n\r\n    /**\r\n    * Determines whether the popup will fit onscreen if moved below or above the activator.\r\n    *\r\n    * @return {Boolean} `true` if popup will fit onscreen; otherwise, `false`.\r\n    * @public\r\n    */\r\n    initVerticalPositioning: function () {\r\n        this.resetPositioning();\r\n        this.container.addClass('vertical');\r\n\r\n        var clientRect = this.getBoundingRect(this.container.node);\r\n        var innerHeight = this.getViewHeight();\r\n\r\n        if (this.container.floating){\r\n            if (this.offset.top < (innerHeight / 2)) {\r\n                this.applyPosition({top: this.offset.top + this.offset.height, bottom: 'auto'});\r\n                this.container.addClass('below');\r\n            } else {\r\n                this.applyPosition({top: this.offset.top - clientRect.height, bottom: 'auto'});\r\n                this.container.addClass('above');\r\n            }\r\n        } else {\r\n            //if the popup's bottom goes off the screen then put it on the top of the invoking control\r\n            if ((clientRect.top + clientRect.height > innerHeight) && ((innerHeight - clientRect.bottom) < (clientRect.top - clientRect.height))){\r\n                this.container.addClass('above');\r\n            } else {\r\n                this.container.addClass('below');\r\n            }\r\n        }\r\n\r\n        //if moving the popup above or below the activator puts it past the edge of the screen then vertical doesn't work\r\n        clientRect = this.getBoundingRect(this.container.node);\r\n        if ((clientRect.top + clientRect.height) > innerHeight || clientRect.top < 0){\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n    * Moves the popup below or above the activating control.\r\n    *\r\n    * @return {Boolean} `false` if popup was not moved because it would not fit onscreen\r\n    * in the new position; otherwise, `true`.\r\n    * @public\r\n    */\r\n    applyVerticalPositioning: function () {\r\n        //if we can't fit the popup above or below the activator then forget vertical positioning\r\n        if (!this.initVerticalPositioning()) {\r\n            return false;\r\n        }\r\n\r\n        var clientRect = this.getBoundingRect(this.container.node);\r\n        var innerWidth = this.getViewWidth();\r\n\r\n        if (this.container.floating){\r\n            //Get the left edge delta to horizontally center the popup\r\n            var centeredLeft = this.offset.left + this.offset.width/2 - clientRect.width/2;\r\n            if (centeredLeft + clientRect.width > innerWidth) {//popup goes off right edge of the screen if centered\r\n                this.applyPosition({left: this.offset.left + this.offset.width - clientRect.width});\r\n                this.container.addClass('left');\r\n            } else if (centeredLeft < 0) {//popup goes off left edge of the screen if centered\r\n                this.applyPosition({left:this.offset.left});\r\n                this.container.addClass('right');\r\n            } else {//center the popup\r\n                this.applyPosition({left: centeredLeft});\r\n            }\r\n\r\n        } else {\r\n            //Get the left edge delta to horizontally center the popup\r\n            var centeredLeftDelta = this.offset.left + this.offset.width/2 - clientRect.left - clientRect.width/2;\r\n            if (clientRect.right + centeredLeftDelta > innerWidth) {//popup goes off right edge of the screen if centered\r\n                this.applyPosition({left: this.offset.left + this.offset.width - clientRect.right});\r\n                this.container.addRemoveClass('left', true);\r\n            } else if (clientRect.left + centeredLeftDelta < 0) {//popup goes off left edge of the screen if centered\r\n                this.container.addRemoveClass('right', true);\r\n            } else {//center the popup\r\n                this.applyPosition({left: centeredLeftDelta});\r\n            }\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n    * Positions the popup vertically flush with the activating control.\r\n    *\r\n    * @param {Number} leftFlushPt - Left side cutoff.\r\n    * @param {Number} rightFlushPt - Right side cutoff.\r\n    * @return {Boolean} `false` if popup will not fit onscreen in new position;\r\n    * otherwise, `true`.\r\n    * @public\r\n    */\r\n    applyVerticalFlushPositioning: function (leftFlushPt, rightFlushPt) {\r\n        //if we can't fit the popup above or below the activator then forget vertical positioning\r\n        if (!this.initVerticalPositioning()) {\r\n            return false;\r\n        }\r\n\r\n        var clientRect = this.getBoundingRect(this.container.node);\r\n        var innerWidth = this.getViewWidth();\r\n\r\n        //If the activator's right side is within our left side cut off use flush positioning\r\n        if ((this.offset.left + this.offset.width/2) < leftFlushPt){\r\n            //if the activator's left edge is too close or past the screen left edge\r\n            if (this.offset.left + this.offset.width/2 < this.container.horizBuffer){\r\n                this.applyPosition({left:this.container.horizBuffer + (this.container.floating ? 0 : -clientRect.left)});\r\n            } else {\r\n                this.applyPosition({left:this.offset.width/2  + (this.container.floating ? this.offset.left : 0)});\r\n            }\r\n\r\n            this.container.addClass('right');\r\n            this.container.addClass('corner');\r\n            return true;\r\n        }\r\n        //If the activator's left side is within our right side cut off use flush positioning\r\n        else if (this.offset.left + this.offset.width/2 > rightFlushPt) {\r\n            if ((this.offset.left+this.offset.width/2) > (innerWidth-this.container.horizBuffer)){\r\n                this.applyPosition({left:innerWidth - this.container.horizBuffer - clientRect.right});\r\n            } else {\r\n                this.applyPosition({left: (this.offset.left + this.offset.width/2) - clientRect.right});\r\n            }\r\n            this.container.addClass('left');\r\n            this.container.addClass('corner');\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    /**\r\n    * Determines whether popup will fit onscreen if moved to the left or right of the\r\n    * activator.\r\n    *\r\n    * @return {Boolean} `true` if the popup will fit onscreen; otherwise, `false`.\r\n    * @public\r\n    */\r\n    initHorizontalPositioning: function () {\r\n        this.resetPositioning();\r\n\r\n        var clientRect = this.getBoundingRect(this.container.node);\r\n        var innerWidth = this.getViewWidth();\r\n\r\n        //adjust horizontal positioning of the popup & nub vertical positioning\r\n        if (this.container.floating){\r\n            if ((this.offset.left + this.offset.width) < innerWidth/2) {\r\n                this.applyPosition({left: this.offset.left + this.offset.width});\r\n                this.container.addRemoveClass('left', true);\r\n            } else {\r\n                this.applyPosition({left: this.offset.left - clientRect.width});\r\n                this.container.addRemoveClass('right', true);\r\n            }\r\n        } else {\r\n            if (this.offset.left - clientRect.width > 0) {\r\n                this.applyPosition({left: this.offset.left - clientRect.left - clientRect.width});\r\n                this.container.addRemoveClass('right', true);\r\n            } else {\r\n                this.applyPosition({left: this.offset.width});\r\n                this.container.addRemoveClass('left', true);\r\n            }\r\n        }\r\n        this.container.addRemoveClass('horizontal', true);\r\n\r\n        //if moving the popup left or right of the activator puts it past the edge of the screen then horizontal won't work\r\n        clientRect = this.getBoundingRect(this.container.node);\r\n        if (clientRect.left < 0 || (clientRect.left + clientRect.width) > innerWidth){\r\n            return false;\r\n        }\r\n        return true;\r\n\r\n    },\r\n\r\n    /**\r\n    * Moves the popup to the left or right of the activating control.\r\n    *\r\n    * @return {Boolean} `false` if popup was not moved because it would not fit onscreen\r\n    * in the new position; otherwise, `true`.\r\n    * @public\r\n    */\r\n    applyHorizontalPositioning: function () {\r\n        //if we can't fit the popup left or right of the activator then forget horizontal positioning\r\n        if (!this.initHorizontalPositioning()) {\r\n            return false;\r\n        }\r\n\r\n        var clientRect = this.getBoundingRect(this.container.node);\r\n        var innerHeight = this.getViewHeight();\r\n        var activatorCenter = this.offset.top + this.offset.height/2;\r\n\r\n        if (this.container.floating){\r\n            //if the activator's center is within 10% of the center of the view, vertically center the popup\r\n            if ((activatorCenter >= (innerHeight/2 - 0.05 * innerHeight)) && (activatorCenter <= (innerHeight/2 + 0.05 * innerHeight))) {\r\n                this.applyPosition({top: this.offset.top + this.offset.height/2 - clientRect.height/2, bottom: 'auto'});\r\n            } else if (this.offset.top + this.offset.height < innerHeight/2) { //the activator is in the top 1/2 of the screen\r\n                this.applyPosition({top: this.offset.top, bottom: 'auto'});\r\n                this.container.addRemoveClass('high', true);\r\n            } else { //otherwise the popup will be positioned in the bottom 1/2 of the screen\r\n                this.applyPosition({top: this.offset.top - clientRect.height + this.offset.height*2, bottom: 'auto'});\r\n                this.container.addRemoveClass('low', true);\r\n            }\r\n        } else {\r\n            //if the activator's center is within 10% of the center of the view, vertically center the popup\r\n            if ((activatorCenter >= (innerHeight/2 - 0.05 * innerHeight)) && (activatorCenter <= (innerHeight/2 + 0.05 * innerHeight))) {\r\n                this.applyPosition({top: (this.offset.height - clientRect.height)/2});\r\n            } else if (this.offset.top + this.offset.height < innerHeight/2) { //the activator is in the top 1/2 of the screen\r\n                this.applyPosition({top: -this.offset.height});\r\n                this.container.addRemoveClass('high', true);\r\n            } else { //otherwise the popup will be positioned in the bottom 1/2 of the screen\r\n                this.applyPosition({top: clientRect.top - clientRect.height - this.offset.top + this.offset.height});\r\n                this.container.addRemoveClass('low', true);\r\n            }\r\n        }\r\n        return true;\r\n    },\r\n\r\n\r\n    /**\r\n    * Positions the popup horizontally flush with the activating control.\r\n    *\r\n    * @param {Number} leftFlushPt - Left side cutoff.\r\n    * @param {Number} rightFlushPt - Right side cutoff.\r\n    * @return {Boolean} `false` if popup will not fit onscreen in new position;\r\n    * otherwise, `true`.\r\n    * @public\r\n    */\r\n    applyHorizontalFlushPositioning: function (leftFlushPt, rightFlushPt) {\r\n        //if we can't fit the popup left or right of the activator then forget horizontal positioning\r\n        if (!this.initHorizontalPositioning()) {\r\n            return false;\r\n        }\r\n\r\n        var clientRect = this.getBoundingRect(this.container.node);\r\n        var innerHeight = this.getViewHeight();\r\n\r\n        //adjust vertical positioning (high or low nub & popup position)\r\n        if (this.container.floating){\r\n            if (this.offset.top < (innerHeight/2)){\r\n                this.applyPosition({top: this.offset.top + this.offset.height/2});\r\n                this.container.addRemoveClass('high', true);\r\n            } else {\r\n                this.applyPosition({top:this.offset.top + this.offset.height/2 - clientRect.height});\r\n                this.container.addRemoveClass('low', true);\r\n            }\r\n        } else {\r\n            if (((clientRect.top + clientRect.height) > innerHeight) && ((innerHeight - clientRect.bottom) < (clientRect.top - clientRect.height))) {\r\n                this.applyPosition({top: clientRect.top - clientRect.height - this.offset.top - this.offset.height/2});\r\n                this.container.addRemoveClass('low', true);\r\n            } else {\r\n                this.applyPosition({top: this.offset.height/2});\r\n                this.container.addRemoveClass('high', true);\r\n            }\r\n        }\r\n\r\n        //If the activator's right side is within our left side cut off use flush positioning\r\n        if ((this.offset.left + this.offset.width) < leftFlushPt){\r\n            this.container.addClass('left');\r\n            this.container.addClass('corner');\r\n            return true;\r\n        }\r\n        //If the activator's left side is within our right side cut off use flush positioning\r\n        else if (this.offset.left > rightFlushPt) {\r\n            this.container.addClass('right');\r\n            this.container.addClass('corner');\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    /**\r\n    * Retrieves an object with properties describing the bounding rectangle for the\r\n    * passed-in DOM node.\r\n    *\r\n    * @param  {String} inNode - DOM node for which to retrieve the bounding rectangle.\r\n    * @return {Object} Object with properties describing the DOM node's bounding rectangle.\r\n    * @private\r\n    */\r\n    getBoundingRect:  function (inNode){\r\n        // getBoundingClientRect returns top/left values which are relative to the viewport and not absolute\r\n        var o = inNode.getBoundingClientRect();\r\n        if (!o.width || !o.height) {\r\n            return {\r\n                left: o.left,\r\n                right: o.right,\r\n                top: o.top,\r\n                bottom: o.bottom,\r\n                width: o.right - o.left,\r\n                height: o.bottom - o.top\r\n            };\r\n        }\r\n        return o;\r\n    },\r\n\r\n    /**\r\n    * @private\r\n    */\r\n    getViewHeight: function () {\r\n        return (window.innerHeight === undefined) ? document.documentElement.clientHeight : window.innerHeight;\r\n    },\r\n\r\n    /**\r\n    * @private\r\n    */\r\n    getViewWidth: function () {\r\n        return (window.innerWidth === undefined) ? document.documentElement.clientWidth : window.innerWidth;\r\n    },\r\n\r\n    /**\r\n    * @private\r\n    */\r\n    applyPosition: function (inRect) {\r\n        var s = '';\r\n        for (var n in inRect) {\r\n            s += (n + ':' + inRect[n] + (isNaN(inRect[n]) ? '; ' : 'px; '));\r\n        }\r\n        this.container.addStyles(s);\r\n    },\r\n\r\n    /**\r\n    * @private\r\n    */\r\n    resetPositioning: function () {\r\n        this.container.removeClass('right');\r\n        this.container.removeClass('left');\r\n        this.container.removeClass('high');\r\n        this.container.removeClass('low');\r\n        this.container.removeClass('corner');\r\n        this.container.removeClass('below');\r\n        this.container.removeClass('above');\r\n        this.container.removeClass('vertical');\r\n        this.container.removeClass('horizontal');\r\n\r\n        this.applyPosition({left: 'auto'});\r\n        this.applyPosition({top: 'auto'});\r\n    },\r\n\r\n    /**\r\n    * @private\r\n    */\r\n    reflow: function () {\r\n        this.offset = this.container.activatorOffset;\r\n        this.adjustPosition();\r\n    }\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/Arranger~Arranger} kind.\r\n* @module layout/Arranger\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutils = require('enyo/utils'),\r\n\tplatform = require('enyo/platform');\r\n\r\nvar\r\n\tLayout = require('enyo/Layout'),\r\n\tDom = require('enyo/dom');\r\n\r\n/**\r\n* {@link module:layout/Arranger~Arranger} is an {@link module:enyo/Layout~Layout} that considers one of the\r\n* controls it lays out as active. The other controls are placed relative to\r\n* the active control as makes sense for the layout.\r\n*\r\n* `layout/Arranger` supports dynamic layouts, meaning it's possible to transition\r\n* between an arranger's layouts\tvia animation. Typically, arrangers should lay out\r\n* controls using CSS transforms, since these are optimized for animation. To\r\n* support this, the controls in an arranger are absolutely positioned, and\r\n* the Arranger kind has an [accelerated]{@link module:layout/Arranger~Arranger#accelerated} property,\r\n* which marks controls for CSS compositing. The default setting of `'auto'` ensures\r\n* that this will occur if enabled by the platform.\r\n*\r\n* For more information, see the documentation on\r\n* [Arrangers]{@linkplain $dev-guide/building-apps/layout/arrangers.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class Arranger\r\n* @extends module:enyo/Layout~Layout\r\n* @public\r\n*/\r\nvar Arranger = module.exports = kind(\r\n\t/** @lends module:layout/Arranger~Arranger.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.Arranger',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Layout,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tlayoutClass: 'enyo-arranger',\r\n\r\n\t/**\r\n\t* Flag indicating whether the Arranger should lay out controls using CSS\r\n\t* compositing. The default setting `('auto')` will mark controls for compositing\r\n\t* if the platform supports it.\r\n\t*\r\n\t* @type {String|Boolean}\r\n\t* @default 'auto'\r\n\t* @protected\r\n\t*/\r\n\taccelerated: 'auto',\r\n\r\n\t/**\r\n\t* A property of the drag event, used to calculate the amount that a drag will\r\n\t* move the layout.\r\n\t*\r\n\t* @type {String}\r\n\t* @default 'ddx'\r\n\t* @private\r\n\t*/\r\n\tdragProp: 'ddx',\r\n\r\n\t/**\r\n\t* A property of the drag event, used to calculate the direction of the drag.\r\n\t*\r\n\t* @type {String}\r\n\t* @default 'xDirection'\r\n\t* @private\r\n\t*/\r\n\tdragDirectionProp: 'xDirection',\r\n\r\n\t/**\r\n\t* A property of the drag event, used to calculate whether a drag should occur.\r\n\t*\r\n\t* @type {String}\r\n\t* @default 'horizontal'\r\n\t* @private\r\n\t*/\r\n\tcanDragProp: 'horizontal',\r\n\r\n\t/**\r\n\t* If set to `true`, transitions between non-adjacent arrangements will go\r\n\t* through the intermediate arrangements. This is useful when direct\r\n\t* transitions between arrangements would be visually jarring.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @protected\r\n\t*/\r\n\tincrementalPoints: false,\r\n\r\n\t/**\r\n\t* Called when removing an arranger (e.g., when switching a Panels control to a\r\n\t* different `arrangerKind`). Subkinds should implement this function to reset\r\n\t* whatever properties they've changed on child controls. Note that you **must**\r\n\t* call the superkind implementation in your subkind's `destroy()` function.\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tvar c$ = this.container.getPanels();\r\n\t\t\tfor (var i=0, c; (c=c$[i]); i++) {\r\n\t\t\t\tc._arranger = null;\r\n\t\t\t}\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Arranges the given array of `controls` in the layout specified by `index`. When\r\n\t* implementing this method, rather than applying styling directly to controls, call\r\n\t* [arrangeControl()]{@link module:layout/Arranger~Arranger#arrangeControl} and pass in an arrangement\r\n\t* object with styling settings. The styles will then be applied via\r\n\t* [flowControl()]{@link module:layout/Arranger~Arranger#flowControl}.\r\n\t*\r\n\t* @param {module:enyo/Control~Control[]} controls\r\n\t* @param {Number} index\r\n\t* @virtual\r\n\t* @protected\r\n\t*/\r\n\tarrange: function (controls, index) {\r\n\t},\r\n\r\n\t/**\r\n\t* Sizes the controls in the layout. This method is called only at reflow time.\r\n\t* Note that the sizing operation has been separated from the layout done in\r\n\t* [arrange()]{@link module:layout/Arranger~Arranger#arrange} because it is expensive and not suitable\r\n\t* for dynamic layout.\r\n\t*\r\n\t* @virtual\r\n\t* @protected\r\n\t*/\r\n\tsize: function () {\r\n\t},\r\n\r\n\t/**\r\n\t* Called when a layout transition begins. Implement this method to perform\r\n\t* tasks that should only occur when a transition starts; for example, some\r\n\t* controls might be shown or hidden. In addition, the `transitionPoints`\r\n\t* array may be set on the container to dictate the named arrangements\r\n\t* between which the transition occurs.\r\n\t*\r\n\t* @protected\r\n\t*/\r\n\tstart: function () {\r\n\t\tvar f = this.container.fromIndex, t = this.container.toIndex;\r\n\t\tvar p$ = this.container.transitionPoints = [f];\r\n\t\t// optionally add a transition point for each index between from and to.\r\n\t\tif (this.incrementalPoints) {\r\n\t\t\tvar d = Math.abs(t - f) - 2;\r\n\t\t\tvar i = f;\r\n\t\t\twhile (d >= 0) {\r\n\t\t\t\ti = i + (t < f ? -1 : 1);\r\n\t\t\t\tp$.push(i);\r\n\t\t\t\td--;\r\n\t\t\t}\r\n\t\t}\r\n\t\tp$.push(this.container.toIndex);\r\n\t},\r\n\r\n\t/**\r\n\t* Called when a layout transition completes. Implement this method to\r\n\t* perform tasks that should only occur when a transition ends; for\r\n\t* example, some controls might be shown or hidden.\r\n\t*\r\n\t* @virtual\r\n\t* @protected\r\n\t*/\r\n\tfinish: function () {\r\n\t},\r\n\r\n\t/**\r\n\t* Called when dragging the layout, this method returns the difference in\r\n\t* pixels between the arrangement `a0` for layout setting `i0`\tand\r\n\t* arrangement `a1` for layout setting `i1`. This data is used to calculate\r\n\t* the percentage that a drag should move the layout between two active states.\r\n\t*\r\n\t* @param {Number} i0 - The initial layout setting.\r\n\t* @param {Object} a0 - The initial arrangement.\r\n\t* @param {Number} i1 - The target layout setting.\r\n\t* @param {Object} a1 - The target arrangement.\r\n\t* @virtual\r\n\t* @protected\r\n\t*/\r\n\tcalcArrangementDifference: function (i0, a0, i1, a1) {\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcanDragEvent: function (event) {\r\n\t\treturn event[this.canDragProp];\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcDragDirection: function (event) {\r\n\t\treturn event[this.dragDirectionProp];\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcDrag: function (event) {\r\n\t\treturn event[this.dragProp];\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdrag: function (dp, an, a, bn, b) {\r\n\t\tvar f = this.measureArrangementDelta(-dp, an, a, bn, b);\r\n\t\treturn f;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmeasureArrangementDelta: function (x, i0, a0, i1, a1) {\r\n\t\tvar d = this.calcArrangementDifference(i0, a0, i1, a1);\r\n\t\tvar s = d ? x / Math.abs(d) : 0;\r\n\t\ts = s * (this.container.fromIndex > this.container.toIndex ? -1 : 1);\r\n\t\treturn s;\r\n\t},\r\n\r\n\t/**\r\n\t* Arranges the panels, with the panel at `index` being designated as active.\r\n\t*\r\n\t* @param  {Number} index - The index of the active panel.\r\n\t* @private\r\n\t*/\r\n\t_arrange: function (index) {\r\n\t\t// guard against being called before we've been rendered\r\n\t\tif (!this.containerBounds) {\r\n\t\t\tthis.reflow();\r\n\t\t}\r\n\t\tvar c$ = this.getOrderedControls(index);\r\n\t\tthis.arrange(c$, index);\r\n\t},\r\n\r\n\t/**\r\n\t* Arranges `control` according to the specified `arrangement`.\r\n\t*\r\n\t* Note that this method doesn't actually modify `control` but rather sets the\r\n\t* arrangement on a private member of the control to be retrieved by\r\n\t* {@link module:layout/Panels~Panels}.\r\n\t*\r\n\t* @param  {module:enyo/Control~Control} control\r\n\t* @param  {Object} arrangement\r\n\t* @private\r\n\t*/\r\n\tarrangeControl: function (control, arrangement) {\r\n\t\tcontrol._arranger = utils.mixin(control._arranger || {}, arrangement);\r\n\t},\r\n\r\n\t/**\r\n\t* Called before HTML is rendered. Applies CSS to panels to ensure GPU acceleration if\r\n\t* [accelerated]{@link module:layout/Arranger~Arranger#accelerated} is `true`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tflow: function () {\r\n\t\tthis.c$ = [].concat(this.container.getPanels());\r\n\t\tthis.controlsIndex = 0;\r\n\t\tfor (var i=0, c$=this.container.getPanels(), c; (c=c$[i]); i++) {\r\n\t\t\tDom.accelerate(c, !c.preventAccelerate && this.accelerated);\r\n\t\t\tif (platform.safari) {\r\n\t\t\t\t// On Safari-desktop, sometimes having the panel's direct child set to accelerate isn't sufficient\r\n\t\t\t\t// this is most often the case with Lists contained inside another control, inside a Panels\r\n\t\t\t\tvar grands=c.children;\r\n\t\t\t\tfor (var j=0, kid; (kid=grands[j]); j++) {\r\n\t\t\t\t\tDom.accelerate(kid, this.accelerated);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Called during \"rendered\" phase to [size]{@link module:layout/Arranger~Arranger#size} the controls.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\treflow: function () {\r\n\t\tvar cn = this.container.hasNode();\r\n\t\tthis.containerBounds = cn ? {width: cn.clientWidth, height: cn.clientHeight} : {};\r\n\t\tthis.size();\r\n\t},\r\n\r\n\t/**\r\n\t* If the {@link module:layout/Panels~Panels} has an arrangement, flows each control according to that\r\n\t* arrangement.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tflowArrangement: function () {\r\n\t\tvar a = this.container.arrangement;\r\n\t\tif (a) {\r\n\t\t\tfor (var i=0, c$=this.container.getPanels(), c; (c=c$[i]) && (a[i]); i++) {\r\n\t\t\t\tthis.flowControl(c, a[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t* Lays out the given `control` according to the settings stored in the\r\n\t* `arrangement` object. By default, `flowControl()` will apply settings for\r\n\t* `left`, `top`, and `opacity`. This method should only be implemented to apply\r\n\t* other settings made via [arrangeControl()]{@link module:layout/Arranger~Arranger#arrangeControl}.\r\n\t*\r\n\t* @param {module:enyo/Control~Control} control - The control to be laid out.\r\n\t* @param {Object} arrangement - An object whose members specify the layout settings.\r\n\t* @protected\r\n\t*/\r\n\tflowControl: function (control, arrangement) {\r\n\t\tArranger.positionControl(control, arrangement);\r\n\t\tvar o = arrangement.opacity;\r\n\t\tif (o != null) {\r\n\t\t\tArranger.opacifyControl(control, o);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Gets an array of controls arranged in state order.\r\n\t* note: optimization, dial around a single array.\r\n\t*\r\n\t* @param  {Number} index     - The index of the active panel.\r\n\t* @return {module:enyo/Control~Control[]}   - Ordered array of controls.\r\n\t* @private\r\n\t*/\r\n\tgetOrderedControls: function (index) {\r\n\t\tvar whole = Math.floor(index);\r\n\t\tvar a = whole - this.controlsIndex;\r\n\t\tvar sign = a > 0;\r\n\t\tvar c$ = this.c$ || [];\r\n\t\tfor (var i=0; i<Math.abs(a); i++) {\r\n\t\t\tif (sign) {\r\n\t\t\t\tc$.push(c$.shift());\r\n\t\t\t} else {\r\n\t\t\t\tc$.unshift(c$.pop());\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.controlsIndex = whole;\r\n\t\treturn c$;\r\n\t}\r\n});\r\n\r\n/**\r\n* Positions a control via transform--`translateX/translateY` if supported,\r\n* falling back to `left/top` if not.\r\n*\r\n* @lends module:layout/Arranger~Arranger\r\n* @param  {module:enyo/Control~Control} control - The control to position.\r\n* @param  {Object} bounds        - The new bounds for `control`.\r\n* @param  {String} unit          - The unit for `bounds` members.\r\n* @public\r\n*/\r\nArranger.positionControl = function (control, bounds, unit) {\r\n\tunit = unit || 'px';\r\n\tif (!this.updating) {\r\n\t\t// IE10 uses setBounds because of control hit caching problems seem in some apps\r\n\t\tif (Dom.canTransform() && !control.preventTransform && platform.ie !== 10) {\r\n\t\t\tvar l = bounds.left, t = bounds.top;\r\n\t\t\tl = utils.isString(l) ? l : l && (l + unit);\r\n\t\t\tt = utils.isString(t) ? t : t && (t + unit);\r\n\t\t\tDom.transform(control, {translateX: l || null, translateY: t || null});\r\n\t\t} else {\r\n\t\t\t// If a previously positioned control has subsequently been marked with\r\n\t\t\t// preventTransform, we need to clear out any old translation values.\r\n\t\t\tif (Dom.canTransform() && control.preventTransform) {\r\n\t\t\t\tDom.transform(control, {translateX: null, translateY: null});\r\n\t\t\t}\r\n\t\t\tcontrol.setBounds(bounds, unit);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n* Sets the opacity value for a given control.\r\n*\r\n* @lends module:layout/Arranger~Arranger\r\n* @param {module:enyo/Control~Control} inControl - The control whose opacity is to be set.\r\n* @param {Number} inOpacity - The new opacity value for the control.\r\n* @public\r\n*/\r\nArranger.opacifyControl = function (inControl, inOpacity) {\r\n\t// FIXME: very high/low settings of opacity can cause a control to\r\n\t// blink so cap this here.\r\n\tinControl.applyStyle('opacity', inOpacity > 0.99 ? 1 : (inOpacity < 0.01 ? 0 : inOpacity));\r\n};\r\n","/**\r\n* Contains the declaration for the {@link module:layout/CardArranger~CardArranger} kind.\r\n* @module layout/CardArranger\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tArranger = require('./Arranger');\r\n\r\n\r\n/**\r\n* {@link module:layout/CardArranger~CardArranger} is a {@link module:layout/Arranger~Arranger}\r\n* that displays only one active control. The non-active controls are hidden with\r\n* `setShowing(false)`. Transitions between arrangements are handled by fading\r\n* from one control to the next.\r\n*\r\n* For more information, see the documentation on\r\n* [Arrangers]{@linkplain $dev-guide/building-apps/layout/arrangers.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class CardArranger\r\n* @extends module:layout/Arranger~Arranger\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:layout/CardArranger~CardArranger.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.CardArranger',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Arranger,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tlayoutClass: 'enyo-arranger enyo-arranger-fit',\r\n\r\n\t/**\r\n\t* @see {@link module:layout/Arranger~Arranger#calcArrangementDifference}\r\n\t* @protected\r\n\t*/\r\n\tcalcArrangementDifference: function (i0, a0, i1, a1) {\r\n\t\treturn this.containerBounds.width;\r\n\t},\r\n\r\n\t/**\r\n\t* Applies opacity to the activation and deactivation of panels. Expects the passed-in\r\n\t* array of controls to be ordered such that the first control in the array is the active\r\n\t* panel.\r\n\t*\r\n\t* @see {@link module:layout/Arranger~Arranger#arrange}\r\n\t* @protected\r\n\t*/\r\n\tarrange: function (controls, arrangement) {\r\n\t\tfor (var i=0, c, v; (c=controls[i]); i++) {\r\n\t\t\tv = (i === 0) ? 1 : 0;\r\n\t\t\tthis.arrangeControl(c, {opacity: v});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Shows the active panel at the start of transition. Also triggers a resize on\r\n\t* the active panel if it wasn't previously showing.\r\n\t*\r\n\t* @see {@link module:layout/Arranger~Arranger#start}\r\n\t* @method\r\n\t* @protected\r\n\t*/\r\n\tstart: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tvar c$ = this.container.getPanels();\r\n\t\t\tfor (var i=0, c; (c=c$[i]); i++) {\r\n\t\t\t\tvar wasShowing=c.showing;\r\n\t\t\t\tc.setShowing(i == this.container.fromIndex || i == (this.container.toIndex));\r\n\t\t\t\tif (c.showing && !wasShowing) {\r\n\t\t\t\t\tc.resize();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Hides all non-active panels when the transition completes.\r\n\t*\r\n\t* @see {@link module:layout/Arranger~Arranger#finish}\r\n\t* @method\r\n\t* @protected\r\n\t*/\r\n\tfinish: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tvar c$ = this.container.getPanels();\r\n\t\t\tfor (var i=0, c; (c=c$[i]); i++) {\r\n\t\t\t\tc.setShowing(i == this.container.toIndex);\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Ensures all panels are showing and visible when the arranger is destroyed.\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tvar c$ = this.container.getPanels();\r\n\t\t\tfor (var i=0, c; (c=c$[i]); i++) {\r\n\t\t\t\tArranger.opacifyControl(c, 1);\r\n\t\t\t\tif (!c.showing) {\r\n\t\t\t\t\tc.setShowing(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t})\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/CarouselArranger~CarouselArranger} kind.\r\n* @module layout/CarouselArranger\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom');\r\n\r\nvar\r\n\tArranger = require('./Arranger');\r\n\r\n/**\r\n* {@link module:layout/CarouselArranger~CarouselArranger} is a\r\n* {@link module:layout/Arranger~Arranger} that displays the active control,\r\n* along with some number of inactive controls to fill the available space. The\r\n* active control is positioned on the left side of the container, and the rest\r\n* of the views are laid out to the right.\r\n*\r\n* One of the controls may have `fit: true` set, in which case it will take up\r\n* any remaining space after all of the other controls have been sized.\r\n*\r\n* For best results with CarouselArranger, you should set a minimum width for\r\n* each control via a CSS style, e.g., `min-width: 25%` or `min-width: 250px`.\r\n*\r\n* Transitions between arrangements are handled by sliding the new controls in\r\n* from the right and sliding the old controls off to the left.\r\n*\r\n* For more information, see the documentation on\r\n* [Arrangers]{@linkplain $dev-guide/building-apps/layout/arrangers.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class CarouselArranger\r\n* @extends module:layout/Arranger~Arranger\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:layout/CarouselArranger~CarouselArranger */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.CarouselArranger',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Arranger,\r\n\r\n\t/**\r\n\t* Calculates the size of each panel. Considers the padding of the container by calling\r\n\t* {@link module:enyo/dom#calcPaddingExtents} and control margin by calling\r\n\t* {@link module:enyo/dom#calcMarginExtents}. If the container is larger than the combined sizes of\r\n\t* the controls, one control may be set to fill the remaining space by setting its `fit`\r\n\t* property to `true`. If multiple controls have `fit: true` set, the last control to be so\r\n\t* marked will have precedence.\r\n\t*\r\n\t* @protected\r\n\t*/\r\n\tsize: function () {\r\n\t\tvar c$ = this.container.getPanels();\r\n\t\tvar padding = this.containerPadding = this.container.hasNode() ? dom.calcPaddingExtents(this.container.node) : {};\r\n\t\tvar pb = this.containerBounds;\r\n\t\tvar i, e, s, m, c;\r\n\t\tpb.height -= padding.top + padding.bottom;\r\n\t\tpb.width -= padding.left + padding.right;\r\n\t\t// used space\r\n\t\tvar fit;\r\n\t\tfor (i=0, s=0; (c=c$[i]); i++) {\r\n\t\t\tm = dom.calcMarginExtents(c.hasNode());\r\n\t\t\tc.width = c.getBounds().width;\r\n\t\t\tc.marginWidth = m.right + m.left;\r\n\t\t\ts += (c.fit ? 0 : c.width) + c.marginWidth;\r\n\t\t\tif (c.fit) {\r\n\t\t\t\tfit = c;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (fit) {\r\n\t\t\tvar w = pb.width - s;\r\n\t\t\tfit.width = w >= 0 ? w : fit.width;\r\n\t\t}\r\n\t\tfor (i=0, e=padding.left; (c=c$[i]); i++) {\r\n\t\t\tc.setBounds({top: padding.top, bottom: padding.bottom, width: c.fit ? c.width : null});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @see {@link module:layout/Arranger~Arranger#arrange}\r\n\t* @protected\r\n\t*/\r\n\tarrange: function (controls, arrangement) {\r\n\t\tif (this.container.wrap) {\r\n\t\t\tthis.arrangeWrap(controls, arrangement);\r\n\t\t} else {\r\n\t\t\tthis.arrangeNoWrap(controls, arrangement);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* A non-wrapping carousel arranges the controls from left to right without regard to the\r\n\t* ordered array passed via `controls`. `arrangement` will contain the index of the active\r\n\t* panel.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tarrangeNoWrap: function (controls, arrangement) {\r\n\t\tvar i, aw, cw, c;\r\n\t\tvar c$ = this.container.getPanels();\r\n\t\tvar s = this.container.clamp(arrangement);\r\n\t\tvar nw = this.containerBounds.width;\r\n\t\t// do we have enough content to fill the width?\r\n\t\tfor (i=s, cw=0; (c=c$[i]); i++) {\r\n\t\t\tcw += c.width + c.marginWidth;\r\n\t\t\tif (cw > nw) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// if content width is less than needed, adjust starting point index and offset\r\n\t\tvar n = nw - cw;\r\n\t\tvar o = 0;\r\n\t\tif (n > 0) {\r\n\t\t\tfor (i=s-1, aw=0; (c=c$[i]); i--) {\r\n\t\t\t\taw += c.width + c.marginWidth;\r\n\t\t\t\tif (n - aw <= 0) {\r\n\t\t\t\t\to = (n - aw);\r\n\t\t\t\t\ts = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// arrange starting from needed index with detected offset so we fill space\r\n\t\tvar w, e;\r\n\t\tfor (i=0, e=this.containerPadding.left + o; (c=c$[i]); i++) {\r\n\t\t\tw = c.width + c.marginWidth;\r\n\t\t\tif (i < s) {\r\n\t\t\t\tthis.arrangeControl(c, {left: -w});\r\n\t\t\t} else {\r\n\t\t\t\tthis.arrangeControl(c, {left: Math.floor(e)});\r\n\t\t\t\te += w;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Arranges `controls` from left to right such that the active panel is always the\r\n\t* leftmost, with subsequent panels positioned to its right.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tarrangeWrap: function (controls, arrangement) {\r\n\t\tfor (var i=0, e=this.containerPadding.left, c; (c=controls[i]); i++) {\r\n\t\t\tthis.arrangeControl(c, {left: e});\r\n\t\t\te += c.width + c.marginWidth;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Calculates the change in `left` position between the two arrangements `a0` and `a1`.\r\n\t* @protected\r\n\t*/\r\n\tcalcArrangementDifference: function (i0, a0, i1, a1) {\r\n\t\tvar i = Math.abs(i0 % this.c$.length);\r\n\t\treturn a0[i].left - a1[i].left;\r\n\t},\r\n\r\n\t/**\r\n\t* Resets the size and position of all panels.\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tvar c$ = this.container.getPanels();\r\n\t\t\tfor (var i=0, c; (c=c$[i]); i++) {\r\n\t\t\t\tArranger.positionControl(c, {left: null, top: null});\r\n\t\t\t\tc.applyStyle('top', null);\r\n\t\t\t\tc.applyStyle('bottom', null);\r\n\t\t\t\tc.applyStyle('left', null);\r\n\t\t\t\tc.applyStyle('width', null);\r\n\t\t\t}\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t})\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/DockRightArranger~DockRightArranger} kind.\r\n* @module layout/DockRightArranger\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom');\r\n\r\nvar\r\n\tArranger = require('./Arranger');\r\n\r\n/**\r\n* {@link module:layout/DockRightArranger~DockRightArranger} is a\r\n* {@link module:layout/Arranger~Arranger} that displays the active control,\r\n* along with some number of inactive controls to fill the available space. The\r\n* active control is positioned on the right side of the container and the rest\r\n* of the views are laid out to the right.\r\n*\r\n* For best results with DockRightArranger, you should set a minimum width\r\n* for each control via a CSS style, e.g., `min-width: 25%` or\r\n* `min-width: 250px`.\r\n*\r\n* Transitions between arrangements are handled by sliding the new control\tin\r\n* from the right. If the width of the old control(s) can fit within the\r\n* container, they will slide to the left. If not, they will collapse to the left.\r\n*\r\n* For more information, see the documentation on\r\n* [Arrangers]{@linkplain $dev-guide/building-apps/layout/arrangers.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class DockRightArranger\r\n* @extends module:layout/Arranger~Arranger\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:layout/DockRightArranger~DockRightArranger.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.DockRightArranger',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Arranger,\r\n\r\n\t/**\r\n\t* If `true`, the base panel (i.e., the panel at index `0`) will fill the width\r\n\t* of the container, while newer controls will slide in and collapse on top of it.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default  false\r\n\t* @public\r\n\t*/\r\n\tbasePanel: false,\r\n\r\n\t/**\r\n\t* Panels will overlap by this number of pixels.\r\n\t*\r\n\t* Note that this is imported from the container at construction time.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default  0\r\n\t* @public\r\n\t*/\r\n\toverlap: 0,\r\n\r\n\t/**\r\n\t* The column width in pixels.\r\n\t*\r\n\t* Note that this is imported from the container at construction time.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default  0\r\n\t* @public\r\n\t*/\r\n\tlayoutWidth: 0,\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tconstructor: function () {\r\n\t\tArranger.prototype._constructor.apply(this, arguments);\r\n\t\tthis.overlap = this.container.overlap != null ? this.container.overlap : this.overlap;\r\n\t\tthis.layoutWidth = this.container.layoutWidth != null ? this.container.layoutWidth : this.layoutWidth;\r\n\t},\r\n\r\n\t/**\r\n\t* @see {@link module:layout/Arranger~Arranger#size}\r\n\t* @protected\r\n\t*/\r\n\tsize: function () {\r\n\t\tvar c$ = this.container.getPanels();\r\n\t\tvar padding = this.containerPadding = this.container.hasNode() ? dom.calcPaddingExtents(this.container.node) : {};\r\n\t\tvar pb = this.containerBounds;\r\n\t\tvar i, m, c;\r\n\t\tpb.width -= padding.left + padding.right;\r\n\t\tvar nw = pb.width;\r\n\t\tvar len = c$.length;\r\n\t\tvar offset;\r\n\t\t// panel arrangement positions\r\n\t\tthis.container.transitionPositions = {};\r\n\r\n\t\tfor (i=0; (c=c$[i]); i++) {\r\n\t\t\tc.width = ((i===0) && (this.container.basePanel)) ? nw : c.getBounds().width;\r\n\t\t}\r\n\r\n\t\tfor (i=0; (c=c$[i]); i++) {\r\n\r\n\t\t\tif ((i===0) && (this.container.basePanel)) {\r\n\t\t\t\tc.setBounds({width: nw});\r\n\t\t\t}\r\n\t\t\tc.setBounds({top: padding.top, bottom: padding.bottom});\r\n\r\n\t\t\tfor (var j=0; (c=c$[j]); j++) {\r\n\t\t\t\tvar xPos;\r\n\t\t\t\t// index 0 always should always be left-aligned at 0px\r\n\t\t\t\tif ((i===0) && (this.container.basePanel)) {\r\n\t\t\t\t\txPos = 0;\r\n\t\t\t\t// else newer panels should be positioned off the viewport\r\n\t\t\t\t} else if (j < i) {\r\n\t\t\t\t\txPos = nw;\r\n\t\t\t\t// else active panel should be right-aligned\r\n\t\t\t\t} else if (i === j) {\r\n\t\t\t\t\toffset = nw > this.layoutWidth ? this.overlap : 0;\r\n\t\t\t\t\txPos = (nw - c$[i].width) + offset;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tthis.container.transitionPositions[i + '.' + j] = xPos;\r\n\t\t\t}\r\n\r\n\t\t\tif (j < len) {\r\n\t\t\t\tvar leftAlign = false;\r\n\t\t\t\tfor (var k=i+1; k<len; k++) {\r\n\t\t\t\t\toffset = 0;\r\n\t\t\t\t\t// position panel to left: 0px\r\n\t\t\t\t\tif (leftAlign) {\r\n\t\t\t\t\t\toffset = 0;\r\n\t\t\t\t\t// else if next panel cannot fit within container\r\n\t\t\t\t\t} else if ( (c$[i].width + c$[k].width - this.overlap) > nw ) {\r\n\t\t\t\t\t//} else if ( (c$[i].width + c$[k].width) > nw ) {\r\n\t\t\t\t\t\toffset = 0;\r\n\t\t\t\t\t\tleftAlign = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\toffset = c$[i].width - this.overlap;\r\n\t\t\t\t\t\tfor (m=i; m<k; m++) {\r\n\t\t\t\t\t\t\tvar _w = offset + c$[m+1].width - this.overlap;\r\n\t\t\t\t\t\t\tif (_w < nw) {\r\n\t\t\t\t\t\t\t\toffset = _w;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\toffset = nw;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\toffset = nw - offset;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.container.transitionPositions[i + '.' + k] = offset;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the `left` position for each panel according to the `arrangement`.\r\n\t*\r\n\t* @see {@link module:layout/Arranger~Arranger#arrange}\r\n\t* @protected\r\n\t*/\r\n\tarrange: function (controls, arrangement) {\r\n\t\tvar i, c;\r\n\t\tvar c$ = this.container.getPanels();\r\n\t\tvar s = this.container.clamp(arrangement);\r\n\r\n\t\tfor (i=0; (c=c$[i]); i++) {\r\n\t\t\tvar xPos = this.container.transitionPositions[i + '.' + s];\r\n\t\t\tthis.arrangeControl(c, {left: xPos});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Calculates the difference in width between the panels at `i0` and `i1`.\r\n\t*\r\n\t* @see {@link module:layout/Arranger~Arranger#calcArrangementDifference}\r\n\t* @protected\r\n\t*/\r\n\tcalcArrangementDifference: function (i0, a0, i1, a1) {\r\n\t\tvar p = this.container.getPanels();\r\n\t\tvar w = (i0 < i1) ? p[i1].width : p[i0].width;\r\n\t\treturn w;\r\n\t},\r\n\r\n\t/**\r\n\t* Resets the position of the panels.\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: function () {\r\n\t\tvar c$ = this.container.getPanels();\r\n\t\tfor (var i=0, c; (c=c$[i]); i++) {\r\n\t\t\tArranger.positionControl(c, {left: null, top: null});\r\n\t\t\tc.applyStyle('top', null);\r\n\t\t\tc.applyStyle('bottom', null);\r\n\t\t\tc.applyStyle('left', null);\r\n\t\t\tc.applyStyle('width', null);\r\n\t\t}\r\n\t\tArranger.prototype.destroy.apply(this, arguments);\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/GridArranger~GridArranger} kind.\r\n* @module layout/GridArranger\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tArranger = require('./Arranger');\r\n\r\n/**\r\n* {@link module:layout/GridArranger~GridArranger} is a\r\n* {@link module:layout/Arranger~Arranger} that arranges controls in a grid. The\r\n* active control is positioned at the top-left of the grid and the other\r\n* controls are laid out from left to right and then from top to bottom.\r\n*\r\n* Transitions between arrangements are handled by moving the active control to\r\n* the end of the grid and shifting the other controls\tto the left, or by moving\r\n* it up to the previous row, to fill the space.\r\n*\r\n* For more information, see the documentation on\r\n* [Arrangers]{@linkplain $dev-guide/building-apps/layout/arrangers.html} in the\r\n* Enyo Developer Guide.\r\n* @class GridArranger\r\n* @extends module:layout/Arranger~Arranger\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:layout/GridArranger~GridArranger.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.GridArranger',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Arranger,\r\n\r\n\t/**\r\n\t* @see {@link module:layout/Arranger~Arranger#incrementalPoints}\r\n\t* @private\r\n\t*/\r\n\tincrementalPoints: true,\r\n\r\n\t/**\r\n\t * The column width in pixels.\r\n\t *\r\n\t * @type {Number}\r\n\t * @default 100\r\n\t * @public\r\n\t */\r\n\tcolWidth: 100,\r\n\r\n\t/**\r\n\t * The column height in pixels.\r\n\t *\r\n\t * @type {Number}\r\n\t * @default 100\r\n\t * @public\r\n\t */\r\n\tcolHeight: 100,\r\n\r\n\t/**\r\n\t* Sizes each panel to be [colWidth]{@link module:layout/GridArranger~GridArranger#colWidth} pixels wide\r\n\t* and [colHeight]{@link module:layout/GridArranger~GridArranger#colHeight} pixels high.\r\n\t*\r\n\t* @see {@link module:layout/Arranger~Arranger#size}\r\n\t* @protected\r\n\t*/\r\n\tsize: function () {\r\n\t\tvar c$ = this.container.getPanels();\r\n\t\tvar w=this.colWidth, h=this.colHeight;\r\n\t\tfor (var i=0, c; (c=c$[i]); i++) {\r\n\t\t\tc.setBounds({width: w, height: h});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Calculates the number of columns based on the container's width and\r\n\t* [colWidth]{@link module:layout/GridArranger~GridArranger#colWidth}. Each row is positioned\r\n\t* starting at the top-left of the container.\r\n\t*\r\n\t* @see {@link module:layout/Arranger~Arranger#arrange}\r\n\t* @protected\r\n\t*/\r\n\tarrange: function (controls, arrangement) {\r\n\t\tvar w=this.colWidth, h=this.colHeight;\r\n\t\tvar cols = Math.max(1, Math.floor(this.containerBounds.width / w));\r\n\t\tvar c;\r\n\t\tfor (var y=0, i=0; i<controls.length; y++) {\r\n\t\t\tfor (var x=0; (x<cols) && (c=controls[i]); x++, i++) {\r\n\t\t\t\tthis.arrangeControl(c, {left: w*x, top: h*y});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* If the control is moving between rows, adjusts its opacity during the transition.\r\n\t*\r\n\t* @see {@link module:layout/Arranger~Arranger#flowControl}\r\n\t* @method\r\n\t* @protected\r\n\t*/\r\n\tflowControl: kind.inherit(function (sup) {\r\n\t\treturn function (inControl, inA) {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tArranger.opacifyControl(inControl, inA.top % this.colHeight !== 0 ? 0.25 : 1);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @see {@link module:layout/Arranger~Arranger#calcArrangementDifference}\r\n\t* @protected\r\n\t*/\r\n\tcalcArrangementDifference: function (inI0, inA0, inI1, inA1) {\r\n\t\treturn this.colWidth;\r\n\t},\r\n\r\n\t/**\r\n\t* Resets position of panels.\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tvar c$ = this.container.getPanels();\r\n\t\t\tfor (var i=0, c; (c=c$[i]); i++) {\r\n\t\t\t\tArranger.positionControl(c, {left: null, top: null});\r\n\t\t\t\tc.applyStyle('left', null);\r\n\t\t\t\tc.applyStyle('top', null);\r\n\t\t\t\tc.applyStyle('height', null);\r\n\t\t\t\tc.applyStyle('width', null);\r\n\t\t\t}\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t})\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/LeftRightArranger~LeftRightArranger} kind.\r\n* @module layout/LeftRightArranger\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tArranger = require('./Arranger');\r\n\r\n/**\r\n* {@link module:layout/LeftRightArranger~LeftRightArranger} is a\r\n* {@link module:layout/Arranger~Arranger} that displays the active control and\r\n* some of the previous and next controls. The active control is centered\r\n* horizontally in the container, and the previous and next controls are laid out\r\n* to the left and right, respectively.\r\n*\r\n* Transitions between arrangements are handled by sliding the new control in\r\n* from the right and sliding the active control out to the left.\r\n*\r\n* For more information, see the documentation on\r\n* [Arrangers]{@linkplain $dev-guide/building-apps/layout/arrangers.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class LeftRightArranger\r\n* @extends module:layout/Arranger~Arranger\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:layout/LeftRightArranger~LeftRightArranger.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.LeftRightArranger',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Arranger,\r\n\r\n\t/**\r\n\t * The margin width (i.e., how much of the previous and next controls\r\n\t * are visible) in pixels.\r\n\t *\r\n\t * Note that this is imported from the container at construction time.\r\n\t *\r\n\t * @type {Number}\r\n\t * @default 40\r\n\t * @public\r\n\t */\r\n\tmargin: 40,\r\n\r\n\t/**\r\n\t * The axis along which the panels will animate.\r\n\t *\r\n\t * @type {String}\r\n\t * @readOnly\r\n\t * @default 'width'\r\n\t * @protected\r\n\t */\r\n\taxisSize: 'width',\r\n\r\n\t/**\r\n\t * The axis along which the panels will **not** animate.\r\n\t *\r\n\t * @type {String}\r\n\t * @readOnly\r\n\t * @default 'height'\r\n\t * @protected\r\n\t */\r\n\toffAxisSize: 'height',\r\n\r\n\t/**\r\n\t * The axis position at which the panel will animate.\r\n\t *\r\n\t * @type {String}\r\n\t * @readOnly\r\n\t * @default 'left'\r\n\t * @protected\r\n\t */\r\n\taxisPosition: 'left',\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tconstructor: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.margin = this.container.margin != null ? this.container.margin : this.margin;\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Sizes the panels such that they fill [offAxisSize]{@link module:layout/LeftRightArranger~LeftRightArranger#offAxisSize}\r\n\t* and yield [margin]{@link module:layout/LeftRightArranger~LeftRightArranger#margin} pixels on each side of\r\n\t* [axisSize]{@link module:layout/LeftRightArranger~LeftRightArranger#axisSize}.\r\n\t*\r\n\t* @see {@link module:layout/Arranger~Arranger#size}\r\n\t* @protected\r\n\t*/\r\n\tsize: function () {\r\n\t\tvar c$ = this.container.getPanels();\r\n\t\tvar port = this.containerBounds[this.axisSize];\r\n\t\tvar box = port - this.margin -this.margin;\r\n\t\tfor (var i=0, b, c; (c=c$[i]); i++) {\r\n\t\t\tb = {};\r\n\t\t\tb[this.axisSize] = box;\r\n\t\t\tb[this.offAxisSize] = '100%';\r\n\t\t\tc.setBounds(b);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* To prevent a panel that is switching sides (to maintain the balance) from overlapping\r\n\t* the active panel during the animation, updates the `z-index` of the switching panel\r\n\t* to ensure that it stays behind the other panels.\r\n\t*\r\n\t* @todo Could use some optimization in its `for` loop (e.g. .length lookup and calc)\r\n\t* @see {@link module:layout/Arranger~Arranger#start}\r\n\t* @method\r\n\t* @protected\r\n\t*/\r\n\tstart: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\r\n\t\t\tvar s = this.container.fromIndex;\r\n\t\t\tvar f = this.container.toIndex;\r\n\t\t\tvar c$ = this.getOrderedControls(f);\r\n\t\t\tvar o = Math.floor(c$.length/2);\r\n\r\n\t\t\tfor (var i=0, c; (c=c$[i]); i++) {\r\n\t\t\t\tif (s > f){\r\n\t\t\t\t\tif (i == (c$.length - o)){\r\n\t\t\t\t\t\tc.applyStyle('z-index', 0);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tc.applyStyle('z-index', 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (i == (c$.length-1 - o)){\r\n\t\t\t\t\t\tc.applyStyle('z-index', 0);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tc.applyStyle('z-index', 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Balances the panels laid out to each side of the active panel\r\n\t* such that, for a set of `n` panels, `floor(n/2)` are before and `ceil(n/2)` are after\r\n\t* the active panel.\r\n\t*\r\n\t* @protected\r\n\t*/\r\n\tarrange: function (controls, arrangement) {\r\n\t\tvar i,c,b;\r\n\t\tif (this.container.getPanels().length==1){\r\n\t\t\tb = {};\r\n\t\t\tb[this.axisPosition] = this.margin;\r\n\t\t\tthis.arrangeControl(this.container.getPanels()[0], b);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar o = Math.floor(this.container.getPanels().length/2);\r\n\t\tvar c$ = this.getOrderedControls(Math.floor(arrangement)-o);\r\n\t\tvar box = this.containerBounds[this.axisSize] - this.margin - this.margin;\r\n\t\tvar e = this.margin - box * o;\r\n\t\tfor (i=0; (c=c$[i]); i++) {\r\n\t\t\tb = {};\r\n\t\t\tb[this.axisPosition] = e;\r\n\t\t\tthis.arrangeControl(c, b);\r\n\t\t\te += box;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Calculates the difference along the\r\n\t* [axisPosition]{@link module:layout/LeftRightArranger~LeftRightArranger#axisPosition} (e.g., `'left'`).\r\n\t*\r\n\t* @param {Number} inI0 - The initial layout setting.\r\n\t* @param {Object} inA0 - The initial arrangement.\r\n\t* @param {Number} inI1 - The target layout setting.\r\n\t* @param {Object} inA1 - The target arrangement.\r\n\t* @protected\r\n\t*/\r\n\tcalcArrangementDifference: function (inI0, inA0, inI1, inA1) {\r\n\t\tif (this.container.getPanels().length==1){\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tvar i = Math.abs(inI0 % this.c$.length);\r\n\t\t//enyo.log(inI0, inI1);\r\n\t\treturn inA0[i][this.axisPosition] - inA1[i][this.axisPosition];\r\n\t},\r\n\r\n\t/**\r\n\t* Resets the positioning and opacity of panels.\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tvar c$ = this.container.getPanels();\r\n\t\t\tfor (var i=0, c; (c=c$[i]); i++) {\r\n\t\t\t\tArranger.positionControl(c, {left: null, top: null});\r\n\t\t\t\tArranger.opacifyControl(c, 1);\r\n\t\t\t\tc.applyStyle('left', null);\r\n\t\t\t\tc.applyStyle('top', null);\r\n\t\t\t\tc.applyStyle('height', null);\r\n\t\t\t\tc.applyStyle('width', null);\r\n\t\t\t}\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t})\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/SpiralArranger~SpiralArranger} kind.\r\n* @module layout/SpiralArranger\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tArranger = require('./Arranger');\r\n\r\n/**\r\n* {@link module:layout/SpiralArranger~SpiralArranger} is a\r\n* {@link module:layout/Arranger~Arranger} that arranges controls in a spiral.\r\n* The active control is positioned on top and the other controls are laid out in\r\n* a spiral pattern below.\r\n*\r\n* Transitions between arrangements are handled by rotating the new control up\r\n* from below and rotating the active control down to the end of the spiral.\r\n*\r\n* For more information, see the documentation on\r\n* [Arrangers]{@linkplain $dev-guide/building-apps/layout/arrangers.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class SpiralArranger\r\n* @extends module:layout/Arranger~Arranger\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:layout/SpiralArranger~SpiralArranger.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.SpiralArranger',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Arranger,\r\n\r\n\t/**\r\n\t* @see {@link module:layout/Arranger~Arranger#incrementalPoints}\r\n\t* @private\r\n\t*/\r\n\tincrementalPoints: true,\r\n\r\n\t/**\r\n\t* The amount of space between successive controls\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tinc: 20,\r\n\r\n\t/**\r\n\t* Sizes each panel to one third of the container.\r\n\t*\r\n\t* @see  {@link module:layout/Arranger~Arranger#size}\r\n\t* @protected\r\n\t*/\r\n\tsize: function () {\r\n\t\tvar c$ = this.container.getPanels();\r\n\t\tvar b = this.containerBounds;\r\n\t\tvar w = this.controlWidth = b.width/3;\r\n\t\tvar h = this.controlHeight = b.height/3;\r\n\t\tfor (var i=0, c; (c=c$[i]); i++) {\r\n\t\t\tc.setBounds({width: w, height: h});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Arranges panels in a spiral with the active panel at the center.\r\n\t*\r\n\t* @see {@link module:layout/Arranger~Arranger#arrange}\r\n\t* @protected\r\n\t*/\r\n\tarrange: function (controls, arrangement) {\r\n\t\tvar s = this.inc;\r\n\t\tfor (var i=0, l=controls.length, c; (c=controls[i]); i++) {\r\n\t\t\tvar x = Math.cos(i/l * 2*Math.PI) * i * s + this.controlWidth;\r\n\t\t\tvar y = Math.sin(i/l * 2*Math.PI) * i * s + this.controlHeight;\r\n\t\t\tthis.arrangeControl(c, {left: x, top: y});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Applies descending `z-index` values to each panel, starting with the active panel.\r\n\t*\r\n\t* @see {@link module:layout/Arranger~Arranger#start}\r\n\t* @method\r\n\t* @protected\r\n\t*/\r\n\tstart: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tvar c$ = this.getOrderedControls(this.container.toIndex);\r\n\t\t\tfor (var i=0, c; (c=c$[i]); i++) {\r\n\t\t\t\tc.applyStyle('z-index', c$.length - i);\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @see {@link module:layout/Arranger~Arranger#calcArrangementDifference}\r\n\t* @protected\r\n\t*/\r\n\tcalcArrangementDifference: function (inI0, inA0, inI1, inA1) {\r\n\t\treturn this.controlWidth;\r\n\t},\r\n\r\n\t/**\r\n\t* Resets position and z-index of all panels.\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tvar c$ = this.container.getPanels();\r\n\t\t\tfor (var i=0, c; (c=c$[i]); i++) {\r\n\t\t\t\tc.applyStyle('z-index', null);\r\n\t\t\t\tArranger.positionControl(c, {left: null, top: null});\r\n\t\t\t\tc.applyStyle('left', null);\r\n\t\t\t\tc.applyStyle('top', null);\r\n\t\t\t\tc.applyStyle('height', null);\r\n\t\t\t\tc.applyStyle('width', null);\r\n\t\t\t}\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t})\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/CardSlideInArranger~CardSlideInArranger} kind.\r\n* @module layout/CardSlideInArranger\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tArranger = require('./Arranger'),\r\n\tCardArranger = require('./CardArranger');\r\n\r\n/**\r\n* {@link module:layout/CardSlideInArranger~CardSlideInArranger} is a\r\n* {@link module:layout/Arranger~Arranger} that displays only one active control.\r\n* The non-active controls are hidden with `setShowing(false)`. Transitions\r\n* between arrangements are handled by sliding the new control\tover the current\r\n* one.\r\n*\r\n* Note that CardSlideInArranger always slides controls in from the right. If\r\n* you want an arranger that slides to the right and left, try\r\n* {@link module:layout/LeftRightArranger~LeftRightArranger}.\r\n*\r\n* For more information, see the documentation on\r\n* [Arrangers]{@linkplain $dev-guide/building-apps/layout/arrangers.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class CardSlideInArranger\r\n* @extends module:layout/CardArranger~CardArranger\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:layout/CardSlideInArranger~CardSlideInArranger.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.CardSlideInArranger',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: CardArranger,\r\n\r\n\t/**\r\n\t* Shows the active panel at the start of transition. Also triggers a resize on\r\n\t* the active panel if it wasn't previously showing.\r\n\t*\r\n\t* @todo Seems like poor variable reuse of `i`\r\n\t* @todo Should inherit from super and omit the `for` block\r\n\t* @see {@link module:layout/Arranger~Arranger#start}\r\n\t* @protected\r\n\t*/\r\n\tstart: function () {\r\n\t\tvar c$ = this.container.getPanels();\r\n\t\tfor (var i=0, c; (c=c$[i]); i++) {\r\n\t\t\tvar wasShowing=c.showing;\r\n\t\t\tc.setShowing(i == this.container.fromIndex || i == (this.container.toIndex));\r\n\t\t\tif (c.showing && !wasShowing) {\r\n\t\t\t\tc.resize();\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar l = this.container.fromIndex;\r\n\t\ti = this.container.toIndex;\r\n\t\tthis.container.transitionPoints = [\r\n\t\t\ti + '.' + l + '.s',\r\n\t\t\ti + '.' + l + '.f'\r\n\t\t];\r\n\t},\r\n\r\n\t/**\r\n\t* @todo  This method is an exact copy of CardArranger. Since it's calling the super,\r\n\t* \tthe work is being done twice, so this method should be removed.\r\n\t* @see {@link module:layout/Arranger~Arranger#finish}\r\n\t* @method\r\n\t* @protected\r\n\t*/\r\n\tfinish: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tvar c$ = this.container.getPanels();\r\n\t\t\tfor (var i=0, c; (c=c$[i]); i++) {\r\n\t\t\t\tc.setShowing(i == this.container.toIndex);\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Parses the transition point value to position the panels to slide in from the right.\r\n\t*\r\n\t* @see {@link module:layout/Arranger~Arranger#arrange}\r\n\t* @protected\r\n\t*/\r\n\tarrange: function (controls, arrangement) {\r\n\t\tvar p = arrangement.split('.'),\r\n\t\t\tf = p[0],\r\n\t\t\ts = p[1],\r\n\t\t\tstarting = (p[2] == 's'),\r\n\t\t\tb = this.containerBounds.width;\r\n\r\n\t\tfor (var i=0, c$=this.container.getPanels(), c, v; (c=c$[i]); i++) {\r\n\t\t\tv = b;\r\n\t\t\tif (s == i) {\r\n\t\t\t\tv = starting ? 0 : -b;\r\n\t\t\t}\r\n\t\t\tif (f == i) {\r\n\t\t\t\tv = starting ? b : 0;\r\n\t\t\t}\r\n\t\t\tif (s == i && s == f) {\r\n\t\t\t\tv = 0;\r\n\t\t\t}\r\n\t\t\tthis.arrangeControl(c, {left: v});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Resets the `left` position of all panels.\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tvar c$ = this.container.getPanels();\r\n\t\t\tfor (var i=0, c; (c=c$[i]); i++) {\r\n\t\t\t\tArranger.positionControl(c, {left: null});\r\n\t\t\t}\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t})\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/CollapsingArranger~CollapsingArranger} kind.\r\n* @module layout/CollapsingArranger\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tCarouselArranger = require('./CarouselArranger');\r\n\r\n/**\r\n* {@link module:layout/CollapsingArranger~CollapsingArranger} is a\r\n* {@link module:layout/Arranger~Arranger} that displays the active control,\r\n* along with some number of inactive controls to fill the available space. The\r\n* active control is positioned on the left side of the container and the rest of\r\n* the views are laid out to the right. The last control, if visible, will expand\r\n* to fill whatever space is not taken up by the previous controls.\r\n*\r\n* For best results with CollapsingArranger, you should set a minimum width\r\n* for each control via a CSS style, e.g., `min-width: 25%` or\r\n* `min-width: 250px`.\r\n*\r\n* Transitions between arrangements are handled by sliding the new control\tin\r\n* from the right and collapsing the old control to the left.\r\n*\r\n* For more information, see the documentation on\r\n* [Arrangers]{@linkplain $dev-guide/building-apps/layout/arrangers.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class CollapsingArranger\r\n* @extends module:enyo/CarouselArranger~CarouselArranger\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:layout/CollapsingArranger~CollapsingArranger.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.CollapsingArranger',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: CarouselArranger,\r\n\r\n\t/**\r\n\t* The distance (in pixels) that each panel should be offset from the left\r\n\t* when it is selected. This allows controls on the underlying panel to the\r\n\t* left of the selected one to be partially revealed.\r\n\t*\r\n\t* Note that this is imported from the container at construction time.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tpeekWidth: 0,\r\n\r\n\t/**\r\n\t* If a panel is added or removed after construction, ensures that any control\r\n\t* marked to fill remaining space (via its `_fit` member) is reset.\r\n\t*\r\n\t* @see {@link module:layout/Arranger~Arranger#size}\r\n\t* @method\r\n\t* @protected\r\n\t*/\r\n\tsize: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tthis.clearLastSize();\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Resets any panel marked to fill remaining space that isn't, in fact, the last panel.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tclearLastSize: function () {\r\n\t\tfor (var i=0, c$=this.container.getPanels(), c; (c=c$[i]); i++) {\r\n\t\t\tif (c._fit && i != c$.length-1) {\r\n\t\t\t\tc.applyStyle('width', null);\r\n\t\t\t\tc._fit = null;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tconstructor: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.peekWidth = this.container.peekWidth != null ? this.container.peekWidth : this.peekWidth;\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Arranges controls from left to right starting with first panel. If\r\n\t* [peekWidth]{@link module:layout/CollapsingArranger~CollapsingArranger#peekWidth} is set, any visible control\r\n\t* whose index is less than `arrangement` (the active panel's index) will be revealed\r\n\t* by `peekWidth` pixels.\r\n\t*\r\n\t* @see {@link module:layout/Arranger~Arranger#arrange}\r\n\t* @protected\r\n\t*/\r\n\tarrange: function (controls, arrangement) {\r\n\t\tvar c$ = this.container.getPanels();\r\n\t\tfor (var i=0, e=this.containerPadding.left, c, n=0; (c=c$[i]); i++) {\r\n\t\t\tif(c.getShowing()){\r\n\t\t\t\tthis.arrangeControl(c, {left: e + n * this.peekWidth});\r\n\t\t\t\tif (i >= arrangement) {\r\n\t\t\t\t\te += c.width + c.marginWidth - this.peekWidth;\r\n\t\t\t\t}\r\n\t\t\t\tn++;\r\n\t\t\t} else {\r\n\t\t\t\tthis.arrangeControl(c, {left: e});\r\n\t\t\t\tif (i >= arrangement) {\r\n\t\t\t\t\te += c.width + c.marginWidth;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// FIXME: overdragging-ish\r\n\t\t\tif (i == c$.length - 1 && arrangement < 0) {\r\n\t\t\t\tthis.arrangeControl(c, {left: e - arrangement});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Calculates the change in `left` position of the last panel between the two\r\n\t* arrangements `a0` and `a1`.\r\n\t*\r\n\t* @see {@link module:layout/Arranger~Arranger#calcArrangementDifference}\r\n\t* @private\r\n\t*/\r\n\tcalcArrangementDifference: function (i0, a0, i1, a1) {\r\n\t\tvar i = this.container.getPanels().length-1;\r\n\t\treturn Math.abs(a1[i].left - a0[i].left);\r\n\t},\r\n\r\n\t/**\r\n\t* If the container's `realtimeFit` property is `true`, resizes the last panel to\r\n\t* fill the space. This ensures that when dragging or animating to the last index,\r\n\t* there is never blank space to the right of the last panel. If `realtimeFit` is\r\n\t* falsy, the last panel is not resized until the\r\n\t* [finish()]{@link module:layout/CollapsingArranger~CollapsingArranger#finish} method is called.\r\n\t*\r\n\t* @see {@link module:layout/Arranger~Arranger#flowControls}\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tflowControl: kind.inherit(function (sup) {\r\n\t\treturn function (inControl, inA) {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tif (this.container.realtimeFit) {\r\n\t\t\t\tvar c$ = this.container.getPanels();\r\n\t\t\t\tvar l = c$.length-1;\r\n\t\t\t\tvar last = c$[l];\r\n\t\t\t\tif (inControl == last) {\r\n\t\t\t\t\tthis.fitControl(inControl, inA.left);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Ensures that the last panel fills the remaining space when a transition completes.\r\n\t*\r\n\t* @see {@link module:layout/Arranger~Arranger#finish}\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tfinish: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tif (!this.container.realtimeFit && this.containerBounds) {\r\n\t\t\t\tvar c$ = this.container.getPanels();\r\n\t\t\t\tvar a$ = this.container.arrangement;\r\n\t\t\t\tvar l = c$.length-1;\r\n\t\t\t\tvar c = c$[l];\r\n\t\t\t\tthis.fitControl(c, a$[l].left);\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Resizes the given `control` to match the width of the container minus the\r\n\t* given `offset`.\r\n\t*\r\n\t* @param {module:enyo/Control~Control} control - The control that should fit in the remaining space.\r\n\t* @param {Number} offset        - The left offset of the control with respect to the\r\n\t* container.\r\n\t* @private\r\n\t*/\r\n\tfitControl: function (control, offset) {\r\n\t\tcontrol._fit = true;\r\n\t\tcontrol.applyStyle('width', (this.containerBounds.width - offset) + 'px');\r\n\t\tcontrol.resize();\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/TopBottomArranger~TopBottomArranger} kind.\r\n* @module layout/TopBottomArranger\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tLeftRightArranger = require('./LeftRightArranger');\r\n\r\n/**\r\n* {@link module:layout/TopBottomArranger~TopBottomArranger} is a\r\n* {@link module:layout/Arranger~Arranger} that displays the active control and\r\n* some of the previous and next controls. The active control is centered\r\n* vertically in the container, and the previous and next controls are laid out\r\n* above and below, respectively.\r\n*\r\n* Transitions between arrangements are handled by sliding the new control in\r\n* from the bottom and sliding the active control out the top.\r\n*\r\n* For more information, see the documentation on\r\n* [Arrangers]{@linkplain $dev-guide/building-apps/layout/arrangers.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class TopBottomArranger\r\n* @extends module:layout/LeftRightArranger~LeftRightArranger\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:layout/TopBottomArranger~TopBottomArranger.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.TopBottomArranger',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: LeftRightArranger,\r\n\r\n\t/**\r\n\t* @see {@link module:layout/Arranger~Arranger#dragProp}\r\n\t* @private\r\n\t*/\r\n\tdragProp: 'ddy',\r\n\r\n\t/**\r\n\t* @see {@link module:layout/Arranger~Arranger#dragDirectionProp}\r\n\t* @private\r\n\t*/\r\n\tdragDirectionProp: 'yDirection',\r\n\r\n\t/**\r\n\t* @see {@link module:layout/Arranger~Arranger#canDragProp}\r\n\t* @private\r\n\t*/\r\n\tcanDragProp: 'vertical',\r\n\r\n\t/**\r\n\t* @see {@link module:layout/LeftRightArranger~LeftRightArranger#axisSize}\r\n\t* @protected\r\n\t*/\r\n\taxisSize: 'height',\r\n\r\n\t/**\r\n\t* @see {@link module:layout/LeftRightArranger~LeftRightArranger#offAxisSize}\r\n\t* @protected\r\n\t*/\r\n\toffAxisSize: 'width',\r\n\r\n\t/**\r\n\t* @see {@link module:layout/LeftRightArranger~LeftRightArranger#axisPosition}\r\n\t* @protected\r\n\t*/\r\n\taxisPosition: 'top'\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/Panels~Panels} kind.\r\n* @module layout/Panels\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdispatcher = require('enyo/dispatcher'),\r\n\tdom = require('enyo/dom'),\r\n\tplatform = require('enyo/platform'),\r\n\tutils = require('enyo/utils'),\r\n\tAnimator = require('enyo/Animator');\r\n\r\nvar\r\n\tCardArranger = require('../CardArranger');\r\n\r\n/**\r\n* Fires at the start of a panel transition, when [setIndex()]{@link module:layout/Panels~Panels#setIndex}\r\n* is called, and also during dragging.\r\n*\r\n* @event module:layout/Panels~Panels#onTransitionStart\r\n* @type {Object}\r\n* @property {Number} fromIndex - The index of the old panel.\r\n* @property {Number} toIndex   - The index of the new panel.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires at the end of a panel transition, when [setIndex()]{@link module:layout/Panels~Panels#setIndex}\r\n* is called, and also during dragging.\r\n*\r\n* @event module:layout/Panels~Panels#onTransitionFinish\r\n* @type {Object}\r\n* @property {Number} fromIndex - The index of the old panel.\r\n* @property {Number} toIndex   - The index of the new panel.\r\n* @public\r\n*/\r\n\r\n/**\r\n* The {@link module:layout/Panels~Panels} kind is designed to satisfy a variety of common use cases\r\n* for application layout. Using `Panels`, controls may be arranged as (among\r\n* other things) a carousel, a set of collapsing panels, a card stack that fades\r\n* between panels, or a grid.\r\n*\r\n* Any Enyo control may be placed inside a `Panels`, but by convention we\r\n* refer to each of these controls as a \"panel\". From the set of panels in a\r\n* `Panels`, one is considered to be active. The active panel is set by index\r\n* using the [setIndex()]{@link module:layout/Panels~Panels#setIndex} method. The actual layout of\r\n* the panels typically changes each time the active panel is set, such that the new\r\n* active panel has the most prominent position.\r\n*\r\n* For more information, see the documentation on\r\n* [Panels]{@linkplain $dev-guide/building-apps/layout/panels.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class Panels\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nvar Panels = module.exports = kind(\r\n\t/** @lends module:layout/Panels~Panels.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.Panels',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'enyo-panels',\r\n\r\n\t/**\r\n\t* @lends module:layout/Panels~Panels.prototype\r\n\t* @private\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* The index of the active panel. The layout of panels is controlled by the\r\n\t\t* [layoutKind]{@link module:layout/Panels~Panels#layoutKind}, but as a rule, the active panel\r\n\t\t* is displayed in the most prominent position. For example, in the (default)\r\n\t\t* {@link module:layout/CardArranger~CardArranger} layout, the active panel is shown and the other\r\n\t\t* panels are hidden.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default  0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tindex: 0,\r\n\r\n\t\t/**\r\n\t\t* Indicates whether the user may drag between panels.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default  true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdraggable: true,\r\n\r\n\t\t/**\r\n\t\t* Indicates whether the panels animate when transitioning, e.g., when\r\n\t\t* [setIndex()]{@link module:layout/Panels~Panels#setIndex} is called.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default  true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tanimate: true,\r\n\r\n\t\t/**\r\n\t\t* Indicates whether panels \"wrap around\" when moving past the end.\r\n\t\t* The actual effect depends upon the arranger in use.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default  false\r\n\t\t* @public\r\n\t\t*/\r\n\t\twrap: false,\r\n\r\n\t\t/**\r\n\t\t* The arranger kind to be used for dynamic layout.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default  'CardArranger'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tarrangerKind: CardArranger,\r\n\r\n\t\t/**\r\n\t\t* By default, each panel will be sized to fit the Panels' width when the\r\n\t\t* screen size is sufficiently narrow (less than 800px). Set to `false` to\r\n\t\t* avoid this behavior.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default  true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tnarrowFit: true\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonTransitionStart: '',\r\n\t\tonTransitionFinish: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tondragstart: 'dragstart',\r\n\t\tondrag: 'drag',\r\n\t\tondragfinish: 'dragfinish',\r\n\t\tonscroll: 'domScroll'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttools: [\r\n\t\t{kind: Animator, onStep: 'step', onEnd: 'animationEnded'}\r\n\t],\r\n\r\n\t/**\r\n\t* Tracks completion percentage for a transition between two panels.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tfraction: 0,\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tthis.transitionPoints = [];\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.arrangerKindChanged();\r\n\t\t\tthis.narrowFitChanged();\r\n\t\t\tthis.indexChanged();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\trendered: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tdispatcher.makeBubble(this, 'scroll');\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdomScroll: function (sender, event) {\r\n\t\tif (this.hasNode()) {\r\n\t\t\tif (this.node.scrollLeft > 0) {\r\n\t\t\t\t// Reset scrollLeft position\r\n\t\t\t\tthis.node.scrollLeft = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tinitComponents: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tthis.createChrome(this.tools);\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tarrangerKindChanged: function () {\r\n\t\tthis.setLayoutKind(this.arrangerKind);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnarrowFitChanged: function () {\r\n\t\tthis.addRemoveClass(Panels.getNarrowClass(), this.narrowFit);\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\t// When the entire panels is going away, take note so we don't try and do single-panel\r\n\t\t\t// remove logic such as changing the index and reflowing when each panel is destroyed\r\n\t\t\tthis.destroying = true;\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Adjusts the index if the removed control is the active panel and reflows the layout.\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tremoveControl: kind.inherit(function (sup) {\r\n\t\treturn function (control) {\r\n\t\t\t// Skip extra work during panel destruction.\r\n\t\t\tif (this.destroying) {\r\n\t\t\t\treturn sup.apply(this, arguments);\r\n\t\t\t}\r\n\t\t\t// adjust index if the current panel is being removed\r\n\t\t\t// so it's either the previous panel or the first one.\r\n\t\t\tvar newIndex = -1;\r\n\t\t\tvar controlIndex = utils.indexOf(control, this.controls);\r\n\t\t\tif (controlIndex === this.index) {\r\n\t\t\t\tnewIndex = Math.max(controlIndex - 1, 0);\r\n\t\t\t}\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tif (newIndex !== -1 && this.controls.length > 0) {\r\n\t\t\t\tthis.setIndex(newIndex);\r\n\t\t\t\tthis.flow();\r\n\t\t\t\tthis.reflow();\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Designed to be overridden in kinds derived from Panels that have\r\n\t* non-panel client controls.\r\n\t*\r\n\t* @return {Boolean} [description]\r\n\t* @protected\r\n\t* @todo  Assume that this should take a control as a parameter.\r\n\t*/\r\n\tisPanel: function () {\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tflow: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tthis.arrangements = [];\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\treflow: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tthis.arrangements = [];\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.refresh();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Returns the array of contained panels. Subclasses may override this if they\r\n\t* don't want the arranger to lay out all of their children.\r\n\t*\r\n\t* @return {module:enyo/Control~Control[]} - The array of contained panels.\r\n\t*/\r\n\tgetPanels: function () {\r\n\t\tvar p = this.controlParent || this;\r\n\t\treturn p.children;\r\n\t},\r\n\r\n\t/**\r\n\t* Returns a reference to the active panel--i.e., the panel at the specified index.\r\n\t*\r\n\t* @return {module:enyo/Control~Control} - The active panel.\r\n\t*/\r\n\tgetActive: function () {\r\n\t\tvar p$ = this.getPanels();\r\n\t\t//Constrain the index within the array of panels, needed if wrapping is enabled\r\n\t\tvar index = this.index % p$.length;\r\n\t\tif (index < 0) {\r\n\t\t\tindex += p$.length;\r\n\t\t}\r\n\t\treturn p$[index];\r\n\t},\r\n\r\n\t/**\r\n\t* Returns a reference to the {@link module:enyo/Animator~Animator} instance used to\r\n\t* animate panel transitions. The Panels' animator may be used to set the\r\n\t* duration of panel transitions, e.g.:\r\n\t*\r\n\t* ```\r\n\t* this.getAnimator().setDuration(1000);\r\n\t* ```\r\n\t*\r\n\t* @return {module:enyo/Animator~Animator} - The {@link module:enyo/Animator~Animator} instance used to animate\r\n\t* panel transitions.\r\n\t* @public\r\n\t*/\r\n\tgetAnimator: function () {\r\n\t\treturn this.$.animator;\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the active panel to the panel specified by the given index.\r\n\t* Note that if the [animate]{@link module:layout/Panels~Panels#animate} property is set to\r\n\t* `true`, the active panel will animate into view.\r\n\t*\r\n\t* @param {Number} index - The index of the panel to activate.\r\n\t* @public\r\n\t*/\r\n\tsetIndex: function (index) {\r\n\t\t// override setIndex so that indexChanged is called\r\n\t\t// whether this.index has actually changed or not. Also, do\r\n\t\t// index clamping here.\r\n\t\tvar prevIndex = this.get('index'),\r\n\t\t\tnewIndex = this.clamp(index);\r\n\t\tthis.index = newIndex;\r\n\t\tthis.notifyObservers('index', prevIndex, newIndex);\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the active panel to the panel specified by the given index.\r\n\t* The transition to the next panel will be immediate and will not be animated,\r\n\t* regardless of the value of the [animate]{@link module:layout/Panels~Panels#animate} property.\r\n\t*\r\n\t* @param {Number} index - The index of the panel to activate.\r\n\t* @public\r\n\t*/\r\n\tsetIndexDirect: function (index) {\r\n\t\tif (this.animate) {\r\n\t\t\tthis.animate = false;\r\n\t\t\tthis.setIndex(index);\r\n\t\t\tthis.animate = true;\r\n\t\t} else {\r\n\t\t\tthis.setIndex(index);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Selects the named component owned by the Panels and returns its index.\r\n\t*\r\n\t* @param  {String} name - The name of the panel to activate.\r\n\t* @return {Number} The index of the newly activated panel.\r\n\t* @public\r\n\t*/\r\n\tselectPanelByName: function (name) {\r\n\t\tif (!name) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar idx = 0;\r\n\t\tvar panels = this.getPanels();\r\n\t\tvar len = panels.length;\r\n\t\tfor (; idx < len; ++idx) {\r\n\t\t\tif (name === panels[idx].name) {\r\n\t\t\t\tthis.setIndex(idx);\r\n\t\t\t\treturn idx;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Transitions to the previous panel--i.e., the panel whose index value is one\r\n\t* less than that of the current active panel.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tprevious: function () {\r\n\t\tvar prevIndex = this.index - 1;\r\n\t\tif (this.wrap && prevIndex < 0) {\r\n\t\t\tprevIndex = this.getPanels().length - 1;\r\n\t\t}\r\n\t\tthis.setIndex(prevIndex);\r\n\t},\r\n\r\n\t/**\r\n\t* Transitions to the next panel--i.e., the panel whose index value is one\r\n\t* greater than that of the current active panel.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tnext: function () {\r\n\t\tvar nextIndex = this.index+1;\r\n\t\tif (this.wrap && nextIndex >= this.getPanels().length) {\r\n\t\t\tnextIndex = 0;\r\n\t\t}\r\n\t\tthis.setIndex(nextIndex);\r\n\t},\r\n\r\n\t/**\r\n\t* Ensures that `value` references a valid panel, accounting for\r\n\t* [wrapping]{@link module:layout/Panels~Panels#wrap}.\r\n\t*\r\n\t* @param  {Number} value - The index of a panel.\r\n\t* @return {Number}       - The valid index of a panel.\r\n\t* @private\r\n\t*/\r\n\tclamp: function (value) {\r\n\t\tvar l = this.getPanels().length;\r\n\t\tif (this.wrap) {\r\n\t\t\t// FIXME: dragging makes assumptions about direction and from->start indexes.\r\n\t\t\t//return value < 0 ? l : (value > l ? 0 : value);\r\n\t\t\tvalue %= l;\r\n\t\t\treturn (value < 0) ? value + l : value;\r\n\t\t} else {\r\n\t\t\treturn Math.max(0, Math.min(value, l - 1));\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tindexChanged: function (old) {\r\n\t\tthis.lastIndex = old;\r\n\t\tif (!this.dragging && this.$.animator && this.hasNode()) {\r\n\t\t\tif (this.shouldAnimate()) {\r\n\t\t\t\t// If we're mid-transition, complete it and indicate we need to transition\r\n\t\t\t\tif (this.$.animator.isAnimating()) {\r\n\t\t\t\t\tthis.transitionOnComplete = true;\r\n\t\t\t\t\tthis.$.animator.complete();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.animateTransition();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.directTransition();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Returns `true` if the panels should animate in the transition from `fromIndex` to\r\n\t* `toIndex`. This can be overridden in a {@glossary subkind} for greater customization.\r\n\t*\r\n\t* @protected\r\n\t*/\r\n\tshouldAnimate: function () {\r\n\t\treturn this.animate;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstep: function (sender) {\r\n\t\tthis.fraction = sender.value;\r\n\t\tthis.stepTransition();\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tanimationEnded: function (sender, event) {\r\n\t\tthis.completed();\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcompleted: function () {\r\n\t\tthis.finishTransition();\r\n\r\n\t\t// Animator.onEnd fires asynchronously so we need an internal flag to indicate we need\r\n\t\t// to start the next transition when the previous completes\r\n\t\tif (this.transitionOnComplete) {\r\n\t\t\tthis.transitionOnComplete = false;\r\n\t\t\tthis.animateTransition();\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdragstart: function (sender, event) {\r\n\t\tif (this.draggable && this.layout && this.layout.canDragEvent(event)) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.dragstartTransition(event);\r\n\t\t\tthis.dragging = true;\r\n\t\t\tthis.$.animator.stop();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdrag: function (sender, event) {\r\n\t\tif (this.dragging) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.dragTransition(event);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdragfinish: function (sender, event) {\r\n\t\tif (this.dragging) {\r\n\t\t\tthis.dragging = false;\r\n\t\t\tevent.preventTap();\r\n\t\t\tthis.dragfinishTransition(event);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdragstartTransition: function (event) {\r\n\t\tif (!this.$.animator.isAnimating()) {\r\n\t\t\tvar f = this.fromIndex = this.index;\r\n\t\t\tthis.toIndex = f - (this.layout ? this.layout.calcDragDirection(event) : 0);\r\n\t\t} else {\r\n\t\t\tthis.verifyDragTransition(event);\r\n\t\t}\r\n\t\tthis.fromIndex = this.clamp(this.fromIndex);\r\n\t\tthis.toIndex = this.clamp(this.toIndex);\r\n\t\t//this.log(this.fromIndex, this.toIndex);\r\n\t\tthis.fireTransitionStart();\r\n\t\tif (this.layout) {\r\n\t\t\tthis.layout.start();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdragTransition: function (event) {\r\n\t\t// note: for simplicity we choose to calculate the distance directly between\r\n\t\t// the first and last transition point.\r\n\t\tvar d = this.layout ? this.layout.calcDrag(event) : 0;\r\n\t\tvar t$ = this.transitionPoints, s = t$[0], f = t$[t$.length-1];\r\n\t\tvar as = this.fetchArrangement(s);\r\n\t\tvar af = this.fetchArrangement(f);\r\n\t\tvar dx = this.layout ? this.layout.drag(d, s, as, f, af) : 0;\r\n\t\tvar dragFail = d && !dx;\r\n\t\tif (dragFail) {\r\n\t\t\t//this.log(dx, s, as, f, af);\r\n\t\t}\r\n\t\tthis.fraction += dx;\r\n\t\tvar fr = this.fraction;\r\n\t\tif (fr > 1 || fr < 0 || dragFail) {\r\n\t\t\tif (fr > 0 || dragFail) {\r\n\t\t\t\tthis.dragfinishTransition(event);\r\n\t\t\t}\r\n\t\t\tthis.dragstartTransition(event);\r\n\t\t\tthis.fraction = 0;\r\n\t\t\t// FIXME: account for lost fraction\r\n\t\t\t//this.dragTransition(event);\r\n\t\t}\r\n\t\tthis.stepTransition();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdragfinishTransition: function (event) {\r\n\t\tthis.verifyDragTransition(event);\r\n\t\tthis.setIndex(this.toIndex);\r\n\t\t// note: if we're still dragging, then we're at a transition boundary\r\n\t\t// and should fire the finish event\r\n\t\tif (this.dragging) {\r\n\t\t\tthis.fireTransitionFinish();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tverifyDragTransition: function (event) {\r\n\t\tvar d = this.layout ? this.layout.calcDragDirection(event) : 0;\r\n\t\tvar f = Math.min(this.fromIndex, this.toIndex);\r\n\t\tvar t = Math.max(this.fromIndex, this.toIndex);\r\n\t\tif (d > 0) {\r\n\t\t\tvar s = f;\r\n\t\t\tf = t;\r\n\t\t\tt = s;\r\n\t\t}\r\n\t\tif (f != this.fromIndex) {\r\n\t\t\tthis.fraction = 1 - this.fraction;\r\n\t\t}\r\n\t\t//this.log('old', this.fromIndex, this.toIndex, 'new', f, t);\r\n\t\tthis.fromIndex = f;\r\n\t\tthis.toIndex = t;\r\n\t},\r\n\r\n\t/**\r\n\t* Resets the panels without sending any events.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\trefresh: function () {\r\n\t\tif (this.$.animator && this.$.animator.isAnimating()) {\r\n\t\t\tthis.$.animator.stop();\r\n\t\t}\r\n\t\tthis.setupTransition();\r\n\t\tthis.fraction = 1;\r\n\t\tthis.stepTransition();\r\n\t\tthis.transitioning = false;\r\n\t\tthis.completeTransition();\r\n\t\tthis.dragging = false;\r\n\t},\r\n\r\n\t/**\r\n\t* Transitions to the new index without animation\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdirectTransition: function () {\r\n\t\tthis.startTransition();\r\n\t\tthis.fraction = 1;\r\n\t\tthis.stepTransition();\r\n\t\tthis.finishTransition();\r\n\t},\r\n\r\n\t/**\r\n\t* Animates the transition to the new index\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tanimateTransition: function () {\r\n\t\tthis.startTransition();\r\n\t\tthis.$.animator.play({\r\n\t\t\tstartValue: this.fraction\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t* Starts the transition between two panels. if a transition is already in progress, this is\r\n\t* a no-op.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tstartTransition: function () {\r\n\t\tif (!this.transitioning) {\r\n\t\t\tthis.transitioning = true;\r\n\t\t\tthis.setupTransition();\r\n\t\t\tthis.fireTransitionStart();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Sets up transition state\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsetupTransition: function () {\r\n\t\tthis.fromIndex = this.fromIndex != null ? this.fromIndex : this.lastIndex || 0;\r\n\t\tthis.toIndex = this.toIndex != null ? this.toIndex : this.index;\r\n\t\tif (this.layout) {\r\n\t\t\tthis.layout.start();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Completes the transition between two panels.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tfinishTransition: function () {\r\n\t\tthis.transitioning = false;\r\n\t\tthis.completeTransition(true);\r\n\t},\r\n\r\n\t/**\r\n\t* Completes the transition by performing any tasks to be run when the transition ends,\r\n\t* including firing events and clean-up.\r\n\t*\r\n\t* @param {Boolean} [fire] - If `true`, will fire the {@link module:layout/Panels~Panels#onTransitionFinish}\r\n\t*\tevent if deemed necessary.\r\n\t* @private\r\n\t*/\r\n\tcompleteTransition: function (fire) {\r\n\t\tif (this.layout) {\r\n\t\t\tthis.layout.finish();\r\n\t\t}\r\n\r\n\t\tif (fire) {\r\n\t\t\tthis.fireTransitionFinish(true);\r\n\t\t} else {\r\n\t\t\tthis.clearTransitionData();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Clears transition-related data.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tclearTransitionData: function() {\r\n\t\tthis.transitionPoints = [];\r\n\t\tthis.fraction = 0;\r\n\t\tthis.fromIndex = this.toIndex = null;\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:layout/Panels~Panels#onTransitionStart\r\n\t* @private\r\n\t*/\r\n\tfireTransitionStart: function () {\r\n\t\tvar t = this.startTransitionInfo;\r\n\t\tif (this.hasNode() && (!t || (t.fromIndex != this.fromIndex || t.toIndex != this.toIndex))) {\r\n\t\t\tthis.startTransitionInfo = {fromIndex: this.fromIndex, toIndex: this.toIndex};\r\n\t\t\tthis.doTransitionStart(utils.clone(this.startTransitionInfo));\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:layout/Panels~Panels#onTransitionFinish\r\n\t* @param {Boolean} [clearData] - If `true`, {@link module:layout/Panels~Panels#clearTransitionData} will be\r\n\t*\tcalled after recording the values needed for the callback.\r\n\t* @private\r\n\t*/\r\n\tfireTransitionFinish: function (clearData) {\r\n\t\tvar t = this.finishTransitionInfo,\r\n\t\t\tfromIndex = t ? t.fromIndex : null,\r\n\t\t\ttoIndex = t ? t.toIndex : null;\r\n\t\tif (this.hasNode() && (!t || (fromIndex != this.fromIndex || toIndex != this.toIndex))) {\r\n\t\t\t\tif (this.transitionOnComplete) {\r\n\t\t\t\tthis.finishTransitionInfo = {fromIndex: toIndex, toIndex: this.lastIndex};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.finishTransitionInfo = {fromIndex: this.lastIndex, toIndex: this.index};\r\n\t\t\t\t}\r\n\t\t\tif (clearData) {\r\n\t\t\t\tthis.clearTransitionData();\r\n\t\t\t}\r\n\t\t\t\tthis.doTransitionFinish(utils.clone(this.finishTransitionInfo));\r\n\t\t} else if (clearData) {\r\n\t\t\tthis.clearTransitionData();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Interpolates between arrangements as needed.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tstepTransition: function () {\r\n\t\tif (this.hasNode()) {\r\n\t\t\t// select correct transition points and normalize fraction.\r\n\t\t\tvar t$ = this.transitionPoints;\r\n\t\t\tvar r = (this.fraction || 0) * (t$.length-1);\r\n\t\t\tvar i = Math.floor(r);\r\n\t\t\tr = r - i;\r\n\t\t\tvar s = t$[i], f = t$[i+1];\r\n\t\t\t// get arrangements and lerp between them\r\n\t\t\tvar s0 = this.fetchArrangement(s);\r\n\t\t\tvar s1 = this.fetchArrangement(f);\r\n\t\t\tthis.arrangement = s0 && s1 ? Panels.lerp(s0, s1, r) : (s0 || s1);\r\n\t\t\tif (this.arrangement && this.layout) {\r\n\t\t\t\tthis.layout.flowArrangement();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Fetches the arrangement at a specified index, initializing it if necessary.\r\n\t*\r\n\t* @param  {Number} index - The index of the desired arrangement from `transitionPoints`.\r\n\t* @return {Object} The desired arrangement object.\r\n\t* @private\r\n\t*/\r\n\tfetchArrangement: function (index) {\r\n\t\tif ((index != null) && !this.arrangements[index] && this.layout) {\r\n\t\t\tthis.layout._arrange(index);\r\n\t\t\tthis.arrangements[index] = this.readArrangement(this.getPanels());\r\n\t\t}\r\n\t\treturn this.arrangements[index];\r\n\t},\r\n\r\n\t/**\r\n\t* Iterates over `panels` and retrieves a copy of each panel's `_arranger`.\r\n\t*\r\n\t* @param  {module:enyo/Control~Control[]} panels - The array of panels.\r\n\t* @return {Object[]}              - The array of arrangement objects.\r\n\t*/\r\n\treadArrangement: function (panels) {\r\n\t\tvar r = [];\r\n\t\tfor (var i=0, c$=panels, c; (c=c$[i]); i++) {\r\n\t\t\tr.push(utils.clone(c._arranger));\r\n\t\t}\r\n\t\treturn r;\r\n\t},\r\n\r\n\t/**\r\n\t* @lends module:layout/Panels~Panels\r\n\t* @private\r\n\t*/\r\n\tstatics: {\r\n\t\t/**\r\n\t\t* Returns `true` for iOS and Android phone form factors, or when window width\r\n\t\t* is 800px or less. Approximates work done using media queries in `Panels.css`.\r\n\t\t*\r\n\t\t* @return {Boolean} `true` for narrow devices or viewports; otherwise, `false`.\r\n\t\t* @public\r\n\t\t*/\r\n\t\tisScreenNarrow: function () {\r\n\t\t\tif(Panels.isNarrowDevice()) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn dom.getWindowWidth() <= 800;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Returns the class name to apply for narrow fitting. See media queries\r\n\t\t* in `Panels.css`.\r\n\t\t*\r\n\t\t* @return {String} The CSS class name to apply.\r\n\t\t*/\r\n\t\tgetNarrowClass: function () {\r\n\t\t\tif(Panels.isNarrowDevice()) {\r\n\t\t\t\treturn 'enyo-panels-force-narrow';\r\n\t\t\t} else {\r\n\t\t\t\treturn 'enyo-panels-fit-narrow';\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Lerps between arrangements.\r\n\t\t*\r\n\t\t* @param  {Object[]} a0     - Array of current arrangement objects.\r\n\t\t* @param  {Object[]} a1     - Array of target arrangement object.\r\n\t\t* @param  {Number} fraction - The fraction (between 0 and 1) with which to lerp.\r\n\t\t* @return {Object[]}        - Array of arrangements that is `fraction` between\r\n\t\t* \t`a0` and `a1`.\r\n\t\t* @private\r\n\t\t*/\r\n\t\tlerp: function (a0, a1, fraction) {\r\n\t\t\tvar r = [];\r\n\t\t\tfor (var i=0, k$=utils.keys(a0), k; (k=k$[i]); i++) {\r\n\t\t\t\tr.push(this.lerpObject(a0[k], a1[k], fraction));\r\n\t\t\t}\r\n\t\t\treturn r;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Lerps between the values of arrangement objects.\r\n\t\t*\r\n\t\t* @param  {Object} a0       - The source arragement.\r\n\t\t* @param  {Object} a1       - The destination arragement.\r\n\t\t* @param  {Number} fraction - The fraction (between 0 and 1) with which to lerp.\r\n\t\t*\r\n\t\t* @return {Object}          - The lerped arrangement.\r\n\t\t* @private\r\n\t\t*/\r\n\t\tlerpObject: function (a0, a1, fraction) {\r\n\t\t\tvar b = utils.clone(a0), n, o;\r\n\t\t\t// a1 might be undefined when deleting panels\r\n\t\t\tif (a1) {\r\n\t\t\t\tfor (var i in a0) {\r\n\t\t\t\t\tn = a0[i];\r\n\t\t\t\t\to = a1[i];\r\n\t\t\t\t\tif (n != o) {\r\n\t\t\t\t\t\tb[i] = n - (n - o) * fraction;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn b;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Tests User Agent strings to identify narrow devices.\r\n\t\t*\r\n\t\t* @return {Boolean} `true` if the current device is a narrow device;\r\n\t\t* otherwise, `false`.\r\n\t\t*/\r\n\t\tisNarrowDevice: function () {\r\n\t\t\tvar ua = navigator.userAgent;\r\n\t\t\tswitch (platform.platformName) {\r\n\t\t\t\tcase 'ios':\r\n\t\t\t\t\treturn (/iP(?:hone|od;(?: U;)? CPU) OS (\\d+)/).test(ua);\r\n\t\t\t\tcase 'android':\r\n\t\t\t\t\treturn (/Mobile/).test(ua) && (platform.android > 2);\r\n\t\t\t\tcase 'androidChrome':\r\n\t\t\t\t\treturn (/Mobile/).test(ua);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/FittableLayout~FittableLayout}, {@link module:layout/FittableLayout~FittableColumnsLayout}\r\n* and {@link module:layout/FittableLayout~FittableRowsLayout} kinds.\r\n* @module layout/FittableLayout\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom'),\r\n\tControl = require('enyo/Control'),\r\n\tLayout = require('enyo/Layout');\r\n\r\nvar detector = document.createElement('div'),\r\n\tflexAvailable =\r\n\t\t(detector.style.flexBasis !== undefined) ||\r\n\t\t(detector.style.webkitFlexBasis !== undefined) ||\r\n\t\t(detector.style.mozFlexBasis !== undefined) ||\r\n\t\t(detector.style.msFlexBasis !== undefined);\r\n\r\n/**\r\n* {@link module:layout/FittableLayout~FittableLayout} provides the base\r\n* positioning and boundary logic for the fittable layout strategy. The fittable\r\n* layout strategy is based on laying out items in either a set of rows or a set\r\n* of columns, with most of the items having natural size, but one item expanding\r\n* to fill the remaining space. The item that expands is labeled with the\r\n* attribute `fit: true`.\r\n*\r\n* The subkinds {@link module:layout/FittableLayout~FittableColumnsLayout} and\r\n* {@link module:layout/FittableLayout~FittableRowsLayout} (or _their_ subkinds)\r\n* are used for layout rather than `FittableLayout` because they specify\r\n* properties that the framework expects to be available when laying items out.\r\n*\r\n* When available on the platform, you can opt-in to have `FittableLayout` use\r\n* CSS flexible box (flexbox) to implement fitting behavior on the platform for\r\n* better performance; Enyo will fall back to JavaScript-based layout on older\r\n* platforms. Three subtle differences between the flexbox and JavaScript\r\n* implementations should be noted:\r\n\r\n* - When using flexbox, vertical margins (i.e., `margin-top`, `margin-bottom`) will\r\n* not collapse; when using JavaScript layout, vertical margins will collapse according\r\n* to static layout rules.\r\n*\r\n* - When using flexbox, non-fitting children of the Fittable must not be sized\r\n* using percentages of the container (even if set to `position: relative`);\r\n* this is explicitly not supported by the flexbox 2013 spec.\r\n*\r\n* - The flexbox-based Fittable implementation will respect multiple children\r\n* with `fit: true` (the fitting space will be divided equally between them).\r\n* This is NOT supported by the JavaScript implementation, and you should not rely\r\n* upon this behavior if you are deploying to platforms without flexbox support.\r\n*\r\n* The flexbox implementation was added to Enyo 2.5.0 as an optional performance\r\n* optimization; to use the optimization, set `useFlex: true` on the Fittable\r\n* container.  This will cause flexbox to be used when possible.\r\n*\r\n* @class FittableLayout\r\n* @extends module:enyo/Layout~Layout\r\n* @public\r\n*/\r\nvar FittableLayout = module.exports = kind(/** @lends module:layout/FittableLayout~FittableLayout.prototype */{\r\n\tname: 'enyo.FittableLayout',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Layout,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnoDefer: true,\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tconstructor: function () {\r\n\t\tLayout.prototype._constructor.apply(this, arguments);\r\n\r\n\t\t// Add the force-ltr class if we're in RTL mode, but this control is set explicitly to NOT be in RTL mode.\r\n\t\tthis.container.addRemoveClass('force-left-to-right', (Control.prototype.rtl && !this.container.get('rtl')) );\r\n\r\n\t\t// Flexbox optimization is determined by global flexAvailable and per-instance opt-in useFlex flag\r\n\t\tthis.useFlex = flexAvailable && (this.container.useFlex === true);\r\n\t\tif (this.useFlex) {\r\n\t\t\tthis.container.addClass(this.flexLayoutClass);\r\n\t\t} else {\r\n\t\t\tthis.container.addClass(this.fitLayoutClass);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcFitIndex: function () {\r\n\t\tvar aChildren = this.container.children,\r\n\t\t\toChild,\r\n\t\t\tn;\r\n\r\n\t\tfor (n=0; n<aChildren.length; n++) {\r\n\t\t\toChild = aChildren[n];\r\n\t\t\tif (oChild.fit && oChild.showing) {\r\n\t\t\t\treturn n;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetFitControl: function () {\r\n\t\tvar aChildren = this.container.children,\r\n\t\t\toFitChild = aChildren[this.fitIndex];\r\n\r\n\t\tif (!(oFitChild && oFitChild.fit && oFitChild.showing)) {\r\n\t\t\tthis.fitIndex = this.calcFitIndex();\r\n\t\t\toFitChild = aChildren[this.fitIndex];\r\n\t\t}\r\n\t\treturn oFitChild;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshouldReverse: function () {\r\n\t\treturn this.container.rtl && this.orient === 'h';\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdestroy: function () {\r\n\t\tLayout.prototype.destroy.apply(this, arguments);\r\n\t\t\r\n\t\tif (this.container) {\r\n\t\t\tthis.container.removeClass(this.useFlex ? this.flexLayoutClass : this.fitLayoutClass);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetFirstChild: function() {\r\n\t\tvar aChildren = this.getShowingChildren();\r\n\r\n\t\tif (this.shouldReverse()) {\r\n\t\t\treturn aChildren[aChildren.length - 1];\r\n\t\t} else {\r\n\t\t\treturn aChildren[0];\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetLastChild: function() {\r\n\t\tvar aChildren = this.getShowingChildren();\r\n\r\n\t\tif (this.shouldReverse()) {\r\n\t\t\treturn aChildren[0];\r\n\t\t} else {\r\n\t\t\treturn aChildren[aChildren.length - 1];\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetShowingChildren: function() {\r\n\t\tvar a = [],\r\n\t\t\tn = 0,\r\n\t\t\taChildren = this.container.children,\r\n\t\t\tnLength   = aChildren.length;\r\n\r\n\t\tfor (;n<nLength; n++) {\r\n\t\t\tif (aChildren[n].showing) {\r\n\t\t\t\ta.push(aChildren[n]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_reflow: function(sMeasureName, sClienMeasure, sAttrBefore, sAttrAfter) {\r\n\t\tthis.container.addRemoveClass('enyo-stretch', !this.container.noStretch);\r\n\t\t\r\n\t\tvar oFitChild       = this.getFitControl(),\r\n\t\t\toContainerNode  = this.container.hasNode(),  // Container node\r\n\t\t\tnTotalSize     = 0,                          // Total container width or height without padding\r\n\t\t\tnBeforeOffset   = 0,                         // Offset before fit child\r\n\t\t\tnAfterOffset    = 0,                         // Offset after fit child\r\n\t\t\toPadding,                                    // Object containing t,b,r,l paddings\r\n\t\t\toBounds,                                     // Bounds object of fit control\r\n\t\t\toLastChild,\r\n\t\t\toFirstChild,\r\n\t\t\tnFitSize;\r\n\r\n\t\tif (!oFitChild || !oContainerNode) { return true; }\r\n\r\n\t\toPadding   = dom.calcPaddingExtents(oContainerNode);\r\n\t\toBounds    = oFitChild.getBounds();\r\n\t\tnTotalSize = oContainerNode[sClienMeasure] - (oPadding[sAttrBefore] + oPadding[sAttrAfter]);\r\n\r\n\t\t// If total size is zero, there's nothing for us to do (and the Control\r\n\t\t// we're doing layout for is probably hidden). In this case, we\r\n\t\t// short-circuit and return `true` to signify that we want to reflow\r\n\t\t// again the next time the Control is shown.\r\n\t\tif (nTotalSize === 0) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif (this.shouldReverse()) {\r\n\t\t\toFirstChild  = this.getFirstChild();\r\n\t\t\tnAfterOffset = nTotalSize - (oBounds[sAttrBefore] + oBounds[sMeasureName]);\r\n\r\n\t\t\tvar nMarginBeforeFirstChild = dom.getComputedBoxValue(oFirstChild.hasNode(), 'margin', sAttrBefore) || 0;\r\n\r\n\t\t\tif (oFirstChild == oFitChild) {\r\n\t\t\t\tnBeforeOffset = nMarginBeforeFirstChild;\r\n\t\t\t} else {\r\n\t\t\t\tvar oFirstChildBounds      = oFirstChild.getBounds(),\r\n\t\t\t\t\tnSpaceBeforeFirstChild = oFirstChildBounds[sAttrBefore] - (oPadding[sAttrBefore] || 0);\r\n\r\n\t\t\t\tnBeforeOffset = oBounds[sAttrBefore] + nMarginBeforeFirstChild - nSpaceBeforeFirstChild;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\toLastChild    = this.getLastChild();\r\n\t\t\tnBeforeOffset = oBounds[sAttrBefore] - (oPadding[sAttrBefore] || 0);\r\n\r\n\t\t\tvar nMarginAfterLastChild = dom.getComputedBoxValue(oLastChild.hasNode(), 'margin', sAttrAfter) || 0;\r\n\r\n\t\t\tif (oLastChild == oFitChild) {\r\n\t\t\t\tnAfterOffset = nMarginAfterLastChild;\r\n\t\t\t} else {\r\n\t\t\t\tvar oLastChildBounds = oLastChild.getBounds(),\r\n\t\t\t\t\tnFitChildEnd     = oBounds[sAttrBefore] + oBounds[sMeasureName],\r\n\t\t\t\t\tnLastChildEnd    = oLastChildBounds[sAttrBefore] + oLastChildBounds[sMeasureName] +  nMarginAfterLastChild;\r\n\r\n\t\t\t\tnAfterOffset = nLastChildEnd - nFitChildEnd;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tnFitSize = nTotalSize - (nBeforeOffset + nAfterOffset);\r\n\t\toFitChild.applyStyle(sMeasureName, nFitSize + 'px');\r\n\t},\r\n\r\n\t/**\r\n\t* Assigns any static layout properties not dependent on changes to the\r\n\t* rendered component or container sizes, etc.\r\n\t* \r\n\t* @public\r\n\t*/\r\n\tflow: function() {\r\n\t\tif (this.useFlex) {\r\n\t\t\tvar i,\r\n\t\t\t\tchildren = this.container.children,\r\n\t\t\t\tchild;\r\n\t\t\tthis.container.addClass(this.flexLayoutClass);\r\n\t\t\tthis.container.addRemoveClass('nostretch', this.container.noStretch);\r\n\t\t\tfor (i=0; i<children.length; i++) {\r\n\t\t\t\tchild = children[i];\r\n\t\t\t\tchild.addClass('enyo-flex-item');\r\n\t\t\t\tchild.addRemoveClass('flex', child.fit);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Updates the layout to reflect any changes made to the layout container or\r\n\t* the contained components.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\treflow: function() {\r\n\t\tif (!this.useFlex) {\r\n\t\t\tif (this.orient == 'h') {\r\n\t\t\t\treturn this._reflow('width', 'clientWidth', 'left', 'right');\r\n\t\t\t} else {\r\n\t\t\t\treturn this._reflow('height', 'clientHeight', 'top', 'bottom');\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t* @lends module:layout/FittableLayout~FittableLayout.prototype\r\n\t*/\r\n\tstatics: {\r\n\t\t/**\r\n\t\t* Indicates whether flexbox optimization can be used.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default  false\r\n\t\t* @private\r\n\t\t*/\r\n\t\tflexAvailable: flexAvailable\r\n\t}\r\n});\r\n\r\n/**\r\n* {@link module:layout/FittableLayout~FittableColumnsLayout} provides a\r\n* container in which items are laid out in a set of vertical columns, with most\r\n* of the items having natural size, but one expanding to fill the remaining\r\n* space. The one that expands is labeled with the attribute `fit: true`.\r\n*\r\n* `FittableColumnsLayout` is meant to be used as a value for the `layoutKind`\r\n* property of other kinds. `layoutKind` provides a way to add layout behavior in\r\n* a pluggable fashion while retaining the ability to use a specific base kind.\r\n*\r\n* For more information, see the documentation on\r\n* [Fittables]{@linkplain $dev-guide/building-apps/layout/fittables.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class FittableColumnsLayout\r\n* @extends module:layout/FittableLayout~FittableLayout\r\n* @public\r\n*/\r\n\r\n/**\r\n* The declaration for {@link module:layout/FittableLayout~FittableColumnsLayout}\r\n*/\r\nmodule.exports.Columns = kind(/** @lends module:layout/FittableLayout~FittableColumnsLayout.prototype */{\r\n\tname        : 'enyo.FittableColumnsLayout',\r\n\tkind        : FittableLayout,\r\n\torient      : 'h',\r\n\tfitLayoutClass : 'enyo-fittable-columns-layout',\r\n\tflexLayoutClass: 'enyo-flex-container columns'\r\n});\r\n\r\n\r\n/**\r\n* {@link module:layout/FittableLayout~FittableRowsLayout} provides a container\r\n* in which items are laid out in a set of horizontal rows, with most of the\r\n* items having natural size, but one expanding to fill the remaining space. The\r\n* one that expands is labeled with the attribute `fit: true`.\r\n*\r\n* `FittableRowsLayout` is meant to be used as a value for the `layoutKind`\r\n* property of other kinds. `layoutKind` provides a way to add layout behavior in\r\n* a pluggable fashion while retaining the ability to use a specific base kind.\r\n*\r\n* For more information, see the documentation on\r\n* [Fittables]{@linkplain $dev-guide/building-apps/layout/fittables.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class FittableRowsLayout\r\n* @extends module:layout/FittableLayout~FittableLayout\r\n* @public\r\n*/\r\n\r\n/**\r\n* The declaration for {@link module:layout/FittableLayout~FittableRowsLayout}\r\n*/\r\nmodule.exports.Rows = kind(\r\n\t/** @lends module:layout/FittableLayout~FittableRowsLayout.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname        : 'enyo.FittableRowsLayout',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind        : FittableLayout,\r\n\r\n\t/**\r\n\t* Layout CSS class used to fit rows.\r\n\t*\r\n\t* @type {String}\r\n\t* @default 'enyo-fittable-rows-layout'\r\n\t* @public\r\n\t*/\r\n\tfitLayoutClass : 'enyo-fittable-rows-layout',\r\n\r\n\t/**\r\n\t* The orientation of the layout.\r\n\t*\r\n\t* @type {String}\r\n\t* @default 'v'\r\n\t* @public\r\n\t*/\r\n\torient      : 'v',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tflexLayoutClass: 'enyo-flex-container rows'\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/FlyweightRepeater~FlyweightRepeater} kind.\r\n* @module layout/FlyweightRepeater\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom'),\r\n\tutils = require('enyo/utils'),\r\n\tControl = require('enyo/Control'),\r\n\tHTMLStringDelegate = require('enyo/HTMLStringDelegate'),\r\n\tSelection = require('enyo/Selection');\r\n\r\nvar FlyweightRepeaterDelegate = Object.create(HTMLStringDelegate);\r\n\r\nFlyweightRepeaterDelegate.generateInnerHtml = function (control) {\r\n\tvar h = '';\r\n\tcontrol.index = null;\r\n\t// note: can supply a rowOffset\r\n\t// and indicate if rows should be rendered top down or bottomUp\r\n\tfor (var i=0, r=0; i<control.count; i++) {\r\n\t\tr = control.rowOffset + (this.bottomUp ? control.count - i-1 : i);\r\n\t\tcontrol.setupItem(r);\r\n\t\tcontrol.$.client.setAttribute('data-enyo-index', r);\r\n\t\tif (control.orient == 'h') {\r\n\t\t\tcontrol.$.client.setStyle('display:inline-block;');\r\n\t\t}\r\n\t\th += HTMLStringDelegate.generateChildHtml(control);\r\n\t\tcontrol.$.client.teardownRender();\r\n\t}\r\n\treturn h;\r\n};\r\n\r\n/**\r\n* Fires once per row at render time.\r\n*\r\n* @event module:layout/FlyweightRepeater~FlyweightRepeater#onSetupItem\r\n* @type {Object}\r\n* @property {Number} index     - The index of the row being rendered.\r\n* @property {Boolean} selected - `true` if the row is selected; otherwise, `false`.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires after an individual row has been rendered.\r\n*\r\n* @event module:layout/FlyweightRepeater~FlyweightRepeater#onRenderRow\r\n* @type {Object}\r\n* @property {Number} rowIndex - The index of the row that was rendered.\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:layout/FlyweightRepeater~FlyweightRepeater} is a control that displays a repeating list of\r\n* rows, suitable for displaying medium-sized lists (up to ~100 items). A\r\n* flyweight strategy is employed to render one set of row controls, as needed,\r\n* for as many rows as are contained in the repeater.\r\n*\r\n* The FlyweightRepeater's `components` block contains the controls to be used\r\n* for a single row. This set of controls will be rendered for each row. You\r\n* may customize row rendering by handling the\r\n* [onSetupItem]{@link module:layout/FlyweightRepeater~FlyweightRepeater#onSetupItem} event.\r\n*\r\n* The controls inside a FlyweightRepeater are non-interactive. This means that\r\n* calling methods that would normally cause rendering to occur (e.g.,\r\n* `set('content', <value>)`) will not do so. However, you may force a row to\r\n* render by calling [renderRow()]{@link module:layout/FlyweightRepeater~FlyweightRepeater#renderRow}.\r\n*\r\n* In addition, you may force a row to be temporarily interactive by calling\r\n* [prepareRow()]{@link module:layout/FlyweightRepeater~FlyweightRepeater#prepareRow}. Call\r\n* [lockRow()]{@link module:layout/FlyweightRepeater~FlyweightRepeater#lockRow} when the interaction\r\n* is complete.\r\n*\r\n* For more information, see the documentation on\r\n* [Lists]{@linkplain $dev-guide/building-apps/layout/lists.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class FlyweightRepeater\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nvar FlyweightRepeater = module.exports = kind(\r\n\t/** @lends module:layout/FlyweightRepeater~FlyweightRepeater.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.FlyweightRepeater',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @lends module:layout/FlyweightRepeater~FlyweightRepeater.prototype\r\n\t* @private\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t * The number of rows to render.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t * @public\r\n\t\t */\r\n\t\tcount: 0,\r\n\r\n\t\t/**\r\n\t\t* If `true`, the selection mechanism is disabled. Tap events are still\r\n\t\t* sent, but items won't be automatically re-rendered when tapped.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tnoSelect: false,\r\n\r\n\t\t/**\r\n\t\t * If `true`, multiple selection is allowed.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t * @public\r\n\t\t */\r\n\t\tmultiSelect: false,\r\n\r\n\t\t/**\r\n\t\t * If `true`, the selected item will toggle.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t * @public\r\n\t\t */\r\n\t\ttoggleSelected: false,\r\n\r\n\t\t/**\r\n\t\t* Used to specify CSS classes for the repeater's wrapper component (client).\r\n\t\t* Input is identical to that of {@link module:enyo/Control~Control#setClasses}.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tclientClasses: '',\r\n\r\n\t\t/**\r\n\t\t* Used to specify custom styling for the repeater's wrapper component\r\n\t\t* (client). Input is identical to that of {@link module:enyo/Control~Control#setStyle}.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tclientStyle: '',\r\n\r\n\t\t/**\r\n\t\t* Numerical offset applied to row number during row generation. Allows items\r\n\t\t* to have natural indices instead of `0`-based ones. This value must be\r\n\t\t* positive, as row number `-1` is used to represent undefined rows in the\r\n\t\t* event system.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\trowOffset: 0,\r\n\r\n\t\t/**\r\n\t\t* Direction in which items will be laid out. Valid values are `'v'` for\r\n\t\t* vertical or `'h'` for horizontal.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'h'\r\n\t\t* @public\r\n\t\t*/\r\n\t\torient: 'v'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonSetupItem: '',\r\n\t\tonRenderRow: ''\r\n\t},\r\n\r\n\t/**\r\n\t* Setting cachePoint: true ensures that events from the repeater's subtree will\r\n\t* always bubble up through the repeater, allowing the events to be decorated with repeater-\r\n\t* related metadata and references.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @private\r\n\t*/\r\n\tcachePoint: true,\r\n\r\n\t/**\r\n\t* Design-time attribute indicating whether row indices run\r\n\t* from `0` to [`count`]{@link module:layout/FlyweightRepeater~FlyweightRepeater#count}`-1` `(false)` or\r\n\t* from [`count`]{@link module:layout/FlyweightRepeater~FlyweightRepeater#count}`-1` to `0` `(true)`.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tbottomUp: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trenderDelegate: FlyweightRepeaterDelegate,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{kind: Selection, onSelect: 'selectDeselect', onDeselect: 'selectDeselect'},\r\n\t\t{name: 'client'}\r\n\t],\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tthis.noSelectChanged();\r\n\t\tthis.multiSelectChanged();\r\n\t\tthis.clientClassesChanged();\r\n\t\tthis.clientStyleChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnoSelectChanged: function () {\r\n\t\tif (this.noSelect) {\r\n\t\t\tthis.$.selection.clear();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmultiSelectChanged: function () {\r\n\t\tthis.$.selection.setMulti(this.multiSelect);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclientClassesChanged: function () {\r\n\t\tthis.$.client.setClasses(this.clientClasses);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclientStyleChanged: function () {\r\n\t\tthis.$.client.setStyle(this.clientStyle);\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:layout/FlyweightRepeater~FlyweightRepeater#onSetupItem\r\n\t* @private\r\n\t*/\r\n\tsetupItem: function (index) {\r\n\t\tthis.doSetupItem({index: index, selected: this.isSelected(index)});\r\n\t},\r\n\r\n\t/**\r\n\t* Renders the list.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgenerateChildHtml: function () {\r\n\t\treturn this.renderDelegate.generateInnerHtml(this);\r\n\t},\r\n\r\n\t/**\r\n\t* @todo add link to preview.js\r\n\t* @private\r\n\t*/\r\n\tpreviewDomEvent: function (event) {\r\n\t\tvar i = this.index = this.rowForEvent(event);\r\n\t\tevent.rowIndex = event.index = i;\r\n\t\tevent.flyweight = this;\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdecorateEvent: function (eventName, event, sender) {\r\n\t\t// decorate event with index found via dom iff event does not already contain an index.\r\n\t\tvar i = (event && event.index != null) ? event.index : this.index;\r\n\t\tif (event && i != null) {\r\n\t\t\tevent.index = i;\r\n\t\t\tevent.flyweight = this;\r\n\t\t}\r\n\t\tControl.prototype.decorateEvent.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttap: function (sender, event) {\r\n\t\t// ignore taps if selecting is disabled or if they don't target a row\r\n\t\tif (this.noSelect || event.index === -1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.toggleSelected) {\r\n\t\t\tthis.$.selection.toggle(event.index);\r\n\t\t} else {\r\n\t\t\tthis.$.selection.select(event.index);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Handler for selection and deselection.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tselectDeselect: function (sender, event) {\r\n\t\tthis.renderRow(event.key);\r\n\t},\r\n\r\n\t/**\r\n\t* Returns the repeater's [selection]{@link module:enyo/Selection~Selection} component.\r\n\t*\r\n\t* @return {module:enyo/Selection~Selection} The repeater's selection component.\r\n\t* @public\r\n\t*/\r\n\tgetSelection: function () {\r\n\t\treturn this.$.selection;\r\n\t},\r\n\r\n\t/**\r\n\t* Gets the selection state for the given row index.\r\n\t*\r\n\t* @return {Boolean} `true` if the row is currently selected; otherwise, `false`.\r\n\t* @public\r\n\t*/\r\n\tisSelected: function (index) {\r\n\t\treturn this.getSelection().isSelected(index);\r\n\t},\r\n\r\n\t/**\r\n\t* Renders the row with the specified index.\r\n\t*\r\n\t* @param {Number} index - The index of the row to render.\r\n\t* @fires module:layout/FlyweightRepeater~FlyweightRepeater#onRenderRow\r\n\t* @public\r\n\t*/\r\n\trenderRow: function (index) {\r\n\t\t// do nothing if index is out-of-range\r\n\t\tif (index < this.rowOffset || index >= this.count + this.rowOffset) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t//this.index = null;\r\n\t\t// always call the setupItem callback, as we may rely on the post-render state\r\n\t\tthis.setupItem(index);\r\n\t\tvar node = this.fetchRowNode(index);\r\n\t\tif (node) {\r\n\t\t\t// hack to keep this working...\r\n\t\t\tvar delegate = HTMLStringDelegate;\r\n\r\n\t\t\tdom.setInnerHtml(node, delegate.generateChildHtml(this.$.client));\r\n\t\t\tthis.$.client.teardownChildren();\r\n\t\t\tthis.doRenderRow({rowIndex: index});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Fetches the DOM node for the given row index.\r\n\t*\r\n\t* @param {Number} index - The index of the row whose DOM node is to be fetched.\r\n\t* @return {Node} The DOM node for the specified row.\r\n\t* @public\r\n\t*/\r\n\tfetchRowNode: function (index) {\r\n\t\tif (this.hasNode()) {\r\n\t\t\treturn this.node.querySelector('[data-enyo-index=\"' + index + '\"]');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Fetches the row number corresponding to the target of a given event.\r\n\t*\r\n\t* @param {Object} event - Event object.\r\n\t* @return {Number} The index of the row corresponding to the event's target.\r\n\t* @public\r\n\t*/\r\n\trowForEvent: function (event) {\r\n\t\tif (!this.hasNode()) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tvar n = event.target;\r\n\t\twhile (n && n !== this.node) {\r\n\t\t\tvar i = n.getAttribute && n.getAttribute('data-enyo-index');\r\n\t\t\tif (i !== null) {\r\n\t\t\t\treturn Number(i);\r\n\t\t\t}\r\n\t\t\tn = n.parentNode;\r\n\t\t}\r\n\t\treturn -1;\r\n\t},\r\n\r\n\t/**\r\n\t* Prepares the specified row such that changes made to the controls inside\r\n\t* the repeater will be rendered for the row.\r\n\t*\r\n\t* @param {Number} index - The index of the row to be prepared.\r\n\t* @public\r\n\t*/\r\n\tprepareRow: function (index) {\r\n\t\t// do nothing if index is out-of-range\r\n\t\tif (index < this.rowOffset || index >= this.count + this.rowOffset) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// update row internals to match model\r\n\t\tthis.setupItem(index);\r\n\t\tvar n = this.fetchRowNode(index);\r\n\t\tFlyweightRepeater.claimNode(this.$.client, n);\r\n\t},\r\n\r\n\t/**\r\n\t* Prevents rendering of changes made to controls inside the repeater.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tlockRow: function () {\r\n\t\tthis.$.client.teardownChildren();\r\n\t},\r\n\r\n\t/**\r\n\t* Prepares the specified row such that changes made to the controls in the\r\n\t* repeater will be rendered in the row; then performs the function `func`\r\n\t* and, finally, locks the row.\r\n\t*\r\n\t* @param {Number} index   - The index of the row to be acted upon.\r\n\t* @param {Function} func  - The function to perform.\r\n\t* @param {Object} context - The context to which `func` is bound.\r\n\t* @private\r\n\t*/\r\n\tperformOnRow: function (index, func, context) {\r\n\t\t// do nothing if index is out-of-range\r\n\t\tif (index < this.rowOffset || index >= this.count + this.rowOffset) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (func) {\r\n\t\t\tthis.prepareRow(index);\r\n\t\t\tutils.call(context || null, func);\r\n\t\t\tthis.lockRow();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @lends module:layout/FlyweightRepeater~FlyweightRepeater\r\n\t* @private\r\n\t*/\r\n\tstatics: {\r\n\t\t/**\r\n\t\t* Associates a flyweight rendered control (`control`) with a\r\n\t\t* rendering context specified by `node`.\r\n\t\t*\r\n\t\t* @param {module:enyo/Control~Control} control - A flyweight-rendered control.\r\n\t\t* @param {Node} node - The DOM node to be associated with `control`.\r\n\t\t* @public\r\n\t\t*/\r\n\t\tclaimNode: function (control, node) {\r\n\t\t\tvar n;\r\n\t\t\tif (node) {\r\n\t\t\t\tif (node.id !== control.id) {\r\n\t\t\t\t\tn = node.querySelector('#' + control.id);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// node is already the right node, so just use it\r\n\t\t\t\t\tn = node;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// FIXME: consider controls generated if we found a node or tag: null, the later so can teardown render\r\n\t\t\tcontrol.generated = Boolean(n || !control.tag);\r\n\t\t\tcontrol.node = n;\r\n\t\t\tif (control.node) {\r\n\t\t\t\tcontrol.rendered();\r\n\t\t\t} else {\r\n\t\t\t\t//enyo.log('Failed to find node for',  control.id, control.generated);\r\n\t\t\t}\r\n\t\t\t// update control's class cache based on the node contents\r\n\t\t\tfor (var i=0, c$=control.children, c; (c=c$[i]); i++) {\r\n\t\t\t\tthis.claimNode(c, node);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/ImageViewPin~ImageViewPin} kind.\r\n* @module layout/ImageViewPin\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tControl = require('enyo/Control');\r\n\r\n/**\r\n* {@link module:layout/ImageViewPin~ImageViewPin} is a control that can be used to display\r\n* non-zooming content inside of a zoomable {@link module:layout/ImageView~ImageView} control. The\r\n* [anchor]{@link module:layout/ImageViewPin~ImageViewPin#anchor} and\r\n* [position]{@link module:layout/ImageViewPin~ImageViewPin#position} properties may be used to\r\n* position both the ImageViewPin and its content in a specific location within\r\n* the ImageView.\r\n*\r\n* @class ImageViewPin\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:layout/ImageViewPin~ImageViewPin.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.ImageViewPin',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @lends module:layout/ImageViewPin~ImageViewPin.prototype\r\n\t* @private\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* If `true`, the anchor point for this pin will be highlighted in yellow,\r\n\t\t* which can be useful for debugging. Defaults to `false`.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\thighlightAnchorPoint: false,\r\n\r\n\t\t/**\r\n\t\t* The coordinates at which this control should be anchored inside\r\n\t\t* of the parent ImageView control. This position is relative to the\r\n\t\t* ImageView control's original size. Works like standard CSS positioning,\r\n\t\t* and accepts both px and percentage values.\r\n\t\t*\r\n\t\t* * `top`: Distance from the parent's top edge.\r\n\t\t* * `bottom`: Distance from the parent's bottom edge (overrides `top`).\r\n\t\t* * `left`: Distance from the parent's left edge.\r\n\t\t* * `right`: Distance from the parent's right edge (overrides `left`).\r\n\t\t*\r\n\t\t* @type {Object}\r\n\t\t* @default {top: 0px, left: 0px}\r\n\t\t* @public\r\n\t\t*/\r\n\t\tanchor: {\r\n\t\t\ttop: 0,\r\n\t\t\tleft: 0\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* The coordinates at which the contents of this control should be\r\n\t\t* positioned relative to the ImageViewPin itself. Works like standard\r\n\t\t* CSS positioning. Only accepts px values. Defaults to\r\n\t\t* `{top: 0px, left: 0px}`.\r\n\t\t*\r\n\t\t* * `top`: Distance from the ImageViewPin's top edge.\r\n\t\t* * `bottom`: Distance from the ImageViewPin's bottom edge.\r\n\t\t* * `left`: Distance from the ImageViewPin's left edge.\r\n\t\t* * `right`: Distance from the ImageViewPin's right edge.\r\n\t\t*\r\n\t\t* @type {Object}\r\n\t\t* @default {top: 0px, left: 0px}\r\n\t\t* @public\r\n\t\t*/\r\n\t\tposition: {\r\n\t\t\ttop: 0,\r\n\t\t\tleft: 0\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstyle: 'position:absolute;z-index:1000;width:0px;height:0px;',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonPositionPin: 'reAnchor'\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tthis.styleClientControls();\r\n\t\tthis.positionClientControls();\r\n\t\tthis.highlightAnchorPointChanged();\r\n\t\tthis.anchorChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* Absolutely positions client controls.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tstyleClientControls: function () {\r\n\t\tvar controls = this.getClientControls();\r\n\t\tfor (var i = 0; i < controls.length; i++) {\r\n\t\t\tcontrols[i].applyStyle('position','absolute');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Applies specified positioning to client controls.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpositionClientControls: function () {\r\n\t\tvar controls = this.getClientControls();\r\n\t\tfor (var i = 0; i < controls.length; i++) {\r\n\t\t\tfor (var p in this.position) {\r\n\t\t\t\tcontrols[i].applyStyle(p, this.position[p]+'px');\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Updates styling of anchor point.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\thighlightAnchorPointChanged: function () {\r\n\t\tthis.addRemoveClass('pinDebug', this.highlightAnchorPoint);\r\n\t},\r\n\r\n\t/**\r\n\t* Creates `coords` object for each anchor, containing value and units.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tanchorChanged: function () {\r\n\t\tvar coords = null, a = null;\r\n\t\tfor (a in this.anchor) {\r\n\t\t\tcoords = this.anchor[a].toString().match(/^(\\d+(?:\\.\\d+)?)(.*)$/);\r\n\t\t\tif (!coords) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tthis.anchor[a+'Coords'] = {\r\n\t\t\t\tvalue: coords[1],\r\n\t\t\t\tunits: coords[2] || 'px'\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\r\n\t/*\r\n\t* Applies positioning to ImageViewPin specified in `this.anchor`.\r\n\t* Called anytime the parent ImageView is rescaled. If `right/bottom`\r\n\t* are specified, they override `top/left`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\treAnchor: function (sender, event) {\r\n\t\tvar scale = event.scale;\r\n\t\tvar bounds = event.bounds;\r\n\t\tvar left = (this.anchor.right)\r\n\t\t\t// Right\r\n\t\t\t? (this.anchor.rightCoords.units == 'px')\r\n\t\t\t\t? (bounds.width + bounds.x - this.anchor.rightCoords.value*scale)\r\n\t\t\t\t: (bounds.width*(100-this.anchor.rightCoords.value)/100 + bounds.x)\r\n\t\t\t// Left\r\n\t\t\t: (this.anchor.leftCoords.units == 'px')\r\n\t\t\t\t? (this.anchor.leftCoords.value*scale + bounds.x)\r\n\t\t\t\t: (bounds.width*this.anchor.leftCoords.value/100 + bounds.x);\r\n\t\tvar top = (this.anchor.bottom)\r\n\t\t\t// Bottom\r\n\t\t\t? (this.anchor.bottomCoords.units == 'px')\r\n\t\t\t\t? (bounds.height + bounds.y - this.anchor.bottomCoords.value*scale)\r\n\t\t\t\t: (bounds.height*(100-this.anchor.bottomCoords.value)/100 + bounds.y)\r\n\t\t\t// Top\r\n\t\t\t: (this.anchor.topCoords.units == 'px')\r\n\t\t\t\t? (this.anchor.topCoords.value*scale + bounds.y)\r\n\t\t\t\t: (bounds.height*this.anchor.topCoords.value/100 + bounds.y);\r\n\t\tthis.applyStyle('left', left+'px');\r\n\t\tthis.applyStyle('top', top+'px');\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/PulldownList/Puller~Puller} kind.\r\n* This module is automatically included by {@link module:layout/PulldownList}.\r\n* @module layout/PulldownList/Puller\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tControl = require('enyo/Control');\r\n\r\n/**\r\n* Fires when the Puller is created.\r\n*\r\n* @event module:layout/PulldownList/Puller~Puller#onCreate\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:layout/PulldownList/Puller~Puller} is a control displayed within\r\n* a {@link module:layout/PulldownList~PulldownList} to indicate that the list is\r\n* refreshing in response to a pull-to-refresh action.\r\n*\r\n* @class Puller\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:layout/PulldownList/Puller~Puller.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.Puller',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'enyo-puller',\r\n\r\n\t/**\r\n\t* @lends module:layout/PulldownList/Puller~Puller.prototype\r\n\t* @private\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* Text to display below icon.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttext: '',\r\n\r\n\t\t/**\r\n\t\t* CSS classes to apply to the icon control.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\ticonClass: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonCreate: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'icon'},\r\n\t\t{name: 'text', tag: 'span', classes: 'enyo-puller-text'}\r\n\t],\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tControl.prototype.create.apply(this, arguments);\r\n\t\tthis.doCreate();\r\n\t\tthis.textChanged();\r\n\t\tthis.iconClassChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttextChanged: function () {\r\n\t\tthis.$.text.setContent(this.text);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ticonClassChanged: function () {\r\n\t\tthis.$.icon.setClasses(this.iconClass);\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/Slideable~Slideable} kind.\r\n* @module layout/Slideable\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom'),\r\n\tplatform = require('enyo/platform'),\r\n\tAnimator = require('enyo/Animator'),\r\n\tControl = require('enyo/Control');\r\n\r\n/**\r\n* Fires when the Slideable finishes animating.\r\n*\r\n* @event module:layout/Slideable~Slideable#onAnimateFinish\r\n* @type {enyo.Animator}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when the position (i.e., [value]{@link module:layout/Slideable~Slideable#value}) of the\r\n* Slideable changes.\r\n*\r\n* @event module:layout/Slideable~Slideable#onChange\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:layout/Slideable~Slideable} is a control that may be dragged either horizontally\r\n* or vertically between a minimum and a maximum value. When released from\r\n* dragging, a Slideable will animate to its minimum or maximum position,\r\n* depending on the direction of the drag.\r\n*\r\n* The [min]{@link module:layout/Slideable~Slideable#min} value specifies a position to the left of,\r\n* or above, the initial position, to which the Slideable may be dragged.\r\n* The [max]{@link module:layout/Slideable~Slideable#max} value specifies a position to the right of,\r\n* or below, the initial position, to which the Slideable may be dragged.\r\n* The [value]{@link module:layout/Slideable~Slideable#value} property specifies the current position\r\n* of the Slideable, between the minimum and maximum positions.\r\n*\r\n* `min`, `max`, and `value` may be specified in units of 'px' or '%'.\r\n*\r\n* The [axis]{@link module:layout/Slideable~Slideable#axis} property determines whether the Slideable\r\n* slides left-to-right ('h') or up-and-down ('v').\r\n*\r\n* The following control is placed 90% off the screen to the right, and slides\r\n* to its natural position:\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tSlideable = require('layout/Slideable');\r\n*\r\n* \t{kind: Slideable, value: -90, min: -90, unit: '%',\r\n* \t\tclasses: 'enyo-fit', style: 'width: 300px;',\r\n* \t\tcomponents: [\r\n* \t\t\t{content: 'stuff'}\r\n* \t\t]\r\n* \t}\r\n* ```\r\n*\r\n* NOTE: If Slideable is used with [Accessibility]{@link module:enyo/AccessibilitySupport} the focus\r\n* event can cause the screen to scroll as the browser attempts to position the contents on the\r\n* screen. To prevent this, in the container of the Slideable set the `accessibilityPreventScroll`\r\n* property to `true`:\r\n*\r\n* ```javascript\r\n* \taccessibilityPreventScroll: true\r\n* ```\r\n*\r\n* This issue is not unique to Slideable and can occur with other controls that extend beyond the\r\n* viewport.\r\n*\r\n* @class Slideable\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:layout/Slideable~Slideable.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.Slideable',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @lends module:layout/Slideable~Slideable.prototype\r\n\t* @private\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* Direction of sliding; valid values are `'h'` for horizonal or `'v'` for vertical.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'h'\r\n\t\t* @public\r\n\t\t*/\r\n\t\taxis: 'h',\r\n\r\n\t\t/**\r\n\t\t* Current position of the Slideable (a value between\r\n\t\t* [min]{@link module:layout/Slideable~Slideable#min} and [max]{@link module:layout/Slideable~Slideable#max}).\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default  0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tvalue: 0,\r\n\r\n\t\t/**\r\n\t\t* Unit for [min]{@link module:layout/Slideable~Slideable#min}, [max]{@link module:layout/Slideable~Slideable#max},\r\n\t\t* and [value]{@link module:layout/Slideable~Slideable#value}; valid values are `'px'` or `'%'`.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default  'px'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tunit: 'px',\r\n\r\n\t\t/**\r\n\t\t* The minimum value to slide to.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmin: 0,\r\n\r\n\t\t/**\r\n\t\t* The maximum value to slide to.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default  0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmax: 0,\r\n\r\n\t\t/**\r\n\t\t* When truthy, applies CSS styles to allow GPU compositing of slideable\r\n\t\t* content, if allowed by the platform.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default  'auto'\r\n\t\t* @public\r\n\t\t*/\r\n\t\taccelerated: 'auto',\r\n\r\n\t\t/**\r\n\t\t* Set to `false` to prevent the Slideable from dragging with elasticity\r\n\t\t* past its [min]{@link module:layout/Slideable~Slideable#min} or [max]{@link module:layout/Slideable~Slideable#max}\r\n\t\t* value.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default  true\r\n\t\t* @public\r\n\t\t*/\r\n\t\toverMoving: true,\r\n\r\n\t\t/**\r\n\t\t* Indicates whether dragging is allowed. Set to `false` to disable dragging.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default  true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdraggable: true\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonAnimateFinish: '',\r\n\t\tonChange: ''\r\n\t},\r\n\r\n\t/**\r\n\t* Set to `true` to prevent drag events from bubbling beyond the Slideable.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpreventDragPropagation: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttools: [\r\n\t\t{kind: Animator, onStep: 'animatorStep', onEnd: 'animatorComplete'}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tondragstart: 'dragstart',\r\n\t\tondrag: 'drag',\r\n\t\tondragfinish: 'dragfinish'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkDragScalar: 1,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdragEventProp: 'dx',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tunitModifier: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcanTransform: false,\r\n\r\n\t/**\r\n\t* Indicates which property of the drag event is used to position the control.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdragMoveProp: 'dx',\r\n\r\n\t/**\r\n\t* Indicates which property of the drag event is used to allow dragging.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshouldDragProp: 'horizontal',\r\n\r\n\t/**\r\n\t* The transform property to modify, provided that\r\n\t* [canTransform]{@link module:layout/Slideable~Slideable#canTransform} is `true`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\ttransform: 'translateX',\r\n\r\n\t/**\r\n\t* The dimension attribute to modify; will be either `'height'` or `'width'`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdimension: 'width',\r\n\r\n\t/**\r\n\t* The position attribute to modify; will be either `'top'` or `'left'`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tboundary: 'left',\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.acceleratedChanged();\r\n\t\t\tthis.transformChanged();\r\n\t\t\tthis.axisChanged();\r\n\t\t\tthis.valueChanged();\r\n\t\t\tthis.addClass('enyo-slideable');\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tinitComponents: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tthis.createComponents(this.tools);\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\trendered: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.canModifyUnit();\r\n\t\t\tthis.updateDragScalar();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\thandleResize: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.updateDragScalar();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* If transforms can't be used and inline style is using 'px' while\r\n\t* [unit]{@link module:layout/Slideable~Slideable#unit} is `'%'`, this sets the\r\n\t* [unitModifier]{@link module:layout/Slideable~Slideable#unitModifier} property to the current\r\n\t* value of [dimension]{@link module:layout/Slideable~Slideable#dimension}.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcanModifyUnit: function () {\r\n\t\tif (!this.canTransform) {\r\n\t\t\tvar b = this.getInitialStyleValue(this.hasNode(), this.boundary);\r\n\t\t\t// If inline style of 'px' exists, while unit is '%'\r\n\t\t\tif (b.match(/px/i) && (this.unit === '%')) {\r\n\t\t\t\t// Set unitModifier - used to over-ride '%'\r\n\t\t\t\tthis.unitModifier = this.getBounds()[this.dimension];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetInitialStyleValue: function (node, boundary) {\r\n\t\tvar s = dom.getComputedStyle(node);\r\n\t\tif (s) {\r\n\t\t\treturn s.getPropertyValue(boundary);\r\n\t\t}\r\n\t\treturn '0';\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateBounds: function (value, dimensions) {\r\n\t\tvar bounds = {};\r\n\t\tbounds[this.boundary] = value;\r\n\t\tthis.setBounds(bounds, this.unit);\r\n\r\n\t\tthis.setInlineStyles(value, dimensions);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateDragScalar: function () {\r\n\t\tif (this.unit == '%') {\r\n\t\t\tvar d = this.getBounds()[this.dimension];\r\n\t\t\tthis.kDragScalar = d ? 100 / d : 1;\r\n\r\n\t\t\tif (!this.canTransform) {\r\n\t\t\t\tthis.updateBounds(this.value, 100);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttransformChanged: function () {\r\n\t\tthis.canTransform = dom.canTransform();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tacceleratedChanged: function () {\r\n\t\tif (!platform.android || platform.android <= 2) {\r\n\t\t\tdom.accelerate(this, this.accelerated);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taxisChanged: function () {\r\n\t\tvar h = this.axis == 'h';\r\n\t\tthis.dragMoveProp = h ? 'dx' : 'dy';\r\n\t\tthis.shouldDragProp = h ? 'horizontal' : 'vertical';\r\n\t\tthis.transform = h ? 'translateX' : 'translateY';\r\n\t\tthis.dimension = h ? 'width' : 'height';\r\n\t\tthis.boundary = h ? 'left' : 'top';\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetInlineStyles: function (value, dimensions) {\r\n\t\tvar inBounds = {};\r\n\r\n\t\tif (this.unitModifier) {\r\n\t\t\tinBounds[this.boundary] = this.percentToPixels(value, this.unitModifier);\r\n\t\t\tinBounds[this.dimension] = this.unitModifier;\r\n\t\t\tthis.setBounds(inBounds);\r\n\t\t} else {\r\n\t\t\tif (dimensions) {\r\n\t\t\t\tinBounds[this.dimension] = dimensions;\r\n\t\t\t} else {\r\n\t\t\t\tinBounds[this.boundary] = value;\r\n\t\t\t}\r\n\t\t\tthis.setBounds(inBounds, this.unit);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:layout/Slideable~Slideable#onChange\r\n\t* @private\r\n\t*/\r\n\tvalueChanged: function (last) {\r\n\t\tvar v = this.value;\r\n\t\tif (this.isOob(v) && !this.isAnimating()) {\r\n\t\t\tthis.value = this.overMoving ? this.dampValue(v) : this.clampValue(v);\r\n\t\t}\r\n\t\t// FIXME: android cannot handle nested compositing well so apply acceleration only if needed\r\n\t\t// desktop chrome doesn't like this code path so avoid...\r\n\t\tif (platform.android > 2) {\r\n\t\t\tif (this.value) {\r\n\t\t\t\tif (last === 0 || last === undefined) {\r\n\t\t\t\t\tdom.accelerate(this, this.accelerated);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tdom.accelerate(this, false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// If platform supports transforms\r\n\t\tif (this.canTransform) {\r\n\t\t\tdom.transformValue(this, this.transform, this.value + this.unit);\r\n\t\t// else update inline styles\r\n\t\t} else {\r\n\t\t\tthis.setInlineStyles(this.value, false);\r\n\t\t}\r\n\t\tthis.doChange();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetAnimator: function () {\r\n\t\treturn this.$.animator;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tisAtMin: function () {\r\n\t\treturn this.value <= this.calcMin();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tisAtMax: function () {\r\n\t\treturn this.value >= this.calcMax();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcMin: function () {\r\n\t\treturn this.min;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcMax: function () {\r\n\t\treturn this.max;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclampValue: function (value) {\r\n\t\tvar min = this.calcMin();\r\n\t\tvar max = this.calcMax();\r\n\t\treturn Math.max(min, Math.min(value, max));\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdampValue: function (value) {\r\n\t\treturn this.dampBound(this.dampBound(value, this.min, 1), this.max, -1);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdampBound: function (value, boundary, sign) {\r\n\t\tvar v = value;\r\n\t\tif (v * sign < boundary * sign) {\r\n\t\t\tv = boundary + (v - boundary) / 4;\r\n\t\t}\r\n\t\treturn v;\r\n\t},\r\n\r\n\t/**\r\n\t* Calculates the pixel value corresponding to the specified `percent` and\r\n\t* `dimension`.\r\n\t*\r\n\t* @param  {Number} percent\r\n\t* @param  {Number} dimension\r\n\t*\r\n\t* @return {Number}\r\n\t* @private\r\n\t*/\r\n\tpercentToPixels: function (percent, dimension) {\r\n\t\treturn Math.floor((dimension / 100) * percent);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpixelsToPercent: function (value) {\r\n\t\tvar boundary = this.unitModifier ? this.getBounds()[this.dimension] : this.container.getBounds()[this.dimension];\r\n\t\treturn (value / boundary) * 100;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshouldDrag: function (event) {\r\n\t\treturn this.draggable && event[this.shouldDragProp];\r\n\t},\r\n\r\n\t/**\r\n\t* Determines whether the specified value is out of bounds (i.e., greater than\r\n\t* [max]{@link module:layout/Slideable~Slideable#max} or less than [min]{@link module:layout/Slideable~Slideable#min}).\r\n\t*\r\n\t* @param {Number} value - The value to check.\r\n\t* @return {Boolean} `true` if `value` is out of bounds; otherwise, `false`.\r\n\t* @private\r\n\t*/\r\n\tisOob: function (value) {\r\n\t\treturn value > this.calcMax() || value < this.calcMin();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdragstart: function (sender, event) {\r\n\t\tif (this.shouldDrag(event)) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.$.animator.stop();\r\n\t\t\tevent.dragInfo = {};\r\n\t\t\tthis.dragging = true;\r\n\t\t\tthis.drag0 = this.value;\r\n\t\t\tthis.dragd0 = 0;\r\n\t\t\treturn this.preventDragPropagation;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Updates [value]{@link module:layout/Slideable~Slideable#value} during a drag and determines the\r\n\t* direction of the drag.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdrag: function (sender, event) {\r\n\t\tif (this.dragging) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tvar d = this.canTransform ? event[this.dragMoveProp] * this.kDragScalar : this.pixelsToPercent(event[this.dragMoveProp]);\r\n\t\t\tvar v = this.drag0 + d;\r\n\t\t\tvar dd = d - this.dragd0;\r\n\t\t\tthis.dragd0 = d;\r\n\t\t\tif (dd) {\r\n\t\t\t\tevent.dragInfo.minimizing = dd < 0;\r\n\t\t\t}\r\n\t\t\tthis.setValue(v);\r\n\t\t\treturn this.preventDragPropagation;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdragfinish: function (sender, event) {\r\n\t\tif (this.dragging) {\r\n\t\t\tthis.dragging = false;\r\n\t\t\tthis.completeDrag(event);\r\n\t\t\tevent.preventTap();\r\n\t\t\treturn this.preventDragPropagation;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Animates the control to either the [min]{@link module:layout/Slideable~Slideable#min} or\r\n\t* [max]{@link module:layout/Slideable~Slideable#max} value when dragging completes, based on the\r\n\t* direction of the drag (determined in [drag()]{@link module:layout/Slideable~Slideable#drag}).\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcompleteDrag: function (event) {\r\n\t\tif (this.value !== this.calcMax() && this.value != this.calcMin()) {\r\n\t\t\tthis.animateToMinMax(event.dragInfo.minimizing);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tisAnimating: function () {\r\n\t\treturn this.$.animator.isAnimating();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tplay: function (start, end) {\r\n\t\tthis.$.animator.play({\r\n\t\t\tstartValue: start,\r\n\t\t\tendValue: end,\r\n\t\t\tnode: this.hasNode()\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t* Animates to the given value.\r\n\t*\r\n\t* @param   {Number} value - The value to animate to.\r\n\t* @public\r\n\t*/\r\n\tanimateTo: function (value) {\r\n\t\tthis.play(this.value, value);\r\n\t},\r\n\r\n\t/**\r\n\t* Animates to the [minimum]{@link module:layout/Slideable~Slideable#min} value.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tanimateToMin: function () {\r\n\t\tthis.animateTo(this.calcMin());\r\n\t},\r\n\r\n\t/**\r\n\t* Animates to the [maximum]{@link module:layout/Slideable~Slideable#max} value.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tanimateToMax: function () {\r\n\t\tthis.animateTo(this.calcMax());\r\n\t},\r\n\r\n\t/**\r\n\t* Helper method to toggle animation to either the [min]{@link module:layout/Slideable~Slideable#min}\r\n\t* or [max]{@link module:layout/Slideable~Slideable#max} value.\r\n\t*\r\n\t* @param  {Boolean} min - Whether to animate to the minimum value.\r\n\t* @private\r\n\t*/\r\n\tanimateToMinMax: function (min) {\r\n\t\tif (min) {\r\n\t\t\tthis.animateToMin();\r\n\t\t} else {\r\n\t\t\tthis.animateToMax();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Updates the [value]{@link module:layout/Slideable~Slideable#value} property during animation.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tanimatorStep: function (sender) {\r\n\t\tthis.setValue(sender.value);\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:layout/Slideable~Slideable#onAnimateFinish\r\n\t* @private\r\n\t*/\r\n\tanimatorComplete: function (sender) {\r\n\t\tthis.doAnimateFinish(sender);\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* Toggles animation to either the [min]{@link module:layout/Slideable~Slideable#min} or\r\n\t* [max]{@link module:layout/Slideable~Slideable#max} value.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\ttoggleMinMax: function () {\r\n\t\tthis.animateToMinMax(!this.isAtMin());\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/FittableColumns~FittableColumns} kind.\r\n* @module layout/FittableColumns\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tFittableLayout = require('./FittableLayout'),\r\n\tFittableColumnsLayout = FittableLayout.Columns;\r\n\r\n/**\r\n* {@link module:layout/FittableColumns~FittableColumns} provides a container in which items are laid out in a\r\n* set of vertical columns, with most items having natural size, but one\r\n* expanding to fill the remaining space. The one that expands is labeled with\r\n* the attribute `fit: true`.\r\n*\r\n* For more information, see the documentation on\r\n* [Fittables]{@linkplain $dev-guide/building-apps/layout/fittables.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class FittableColumns\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(/** @lends module:layout/FittableColumns~FittableColumns.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.FittableColumns',\r\n\r\n\t/**\r\n\t* A {@glossary kind} used to manage the size and placement of child\r\n\t* [components]{@link module:enyo/Component~Component}.\r\n\t*\r\n\t* @type {String}\r\n\t* @default ''\r\n\t* @private\r\n\t*/\r\n\tlayoutKind: FittableColumnsLayout,\r\n\r\n\t/**\r\n\t* By default, items in columns stretch to fit vertically; set to `true` to\r\n\t* avoid this behavior.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tnoStretch: false\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/FittableRows~FittableRows} kind.\r\n* @module layout/FittableRows\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind')\t;\r\n\r\nvar\r\n\tFittableLayout = require('./FittableLayout'),\r\n\tFittableRowsLayout = FittableLayout.Rows;\r\n\r\n/**\r\n* {@link module:layout/FittableRows~FittableRows} provides a container in which items are laid out in a\r\n* set\tof horizontal rows, with most of the items having natural size, but one\r\n* expanding to fill the remaining space. The one that expands is labeled with\r\n* the attribute `fit: true`.\r\n*\r\n* For more information, see the documentation on\r\n* [Fittables]{@linkplain $dev-guide/building-apps/layout/fittables.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class FittableRows\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(/** @lends module:layout/FittableRows~FittableRows.prototype */{\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.FittableRows',\r\n\r\n\t/**\r\n\t* A {@glossary kind} used to manage the size and placement of child\r\n\t* [components]{@link module:enyo/Component~Component}.\r\n\t*\r\n\t* @type {String}\r\n\t* @default ''\r\n\t* @private\r\n\t*/\r\n\tlayoutKind: FittableRowsLayout,\r\n\r\n\t/**\r\n\t* By default, items in columns stretch to fit horizontally; set to `true` to\r\n\t* avoid this behavior.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tnoStretch: false\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/FittableHeaderLayout~FittableHeaderLayout} kind.\r\n* @module layout/FittableHeaderLayout\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tFittableLayout = require('./FittableLayout'),\r\n\tFittableColumnsLayout = FittableLayout.Columns;\r\n\r\n/**\r\n* {@link module:layout/FittableHeaderLayout~FittableHeaderLayout} extends {@link module:layout/FittableLayout~FittableColumnsLayout},\r\n* providing a container in which items are laid out in a set of vertical columns,\r\n* with most items having natural size, but one expanding to fill the remaining\r\n* space. The one that expands is labeled with the attribute `fit: true`.\r\n*\r\n* For more information, see the documentation on\r\n* [Fittables]{@linkplain $dev-guide/building-apps/layout/fittables.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class FittableHeaderLayout\r\n* @extends module:layout/FittableColumnsLayout~FittableColumnsLayout\r\n* @public\r\n*/\r\nmodule.exports = kind(/** @lends module:layout/FittableHeaderLayout~FittableHeaderLayout.prototype */{\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.FittableHeaderLayout',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: FittableColumnsLayout,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tapplyFitSize: function(measure, total, before, after) {\r\n\t\tvar padding = before - after;\r\n\t\tvar f = this.getFitControl();\r\n\r\n\t\tif (padding < 0) {\r\n\t\t\tf.applyStyle('padding-left', Math.abs(padding) + 'px');\r\n\t\t\tf.applyStyle('padding-right', null);\r\n\t\t} else if (padding > 0) {\r\n\t\t\tf.applyStyle('padding-left', null);\r\n\t\t\tf.applyStyle('padding-right', Math.abs(padding) + 'px');\r\n\t\t} else {\r\n\t\t\tf.applyStyle('padding-left', null);\r\n\t\t\tf.applyStyle('padding-right', null);\r\n\t\t}\r\n\r\n\t\tFittableColumnsLayout.prototype.applyFitSize.apply(this, arguments);\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/Node~Node} kind.\r\n* @module layout/Node\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tControl = require('enyo/Control'),\r\n\tImg = require('enyo/Image');\r\n\r\n/**\r\n* Fires when the Node is tapped. No additional data is sent with this event.\r\n*\r\n* @event module:layout/Node~Node#onNodeTap\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when the Node is double-clicked. No additional data is sent with this event.\r\n*\r\n* @event module:layout/Node~Node#onNodeDblClick\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when the Node expands or contracts, as indicated by the\r\n* `expanded` property in the event data.\r\n*\r\n* @event module:layout/Node~Node#onExpand\r\n* @type {Object}\r\n* @property {Boolean} expanded - `true` if the node is currently expanded;\r\n* otherwise, `false`.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when the Node is destroyed. No additional data is sent with this event.\r\n*\r\n* @event module:layout/Node~Node#onDestroyed\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:layout/Node~Node} is a control that creates structured trees based on Enyo's child\r\n* component hierarchy format, e.g.:\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tNode = require('layout/Node');\r\n*\r\n* \t{kind: Node, icon: 'layout/src/assets/folder-open.png', content: 'Tree',\r\n* \t\texpandable: true, expanded: true, components: [\r\n* \t\t\t{icon: 'layout/src/assets/file.png', content: 'Alpha'},\r\n* \t\t\t{icon: 'layout/src/assets/folder-open.png', content: 'Bravo',\r\n* \t\t\t\texpandable: true, expanded: false, components: [\r\n* \t\t\t\t\t{icon: 'layout/src/assets/file.png', content: 'Bravo-Alpha'},\r\n* \t\t\t\t\t{icon: 'layout/src/assets/file.png', content: 'Bravo-Bravo'},\r\n* \t\t\t\t\t{icon: 'layout/src/assets/file.png', content: 'Bravo-Charlie'}\r\n* \t\t\t\t\t]\r\n* \t\t\t\t]\r\n* \t\t\t}\r\n* \t\t]\r\n* \t}\r\n* ```\r\n*\r\n* The default kind of components within a node is itself {@link module:layout/Node~Node}, so only\r\n* the top-level node of the tree needs to be explicitly defined as such.\r\n*\r\n* When an expandable tree node expands, an [onExpand]{@link module:layout/Node~Node#onExpand}\r\n* event is sent; when it is tapped, an [onNodeTap]{@link module:layout/Node~Node#onNodeTap}\r\n* event is sent.\r\n*\r\n* When the optional [onlyIconExpands]{@link module:layout/Node~Node#onlyIconExpands} property is\r\n* set to `true`, expandable nodes may only be opened by tapping the icon; tapping the\r\n* content label will fire the `onNodeTap` event, but will not expand the node.\r\n*\r\n* @class Node\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nvar TreeNode = module.exports = kind(\r\n\t/** @lends module:layout/Node~Node.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.Node',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @lends module:layout/Node~Node.prototype\r\n\t* @private\r\n\t*/\r\n\tpublished: {\r\n\t\t/***\r\n\t\t* Indicates whether the Node is expandable and has child branches.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default  false\r\n\t\t* @public\r\n\t\t*/\r\n\t\texpandable: false,\r\n\r\n\t\t/**\r\n\t\t* Indicates whether the Node is currently expanded (open).\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default  false\r\n\t\t* @public\r\n\t\t*/\r\n\t\texpanded: false,\r\n\r\n\t\t/**\r\n\t\t* Path to an image to be used as the icon for this Node.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default  ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\ticon: '',\r\n\r\n\t\t/**\r\n\t\t* Optional flag that, when `true`, causes the Node to expand only when\r\n\t\t* the icon is tapped (not when the contents are tapped).\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t*/\r\n\t\tonlyIconExpands: false,\r\n\r\n\t\t/**\r\n\t\t* If `true`, adds the `'enyo-selected'` CSS class; changing value from `true`\r\n\t\t* to `false` removes the class.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default  false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tselected: false\r\n\t},\r\n\r\n\t/**\r\n\t* @todo remove inline styles\r\n\t* @private\r\n\t*/\r\n\tstyle: 'padding: 0 0 0 16px;',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontent: 'Node',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdefaultKind: null, // set after the fact\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'enyo-node',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'icon', kind: Img, showing: false},\r\n\t\t{name: 'caption', kind: Control, Xtag: 'span', style: 'display: inline-block; padding: 4px;', allowHtml: true},\r\n\t\t{name: 'extra', kind: Control, tag: 'span', allowHtml: true}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tchildClient: [\r\n\t\t{name: 'box', kind: Control, classes: 'enyo-node-box', Xstyle: 'border: 1px solid orange;', components: [\r\n\t\t\t{name: 'client', kind: Control, classes: 'enyo-node-client', Xstyle: 'border: 1px solid lightblue;'}\r\n\t\t]}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tondblclick: 'dblclick'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonNodeTap: 'nodeTap',\r\n\t\tonNodeDblClick: 'nodeDblClick',\r\n\t\tonExpand: 'nodeExpand',\r\n\t\tonDestroyed: 'nodeDestroyed'\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\t//this.expandedChanged();\r\n\t\t\t//this.levelChanged();\r\n\t\t\tthis.selectedChanged();\r\n\t\t\tthis.iconChanged();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @fires module:layout/Node~Node#onDestroyed\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tthis.doDestroyed();\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tinitComponents: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\t// TODO: optimize to create the childClient on demand\r\n\t\t\t//this.hasChildren = this.components;\r\n\t\t\tif (this.expandable) {\r\n\t\t\t\tthis.kindComponents = this.kindComponents.concat(this.childClient);\r\n\t\t\t}\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontentChanged: function () {\r\n\t\t//this.$.caption.setContent((this.expandable ? (this.expanded ? '-' : '+') : '') + this.content);\r\n\t\tthis.$.caption.setContent(this.content);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ticonChanged: function () {\r\n\t\tthis.$.icon.setSrc(this.icon);\r\n\t\tthis.$.icon.setShowing(Boolean(this.icon));\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tselectedChanged: function () {\r\n\t\tthis.addRemoveClass('enyo-selected', this.selected);\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\trendered: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tif (this.expandable && !this.expanded) {\r\n\t\t\t\tthis.quickCollapse();\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Adds nodes as children of this control.\r\n\t*\r\n\t* @param {Object[]} nodes - An array of component configurations.\r\n\t* @public\r\n\t*/\r\n\taddNodes: function (nodes) {\r\n\t\tthis.destroyClientControls();\r\n\t\tfor (var i=0, n; (n=nodes[i]); i++) {\r\n\t\t\tthis.createComponent(n);\r\n\t\t}\r\n\t\tthis.$.client.render();\r\n\t},\r\n\r\n\t/**\r\n\t* Adds new Nodes as children of this Node; each value in the `nodes` array\r\n\t* becomes the content of a new child Node.\r\n\t*\r\n\t* @param {String[]} nodes - An array of strings.\r\n\t* @public\r\n\t*/\r\n\taddTextNodes: function (nodes) {\r\n\t\tthis.destroyClientControls();\r\n\t\tfor (var i=0, n; (n=nodes[i]); i++) {\r\n\t\t\tthis.createComponent({content: n});\r\n\t\t}\r\n\t\tthis.$.client.render();\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:layout/Node~Node#onNodeTap\r\n\t* @private\r\n\t*/\r\n\ttap: function (sender, event) {\r\n\t\tif(!this.onlyIconExpands) {\r\n\t\t\tthis.toggleExpanded();\r\n\t\t\tthis.doNodeTap();\r\n\t\t} else {\r\n\t\t\tif((event.target==this.$.icon.hasNode())) {\r\n\t\t\t\tthis.toggleExpanded();\r\n\t\t\t} else {\r\n\t\t\t\tthis.doNodeTap();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:layout/Node~Node#onNodeDblClick\r\n\t* @private\r\n\t*/\r\n\tdblclick: function (sender, event) {\r\n\t\tthis.doNodeDblClick();\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* Toggles the value of [expanded]{@link module:layout/Node~Node#expanded}.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\ttoggleExpanded: function () {\r\n\t\tthis.setExpanded(!this.expanded);\r\n\t},\r\n\r\n\t/**\r\n\t* Immediately collapses the control's children.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tquickCollapse: function () {\r\n\t\tthis.removeClass('enyo-animate');\r\n\t\tthis.$.box.applyStyle('height', '0');\r\n\t\tvar h = this.$.client.getBounds().height;\r\n\t\tthis.$.client.setBounds({top: -h});\r\n\t},\r\n\r\n\t/**\r\n\t* Animates the expansion (using CSS transitions).\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_expand: function () {\r\n\t\tthis.addClass('enyo-animate');\r\n\t\tvar h = this.$.client.getBounds().height;\r\n\t\tthis.$.box.setBounds({height: h});\r\n\t\tthis.$.client.setBounds({top: 0});\r\n\t\tsetTimeout(this.bindSafely(function () {\r\n\t\t\t// things may have happened in the interim, make sure\r\n\t\t\t// we only fix height if we are still expanded\r\n\t\t\tif (this.expanded) {\r\n\t\t\t\tthis.removeClass('enyo-animate');\r\n\t\t\t\tthis.$.box.applyStyle('height', 'auto');\r\n\t\t\t}\r\n\t\t}), 225);\r\n\t},\r\n\r\n\t/**\r\n\t* Animates the collapsing (using CSS transitions).\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_collapse: function () {\r\n\t\t// disable transitions\r\n\t\tthis.removeClass('enyo-animate');\r\n\t\t// fix the height of our box (rather than 'auto'), this\r\n\t\t// gives webkit something to lerp from\r\n\t\tvar h = this.$.client.getBounds().height;\r\n\t\tthis.$.box.setBounds({height: h});\r\n\t\t// yield the thead so DOM can make those changes (without transitions)\r\n\t\tsetTimeout(this.bindSafely(function () {\r\n\t\t\t// enable transitions\r\n\t\t\tthis.addClass('enyo-animate');\r\n\t\t\t// shrink our box to 0\r\n\t\t\tthis.$.box.applyStyle('height', '0');\r\n\t\t\t// slide the contents up\r\n\t\t\tthis.$.client.setBounds({top: -h});\r\n\t\t}), 25);\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:layout/Node~Node#onExpand\r\n\t* @private\r\n\t*/\r\n\texpandedChanged: function (old) {\r\n\t\tif (!this.expandable) {\r\n\t\t\tthis.expanded = false;\r\n\t\t} else {\r\n\t\t\tvar event = {expanded: this.expanded};\r\n\t\t\tthis.doExpand(event);\r\n\t\t\tif (!event.wait) {\r\n\t\t\t\tthis.effectExpanded();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\teffectExpanded: function () {\r\n\t\tif (this.$.client) {\r\n\t\t\tif (!this.expanded) {\r\n\t\t\t\tthis._collapse();\r\n\t\t\t} else {\r\n\t\t\t\tthis._expand();\r\n\t\t\t}\r\n\t\t}\r\n\t\t//this.contentChanged();\r\n\t}\r\n});\r\n\r\nTreeNode.prototype.defaultKind = TreeNode;\r\n","/**\r\n* Contains the declaration for the {@link module:layout/PanZoomView~PanZoomView} kind.\r\n* @module layout/PanZoomView\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom'),\r\n\tutils = require('enyo/utils'),\r\n\tAnimator = require('enyo/Animator'),\r\n\tScroller = require('enyo/Scroller');\r\n\r\n/**\r\n* Fires whenever the user adjusts the zoom via double-tap/double-click, mousewheel,\r\n* or pinch-zoom.\r\n*\r\n* @event module:layout/PanZoomView~PanZoomView#onZoom\r\n* @type {Object}\r\n* @property {Number} scale - The new scaling factor.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires after a zoom to notify children to position non-zooming controls.\r\n*\r\n* @event module:layout/PanZoomView~PanZoomView#onPositionPin\r\n* @type {Object}\r\n* @property {Numer} scale   - The new scaling factor.\r\n* @property {Object} bounds - An object containing the current viewport bounds.\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:layout/PanZoomView~PanZoomView} is a control that displays arbitrary content at a given\r\n* scaling factor, with enhanced support for double-tap/double-click to zoom,\r\n* panning, mousewheel zooming and pinch-zoom (on touchscreen devices that\r\n* support it).\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tPanZoomView = require('layout/PanZoomView');\r\n*\r\n* \t{kind: PanZoomView, scale: 'auto', contentWidth: 500, contentHeight: 500,\r\n* \t\tstyle: 'width: 500px; height: 400px;',\r\n* \t\tcomponents: [{content: 'Hello World'}]\r\n* \t}\r\n* ```\r\n*\r\n* An [onZoom]{@link module:layout/PanZoomView~PanZoomView#onZoom} event is triggered when the\r\n* user changes the zoom level.\r\n*\r\n* If you wish, you may add {@link module:enyo/ScrollThumb~ScrollThumb} indicators, disable zoom\r\n* animation, allow panning overscroll (with a bounce-back effect), and control\r\n* the propagation of drag events, all via Boolean properties.\r\n*\r\n* For the PanZoomView to work, you must either specify the width and height of\r\n* the scaled content (via the `contentWidth` and `contentHeight` properties) or\r\n* bubble an `onSetDimensions` event from one of the underlying components.\r\n*\r\n* Note that it's best to specify a size for the PanZoomView in order to avoid\r\n* complications.\r\n*\r\n* @class PanZoomView\r\n* @extends module:enyo/Scroller~Scroller\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:layout/PanZoomView~PanZoomView.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.PanZoomView',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Scroller,\r\n\r\n\t/**\r\n\t* If `true`, allows overscrolling during panning, with a bounce-back effect.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @see {@link module:enyo/Scroller~Scroller#touchOverscroll}\r\n\t* @public\r\n\t*/\r\n\ttouchOverscroll: false,\r\n\r\n\t/**\r\n\t* If `true`, a ScrollThumb is used to indicate scroll position/bounds.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @see {@link module:enyo/Scroller~Scroller#thumb}\r\n\t* @public\r\n\t*/\r\n\tthumb: false,\r\n\r\n\t/**\r\n\t* If `true` (the default), animates the zoom action triggered by a double-tap\r\n\t* (or double-click).\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @see {@link module:enyo/Scroller~Scroller#animate}\r\n\t* @public\r\n\t*/\r\n\tanimate: true,\r\n\r\n\t/**\r\n\t* If `true` (the default), allows propagation of vertical drag events when\r\n\t* already at the top or bottom of the pannable area.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @see {@link module:enyo/Scroller~Scroller#verticalDragPropagation}\r\n\t* @public\r\n\t*/\r\n\tverticalDragPropagation: true,\r\n\r\n\t/**\r\n\t* If `true` (the default), allows propagation of horizontal drag events when\r\n\t* already at the left or right edge of the pannable area.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @see {@link module:enyo/Scroller~Scroller#horizontalDragPropagation}\r\n\t* @public\r\n\t*/\r\n\thorizontalDragPropagation: true,\r\n\r\n\t/**\r\n\t* @lends module:layout/PanZoomViews~PanZoomViews.prototype\r\n\t* @public\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* The scale at which the content should be displayed. This may be any\r\n\t\t* positive numeric value or one of the following key words (which will\r\n\t\t* be resolved to a value dynamically):\r\n\t\t*\r\n\t\t* * `'auto'`: Fits the content to the size of the PanZoomView.\r\n\t\t* * `'width'`: Fits the content to the width of the PanZoomView.\r\n\t\t* * `'height'`: Fits the content to the height of the PanZoomView.\r\n\t\t* * `'fit'`: Fits the content to the height and width of the PanZoomView; the\r\n\t\t* \toverflow of the larger dimension is cropped and the content is centered\r\n\t\t* \talong that axis.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'auto'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tscale: 'auto',\r\n\r\n\t\t/**\r\n\t\t* If `true`, zoom functionality is disabled.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdisableZoom: false,\r\n\r\n\t\t/**\r\n\t\t* Width of the scaled content.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default null\r\n\t\t* @private\r\n\t\t*/\r\n\t\tcontentWidth: null,\r\n\r\n\t\t/**\r\n\t\t* Height of the scaled content.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcontentHeight: null\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonZoom: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttouch: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpreventDragPropagation: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tondragstart: 'dragPropagation',\r\n\t\tonSetDimensions: 'setDimensions'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'animator', kind: Animator, onStep: 'zoomAnimationStep', onEnd: 'zoomAnimationEnd'},\r\n\t\t{name: 'viewport', style: 'overflow:hidden;min-height:100%;min-width:100%;', classes: 'enyo-fit', ongesturechange: 'gestureTransform', ongestureend: 'saveState', ontap: 'singleTap', onmousewheel: 'mousewheel', ondown: 'handleDown', components: [\r\n\t\t\t{name: 'content'}\r\n\t\t]}\r\n\t],\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\t// remember scale keyword\r\n\t\tthis.scaleKeyword = this.scale;\r\n\r\n\t\t// Cache instance components\r\n\t\tvar instanceComponents = this.components;\r\n\t\tthis.components = [];\r\n\t\tScroller.prototype.create.apply(this, arguments);\r\n\t\tthis.$.content.applyStyle('width', this.contentWidth + 'px');\r\n\t\tthis.$.content.applyStyle('height', this.contentHeight + 'px');\r\n\r\n\t\tif (this.unscaledComponents){\r\n\t\t\tvar owner = this.hasOwnProperty('unscaledComponents') ? this.getInstanceOwner() : this;\r\n\t\t\tthis.createComponents(this.unscaledComponents, {owner: owner});\r\n\t\t}\r\n\r\n\t\t// Change controlParentName so PanZoomView instance components are created into viewport\r\n\t\tthis.controlParentName = 'content';\r\n\t\tthis.discoverControlParent();\r\n\t\tthis.createComponents(instanceComponents);\r\n\r\n\t\tthis.canTransform = dom.canTransform();\r\n\t\tif (!this.canTransform) {\r\n\t\t\tthis.$.content.applyStyle('position', 'relative');\r\n\t\t}\r\n\t\tthis.canAccelerate = dom.canAccelerate();\r\n\r\n\t\t//\tFor panzoomview, disable drags during gesture (to fix flicker: ENYO-1208)\r\n\t\tthis.getStrategy().setDragDuringGesture(false);\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\trendered: function () {\r\n\t\tScroller.prototype.rendered.apply(this, arguments);\r\n\t\tthis.getOriginalScale();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdragPropagation: function (sender, event) {\r\n\t\t// Propagate drag events at the edges of the content as desired by the\r\n\t\t// verticalDragPropagation and horizontalDragPropagation properties\r\n\t\tvar bounds = this.getStrategy().getScrollBounds();\r\n\t\tvar verticalEdge = ((bounds.top===0 && event.dy>0) || (bounds.top>=bounds.maxTop-2 && event.dy<0));\r\n\t\tvar horizontalEdge = ((bounds.left===0 && event.dx>0) || (bounds.left>=bounds.maxLeft-2 && event.dx<0));\r\n\t\treturn !((verticalEdge && this.verticalDragPropagation) || (horizontalEdge && this.horizontalDragPropagation));\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmousewheel: function (sender, event) {\r\n\t\tevent.pageX |= (event.clientX + event.target.scrollLeft);\r\n\t\tevent.pageY |= (event.clientY + event.target.scrollTop);\r\n\t\tvar zoomInc = (this.maxScale - this.minScale)/10;\r\n\t\tvar oldScale = this.scale;\r\n\t\tif ((event.wheelDelta > 0) || (event.detail < 0)) { //zoom in\r\n\t\t\tthis.scale = this.limitScale(this.scale + zoomInc);\r\n\t\t} else if ((event.wheelDelta < 0) || (event.detail > 0)) { //zoom out\r\n\t\t\tthis.scale = this.limitScale(this.scale - zoomInc);\r\n\t\t}\r\n\t\tthis.eventPt = this.calcEventLocation(event);\r\n\t\tthis.transform(this.scale);\r\n\t\tif (oldScale != this.scale) {\r\n\t\t\tthis.doZoom({scale:this.scale});\r\n\t\t}\r\n\t\tthis.ratioX = this.ratioY = null;\r\n\t\t// Prevent default scroll wheel action and prevent event from bubbling up to to touch scroller\r\n\t\tevent.preventDefault();\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* Ensure that hold is canceled onMove (vs onLeave) so drag event occur as expected\r\n\t*\r\n\t* @private\r\n\t*/\r\n\thandleDown: function (sender, event) {\r\n\t\tevent.configureHoldPulse({\r\n\t\t\tendHold: 'onMove'\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\thandleResize: function () {\r\n\t\tScroller.prototype.handleResize.apply(this, arguments);\r\n\t\tthis.scaleChanged();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetDimensions: function (sender, event) {\r\n\t\tthis.$.content.applyStyle('width', event.width + 'px');\r\n\t\tthis.$.content.applyStyle('height', event.height + 'px');\r\n\t\tthis.originalWidth = event.width;\r\n\t\tthis.originalHeight = event.height;\r\n\t\tthis.scale = this.scaleKeyword;\r\n\t\tthis.scaleChanged();\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* Caches the initial height and width of the component (in `originalHeight`\r\n\t* and `originalWidth`, respectively) at render time.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgetOriginalScale : function () {\r\n\t\tif (this.$.content.hasNode()){\r\n\t\t\tthis.originalWidth  = this.$.content.node.clientWidth;\r\n\t\t\tthis.originalHeight = this.$.content.node.clientHeight;\r\n\t\t\tthis.scale = this.scaleKeyword;\r\n\t\t\tthis.scaleChanged();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Calculates the `minScale` and `maxScale` and zooms the content according to the\r\n\t* clamped scale value.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tscaleChanged: function () {\r\n\t\tvar containerNode = this.hasNode();\r\n\t\tif (containerNode) {\r\n\t\t\tthis.containerWidth = containerNode.clientWidth;\r\n\t\t\tthis.containerHeight = containerNode.clientHeight;\r\n\t\t\tvar widthScale = this.containerWidth / this.originalWidth;\r\n\t\t\tvar heightScale = this.containerHeight / this.originalHeight;\r\n\t\t\tthis.minScale = Math.min(widthScale, heightScale);\r\n\t\t\tthis.maxScale = (this.minScale*3 < 1) ? 1 : this.minScale*3;\r\n\t\t\t//resolve any keyword scale values to solid numeric values\r\n\t\t\tif (this.scale == 'auto') {\r\n\t\t\t\tthis.scale = this.minScale;\r\n\t\t\t} else if (this.scale == 'width') {\r\n\t\t\t\tthis.scale = widthScale;\r\n\t\t\t} else if (this.scale == 'height') {\r\n\t\t\t\tthis.scale = heightScale;\r\n\t\t\t} else if (this.scale == 'fit') {\r\n\t\t\t\tthis.fitAlignment = 'center';\r\n\t\t\t\tthis.scale = Math.max(widthScale, heightScale);\r\n\t\t\t} else {\r\n\t\t\t\tthis.maxScale = Math.max(this.maxScale, this.scale);\r\n\t\t\t\tthis.scale = this.limitScale(this.scale);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.eventPt = this.calcEventLocation();\r\n\t\tthis.transform(this.scale);\r\n\t\t// start scroller\r\n\t\tif (this.getStrategy().$.scrollMath) {\r\n\t\t\tthis.getStrategy().$.scrollMath.start();\r\n\t\t}\r\n\t\tthis.align();\r\n\t},\r\n\r\n\t/**\r\n\t* Centers the content in the scroller.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\talign: function () {\r\n\t\tif (this.fitAlignment && this.fitAlignment === 'center') {\r\n\t\t\tvar sb = this.getScrollBounds();\r\n\t\t\tthis.setScrollLeft(sb.maxLeft / 2);\r\n\t\t\tthis.setScrollTop(sb.maxTop / 2);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgestureTransform: function (sender, event) {\r\n\t\tthis.eventPt = this.calcEventLocation(event);\r\n\t\tthis.transform(this.limitScale(this.scale * event.scale));\r\n\t},\r\n\r\n\t/**\r\n\t* Determines the target coordinates on the PanZoomView from an event.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcalcEventLocation: function (event) {\r\n\t\tvar eventPt = {x: 0, y:0};\r\n\t\tif (event && this.hasNode()) {\r\n\t\t\tvar rect = this.node.getBoundingClientRect();\r\n\t\t\teventPt.x = Math.round((event.pageX - rect.left) - this.bounds.x);\r\n\t\t\teventPt.x = Math.max(0, Math.min(this.bounds.width, eventPt.x));\r\n\t\t\teventPt.y = Math.round((event.pageY - rect.top) - this.bounds.y);\r\n\t\t\teventPt.y = Math.max(0, Math.min(this.bounds.height, eventPt.y));\r\n\t\t}\r\n\t\treturn eventPt;\r\n\t},\r\n\r\n\t/**\r\n\t* Scales the content.\r\n\t*\r\n\t* @param {Number} scale - The scaling factor.\r\n\t* @private\r\n\t*/\r\n\ttransform: function (scale) {\r\n\t\tthis.tapped = false;\r\n\r\n\t\tvar prevBounds = this.bounds || this.innerBounds(scale);\r\n\t\tthis.bounds = this.innerBounds(scale);\r\n\r\n\t\t//style cursor if needed to indicate the content is movable\r\n\t\tif (this.scale>this.minScale) {\r\n\t\t\tthis.$.viewport.applyStyle('cursor', 'move');\r\n\t\t} else {\r\n\t\t\tthis.$.viewport.applyStyle('cursor', null);\r\n\t\t}\r\n\t\tthis.$.viewport.setBounds({width: this.bounds.width + 'px', height: this.bounds.height + 'px'});\r\n\r\n\t\t//determine the exact ratio where on the content was tapped\r\n\t\tthis.ratioX = this.ratioX || (this.eventPt.x + this.getScrollLeft()) / prevBounds.width;\r\n\t\tthis.ratioY = this.ratioY || (this.eventPt.y + this.getScrollTop()) / prevBounds.height;\r\n\t\tvar scrollLeft, scrollTop;\r\n\t\tif (this.$.animator.ratioLock) { //locked for smartzoom\r\n\t\t\tscrollLeft = (this.$.animator.ratioLock.x * this.bounds.width) - (this.containerWidth / 2);\r\n\t\t\tscrollTop = (this.$.animator.ratioLock.y * this.bounds.height) - (this.containerHeight / 2);\r\n\t\t} else {\r\n\t\t\tscrollLeft = (this.ratioX * this.bounds.width) - this.eventPt.x;\r\n\t\t\tscrollTop = (this.ratioY * this.bounds.height) - this.eventPt.y;\r\n\t\t}\r\n\t\tscrollLeft = Math.max(0, Math.min((this.bounds.width - this.containerWidth), scrollLeft));\r\n\t\tscrollTop = Math.max(0, Math.min((this.bounds.height - this.containerHeight), scrollTop));\r\n\r\n\t\tif (this.canTransform) {\r\n\t\t\tvar params = {scale: scale};\r\n\t\t\t// translate needs to be first, or scale and rotation will not be in the correct spot\r\n\t\t\tif (this.canAccelerate) {\r\n\t\t\t\t//translate3d rounded values to avoid distortion; ref: http://martinkool.com/post/27618832225/beware-of-half-pixels-in-css\r\n\t\t\t\tparams = utils.mixin({translate3d: Math.round(this.bounds.left) + 'px, ' + Math.round(this.bounds.top) + 'px, 0px'}, params);\r\n\t\t\t} else {\r\n\t\t\t\tparams = utils.mixin({translate: this.bounds.left + 'px, ' + this.bounds.top + 'px'}, params);\r\n\t\t\t}\r\n\t\t\tdom.transform(this.$.content, params);\r\n\t\t} else {\r\n\t\t\t// ...no transforms means there's nothin' I can do.\r\n\t\t}\r\n\r\n\t\t//adjust scroller to new position that keeps ratio with the new content size\r\n\t\tthis.setScrollLeft(scrollLeft);\r\n\t\tthis.setScrollTop(scrollTop);\r\n\r\n\t\tthis.positionClientControls(scale);\r\n\r\n\t\t//this.stabilize();\r\n\t},\r\n\r\n\t/**\r\n\t* Clamps the scaling factor between `minScale` and `maxScale`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tlimitScale: function (scale) {\r\n\t\tif (this.disableZoom) {\r\n\t\t\tscale = this.scale;\r\n\t\t} else if (scale > this.maxScale) {\r\n\t\t\tscale = this.maxScale;\r\n\t\t} else if (scale < this.minScale) {\r\n\t\t\tscale = this.minScale;\r\n\t\t}\r\n\t\treturn scale;\r\n\t},\r\n\r\n\t/**\r\n\t* Calculates the offsets for the content for the given scaling factor.\r\n\t*\r\n\t* @param {Number} scale - The scaling factor.\r\n\t* @return {Object}      - Object containing offsets for content (in its `left`, `top`,\r\n\t* `width`, `height`, `x`, and `y` properties).\r\n\t* @private\r\n\t*/\r\n\tinnerBounds: function (scale) {\r\n\t\tvar width = this.originalWidth * scale;\r\n\t\tvar height = this.originalHeight * scale;\r\n\t\tvar offset = {x:0, y:0, transX:0, transY:0};\r\n\t\tif (width < this.containerWidth) {\r\n\t\t\toffset.x += (this.containerWidth - width)/2;\r\n\t\t}\r\n\t\tif (height < this.containerHeight) {\r\n\t\t\toffset.y += (this.containerHeight - height)/2;\r\n\t\t}\r\n\t\tif (this.canTransform) { //adjust for the css translate, which doesn't alter content offsetWidth and offsetHeight\r\n\t\t\toffset.transX -= (this.originalWidth - width)/2;\r\n\t\t\toffset.transY -= (this.originalHeight - height)/2;\r\n\t\t}\r\n\t\treturn {left:offset.x + offset.transX, top:offset.y + offset.transY, width:width, height:height, x:offset.x, y:offset.y};\r\n\t},\r\n\r\n\t/**\r\n\t* Persists the scaling factor when a gesture finishes.\r\n\t*\r\n\t* @fires module:layout/PanZoomView~PanZoomView#onZoom\r\n\t* @private\r\n\t*/\r\n\tsaveState: function (sender, event) {\r\n\t\tvar oldScale = this.scale;\r\n\t\tthis.scale *= event.scale;\r\n\t\tthis.scale = this.limitScale(this.scale);\r\n\t\tif (oldScale != this.scale) {\r\n\t\t\tthis.doZoom({scale:this.scale});\r\n\t\t}\r\n\t\tthis.ratioX = this.ratioY = null;\r\n\t},\r\n\r\n\t/**\r\n\t* Simulates double-tap by watching for two taps within 300ms of each other.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsingleTap: function (sender, event) {\r\n\t\tsetTimeout(this.bindSafely(function () {\r\n\t\t\tthis.tapped = false;\r\n\t\t}), 300);\r\n\t\tif (this.tapped) { //dbltap\r\n\t\t\tthis.tapped = false;\r\n\t\t\tthis.smartZoom(sender, event);\r\n\t\t} else {\r\n\t\t\tthis.tapped = true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Zooms at the event location.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsmartZoom: function (sender, event) {\r\n\t\tvar containerNode = this.hasNode();\r\n\t\tvar imgNode = this.$.content.hasNode();\r\n\t\tif (containerNode && imgNode && this.hasNode() && !this.disableZoom) {\r\n\t\t\tvar prevScale = this.scale;\r\n\t\t\tif (this.scale != this.minScale) { //zoom out\r\n\t\t\t\tthis.scale = this.minScale;\r\n\t\t\t} else { //zoom in\r\n\t\t\t\tthis.scale = this.maxScale;\r\n\t\t\t}\r\n\t\t\tthis.eventPt = this.calcEventLocation(event);\r\n\t\t\tif (this.animate) {\r\n\t\t\t\t//lock ratio position of event, and animate the scale change\r\n\t\t\t\tvar ratioLock = {\r\n\t\t\t\t\tx: ((this.eventPt.x + this.getScrollLeft()) / this.bounds.width),\r\n\t\t\t\t\ty: ((this.eventPt.y + this.getScrollTop()) / this.bounds.height)\r\n\t\t\t\t};\r\n\t\t\t\tthis.$.animator.play({\r\n\t\t\t\t\tduration: 350,\r\n\t\t\t\t\tratioLock: ratioLock,\r\n\t\t\t\t\tbaseScale: prevScale,\r\n\t\t\t\t\tdeltaScale: this.scale - prevScale\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.transform(this.scale);\r\n\t\t\t\tthis.doZoom({scale:this.scale});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tzoomAnimationStep: function (inSender, inEvent) {\r\n\t\tvar currScale = this.$.animator.baseScale + (this.$.animator.deltaScale * this.$.animator.value);\r\n\t\tthis.transform(currScale);\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tzoomAnimationEnd: function (inSender, inEvent) {\r\n\t\tthis.stabilize();\r\n\t\tthis.doZoom({scale:this.scale});\r\n\t\tthis.$.animator.ratioLock = undefined;\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:layout/PanZoomView~PanZoomView#onPositionPin\r\n\t* @private\r\n\t*/\r\n\tpositionClientControls: function (scale) {\r\n\t\tthis.waterfallDown('onPositionPin', {\r\n\t\t\tscale: scale,\r\n\t\t\tbounds: this.bounds\r\n\t\t});\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/List~List} kind.\r\n* @module layout/List\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutils = require('enyo/utils'),\r\n\tScroller = require('enyo/Scroller');\r\n\r\nvar\r\n\tFlyweightRepeater = require('layout/FlyweightRepeater');\r\n\r\nvar\r\n\tmethods = require('./methods');\r\n\r\n/**\r\n* A collection of useful metrics about a page.\r\n*\r\n* @typedef {Object} module:layout/List~List~PageInfo\r\n* @property {Number} no       - The page number.\r\n* @property {Number} size     - The page size.\r\n* @property {Number} pos      - The page position.\r\n* @property {Number} startRow - The index of the page's first row.\r\n* @property {Number} endRow   - The index of the page's last row.\r\n*/\r\n\r\n/**\r\n* Fires once per row at render time.\r\n*\r\n* @event module:layout/List~List#onSetupItem\r\n* @type {Object}\r\n* @property {Number} index - The current row index.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when reordering starts, to setup reordering components. No additional\r\n* data is included with this event.\r\n*\r\n* @event module:layout/List~List#onSetupReorderComponents\r\n* @type {Object}\r\n* @property {Number} index - The current row index.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when reordering completes.\r\n*\r\n* @event module:layout/List~List#onReorder\r\n* @type {Object}\r\n* @property {Number} reorderTo   - The index of the destination row.\r\n* @property {Number} reorderFrom - The index of the source row.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when pinned reordering starts. No additional data is included with\r\n* this event.\r\n*\r\n* @event module:layout/List~List#onSetupPinnedReorderComponents\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when swiping starts, to set up swipeable components. No additional\r\n* data is included with this event.\r\n*\r\n* @event module:layout/List~List#onSetupSwipeItem\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* @todo onSwipeDrag is never fired\r\n* @event module:layout/List~List#onSwipeDrag\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* @todo onSwipe is never fired\r\n* @event module:layout/List~List#onSwipe\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when a swipe completes.\r\n*\r\n* @event module:layout/List~List#onSwipeComplete\r\n* @type {Object}\r\n* @property {Number} index      - The index of the row that was swiped.\r\n* @property {Number} xDirection - The direction of the swipe.\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:layout/List~List} is a control that displays a scrolling list of rows,\r\n* suitable for displaying very large lists. It is optimized such that only a\r\n* small portion of the list is rendered at a given time. A flyweight pattern\r\n* is employed, in which controls placed inside the list are created once, but\r\n* rendered for each list item. For this reason, it's best to use only simple\r\n* controls in\ta List, such as {@link module:enyo/Control~Control} and {@link module:enyo/Image~Image}.\r\n*\r\n* A List's `components` block contains the controls to be used for a single\r\n* row. This set of controls will be rendered for each row. You may customize\r\n* row rendering by handling the [onSetupItem]{@link module:layout/List~List#onSetupItem}\r\n* event.\r\n*\r\n* Events fired from within list rows contain the `index` property, which may\r\n* be used to identify the row from which the event originated.\r\n*\r\n* Beginning with Enyo 2.2, lists have built-in support for swipeable and\r\n* reorderable list items.  Individual list items are swipeable by default; to\r\n* enable reorderability, set the [reorderable]{@link module:layout/List~List#reorderable}\r\n* property to `true`.\r\n*\r\n* For more information, see the documentation on\r\n* [Lists]{@linkplain $dev-guide/building-apps/layout/lists.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class List\r\n* @extends module:enyo/Scroller~Scroller\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(utils.mixin(methods,\r\n\t/** @lends module:layout/List~List.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.List',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Scroller,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'enyo-list',\r\n\r\n\t/**\r\n\t* @lends module:layout/List~List.prototype\r\n\t* @private\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* The number of rows contained in the list. Note that as the amount of\r\n\t\t* list data changes, `setRows()` may be called to adjust the number of\r\n\t\t* rows. To re-render the list at the current position when the count has\r\n\t\t* changed, call the [refresh()]{@link module:layout/List~List#refresh} method.  If the\r\n\t\t* whole data model of the list has changed and you want to redisplay it\r\n\t\t* from the top, call [reset()]{@link module:layout/List~List#reset}.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcount: 0,\r\n\t\t/**\r\n\t\t* The number of rows to be shown in a given list page segment. There is\r\n\t\t* generally no need to adjust this value.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 50\r\n\t\t* @public\r\n\t\t*/\r\n\t\trowsPerPage: 50,\r\n\t\t/**\r\n\t\t* Direction in which the list will be rendered and in which it will be\r\n\t\t* scrollable. Valid values are `'v'` for vertical or `'h'` for horizontal.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'v'\r\n\t\t* @public\r\n\t\t*/\r\n\t\torient: 'v',\r\n\t\t/**\r\n\t\t* If `true`, the list is rendered such that row `0` is at the bottom of\r\n\t\t* the viewport and the beginning position of the list is scrolled to the\r\n\t\t* bottom.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tbottomUp: false,\r\n\t\t/**\r\n\t\t* If `true`, the selection mechanism is disabled. Tap events are still\r\n\t\t* sent, but items won't be automatically re-rendered when tapped.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tnoSelect: false,\r\n\r\n\t\t/**\r\n\t\t * If `true`, multiple selection is allowed.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t * @public\r\n\t\t */\r\n\t\tmultiSelect: false,\r\n\r\n\t\t/**\r\n\t\t* If `true`, the selected item will toggle.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttoggleSelected: false,\r\n\r\n\t\t/**\r\n\t\t* If `true`, the list will assume that all rows have the same size to\r\n\t\t* optimize performance.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tfixedSize: false,\r\n\r\n\t\t/**\r\n\t\t* If `true`, the list will allow the user to reorder list items.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\treorderable: false,\r\n\r\n\t\t/**\r\n\t\t* If `true` and `reorderable` is true, a reorderable item will be centered\r\n\t\t* on finger when created. If `false`, it will be created over the old item\r\n\t\t* and will then track finger.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcenterReorderContainer: true,\r\n\r\n\t\t/**\r\n\t\t* An array containing components to be shown as a placeholder when\r\n\t\t* reordering list items.\r\n\t\t*\r\n\t\t* @type {module:enyo/Control~Control[]}\r\n\t\t* @public\r\n\t\t*/\r\n\t\treorderComponents: [],\r\n\r\n\t\t/**\r\n\t\t* An array containing components for the pinned version of a row. If not\r\n\t\t* specified, reordering will not support pinned mode.\r\n\t\t*\r\n\t\t* @type {module:enyo/Control~Control[]}\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpinnedReorderComponents: [],\r\n\r\n\t\t/**\r\n\t\t* An array containing any swipeable components that will be used.\r\n\t\t*\r\n\t\t* @type {module:enyo/Control~Control[]}\r\n\t\t* @public\r\n\t\t*/\r\n\t\tswipeableComponents: [],\r\n\r\n\t\t/**\r\n\t\t* If `true`, swipe functionality is enabled.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tenableSwipe: false,\r\n\r\n\t\t/**\r\n\t\t* If `true`, the list will persist the current swipeable item.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpersistSwipeableItem: false\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonSetupItem: '',\r\n\t\tonSetupReorderComponents: '',\r\n\t\tonSetupPinnedReorderComponents: '',\r\n\t\tonReorder: '',\r\n\t\tonSetupSwipeItem: '',\r\n\t\tonSwipeDrag: '',\r\n\t\tonSwipe: '',\r\n\t\tonSwipeComplete: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonAnimateFinish: 'animateFinish',\r\n\t\tonRenderRow: 'rowRendered',\r\n\t\tondragstart: 'dragstart',\r\n\t\tondrag: 'drag',\r\n\t\tondragfinish: 'dragfinish',\r\n\t\tonup: 'up',\r\n\t\tonholdpulse: 'holdpulse',\r\n\t\tonflick: 'flick'\r\n\t},\r\n\r\n\t/**\r\n\t* Average row size (in pixels), calculated as `(page size / number of rows per page)`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\trowSize: 0,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tlistTools: [\r\n\t\t{name: 'port', classes: 'enyo-list-port enyo-border-box', components: [\r\n\t\t\t{name: 'generator', kind: FlyweightRepeater, canGenerate: false, components: [\r\n\t\t\t\t{tag: null, name: 'client'}\r\n\t\t\t]},\r\n\t\t\t{name: 'holdingarea', allowHtml: true, classes: 'enyo-list-holdingarea'},\r\n\t\t\t{name: 'page0', allowHtml: true, classes: 'enyo-list-page'},\r\n\t\t\t{name: 'page1', allowHtml: true, classes: 'enyo-list-page'},\r\n\t\t\t{name: 'placeholder', classes: 'enyo-list-placeholder'},\r\n\t\t\t{name: 'swipeableComponents', style: 'position:absolute; display:block; top:-1000px; left:0;'}\r\n\t\t]}\r\n\t],\r\n\r\n\t//* Reorder vars\r\n\r\n\t/**\r\n\t* Length of time, in milliseconds, to wait for to active reordering.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default 600\r\n\t* @private\r\n\t*/\r\n\treorderHoldTimeMS: 600,\r\n\r\n\t/**\r\n\t* Index of the row that we're moving.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default -1\r\n\t* @private\r\n\t*/\r\n\tdraggingRowIndex: -1,\r\n\r\n\t/**\r\n\t* @todo Seems to be cruft ... can't find any references to it in layout.\r\n\t* @private\r\n\t*/\r\n\tinitHoldCounter: 3,\r\n\r\n\t/**\r\n\t* @todo Seems to be cruft ... can't find any references to it in layout.\r\n\t* @private\r\n\t*/\r\n\tholdCounter: 3,\r\n\r\n\t/**\r\n\t* @todo Seems to be cruft ... can't find any references to it in layout.\r\n\t* @private\r\n\t*/\r\n\tholding: false,\r\n\r\n\t/**\r\n\t* Index of the row before which the placeholder item will be shown. If the\r\n\t* placeholder is at the end of the list, this value will be one larger than\r\n\t* the row count.\r\n\t*\r\n\t* @type {Number}\r\n\t* @private\r\n\t*/\r\n\tplaceholderRowIndex: -1,\r\n\r\n\t/**\r\n\t* Determines scroll height at top/bottom of list where dragging will cause scroll.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default 0.1\r\n\t* @private\r\n\t*/\r\n\tdragToScrollThreshold: 0.1,\r\n\r\n\t/**\r\n\t * Amount to scroll during autoscroll.\r\n\t *\r\n\t * @type {Number}\r\n\t * @default 0\r\n\t * @private\r\n\t */\r\n\tscrollDistance: 0,\r\n\r\n\t/**\r\n\t* Used to determine direction of scrolling during reordering.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tprevScrollTop: 0,\r\n\r\n\t/**\r\n\t* Number of milliseconds between scroll events when autoscrolling.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default 20\r\n\t* @private\r\n\t*/\r\n\tautoScrollTimeoutMS: 20,\r\n\r\n\t/**\r\n\t* Holds timeout ID for autoscroll.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tautoScrollTimeout: null,\r\n\r\n\t/**\r\n\t* Keep last event Y coordinate to update placeholder position during autoscroll.\r\n\t*\r\n\t* @type {Number}\r\n\t* @private\r\n\t*/\r\n\tautoscrollPageY: 0,\r\n\r\n\t/**\r\n\t* Set to `true` to indicate that we're in pinned reordering mode.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @private\r\n\t*/\r\n\tpinnedReorderMode: false,\r\n\r\n\t/**\r\n\t* y-coordinate of the original location of the pinned row.\r\n\t*\r\n\t* @type {Number}\r\n\t* @private\r\n\t*/\r\n\tinitialPinPosition: -1,\r\n\r\n\t/**\r\n\t* Set to `true` after drag-and-drop has moved the item to reorder at least\r\n\t* one space. Used to activate pin mode if item is dropped immediately.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @private\r\n\t*/\r\n\titemMoved: false,\r\n\r\n\t/**\r\n\t* Tracks the page where the item being dragged is, so we can detect when we\r\n\t* switch pages and need to adjust rendering.\r\n\t*\r\n\t* @type {Number}\r\n\t* @private\r\n\t*/\r\n\tcurrentPageNumber: -1,\r\n\r\n\t/**\r\n\t* Timeout for completing reorder operation.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcompleteReorderTimeout: null,\r\n\r\n\t//* Swipeable vars\r\n\r\n\t/**\r\n\t* Index of swiped item.\r\n\t*\r\n\t* @type {Number}\r\n\t* @private\r\n\t*/\r\n\tswipeIndex: null,\r\n\r\n\t/**\r\n\t* Direction of swipe.\r\n\t*\r\n\t* @type {Number}\r\n\t* @private\r\n\t*/\r\n\tswipeDirection: null,\r\n\r\n\t/**\r\n\t* `true` if a persistent item is currently persisting.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @private\r\n\t*/\r\n\tpersistentItemVisible: false,\r\n\r\n\t/**\r\n\t* Side from which the persisting item came.\r\n\t*\r\n\t* @type {String}\r\n\t* @private\r\n\t*/\r\n\tpersistentItemOrigin: null,\r\n\r\n\t/**\r\n\t* `true` if swipe was completed.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @private\r\n\t*/\r\n\tswipeComplete: false,\r\n\r\n\t/**\r\n\t* Timeout when waiting for swipe action to complete.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcompleteSwipeTimeout: null,\r\n\r\n\t/**\r\n\t* Length of time (in milliseconds) to wait before completing swipe action.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default 500\r\n\t* @private\r\n\t*/\r\n\tcompleteSwipeDelayMS: 500,\r\n\r\n\t/**\r\n\t* Duration (in milliseconds) of normal swipe animation.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default 200\r\n\t* @private\r\n\t*/\r\n\tnormalSwipeSpeedMS: 200,\r\n\r\n\t/**\r\n\t* Duration (in milliseconds) of fast swipe animation.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default 100\r\n\t* @private\r\n\t*/\r\n\tfastSwipeSpeedMS: 100,\r\n\r\n\t/**\r\n\t* Percentage of a swipe needed to force completion of the swipe.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default 0.2\r\n\t* @private\r\n\t*/\r\n\tpercentageDraggedThreshold: 0.2\r\n}));\r\n","/**\r\n* Contains the declaration for the {@link module:layout/ImageView~ImageView} kind.\r\n* @module layout/ImageView\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tdom = require('enyo/dom'),\r\n\tlogger = require('enyo/logger'),\r\n\tplatform = require('enyo/platform'),\r\n\tImg = require('enyo/Image');\r\n\r\nvar\r\n\tPanZoomView = require('./PanZoomView');\r\n\r\n/**\r\n* {@link module:layout/ImageView~ImageView} is a control that displays an image\r\n* at a given scaling factor, with enhanced support for double-tap/double-click\r\n* to zoom, panning, mousewheel zooming and pinch-zoom (on touchscreen devices\r\n* that support it).\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tImageView = require('layout/ImageView');\r\n*\r\n* \t{kind: ImageView, src: 'layout/assets/globe.jpg', scale: 'auto',\r\n* \t\tstyle: 'width: 500px; height: 400px;'}\r\n* ```\r\n*\r\n* The `onload` and `onerror` events bubble up from the underlying image\r\n* element and an [onZoom]{@link module:layout/PanZoomView~PanZoomView#onZoom} event is triggered\r\n* when the user changes the zoom level of the image.\r\n*\r\n* If you wish, you may add {@link module:enyo/ScrollThumb~ScrollThumb} indicators, disable zoom\r\n* animation, allow panning overscroll (with a bounce-back effect), and control\r\n* the propagation of drag events, all using this kind's Boolean properties.\r\n*\r\n* Note that it's best to specify a size for the ImageView in order to avoid\r\n* complications.\r\n*\r\n* @class ImageView\r\n* @extends module:layout/PanZoomView~PanZoomView\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:layout/ImageView~ImageView.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.ImageView',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: PanZoomView,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsubKindComponents: [\r\n\t\t{kind: Img, ondown: 'down', style: 'vertical-align: text-top;'}\r\n\t],\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\t// move components (most likely imageViewPins) to unscaledComponents\r\n\t\tthis.unscaledComponents = this.components;\r\n\t\tthis.components = [];\r\n\r\n\t\t//amend kindComponents\r\n\t\tthis.kindComponents[1].components[0].components = this.subKindComponents;\r\n\r\n\t\tPanZoomView.prototype.create.apply(this, arguments);\r\n\r\n\t\t// set content as inline-block to mimic behaviour of an image\r\n\t\tthis.$.content.applyStyle('display', 'inline-block');\r\n\r\n\t\t//offscreen buffer image to get initial image dimensions\r\n\t\t//before displaying a scaled down image that can fit in the container\r\n\t\tthis.bufferImage = new Image();\r\n\t\tthis.bufferImage.onload = this.bindSafely('imageLoaded');\r\n\t\tthis.bufferImage.onerror = this.bindSafely('imageError');\r\n\t\tthis.srcChanged();\r\n\t\t//\tNeeded to kickoff pin redrawing (otherwise they won't redraw on intitial scroll)\r\n\t\tif(this.getStrategy().$.scrollMath) {\r\n\t\t\tthis.getStrategy().$.scrollMath.start();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: function () {\r\n\t\tif (this.bufferImage) {\r\n\t\t\tthis.bufferImage.onerror = undefined;\r\n\t\t\tthis.bufferImage.onerror = undefined;\r\n\t\t\tdelete this.bufferImage;\r\n\t\t}\r\n\t\tPanZoomView.prototype.destroy.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdown: function (sender, event) {\r\n\t\t// Fix to prevent image drag in Firefox\r\n\t\tevent.preventDefault();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsrcChanged: function () {\r\n\t\tif(this.src && this.src.length>0 && this.bufferImage && this.src!=this.bufferImage.src) {\r\n\t\t\tthis.bufferImage.src = this.src;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Handles `onload` events bubbled up from children to reset the scale when\r\n\t* the image changes.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\timageLoaded: function (event) {\r\n\t\tthis.scale = this.scaleKeyword;\r\n\t\tthis.originalWidth = this.contentWidth = this.bufferImage.width;\r\n\t\tthis.originalHeight = this.contentHeight = this.bufferImage.height;\r\n\r\n\t\t//scale to fit before setting src, so unscaled image isn't visible\r\n\t\tthis.scaleChanged();\r\n\t\tthis.$.image.setSrc(this.bufferImage.src);\r\n\r\n\t\t// There appears to be a bug in Safari where due to the translation of these elements it\r\n\t\t// doesn't correctly render unless prodded\r\n\t\tif (platform.safari) {\r\n\t\t\tvar n = this.$.image.hasNode(),\r\n\t\t\t\tsrc = this.bufferImage.src;\r\n\r\n\t\t\tif (n) {\r\n\t\t\t\tsetTimeout(function () { n.src = src; }, 100);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Needed to ensure scroller contents height/width is calculated correctly when contents use enyo-fit\r\n\t\tdom.transformValue(this.getStrategy().$.client, 'translate3d', '0px, 0px, 0');\r\n\r\n\t\tthis.positionClientControls(this.scale);\r\n\t\tthis.align();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\timageError: function (event) {\r\n\t\tlogger.error('Error loading image: ' + this.src);\r\n\t\t//bubble up the error event\r\n\t\tthis.bubble('onerror', event);\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/AroundList~AroundList} kind.\r\n* @module layout/AroundList\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tList = require('./List'),\r\n\tFlyweightRepeater = require('./FlyweightRepeater');\r\n\r\n/**\r\n* {@link module:layout/AroundList~AroundList} is a {@link module:layout/List~List}\r\n* that allows content to be displayed around its rows.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tAroundList = require('layout/AroundList');\r\n*\r\n* \t{kind: AroundList, onSetupItem: 'setupItem',\r\n* \t\taboveComponents: [\r\n* \t\t\t{content: 'Content above the list'}\r\n* \t\t],\r\n* \t\tcomponents: [\r\n* \t\t\t{content: 'List item'}\r\n* \t\t]\r\n* \t}\r\n* ```\r\n*\r\n* @class AroundList\r\n* @extends module:layout/List~List\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:layout/AroundList~AroundList.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.AroundList',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: List,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tlistTools: [\r\n\t\t{name: 'port', classes: 'enyo-list-port enyo-border-box', components: [\r\n\t\t\t{name: 'aboveClient'},\r\n\t\t\t{name: 'generator', kind: FlyweightRepeater, canGenerate: false, components: [\r\n\t\t\t\t{tag: null, name: 'client'}\r\n\t\t\t]},\r\n\t\t\t{name: 'holdingarea', allowHtml: true, classes: 'enyo-list-holdingarea'},\r\n\t\t\t{name: 'page0', allowHtml: true, classes: 'enyo-list-page'},\r\n\t\t\t{name: 'page1', allowHtml: true, classes: 'enyo-list-page'},\r\n\t\t\t{name: 'belowClient'},\r\n\t\t\t{name: 'placeholder'},\r\n\t\t\t{name: 'swipeableComponents', style: 'position:absolute; display:block; top:-1000px; left:0px;'}\r\n\t\t]}\r\n\t],\r\n\r\n\t/**\r\n\t* A block of components to be rendered above the list.\r\n\t*\r\n\t* @type {Object[]}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\taboveComponents: null,\r\n\r\n\t/**\r\n\t* A block of components to be rendered below the list.\r\n\t*\r\n\t* @type {Object[]}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\tbelowComponents: null,\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tinitComponents: function () {\r\n\t\tList.prototype.initComponents.apply(this, arguments);\r\n\t\tif (this.aboveComponents) {\r\n\t\t\tthis.$.aboveClient.createComponents(this.aboveComponents, {owner: this.owner});\r\n\t\t}\r\n\t\tif (this.belowComponents) {\r\n\t\t\tthis.$.belowClient.createComponents(this.belowComponents, {owner: this.owner});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @see module:layout/List~List#updateMetrics\r\n\t* @private\r\n\t*/\r\n\tupdateMetrics: function () {\r\n\t\tthis.defaultPageSize = this.rowsPerPage * (this.rowSize || 100);\r\n\t\tthis.pageCount = Math.ceil(this.count / this.rowsPerPage);\r\n\t\tthis.aboveHeight = this.$.aboveClient.getBounds().height;\r\n\t\tthis.belowHeight = this.$.belowClient.getBounds().height;\r\n\t\tthis.portSize = this.aboveHeight + this.belowHeight;\r\n\t\tfor (var i=0; i < this.pageCount; i++) {\r\n\t\t\tthis.portSize += this.getPageSize(i);\r\n\t\t}\r\n\t\tthis.adjustPortSize();\r\n\t},\r\n\r\n\t/**\r\n\t* @see module:layout/List~List#positionPage\r\n\t* @private\r\n\t*/\r\n\tpositionPage: function (pageNumber, target) {\r\n\t\ttarget.pageNo = pageNumber;\r\n\t\tvar y = this.pageToPosition(pageNumber);\r\n\t\tvar o = this.bottomUp ? this.belowHeight : this.aboveHeight;\r\n\t\ty += o;\r\n\t\ttarget.applyStyle(this.pageBound, y + 'px');\r\n\t},\r\n\r\n\t/**\r\n\t* Scrolls past the [aboveComponents]{@link module:layout/AroundList~AroundList#aboveComponents}\r\n\t* or [belowComponents]{@link module:layout/AroundList~AroundList#belowComponents} components to\r\n\t* reveal the list.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tscrollToContentStart: function () {\r\n\t\tvar y = this.bottomUp ? this.belowHeight : this.aboveHeight;\r\n\t\tthis.setScrollPosition(y);\r\n\t}\r\n});\r\n","/**\r\n* Contains the declaration for the {@link module:layout/PulldownList~PulldownList} kind.\r\n* @module layout/PulldownList\r\n*/\r\n\r\nvar\r\n\tdom = require('enyo/dom'),\r\n\tkind = require('enyo/kind'),\r\n\tplatform = require('enyo/platform'),\r\n\tTouchScrollStrategy = require('enyo/TouchScrollStrategy'),\r\n\tTranslateScrollStrategy = require('enyo/TranslateScrollStrategy');\r\n\r\nvar\r\n\tList = require('../List'),\r\n\tPuller = require('./Puller');\r\n\r\n/**\r\n* Fires when user initiates a pull action. No additional data is included with\r\n* this event.\r\n*\r\n* @event module:layout/PulldownList~PulldownList#onPullStart\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when user cancels a pull action. No additional data is included with\r\n* this event.\r\n*\r\n* @event module:layout/PulldownList~PulldownList#onPullCancel\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires while a pull action is in progress. No additional data is included with\r\n* this event.\r\n*\r\n* @event module:layout/PulldownList~PulldownList#onPull\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when the list is released following a pull action, indicating\r\n* that we are ready to retrieve data. No additional data is included with\r\n* this event.\r\n*\r\n* @event module:layout/PulldownList~PulldownList#onPullRelease\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when data retrieval is complete, indicating that the data is\r\n* is ready to be displayed. No additional data is included with\r\n* this event.\r\n*\r\n* @event module:layout/PulldownList~PulldownList#onPullComplete\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:layout/PulldownList~PulldownList} is a list that provides a\r\n* pull-to-refresh feature, which allows new data to be retrieved and updated in\r\n* the list.\r\n*\r\n* PulldownList provides the [onPullRelease]{@link module:layout/PulldownList~PulldownList#onPullRelease}\r\n* event to allow an application to start retrieving new data.  The\r\n* [onPullComplete]{@link module:layout/PulldownList~PulldownList#onPullComplete}\r\n* event indicates that the pull is complete and it's time to update the list\r\n* with the new data.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tPulldownList = require('layout/PulldownList');\r\n*\r\n* \t{name: 'list', kind: PulldownList, onSetupItem: 'setupItem',\r\n* \t\tonPullRelease: 'pullRelease', onPullComplete: 'pullComplete',\r\n* \t\tcomponents: [\r\n* \t\t\t{name: 'item'}\r\n* \t\t]\r\n* \t}\r\n*\r\n* \tpullRelease: function () {\r\n* \t\tthis.search();\r\n* \t},\r\n* \tprocessSearchResults: function (inRequest, inResponse) {\r\n* \t\tthis.results = inResponse.results;\r\n* \t\tthis.$.list.setCount(this.results.length);\r\n* \t\tthis.$.list.completePull();\r\n* \t},\r\n* \tpullComplete: function () {\r\n* \t\tthis.$.list.reset();\r\n* \t}\r\n* ```\r\n*\r\n* @class PulldownList\r\n* @extends module:layout/List~List\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:layout/PulldownList~PulldownList.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.PulldownList',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: List,\r\n\r\n\t/**\r\n\t* Sets `touch` to `true` in inherited Scroller kind for touch-based scrolling strategy.\r\n\t*\r\n\t* @see {@link module:enyo/Scroller~Scroller#touch}\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @public\r\n\t*/\r\n\ttouch: true,\r\n\r\n\t/**\r\n\t* The pull notification area at the top of the list.\r\n\t*\r\n\t* @type {module:enyo/Control~Control}\r\n\t* @default null\r\n\t* @private\r\n\t*/\r\n\tpully: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpulldownTools: [\r\n\t\t{name: 'pulldown', classes: 'enyo-list-pulldown', components: [\r\n\t\t\t{name: 'puller', kind: Puller}\r\n\t\t]}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\t//* Fires when user initiates a pull action.\r\n\t\tonPullStart: '',\r\n\t\t//* Fires when user cancels a pull action.\r\n\t\tonPullCancel: '',\r\n\t\t//* Fires while a pull action is in progress.\r\n\t\tonPull: '',\r\n\t\t//* Fires when the list is released following a pull action, indicating\r\n\t\t//* that we are ready to retrieve data.\r\n\t\tonPullRelease: '',\r\n\t\t//* Fires when data retrieval is complete, indicating that the data is\r\n\t\t//* is ready to be displayed.\r\n\t\tonPullComplete: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonScrollStart: 'scrollStartHandler',\r\n\t\tonScrollStop: 'scrollStopHandler',\r\n\t\tondragfinish: 'dragfinish'\r\n\t},\r\n\r\n\t/**\r\n\t* Message displayed when list is not being pulled.\r\n\t*\r\n\t* @type {String}\r\n\t* @default 'Pull down to refresh...'\r\n\t* @public\r\n\t*/\r\n\tpullingMessage: 'Pull down to refresh...',\r\n\r\n\t/**\r\n\t* Message displayed while a pull action is in progress.\r\n\t*\r\n\t* @type {String}\r\n\t* @default 'Release to refresh...'\r\n\t* @public\r\n\t*/\r\n\tpulledMessage: 'Release to refresh...',\r\n\r\n\t/**\r\n\t* Message displayed while data is being retrieved.\r\n\t*\r\n\t* @type {String}\r\n\t* @default 'Loading...'\r\n\t* @public\r\n\t*/\r\n\tloadingMessage: 'Loading...',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpullingIconClass: 'enyo-puller-arrow enyo-puller-arrow-down',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpulledIconClass: 'enyo-puller-arrow enyo-puller-arrow-up',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tloadingIconClass: '',\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tvar p = {kind: Puller, showing: false, text: this.loadingMessage, iconClass: this.loadingIconClass, onCreate: 'setPully'};\r\n\t\tthis.listTools.splice(0, 0, p);\r\n\t\tList.prototype.create.apply(this, arguments);\r\n\t\tthis.setPulling();\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tinitComponents: function () {\r\n\t\tthis.createChrome(this.pulldownTools);\r\n\t\tthis.accel = dom.canAccelerate();\r\n\t\tthis.translation = this.accel ? 'translate3d' : 'translate';\r\n\t\tthis.strategyKind = this.resetStrategyKind();\r\n\t\tList.prototype.initComponents.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* Temporarily use TouchScrollStrategy on iOS devices (see ENYO-1714).\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tresetStrategyKind: function () {\r\n\t\treturn (platform.android >= 3)\r\n\t\t\t? TranslateScrollStrategy\r\n\t\t\t: TouchScrollStrategy;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetPully: function (sender, event) {\r\n\t\tthis.pully = event.originator;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tscrollStartHandler: function () {\r\n\t\tthis.firedPullStart = false;\r\n\t\tthis.firedPull = false;\r\n\t\tthis.firedPullCancel = false;\r\n\t},\r\n\r\n\t/**\r\n\t* Monitors the scroll position to display and position the\r\n\t* [pully]{@link module:layout/PulldownList~PulldownList#pully}.\r\n\t*\r\n\t* @see {@link module:enyo/Scroller~Scroller#scroll}\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tscroll: function (sender, event) {\r\n\t\tvar r = List.prototype.scroll.apply(this, arguments);\r\n\t\tif (this.completingPull) {\r\n\t\t\tthis.pully.setShowing(false);\r\n\t\t}\r\n\t\tvar s = this.getStrategy().$.scrollMath || this.getStrategy();\r\n\t\tvar over = -1*this.getScrollTop();\r\n\t\tif (s.isInOverScroll() && over > 0) {\r\n\t\t\tdom.transformValue(this.$.pulldown, this.translation, '0,' + over + 'px' + (this.accel ? ',0' : ''));\r\n\t\t\tif (!this.firedPullStart) {\r\n\t\t\t\tthis.firedPullStart = true;\r\n\t\t\t\tthis.pullStart();\r\n\t\t\t\tthis.pullHeight = this.$.pulldown.getBounds().height;\r\n\t\t\t}\r\n\t\t\tif (over > this.pullHeight && !this.firedPull) {\r\n\t\t\t\tthis.firedPull = true;\r\n\t\t\t\tthis.firedPullCancel = false;\r\n\t\t\t\tthis.pull();\r\n\t\t\t}\r\n\t\t\tif (this.firedPull && !this.firedPullCancel && over < this.pullHeight) {\r\n\t\t\t\tthis.firedPullCancel = true;\r\n\t\t\t\tthis.firedPull = false;\r\n\t\t\t\tthis.pullCancel();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn r;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tscrollStopHandler: function () {\r\n\t\tif (this.completingPull) {\r\n\t\t\tthis.completingPull = false;\r\n\t\t\tthis.doPullComplete();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* If the pull has been fired, offset the scroll top by the height of the\r\n\t* [pully]{@link module:layout/PulldownList~PulldownList#pully} until\r\n\t* [completePull()]{@link module:layout/PulldownList~PulldownList#completePull} is called.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdragfinish: function () {\r\n\t\tif (this.firedPull) {\r\n\t\t\tvar s = this.getStrategy().$.scrollMath || this.getStrategy();\r\n\t\t\ts.setScrollY(-1*this.getScrollTop() - this.pullHeight);\r\n\t\t\tthis.pullRelease();\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// if base list is configured for swipe, ensure\r\n\t\t\t// has a chance to process swipe\r\n\t\t\tList.prototype.dragfinish.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Signals that the list should execute pull completion. This is usually\r\n\t* called after the application has received new data.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tcompletePull: function () {\r\n\t\tthis.completingPull = true;\r\n\t\tvar s = this.getStrategy().$.scrollMath || this.getStrategy();\r\n\t\ts.setScrollY(this.pullHeight);\r\n\t\ts.start();\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:layout/PulldownList~PulldownList#onPullStart\r\n\t* @private\r\n\t*/\r\n\tpullStart: function () {\r\n\t\tthis.setPulling();\r\n\t\tthis.pully.setShowing(false);\r\n\t\tthis.$.puller.setShowing(true);\r\n\t\tthis.doPullStart();\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:layout/PulldownList~PulldownList#onPull\r\n\t* @private\r\n\t*/\r\n\tpull: function () {\r\n\t\tthis.setPulled();\r\n\t\tthis.doPull();\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:layout/PulldownList~PulldownList#onPullCancel\r\n\t* @private\r\n\t*/\r\n\tpullCancel: function () {\r\n\t\tthis.setPulling();\r\n\t\tthis.doPullCancel();\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:layout/PulldownList~PulldownList#onPullRelease\r\n\t* @private\r\n\t*/\r\n\tpullRelease: function () {\r\n\t\tthis.$.puller.setShowing(false);\r\n\t\tthis.pully.setShowing(true);\r\n\t\tthis.doPullRelease();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetPulling: function () {\r\n\t\tthis.$.puller.setText(this.pullingMessage);\r\n\t\tthis.$.puller.setIconClass(this.pullingIconClass);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetPulled: function () {\r\n\t\tthis.$.puller.setText(this.pulledMessage);\r\n\t\tthis.$.puller.setIconClass(this.pulledIconClass);\r\n\t},\r\n\r\n\t/**\r\n\t* Prevent swiping while pully is showing as the swipe gets rendered one row off\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tisSwipeable: function () {\r\n\t\treturn !this.pully.get('showing') && List.prototype.isSwipeable.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* Prevent reordering while pully is showing\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshouldStartReordering: function () {\r\n\t\treturn !this.pully.get('showing') && List.prototype.shouldStartReordering.apply(this, arguments);\r\n\t}\r\n});\r\n\r\n/**\r\n* The {@link module:layout/PulldownList/Puller~Puller} declaration used by the PulldownList.\r\n* @public\r\n*/\r\nmodule.exports.Puller = Puller;\r\n","/**\r\n* Contains the declaration for the {@link module:layout/ImageCarousel~ImageCarousel} kind.\r\n* @module layout/ImageCarousel\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutils = require('enyo/utils');\r\n\r\nvar\r\n\tImageView = require('./ImageView'),\r\n\tPanels = require('./Panels'),\r\n\tCarouselArranger = require('./CarouselArranger');\r\n\r\n/**\r\n* {@link module:layout/ImageCarousel~ImageCarousel} is a\r\n* {@link module:layout/Panels~Panels} that uses\r\n* {@link module:layout/CarouselArranger~CarouselArranger} as its arrangerKind.\r\n* An ImageCarousel dynamically creates and loads instances of\r\n* {@link module:layout/ImageView~ImageView} as needed, creating a gallery of images.\r\n*\r\n* ```javascript\r\n* \tvar\r\n* \t\tkind = require('enyo/kind'),\r\n* \t\tImageCarousel = require('layout/ImageCarousel');\r\n*\r\n* \t{kind: ImageCarousel, images: [\r\n* \t\t'layout/assets/mercury.jpg',\r\n* \t\t'layout/assets/venus.jpg',\r\n* \t\t'layout/assets/earth.jpg',\r\n* \t\t'layout/assets/mars.jpg',\r\n* \t\t'layout/assets/jupiter.jpg',\r\n* \t\t'layout/assets/saturn.jpg',\r\n* \t\t'layout/assets/uranus.jpg',\r\n* \t\t'layout/assets/neptune.jpg'\r\n* \t], defaultScale: 'auto'},\r\n* ```\r\n*\r\n* All of the events (`onload`, `onerror`, and `onZoom`) from the contained\r\n* ImageView objects are bubbled up to the ImageCarousel, which also inherits\r\n* the [onTransitionStart]{@link module:layout/Panels~Panels#onTransitionStart} and\r\n* [onTransitionFinish]{@link module:layout/Panels~Panels#onTransitionFinish} events from\r\n* {@link module:layout/Panels~Panels}.\r\n*\r\n* The [images]{@link module:layout/ImageCarousel~ImageCarousel#images} property is an array containing the\r\n* file paths of the images in the gallery.  The `images` array may be altered and\r\n* updated at any time, and the current index may be manipulated at runtime via the\r\n* inherited functions [getIndex()]{@link module:layout/Panels~Panels#getIndex} and\r\n* [setIndex()]{@link module:layout/Panels~Panels#setIndex}.\r\n*\r\n* Note that it's best to specify a size for the ImageCarousel in order to\r\n* avoid complications.\r\n*\r\n* @class ImageCarousel\r\n* @extends module:layout/Panels~Panels\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:layout/ImageCarousel~ImageCarousel.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.ImageCarousel',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Panels,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tarrangerKind: CarouselArranger,\r\n\r\n\t/**\r\n\t* The default scaling to be applied to each ImageView. Can be `'auto'`,\r\n\t* `'width'`, `'height'`, or any positive numeric value.\r\n\t*\r\n\t* @type {String|Number}\r\n\t* @default 'auto'\r\n\t* @public\r\n\t*/\r\n\tdefaultScale: 'auto',\r\n\r\n\t/**\r\n\t* If `true`, ImageView instances are created with zooming disabled.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tdisableZoom:  false,\r\n\r\n\t/**\r\n\t* If `true`, any ImageViews that are not in the immediate viewing area\r\n\t* (i.e., any images other than the currently active image and the first image\r\n\t* on either side of it) will be destroyed to free up memory. This has the\r\n\t* benefit of minimizing memory usage (which is good for mobile devices), but\r\n\t* also has the downside that, if you want to view the images again, you'll need\r\n\t* to recreate the ImageViews refetch the images (thus increasing the number of\r\n\t* image-related GET calls). Defaults to `false`.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tlowMemory: false,\r\n\r\n\t/**\r\n\t* @lends module:layout/ImageCarousel~ImageCarousel.prototype\r\n\t* @private\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* Array of paths to image files.\r\n\t\t*\r\n\t\t* @type {String[]}\r\n\t\t* @default `[]`\r\n\t\t* @public\r\n\t\t*/\r\n\t\timages: []\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonTransitionStart: 'transitionStart',\r\n\t\tonTransitionFinish: 'transitionFinish'\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tPanels.prototype.create.apply(this, arguments);\r\n\t\tthis.imageCount = this.images.length;\r\n\t\tif (this.images.length > 0) {\r\n\t\t\tthis.initContainers();\r\n\t\t\tthis.loadNearby();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Builds a container for each image and destroys any extra containers and images.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tinitContainers: function () {\r\n\t\tfor (var i=0; i<this.images.length; i++) {\r\n\t\t\tif (!this.$['container' + i]) {\r\n\t\t\t\tthis.createComponent({\r\n\t\t\t\t\tname: 'container' + i,\r\n\t\t\t\t\tstyle: 'height:100%; width:100%;'\r\n\t\t\t\t});\r\n\t\t\t\tthis.$['container' + i].render();\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (i=this.images.length; i<this.imageCount; i++) {\r\n\t\t\tif (this.$['image' + i]) {\r\n\t\t\t\tthis.$['image' + i].destroy();\r\n\t\t\t}\r\n\t\t\tthis.$['container' + i].destroy();\r\n\t\t}\r\n\t\tthis.imageCount = this.images.length;\r\n\t},\r\n\r\n\t/**\r\n\t* Loads images that are in view or may come into view soon.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tloadNearby: function () {\r\n\t\tvar range = this.getBufferRange();\r\n\t\tfor (var i in range) {\r\n\t\t\tthis.loadImageView(range[i]);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Determines which image indices are `'near'` the active image.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgetBufferRange: function () {\r\n\t\tvar range = [];\r\n\t\tif (this.layout.containerBounds) {\r\n\t\t\tvar prefetchRange = 1;\r\n\t\t\tvar bounds = this.layout.containerBounds;\r\n\t\t\tvar c, i, x, xEnd;\r\n\t\t\t// get the lower range\r\n\t\t\ti=this.index-1;\r\n\t\t\tx=0;\r\n\t\t\txEnd = bounds.width * prefetchRange;\r\n\t\t\twhile (i>=0 && x<=xEnd) {\r\n\t\t\t\tc = this.$['container' + i];\r\n\t\t\t\tx+= c.width + c.marginWidth;\r\n\t\t\t\trange.unshift(i);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t\t// get the upper range\r\n\t\t\ti=this.index;\r\n\t\t\tx=0;\r\n\t\t\txEnd = bounds.width * (prefetchRange + 1);\r\n\t\t\twhile (i<this.images.length && x<=xEnd) {\r\n\t\t\t\tc = this.$['container' + i];\r\n\t\t\t\tx+= c.width + c.marginWidth;\r\n\t\t\t\trange.push(i);\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn range;\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\treflow: function () {\r\n\t\tPanels.prototype.reflow.apply(this, arguments);\r\n\t\tthis.loadNearby();\r\n\t},\r\n\r\n\t/**\r\n\t* Loads the image whose path is found at the specified index in the\r\n\t* [images]{@link module:layout/ImageCarousel~ImageCarousel#images} array.\r\n\t*\r\n\t* @param {Number} index - The index of the image to load.\r\n\t* @private\r\n\t*/\r\n\tloadImageView: function (index) {\r\n\t\t// NOTE: wrap bugged in enyo.CarouselArranger, but once fixed, wrap should work in this\r\n\t\tif (this.wrap) {\r\n\t\t\t// Used this modulo technique to get around javascript issue with negative values\r\n\t\t\t// ref: http://javascript.about.com/od/problemsolving/a/modulobug.htm\r\n\t\t\tindex = ((index % this.images.length)+this.images.length)%this.images.length;\r\n\t\t}\r\n\t\tif (index>=0 && index<=this.images.length-1) {\r\n\t\t\tif (!this.$['image' + index]) {\r\n\t\t\t\tthis.$['container' + index].createComponent({\r\n\t\t\t\t\tname: 'image' + index,\r\n\t\t\t\t\tkind: ImageView,\r\n\t\t\t\t\tscale: this.defaultScale,\r\n\t\t\t\t\tdisableZoom: this.disableZoom,\r\n\t\t\t\t\tsrc: this.images[index],\r\n\t\t\t\t\tverticalDragPropagation: false,\r\n\t\t\t\t\tstyle: 'height:100%; width:100%;'\r\n\t\t\t\t}, {owner: this});\r\n\t\t\t\tthis.$['image' + index].render();\r\n\t\t\t} else {\r\n\t\t\t\tif (this.$['image' + index].src != this.images[index]) {\r\n\t\t\t\t\tthis.$['image' + index].setSrc(this.images[index]);\r\n\t\t\t\t\tthis.$['image' + index].setScale(this.defaultScale);\r\n\t\t\t\t\tthis.$['image' + index].setDisableZoom(this.disableZoom);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.$['image' + index];\r\n\t},\r\n\r\n\t/**\r\n\t* Updates the array of images.\r\n\t*\r\n\t* @todo Probably a defect here. Simply calling `set()` won't force the observer to fire\r\n\t* if `images` is a ref to the same array. Need to add the `force` parameter.\r\n\t* @public\r\n\t*/\r\n\tsetImages: function (images) {\r\n\t\t// always invoke imagesChanged because this is an array property\r\n\t\t// which might otherwise seem to be the same object\r\n\t\tthis.set('images', images);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\timagesChanged: function () {\r\n\t\tthis.initContainers();\r\n\t\tthis.loadNearby();\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tindexChanged: function () {\r\n\t\tthis.loadNearby();\r\n\t\tif (this.lowMemory) {\r\n\t\t\tthis.cleanupMemory();\r\n\t\t}\r\n\t\tPanels.prototype.indexChanged.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttransitionStart: function (sender, event) {\r\n\t\tif (event.fromIndex==event.toIndex) {\r\n\t\t\treturn true; //prevent from bubbling if there's no change\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttransitionFinish: function (sender, event) {\r\n\t\tthis.loadNearby();\r\n\t\tif (this.lowMemory) {\r\n\t\t\tthis.cleanupMemory();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Returns the currently displayed ImageView.\r\n\t*\r\n\t* @return {module:enyo/Control~Control} - The active image control.\r\n\t* @public\r\n\t*/\r\n\tgetActiveImage: function () {\r\n\t\treturn this.getImageByIndex(this.index);\r\n\t},\r\n\r\n\t/**\r\n\t* Returns the ImageView with the specified index.\r\n\t*\r\n\t* @param {Number} index  - The index of the image to be retrieved.\r\n\t* @return {module:enyo/Control~Control} - The image control at `index`.\r\n\t* @public\r\n\t*/\r\n\tgetImageByIndex: function (index) {\r\n\t\treturn this.$['image' + index] || this.loadImageView(index);\r\n\t},\r\n\r\n\t/**\r\n\t* Destroys any ImageView objects that are not in the immediate viewing area\r\n\t* (i.e., any images other than the currently active image and the first\r\n\t* image on either side of it) to free up memory. If you set the ImageCarousel's\r\n\t* [lowMemory]{@link module:layout/ImageCarousel~ImageCarousel#lowMemory} property to `true`, this\r\n\t* function will be called automatically as needed.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tcleanupMemory: function () {\r\n\t\tvar buffer = this.getBufferRange();\r\n\t\tfor (var i=0; i<this.images.length; i++) {\r\n\t\t\tif (utils.indexOf(i, buffer) ===-1) {\r\n\t\t\t\tif (this.$['image' + i]) {\r\n\t\t\t\t\tthis.$['image' + i].destroy();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n"]}