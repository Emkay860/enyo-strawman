{"version":3,"sources":["..\\..\\lib\\enyo-webos\\webOS\\webOS.js","..\\..\\lib\\enyo-webos\\src\\MockRequest.js","..\\..\\lib\\enyo-webos\\src\\Events.js","..\\..\\lib\\enyo-webos\\src\\AppInfo.js","..\\..\\lib\\enyo-webos\\index.js","..\\..\\lib\\enyo-webos\\src\\ServiceRequest.js","..\\..\\lib\\enyo-webos\\src\\LunaService.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"generated.js","sourceRoot":"","sourcesContent":["!function(){window.webOS=window.webOS||{}}(),function(){if(webOS.platform={},window.PalmSystem)if(navigator.userAgent.indexOf(\"SmartWatch\")>-1)webOS.platform.watch=!0;else if(navigator.userAgent.indexOf(\"SmartTV\")>-1||navigator.userAgent.indexOf(\"Large Screen\")>-1)webOS.platform.tv=!0;else{try{var e=JSON.parse(PalmSystem.deviceInfo||\"{}\");if(e.platformVersionMajor&&e.platformVersionMinor){var t=parseInt(e.platformVersionMajor),o=parseInt(e.platformVersionMinor);3>t||3==t&&0>=o?webOS.platform.legacy=!0:webOS.platform.open=!0}}catch(i){webOS.platform.open=!0}window.Mojo=window.Mojo||{relaunch:function(e){}},window.PalmSystem&&PalmSystem.stageReady&&PalmSystem.stageReady()}else webOS.platform.unknown=!0}(),function(){webOS.fetchAppId=function(){return window.PalmSystem&&PalmSystem.identifier?PalmSystem.identifier.split(\" \")[0]:void 0},webOS.fetchAppInfo=function(e,t){if(webOS.appInfo)e&&e(webOS.appInfo);else{var o=function(t,o){if(!t&&o)try{webOS.appInfo=JSON.parse(o),e&&e(webOS.appInfo)}catch(i){console.error(\"Unable to parse appinfo.json file for \"+appID),e&&e()}else e&&e()},i=new XMLHttpRequest;i.onreadystatechange=function(){4==i.readyState&&(i.status>=200&&i.status<300||0===i.status?o(void 0,i.responseText):o({status:404}))};try{i.open(\"GET\",t||\"appinfo.json\",!0),i.send(null)}catch(s){o({status:404})}}},webOS.fetchAppRootPath=function(){var e=window.location.href;if(\"baseURI\"in window.document)e=window.document.baseURI;else{var t=window.document.getElementsByTagName(\"base\");t.length>0&&(e=t[0].href)}var o=e.match(new RegExp(\".*://[^#]*/\"));return o?o[0]:\"\"},webOS.platformBack=function(){return window.PalmSystem&&PalmSystem.platformBack?PalmSystem.platformBack():void 0}}(),function(){webOS.deviceInfo=function(e){if(this.device)e(this.device);else{this.device={};try{var t=JSON.parse(PalmSystem.deviceInfo);this.device.modelName=t.modelName,this.device.modelNameAscii=t.modelNameAscii,this.device.version=t.platformVersion,this.device.versionMajor=t.platformVersionMajor,this.device.versionMinor=t.platformVersionMinor,this.device.versionDot=t.platformVersionDot,this.device.sdkVersion=t.platformVersion,this.device.screenWidth=t.screenWidth,this.device.screenHeight=t.screenHeight}catch(o){this.device.modelName=this.device.modelNameAscii=\"webOS Device\"}this.device.screenHeight=this.device.screenHeight||screen.height,this.device.screenWidth=this.device.screenWidth||screen.width;var i=this;webOS.platform.tv?webOS.service.request(\"luna://com.webos.service.tv.systemproperty\",{method:\"getSystemInfo\",parameters:{keys:[\"firmwareVersion\",\"modelName\",\"sdkVersion\",\"UHD\"]},onSuccess:function(t){if(i.device.modelName=t.modelName||i.device.modelName,i.device.modelNameAscii=t.modelName||i.device.modelNameAscii,i.device.sdkVersion=t.sdkVersion||i.device.sdkVersion,i.device.uhd=\"true\"===t.UHD,t.firmwareVersion&&\"0.0.0\"!==t.firmwareVersion||(t.firmwareVersion=t.sdkVersion),t.firmwareVersion){i.device.version=t.firmwareVersion;for(var o=i.device.version.split(\".\"),s=[\"versionMajor\",\"versionMinor\",\"versionDot\"],n=0;n<s.length;n++)try{i.device[s[n]]=parseInt(o[n])}catch(r){i.device[s[n]]=o[n]}}e(i.device)},onFailure:function(t){e(i.device)}}):(webOS.platform.watch&&(this.device.modelName=this.device.modelNameAscii=\"webOS Watch\"),e(this.device))}}}(),function(){webOS.feedback={play:function(e){if(webOS&&webOS.platform&&webOS.platform.watch){var t={name:e||\"touch\",sink:\"pfeedback\"};if(!window.PalmServiceBridge)return;webOS.service.request(\"luna://com.palm.audio/systemsounds\",{method:\"playFeedback\",parameters:t,subscribe:!1,resubscribe:!1})}}}}(),function(){webOS.keyboard={isShowing:function(){return!!(PalmSystem&&PalmSystem.isKeyboardVisible&&PalmSystem.isKeyboardVisible())}}}(),function(){webOS.notification={showToast:function(e,t){var o=e.message||\"\",i=e.icon||\"\",s=webOS.fetchAppId(),n=e.appId||s,r=e.appParams||{},a=e.target,c=e.noaction,l=e.stale||!1,m=e.soundClass||\"\",u=e.soundFile||\"\",d=e.soundDurationMs||\"\";if(webOS.platform.legacy||webOS.platform.open){var f=(e.response||{banner:!0},PalmSystem.addBannerMessage(o,JSON.stringify(r),i,m,u,d));t&&t(f)}else{o.length>60&&console.warn(\"Toast notification message is longer than recommended. May not display as intended\");var b={sourceId:s,message:o,stale:l,noaction:c};i&&i.length>0&&(b.iconUrl=i),c||(a?b.onclick={target:a}:b.onclick={appId:n,params:r}),this.showToastRequest=webOS.service.request(\"palm://com.webos.notification\",{method:\"createToast\",parameters:b,onSuccess:function(e){t&&t(e.toastId)},onFailure:function(e){console.error(\"Failed to create toast: \"+JSON.stringify(e)),t&&t()}})}},removeToast:function(e){if(webOS.platform.legacy||webOS.platform.open)try{PalmSystem.removeBannerMessage(e)}catch(t){console.warn(t),PalmSystem.clearBannerMessage()}else this.removeToastRequest=webOS.service.request(\"palm://com.webos.notification\",{method:\"closeToast\",parameters:{toastId:e}})},supportsDashboard:function(){return webOS.platform.legacy||webOS.platform.open},showDashboard:function(e,t){if(webOS.platform.legacy||webOS.platform.open){var o=window.open(e,\"_blank\",'attributes={\"window\":\"dashboard\"}');return t&&o.document.write(t),o.PalmSystem&&o.PalmSystem.stageReady(),o}console.warn(\"Dashboards are not supported on this version of webOS.\")}}}(),function(){var e=0,t=1,o=2,i=3,s=4,n=5,r=6,a=7,c=function(e){return!!e&&\"object\"==typeof e&&\"[object Array]\"!==Object.prototype.toString.call(e)},l=function(e,t,o,s){window.PalmSystem&&(o&&!c(o)&&(e=i,o={msgid:t},t=\"MISMATCHED_FMT\",s=null,console.warn(\"webOSLog called with invalid format: keyVals must be an object\")),t||e==a||console.warn(\"webOSLog called with invalid format: messageId was empty\"),o&&(o=JSON.stringify(o)),window.PalmSystem.PmLogString?e==a?window.PalmSystem.PmLogString(e,null,null,s):window.PalmSystem.PmLogString(e,t,o,s):console.error(\"Unable to send log; PmLogString not found in this version of PalmSystem\"))};webOS.emergency=function(t,o,i){l(e,t,o,i)},webOS.alert=function(e,o,i){l(t,e,o,i)},webOS.critical=function(e,t,i){l(o,e,t,i)},webOS.error=function(e,t,o){l(i,e,t,o)},webOS.warning=function(e,t,o){l(s,e,t,o)},webOS.notice=function(e,t,o){l(n,e,t,o)},webOS.info=function(e,t,o){l(r,e,t,o)},webOS.debug=function(e){l(a,\"\",\"\",e)}}(),function(){function e(e,t){this.uri=e,t=t||{},t.method&&(\"/\"!=this.uri.charAt(this.uri.length-1)&&(this.uri+=\"/\"),this.uri+=t.method),\"function\"==typeof t.onSuccess&&(this.onSuccess=t.onSuccess),\"function\"==typeof t.onFailure&&(this.onFailure=t.onFailure),\"function\"==typeof t.onComplete&&(this.onComplete=t.onComplete),this.params=\"object\"==typeof t.parameters?t.parameters:{},this.subscribe=t.subscribe||!1,this.subscribe&&(this.params.subscribe=t.subscribe),this.params.subscribe&&(this.subscribe=this.params.subscribe),this.resubscribe=t.resubscribe||!1,this.send()}e.prototype.send=function(){if(!window.PalmServiceBridge)return this.onFailure&&this.onFailure({errorCode:-1,errorText:\"PalmServiceBridge not found.\",returnValue:!1}),this.onComplete&&this.onComplete({errorCode:-1,errorText:\"PalmServiceBridge not found.\",returnValue:!1}),void console.error(\"PalmServiceBridge not found.\");this.bridge=new PalmServiceBridge;var t=this;this.bridge.onservicecallback=this.callback=function(o){var i;if(!t.cancelled){try{i=JSON.parse(o)}catch(s){i={errorCode:-1,errorText:o,returnValue:!1}}(i.errorCode||0==i.returnValue)&&t.onFailure?(t.onFailure(i),t.resubscribe&&t.subscribe&&(t.delayID=setTimeout(function(){t.send()},e.resubscribeDelay))):t.onSuccess&&t.onSuccess(i),t.onComplete&&t.onComplete(i),t.subscribe||t.cancel()}},this.bridge.call(this.uri,JSON.stringify(this.params))},e.prototype.cancel=function(){this.cancelled=!0,this.resubscribeJob&&clearTimeout(this.delayID),this.bridge&&(this.bridge.cancel(),this.bridge=void 0)},e.prototype.toString=function(){return\"[LS2Request]\"},e.resubscribeDelay=1e4,webOS.service={request:function(t,o){return new e(t,o)},systemPrefix:\"com.webos.\",protocol:\"luna://\"},navigator.service={request:webOS.service.request},navigator.service.Request=navigator.service.request}(),function(){webOS.libVersion=\"0.1.0\"}(),function(){webOS.voicereadout={readAlert:function(e){if(webOS&&webOS.platform&&webOS.platform.watch){var t,o,i=function(e){webOS.service.request(\"luna://com.webos.settingsservice\",{method:\"getSystemSettings\",parameters:{category:\"VoiceReadOut\"},onSuccess:function(t){t&&t.settings.talkbackEnable&&e()},onFailure:function(e){console.error(\"Failed to get system VoiceReadOut settings: \"+JSON.stringify(e))}})},s=function(e){webOS.service.request(\"luna://com.webos.settingsservice\",{method:\"getSystemSettings\",parameters:{keys:[\"localeInfo\"]},onSuccess:function(o){t=o.settings.localeInfo.locales.TTS,e()},onFailure:function(e){console.error(\"Failed to get system localeInfo settings: \"+JSON.stringify(e))}})},n=function(e){webOS.service.request(\"luna://com.webos.settingsservice\",{method:\"getSystemSettings\",parameters:{category:\"option\",key:\"ttsSpeechRate\"},onSuccess:function(t){o=Number(t.settings.ttsSpeechRate),e()},onFailure:function(e){console.error(\"Failed to get system speechRate settings: \"+JSON.stringify(e))}})},r=function(){webOS.service.request(\"luna://com.lge.service.tts\",{method:\"speak\",parameters:{locale:t,text:e,speechRate:o}})};i(function(){s(function(){n(r)})})}else if(webOS&&webOS.platform&&webOS.platform.tv){var a=function(e){webOS.service.request(\"luna://com.webos.settingsservice\",{method:\"getSystemSettings\",parameters:{keys:[\"audioGuidance\"],category:\"option\"},onSuccess:function(t){t&&\"on\"===t.settings.audioGuidance&&e()},onFailure:function(e){console.error(\"Failed to get system AudioGuidance settings: \"+JSON.stringify(e))}})},r=function(){webOS.service.request(\"luna://com.webos.service.tts\",{method:\"speak\",parameters:{text:e,clear:!0},onFailure:function(e){console.error(\"Failed to readAlertMessage: \"+JSON.stringify(e))}})};a(r)}else console.warn(\"Platform doesn't support TTS api.\")}}}();","/**\r\n* Contains the declaration for the {@link module:enyo-webos/MockRequest~MockRequest} kind.\r\n* @module enyo-webos/MockRequest\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tAjax = require('enyo/Ajax'),\r\n\tXhr = require('enyo/xhr');\r\n\r\n/**\r\n* An mock version of {@link module:enyo-webos/ServiceRequest~ServiceRequest}\r\n* designed for webOS service request simulation.\r\n*\r\n* It will read mock results from a JSON file and return the results in a manner\r\n* similar to real service requests.\r\n*\r\n* For example, a call to service `palm://com.palm.systemservice/time` with method\r\n* `getSystemTime` will automatically try to read the file\r\n* `mock/com.palm.systemservice/time/getSystemTime.json`. Alternatively, the\r\n* [mockFile]{@link module:enyo-webos/MockRequest~MockRequest#mockFile} property\r\n* may be used to specify a specific JSON file to be read.\r\n*\r\n* @class MockRequest\r\n* @extends module:enyo/Ajax~Ajax\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo-webos/MockRequest~MockRequest.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.MockRequest',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Ajax,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmimeType: 'application/json',\r\n\r\n\t/**\r\n\t* @lends module:enyo-webos/MockRequest~MockRequest.prototype\r\n\t* @private\r\n\t*/\r\n\tpublished: {\r\n\t\t/**\r\n\t\t* The Palm service URI.  Starts with `palm://` and will be used to create\r\n\t\t* the autogenerated mock filepath directory.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tservice: '',\r\n\r\n\t\t/**\r\n\t\t* The service method to be called.  It will be used to create the\r\n\t\t* autogenerated mock filename (with '.json' appended)\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmethod: '',\r\n\r\n\t\t/**\r\n\t\t* Optionally specifies a JSON file to read for mock results, rather than the\r\n\t\t* specified service and method.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default `undefined`\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmockFile: undefined\r\n\t},\r\n\r\n\t/**\r\n\t* @public\r\n\t*/\r\n\tgo: function() {\r\n\t\tif(this.mockFile) {\r\n\t\t\tthis.url = this.mockFile;\r\n\t\t} else {\r\n\t\t\tthis.url = this.service;\r\n\t\t\tvar i = this.url.indexOf('://');\r\n\t\t\tif(i>-1) {\r\n\t\t\t\tthis.url = this.url.substring(i+3);\r\n\t\t\t}\r\n\t\t\tthis.url = 'mock/' + this.url;\r\n\t\t\tif(this.method && this.method.length>0) {\r\n\t\t\t\tif(this.url.charAt(this.url.length-1) != '/') {\r\n\t\t\t\t\tthis.url += '/';\r\n\t\t\t\t}\r\n\t\t\t\tthis.url += this.method;\r\n\t\t\t}\r\n\t\t\tthis.url += '.json';\r\n\t\t}\r\n\t\tvar serviceMethod = this.method;\r\n\t\tthis.method = 'GET';\r\n\t\tvar request = this.inherited(arguments);\r\n\t\tthis.method = serviceMethod;\r\n\t\treturn request;\r\n\t},\r\n\r\n\t/**\r\n\t* @public\r\n\t*/\r\n\tcancel: function() {\r\n\t\tif(this.xhr) {\r\n\t\t\tXhr.cancel(this.xhr);\r\n\t\t\tthis.endTimer();\r\n\t\t\tthis.xhr = null;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trespond: function(value) {\r\n\t\tif(value.errorCode || value.returnValue === false) {\r\n\t\t\tthis.fail(value);\r\n\t\t} else {\r\n\t\t\tthis.inherited(arguments);\r\n\t\t}\r\n\t}\r\n});","/**\r\n* Contains the declaration for the {@link module:enyo-webos/Events} module.\r\n* @module enyo-webos/Events\r\n*/\r\n\r\nvar\r\n\tutils = require('enyo/utils'),\r\n\tplatform = require('enyo/platform');\r\n\r\nvar\r\n\tSignals = require('enyo/Signals');\r\n\r\n/**\r\n* Events are exposed through the {@link module:enyo/Signals~Signals} kind by\r\n* adding callback handlers.\r\n*\r\n* ```javascript\r\n* var\r\n* \tkind = require('enyo/kind'),\r\n* \tSignals = require('enyo/Signals');\r\n*\r\n* module.exports = kind({\r\n* \tname: 'App',\r\n* \tcomponents: [\r\n* \t\t{kind: Signals, onwebOSRelaunch: 'relaunch'},\r\n* \t\t// ...\r\n* \t],\r\n* \trelaunch: function(inSender, inEvent) {\r\n* \t\t// Launch parameters json can be found within inEvent.detail\r\n* \t}\r\n* });\r\n* ```\r\n*/\r\n\r\n/**\r\n* @event module:enyo-webos/Events#onwebOSLaunch\r\n* @see external:webOS-Event\r\n* @public\r\n*/\r\n\r\n/**\r\n* @event module:enyo-webos/Events#onwebOSRelaunch\r\n* @see external:webOS-Event\r\n* @public\r\n*/\r\n\r\n/**\r\n* @event module:enyo-webos/Events#onwebOSLocaleChange\r\n* @see external:webOS-Event\r\n* @public\r\n*/\r\n\r\n/**\r\n* Listens for webOS-specific events\r\n*/\r\nif (platform.webos || window.PalmSystem) {\r\n\tvar wev = [\r\n\t\t'webOSLaunch',\r\n\t\t'webOSRelaunch',\r\n\t\t'webOSLocaleChange',\r\n\t\t'webOSThemeChange'\r\n\t];\r\n\tfor (var i=0, e; (e=wev[i]); i++) {\r\n\t\tdocument.addEventListener(e, utils.bind(Signals, 'send', 'on' + e), false);\r\n\t}\r\n}","/**\r\n* Loads the application's appInfo.json file and configures Enyo\r\n* \r\n* @module enyo-webos/AppInfo\r\n* @private\r\n*/\r\n\r\nvar\r\n\tEnyoHistory = require('enyo/History');\r\n\r\nglobal.webOS.fetchAppInfo(function (appInfo) {\r\n\tif (appInfo) {\r\n\t\tEnyoHistory.set('updateHistory', !appInfo.disableBackHistoryAPI);\r\n\t}\r\n});","var\r\n\tplatform = require('enyo/platform'),\r\n\tlogger = require('enyo/logger'),\r\n\tutils = require('enyo/utils'),\r\n\tdispatcher = require('enyo/dispatcher');\r\n\r\nvar\r\n\tSignals = require('enyo/Signals');\r\n\r\nrequire('./src/Events');\r\nrequire('./webOS/webOS');\r\nrequire('./src/AppInfo');\r\nif (!global.cordova) {\r\n\t// if Cordova not used, add signal generation for the \"menubutton\" event used\r\n\t// in webOS.js for legacy webOS and Open webOS for the appmenu\r\n\tdocument.addEventListener('menubutton', utils.bind(Signals, 'send', 'onmenubutton'), false);\r\n}\r\ndispatcher.listen(document, 'webOSMouse');\r\ndispatcher.listen(document, 'keyboardStateChange');\r\n\r\nexports.version = '2.7.0';\r\n","require('enyo-webos');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo-webos/ServiceRequest~ServiceRequest} kind.\r\n* @module enyo-webos/ServiceRequest\r\n*/\r\n\r\nvar\r\n\tkind = require('enyo/kind'),\r\n\tutils = require('enyo/utils');\r\n\r\nvar\r\n\tAsync = require('enyo/Async');\r\n\r\n/**\r\n* An extension of the {@link module:enyo/Async~Async} object designed for webOS\r\n* service requests.\r\n*\r\n* @class ServiceRequest\r\n* @extends module:enyo/Async~Async\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo-webos/ServiceRequest~ServiceRequest.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.ServiceRequest',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Async,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* The Luna service URI.  Starts with `luna://`.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tservice: '',\r\n\r\n\t\t/**\r\n\t\t* The service method to call.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmethod: '',\r\n\r\n\t\t/**\r\n\t\t* Whether or not to subscribe to the service.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsubscribe: false,\r\n\r\n\t\t/**\r\n\t\t* Whether or not the request should resubscribe when an error is returned.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tresubscribe: false\r\n\t},\r\n\r\n\t/**\r\n\t* Executes the service request with an optional object containing parameters\r\n\t* to be sent.\r\n\t*\r\n\t* @param {Object} [params]\r\n\t* @return {Object}\r\n\t* @public\r\n\t*/\r\n\tgo: function(params) {\r\n\t\tif(!window.PalmServiceBridge) {\r\n\t\t\tthis.fail({\r\n\t\t\t\terrorCode: -1,\r\n\t\t\t\terrorText: 'Invalid device for Palm services. PalmServiceBridge not found.'\r\n\t\t\t});\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tthis.startTimer();\r\n\t\tthis.params = params || {};\r\n\t\tthis.request = navigator.service.request(this.service, {\r\n\t\t\tmethod: this.method,\r\n\t\t\tparameters: this.params,\r\n\t\t\tsubscribe: this.subscribe,\r\n\t\t\tresubscribe: this.resubscribe,\r\n\t\t\tonSuccess: utils.bind(this, this.serviceSuccess),\r\n\t\t\tonFailure: utils.bind(this, this.serviceFailure)\r\n\t\t});\r\n\t\treturn this.request;\r\n\t},\r\n\r\n\t/**\r\n\t* Cancels the request/subscription.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tcancel: function() {\r\n\t\tif(this.request) {\r\n\t\t\tthis.request.cancel();\r\n\t\t\tthis.request = undefined;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tserviceSuccess: function(response) {\r\n\t\tvar successCallback;\r\n\t\tif(this.responders.length>0) {\r\n\t\t\tsuccessCallback = this.responders[0];\r\n\t\t}\r\n\t\tthis.respond(response);\r\n\t\tif(this.subscribe && successCallback) {\r\n\t\t\tthis.response(successCallback);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tserviceFailure: function(error) {\r\n\t\tvar failureCallback;\r\n\t\tif(this.errorHandlers.length>0) {\r\n\t\t\tfailureCallback = this.errorHandlers[0];\r\n\t\t}\r\n\t\tthis.fail(error);\r\n\t\tif(this.resubscribe && this.subscribe) {\r\n\t\t\tif(failureCallback) {\r\n\t\t\t\tthis.error(failureCallback);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttimeoutComplete: function () {\r\n\t\tthis.timedout = true;\r\n\t\tthis.fail({\r\n\t\t\terrorCode: -2,\r\n\t\t\terrorText: \"Service request timeout\"\r\n\t\t});\r\n\t\tthis.cancel();\r\n\t}\r\n});","/**\r\n* Contains the declaration for the {@link module:enyo-webos/LunaService~LunaService} kind.\r\n* @module enyo-webos/LunaService\r\n*/\r\n\r\nvar\r\n\tutils = require('enyo/utils'),\r\n\tkind = require('enyo/kind');\r\n\r\nvar\r\n\tComponent = require('enyo/Component'),\r\n\tMockRequest = require('./MockRequest'),\r\n\tServiceRequest = require('./ServiceRequest');\r\n\r\n/**\r\n* Fires when a response is received. Event data contains the returned response. The `originator`\r\n* property will contain the calling {@link module:enyo-webos/ServiceRequest~ServiceRequest}.\r\n*\r\n* @event module:enyo-webos/LunaService~LunaService#onResponse\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when an error is received. Event data contains the error data. The `originator` property\r\n* will contain the calling {@link module:enyo-webos/ServiceRequest~ServiceRequest}.\r\n*\r\n* @event module:enyo-webos/LunaService~LunaService#onError\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when a service request is complete (regardless of success or failure). Event data\r\n* contains the response data and/or error data. The `originator` property will contain the\r\n* calling {@link module:enyo-webos/ServiceRequest~ServiceRequest}.\r\n*\r\n* @event module:enyo-webos/LunaService~LunaService#onComplete\r\n* @type {Object}\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:enyo-webos/LunaService~LunaService} is a component similar to\r\n* {@link module:enyo/WebService~WebService}, but for LS2 service requests.\r\n*\r\n* Internally, it generates a new {@link module:enyo-webos/ServiceRequest~ServiceRequest}\r\n* for each `[send()]{@link module:enyo-webos/LunaService~LunaService#send}` call,\r\n* keeping track of each request made and sending out resulting events as they\r\n* occur. This allows multiple concurrent request calls to be sent without any\r\n* potential overlap or garbage collection issues.\r\n*\r\n* @class LunaService\r\n* @extends module:enyo/Component~Component\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo-webos/LunaService~LunaService.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.LunaService',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Component,\r\n\r\n\t/**\r\n\t* @lends module:enyo-webos/LunaService~LunaService.prototype\r\n\t* @private\r\n\t*/\r\n\tpublished: {\r\n\r\n\t\t/**\r\n\t\t* The Luna service URI.  Starts with `luna://`.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tservice: '',\r\n\r\n\t\t/**\r\n\t\t* The service method to call.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmethod: '',\r\n\r\n\t\t/**\r\n\t\t* Whether or not to subscribe to the service.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsubscribe: false,\r\n\r\n\t\t/**\r\n\t\t* Whether or not the request should resubscribe when an error is returned.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tresubscribe: false,\r\n\t\t\r\n\t\t/**\r\n\t\t* The number of milliseconds to wait before failing with a _timeout_ error. This only\r\n\t\t* takes effect for non-zero values.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttimeout: 0\r\n\t},\r\n\r\n\t/**\r\n\t* If true, {@link module:enyo-webos/MockRequest~MockRequest} will be used in\r\n\t* place of {@link module:enyo-webos/ServiceRequest~ServiceRequest}.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tmock: false,\r\n\r\n\t/**\r\n\t* Optionally specifies a JSON file to read for mock results, rather than\r\n\t* autogenerating the filepath.\r\n\t*\r\n\t* @type {String}\r\n\t* @default `undefined`\r\n\t* @public\r\n\t*/\r\n\tmockFile: undefined,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonResponse: '',\r\n\t\tonError: '',\r\n\t\tonComplete: ''\r\n\t},\r\n\r\n\t/**\r\n\t* Needed for referencing to `enyo-webos/PalmService` for compatability.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tnoDefer: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tthis.inherited(arguments);\r\n\t\tthis.activeRequests = [];\r\n\t\tthis.activeSubscriptionRequests = [];\r\n\t},\r\n\r\n\t/**\r\n\t* Sends a webOS service request with the passed-in parameters, returning the associated\r\n\t* {@link module:enyo-webos/ServiceRequest~ServiceRequest} instance.\r\n\t*\r\n\t* @param {Object} params - Hash of parameters for the request\r\n\t* @return {module:enyo-webos/ServiceRequest~ServiceRequest}\r\n\t* @public\r\n\t*/\r\n\tsend: function (params) {\r\n\t\tparams = params || {};\r\n\t\tvar request = this.createComponent({\r\n\t\t\tkind: ((this.mock) ? MockRequest : ServiceRequest),\r\n\t\t\tservice: this.service,\r\n\t\t\tmethod: this.method,\r\n\t\t\tsubscribe: this.subscribe,\r\n\t\t\tresubscribe: this.resubscribe,\r\n\t\t\ttimeout: this.timeout\r\n\t\t});\r\n\t\tif(this.mock && this.mockFile) {\r\n\t\t\trequest.mockFile = this.mockFile;\r\n\t\t}\r\n\t\trequest.originalCancel = request.cancel;\r\n\t\trequest.cancel = utils.bind(this, 'cancel', request);\r\n\t\trequest.response(this, 'requestSuccess');\r\n\t\trequest.error(this, 'requestFailure');\r\n\t\tif(this.subscribe && !this.mock) {\r\n\t\t\tthis.activeSubscriptionRequests.push(request);\r\n\t\t} else {\r\n\t\t\tthis.activeRequests.push(request);\r\n\t\t}\r\n\t\trequest.go(params);\r\n\t\treturn request;\r\n\t},\r\n\r\n\t/**\r\n\t* Cancels the specified request.  The equivalent of\r\n\t* `[request.cancel()]{@link module:enyo-webos/ServiceRequest~ServiceRequest#cancel}`.\r\n\t*\r\n\t* @param {module:enyo-webos/ServiceRequest~ServiceRequest} request - The request to cancel\r\n\t* @public\r\n\t*/\r\n\tcancel: function (request) {\r\n\t\tthis.removeRequest(request);\r\n\t\trequest.originalCancel();\r\n\t},\r\n\r\n\t/**\r\n\t* Removes the specified request from the active request arrays.\r\n\t*\r\n\t* @param {module:enyo-webos/ServiceRequest~ServiceRequest} request - The request to remove\r\n\t* @private\r\n\t*/\r\n\tremoveRequest: function (request) {\r\n\t\tvar i = -1;\r\n\t\ti = this.activeRequests.indexOf(request);\r\n\t\tif (i !== -1) {\r\n\t\t\tthis.activeRequests.splice(i, 1);\r\n\t\t} else {\r\n\t\t\ti = this.activeSubscriptionRequests.indexOf(request);\r\n\t\t\tif (i !== -1) {\r\n\t\t\t\tthis.activeSubscriptionRequests.splice(i, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @fires {@link module:enyo-webos/LunaService~LunaService#onResponse}\r\n\t* @private\r\n\t*/\r\n\trequestSuccess: function (request, response) {\r\n\t\tresponse.originator = request;\r\n\t\tthis.doResponse(response);\r\n\t\tthis.requestComplete(request, response);\r\n\t},\r\n\r\n\t/**\r\n\t* @fires {@link module:enyo-webos/LunaService~LunaService#onError}\r\n\t* @private\r\n\t*/\r\n\trequestFailure: function (request, error) {\r\n\t\terror.originator = request;\r\n\t\tthis.doError(error);\r\n\t\tthis.requestComplete(request, error);\r\n\t},\r\n\r\n\t/**\r\n\t* @fires {@link module:enyo-webos/LunaService~LunaService#onComplete}\r\n\t* @private\r\n\t*/\r\n\trequestComplete: function (request, data) {\r\n\t\tvar i = -1;\r\n\t\ti = this.activeRequests.indexOf(request);\r\n\t\tif (i !== -1) {\r\n\t\t\tthis.activeRequests.splice(i, 1);\r\n\t\t}\r\n\t\tthis.doComplete(data);\r\n\t},\r\n\r\n\t/**\r\n\t* Cancels any active requests.\r\n\t*\r\n\t* @see {@link module:enyo/CoreObject~Object#destroy}\r\n\t* @private\r\n\t*/\r\n\tdestroy: function () {\r\n\t\tvar i;\r\n\t\tfor(i=0; i<this.activeRequests.length; i++) {\r\n\t\t\tthis.activeRequests[i].originalCancel();\r\n\t\t}\r\n\t\tdelete this.activeRequests;\r\n\r\n\t\tfor(i=0; i<this.activeSubscriptionRequests.length; i++) {\r\n\t\t\tthis.activeSubscriptionRequests[i].originalCancel();\r\n\t\t}\r\n\t\tdelete this.activeSubscriptionRequests;\r\n\t\tthis.inherited(arguments);\r\n\t}\r\n});"]}